/**
 * Généré par : ITGCE\S9635309
 * Changeset TFS : undefined
 * Etiquette TFS : undefined
 * Déclenchement : undefined
 */
var Portefeuille;!function(e){"use strict";e.app=angular.module("portefeuille",["ngRoute","myway.ui","ui.bootstrap","ngAnimate","moduleAgent","myway.composantAide","myway.comInterdomaine","myway.comEds","libPortail","PdtEntreprise"]);var t={initialisationApplication:["InitialisationApplicationService",function(e){return e.initialisation()}]};e.app.config(["$routeProvider",function(i){i.when(e.Constantes.Url.CLIENTS,{controller:"ClientsControleur",templateUrl:"vues/clients-vue.html",controllerAs:"clientsCtrl",resolve:t}),i.when(e.Constantes.Url.PORTEFEUILLE,{controller:"PortefeuilleControleur",templateUrl:"vues/portefeuille-vue.html",controllerAs:"portefeuilleCtrl",resolve:t}),i.when(e.Constantes.Url.SELECTION_INDICATEURS,{controller:"SelectionIndicateursControleur",templateUrl:"vues/selection-indicateurs-vue.html",controllerAs:"selectionIndicateursCtrl",resolve:t}),i.when(e.Constantes.Url.BILAN_REVUE,{controller:"BilanRevueControleur",templateUrl:"vues/bilan-revue-vue.html",controllerAs:"bilanRevueCtrl",resolve:t}),i.when(e.Constantes.Url.SAISIE_REVUE,{controller:"SaisieRevueControleur",templateUrl:"vues/saisie-revue-vue.html",controllerAs:"saisieRevueCtrl",resolve:t}),i.when(e.Constantes.Url.BILAN_REVUES_PORTEFEUILLE,{controller:"BilanRevuesPortefeuilleControleur",templateUrl:"vues/bilan-revues-portefeuille-vue.html",controllerAs:"bilanRevuesPortefeuilleCtrl",resolve:t}),i.otherwise({templateUrl:"vues/page-non-trouvee.html",resolve:t})}]),MyWay.Services.AppServiceParameters.Instance().PortalDomain="##DOMAINE-PORTAIL##"}(Portefeuille||(Portefeuille={}));var Portefeuille;!function(e){var t;!function(e){"use strict";var t;!function(e){!function(e){e[e.VUE_RELATION_ECONOMIQUE="VRE"]="VUE_RELATION_ECONOMIQUE",e[e.VUE_CLIENTS="VC"]="VUE_CLIENTS"}(e.TYPE_VUE||(e.TYPE_VUE={}));e.TYPE_VUE;!function(e){e[e.SANS=0]="SANS",e[e.CLIENTS=1]="CLIENTS",e[e.PROSPECTS=2]="PROSPECTS",e[e.TOUT=3]="TOUT"}(e.TYPE_FORCAGE||(e.TYPE_FORCAGE={}));e.TYPE_FORCAGE}(t=e.PageClients||(e.PageClients={}));var i;!function(e){!function(e){e[e.AGENDA="rouge"]="AGENDA",e[e.PNB="orange"]="PNB",e[e.CA="vert"]="CA",e[e.EQUIPEMENTS="bleu"]="EQUIPEMENTS",e[e.COLLECT="noir"]="COLLECT",e[e.BALE2="jaune"]="BALE2"}(e.COULEUR||(e.COULEUR={}));e.COULEUR}(i=e.PfTuileIndicateur||(e.PfTuileIndicateur={}));var n;!function(e){!function(e){e[e.TOUS="00"]="TOUS",e[e.CLIENT="01"]="CLIENT",e[e.PROSPECTTIERS="02"]="PROSPECTTIERS"}(e.FILTRECLIENTPROSPECT||(e.FILTRECLIENTPROSPECT={}));e.FILTRECLIENTPROSPECT}(n=e.FiltrageRelationCommerciale||(e.FiltrageRelationCommerciale={}));var r;!function(e){!function(e){e[e.DATE="Date"]="DATE",e[e.NOMBRE="Nombre"]="NOMBRE",e[e.MONTANT="Montant"]="MONTANT",e[e.POURCENT="Pourcent"]="POURCENT",e[e.TEXTE="Texte"]="TEXTE",e[e.BEGACLI="Begacli"]="BEGACLI"}(e.TYPE||(e.TYPE={}));e.TYPE;!function(e){e[e.CLIENTPROSPECT="codeTypePersonne"]="CLIENTPROSPECT",e[e.ACTIF="actif"]="ACTIF",e[e.EQUIPE="equipe"]="EQUIPE",e[e.LEADER="leader"]="LEADER",e[e.CA_N="chiffreAffaireN"]="CA_N",e[e.CA_N_MOINS_1="chiffreAffaireN-1"]="CA_N_MOINS_1",e[e.MARCHE="libelleCourtSegmentMarche"]="MARCHE",e[e.POTENTIEL_PROSPECT="potentielProspect"]="POTENTIEL_PROSPECT",e[e.SEG_RELATIONNELLE="libelleLongSegmentationRel"]="SEG_RELATIONNELLE",e[e.SEG_RELATIONNELLE_GROUPE="SEG_REL_GRP"]="SEG_RELATIONNELLE_GROUPE",e[e.DATE_DERNIER_ENTRETIEN="DateDernierEntretien"]="DATE_DERNIER_ENTRETIEN",e[e.DATE_DERNIER_RDV="DateDernierRdv"]="DATE_DERNIER_RDV",e[e.NB_RDV_ANNEE_EN_COURS="NbRdvAnneeEncours"]="NB_RDV_ANNEE_EN_COURS",e[e.NB_RDV_12_MOIS_GLISSANTS="NbRdvSur12moisGliss"]="NB_RDV_12_MOIS_GLISSANTS",e[e.DATE_PROCHAIN_RDV="DateProchainRdv"]="DATE_PROCHAIN_RDV",e[e.NOTE_BALE2="noteBale2"]="NOTE_BALE2",e[e.PART_ENGAG="PART_ENGAG"]="PART_ENGAG",e[e.PROCHAINE_REVISION="revision"]="PROCHAINE_REVISION",e[e.PNB_3112="pnb3112"]="PNB_3112",e[e.PNB_N="pnbN"]="PNB_N",e[e.PNB_N_MOINS_1="pnbN-1"]="PNB_N_MOINS_1",e[e.REV_DATE_DERNIERE_REVUE="DateDerniereRevue"]="REV_DATE_DERNIERE_REVUE",e[e.REV_NB_SSFAMILLES_PROPOSE="NbSousFamilleAProposer"]="REV_NB_SSFAMILLES_PROPOSE",e[e.REV_VALIDEE_PAR="NomAgentRevue"]="REV_VALIDEE_PAR",e[e.FLUX_CREDITEURS_N="CREDITEUR_N"]="FLUX_CREDITEURS_N",e[e.FLUX_CREDITEURS_N_MOINS_1="CREDITEUR_N-1"]="FLUX_CREDITEURS_N_MOINS_1",e[e.FLUX_DEBITEURS_N="DEBITEUR_N"]="FLUX_DEBITEURS_N",e[e.FLUX_DEBITEURS_N_MOINS_1="DEBITEUR_N-1"]="FLUX_DEBITEURS_N_MOINS_1",e[e.NB_AFFAIRES_EN_COURS="AFF_EC"]="NB_AFFAIRES_EN_COURS",e[e.NB_PROPOSITIONS_EN_COURS="PROP_EC"]="NB_PROPOSITIONS_EN_COURS",e[e.NB_APPETENCES="APP_PROD"]="NB_APPETENCES",e[e.SCORE_ACTIVATION="SCORE_ACTI"]="SCORE_ACTIVATION",e[e.SCORE_DEFAILLANCE="SCORE_DEFA"]="SCORE_DEFAILLANCE",e[e.SCORE_APPETENCE="SCORE_APPE"]="SCORE_APPETENCE",e[e.TOP_CC="TOP_CC"]="TOP_CC",e[e.PART_FLUX_CONFIES_CRED="PART_FLUX_CONFIES_CRED"]="PART_FLUX_CONFIES_CRED",e[e.PART_FLUX_CONFIES_DEB="PART_FLUX_CONFIES_DEB"]="PART_FLUX_CONFIES_DEB",e[e.PREMIER_EQUIPEMENT="PREMIER_EQUIPEMENT_INDIC"]="PREMIER_EQUIPEMENT",e[e.PREMIER_EQUIPEMENT_TAG="PREMIER_EQUIPEMENT"]="PREMIER_EQUIPEMENT_TAG",e[e.PREMIER_EQUIPEMENT_TEXTE="PREMIER_EQUIPEMENT_TEXTE"]="PREMIER_EQUIPEMENT_TEXTE",e[e.OBJECTIF_FLUX="OBJECTIF_FLUX"]="OBJECTIF_FLUX",e[e.ENCOURS_BDF="ENCOURS_BDF"]="ENCOURS_BDF",e[e.BEGACLI="BEGACLI"]="BEGACLI"}(e.CODE||(e.CODE={}));e.CODE;!function(e){e[e.CLIENTPROSPECT="A"]="CLIENTPROSPECT",e[e.ACTIF="B"]="ACTIF",e[e.LEADER="ZE"]="LEADER",e[e.CA_N="C"]="CA_N",e[e.CA_N_MOINS_1="D"]="CA_N_MOINS_1",e[e.MARCHE="E"]="MARCHE",e[e.POTENTIEL_PROSPECT="Z"]="POTENTIEL_PROSPECT",e[e.SEG_RELATIONNELLE="F"]="SEG_RELATIONNELLE",e[e.SEG_RELATIONNELLE_GROUPE="ZA"]="SEG_RELATIONNELLE_GROUPE",e[e.DATE_DERNIER_ENTRETIEN="G"]="DATE_DERNIER_ENTRETIEN",e[e.DATE_DERNIER_RDV="H"]="DATE_DERNIER_RDV",e[e.NB_RDV_ANNEE_EN_COURS="J"]="NB_RDV_ANNEE_EN_COURS",e[e.NB_RDV_12_MOIS_GLISSANTS="K"]="NB_RDV_12_MOIS_GLISSANTS",e[e.DATE_PROCHAIN_RDV="I"]="DATE_PROCHAIN_RDV",e[e.NOTE_BALE2="M"]="NOTE_BALE2",e[e.PART_ENGAG="ZD"]="PART_ENGAG",e[e.PROCHAINE_REVISION="L"]="PROCHAINE_REVISION",e[e.PNB_N="N"]="PNB_N",e[e.PNB_N_MOINS_1="O"]="PNB_N_MOINS_1",e[e.REV_DATE_DERNIERE_REVUE="Q"]="REV_DATE_DERNIERE_REVUE",e[e.REV_NB_SSFAMILLES_PROPOSE="R"]="REV_NB_SSFAMILLES_PROPOSE",e[e.REV_VALIDEE_PAR="P"]="REV_VALIDEE_PAR",e[e.FLUX_CREDITEURS_N="S"]="FLUX_CREDITEURS_N",e[e.FLUX_CREDITEURS_N_MOINS_1="T"]="FLUX_CREDITEURS_N_MOINS_1",e[e.FLUX_DEBITEURS_N="U"]="FLUX_DEBITEURS_N",e[e.FLUX_DEBITEURS_N_MOINS_1="V"]="FLUX_DEBITEURS_N_MOINS_1",e[e.SANS_CONTRAT="W"]="SANS_CONTRAT",e[e.PNB_3112="X"]="PNB_3112",e[e.NB_AFFAIRES_EN_COURS="Y"]="NB_AFFAIRES_EN_COURS",e[e.NB_APPETENCES="ZC"]="NB_APPETENCES",e[e.NB_PROPOSITIONS_EN_COURS="ZB"]="NB_PROPOSITIONS_EN_COURS",e[e.SCORE_ACTIVATION="ZF"]="SCORE_ACTIVATION",e[e.SCORE_DEFAILLANCE="ZG"]="SCORE_DEFAILLANCE",e[e.SCORE_APPETENCE="ZH"]="SCORE_APPETENCE",e[e.TOP_CC="ZI"]="TOP_CC",e[e.PART_FLUX_CONFIES_CRED="ZJ"]="PART_FLUX_CONFIES_CRED",e[e.PART_FLUX_CONFIES_DEB="ZK"]="PART_FLUX_CONFIES_DEB",e[e.PREMIER_EQUIPEMENT="ZL"]="PREMIER_EQUIPEMENT",e[e.PREMIER_EQUIPEMENT_TAG="ZM"]="PREMIER_EQUIPEMENT_TAG",e[e.OBJECTIF_FLUX="ZN"]="OBJECTIF_FLUX",e[e.ENCOURS_BDF="ZO"]="ENCOURS_BDF",e[e.BEGACLI="ZP"]="BEGACLI",e[e.PREMIER_EQUIPEMENT_TEXTE="ZQ"]="PREMIER_EQUIPEMENT_TEXTE"}(e.CODEPREF||(e.CODEPREF={}));e.CODEPREF;!function(e){e[e.ACTIF="ACTIF"]="ACTIF",e[e.PERSONNE_PROTEGEE="PP"]="PERSONNE_PROTEGEE",e[e.CA_N="CA_N"]="CA_N",e[e.CA_N_MOINS_1="CA_N-1"]="CA_N_MOINS_1",e[e.PNB12MOISGLISSANT="PNB"]="PNB12MOISGLISSANT",e[e.PROCHAINE_REVISION="REVISION"]="PROCHAINE_REVISION",e[e.NOTE_BALE2="BAL2"]="NOTE_BALE2",e[e.PNB_3112="PNB_3112"]="PNB_3112",e[e.PNB_N="PNB_N"]="PNB_N",e[e.PNB_N_MOINS_1="PNB_N-1"]="PNB_N_MOINS_1",e[e.REVUE="REVUE"]="REVUE",e[e.FLUX="FLUX"]="FLUX",e[e.POT_PROS="POT_PROS"]="POT_PROS",e[e.AFFAIRES_EN_COURS="AFF_EC"]="AFFAIRES_EN_COURS",e[e.SEG_RELATIONNELLE_GROUPE="SEG_REL_GRP"]="SEG_RELATIONNELLE_GROUPE",e[e.PROPOSITIONS_EN_COURS="PROP_EC"]="PROPOSITIONS_EN_COURS",e[e.NB_APPETENCES="APP_PROD"]="NB_APPETENCES",e[e.PART_ENGAG="PART_ENGAG"]="PART_ENGAG",e[e.SCORE_ACTIVATION="SCORE_ACTI"]="SCORE_ACTIVATION",e[e.SCORE_DEFAILLANCE="SCORE_DEFA"]="SCORE_DEFAILLANCE",e[e.SCORE_APPETENCE="SCORE_APPE"]="SCORE_APPETENCE",e[e.TOP_CC="TOP_CC"]="TOP_CC",e[e.PART_FLUX_CONFIES_CRED="PART_FLUX_CONFIES_CRED"]="PART_FLUX_CONFIES_CRED",e[e.PART_FLUX_CONFIES_DEB="PART_FLUX_CONFIES_DEB"]="PART_FLUX_CONFIES_DEB",e[e.PREMIER_EQUIPEMENT="PREMIER_EQUIPEMENT_INDIC"]="PREMIER_EQUIPEMENT",e[e.PREMIER_EQUIPEMENT_TAG="PREMIER_EQUIPEMENT"]="PREMIER_EQUIPEMENT_TAG",e[e.PREMIER_EQUIPEMENT_TEXTE="PREMIER_EQUIPEMENT_TEXTE"]="PREMIER_EQUIPEMENT_TEXTE",e[e.OBJECTIF_FLUX="OBJECTIF_FLUX"]="OBJECTIF_FLUX",e[e.ENCOURS_BDF="ENCOURS_BDF"]="ENCOURS_BDF",e[e.BEGACLI="BEGACLI"]="BEGACLI"}(e.CODEREST||(e.CODEREST={}));e.CODEREST;!function(e){e[e.CLIENTPROSPECT="codeTypePersonneRel"]="CLIENTPROSPECT",e[e.DATE_DERNIER_ENTRETIEN="DateDernierEntretienRel"]="DATE_DERNIER_ENTRETIEN",e[e.DATE_DERNIER_RDV="DateDernierRdvRealiseRel"]="DATE_DERNIER_RDV",e[e.DATE_PROCHAIN_RDV="DateProchainRdvRel"]="DATE_PROCHAIN_RDV",e[e.NB_RDV_ANNEE_EN_COURS="NbRdvAnneeEncoursRel"]="NB_RDV_ANNEE_EN_COURS",e[e.NB_RDV_12_MOIS_GLISSANTS="NbRdvSur12moisGlissRel"]="NB_RDV_12_MOIS_GLISSANTS",e[e.REV_NB_SSFAMILLES_PROPOSE="NbSousFamilleAProposerRel"]="REV_NB_SSFAMILLES_PROPOSE",e[e.PNB_3112="pnb3112Rel"]="PNB_3112",e[e.PNB_N="pnbNRel"]="PNB_N",e[e.PNB_N_MOINS_1="pnbNMoins1Rel"]="PNB_N_MOINS_1",e[e.POTENTIEL_PROSPECT="potentielProspect"]="POTENTIEL_PROSPECT",e[e.NB_AFFAIRES_EN_COURS="NbAffairesEnCoursRel"]="NB_AFFAIRES_EN_COURS",e[e.SEG_RELATIONNELLE_GROUPE="SEG_REL_GRP"]="SEG_RELATIONNELLE_GROUPE",e[e.NB_PROPOSITIONS_EN_COURS="NbPropositionsEnCoursRel"]="NB_PROPOSITIONS_EN_COURS",e[e.NB_APPETENCES="APP_PROD_REL"]="NB_APPETENCES",e[e.PART_ENGAG="PART_ENGAG"]="PART_ENGAG",e[e.REV_DATE_DERNIERE_REVUE="DateDerniereRevueRel"]="REV_DATE_DERNIERE_REVUE",e[e.ENCOURS_BDF="ENCOURS_BDF"]="ENCOURS_BDF",e[e.BEGACLI="BEGACLI"]="BEGACLI"}(e.CODEREL||(e.CODEREL={}));e.CODEREL;!function(e){e[e.CLIENTPROSPECT="Client/Prospect"]="CLIENTPROSPECT",e[e.ACTIF="Top Actif"]="ACTIF",e[e.NON_EQUIPE="Avec contrat"]="NON_EQUIPE",e[e.CA_N="Dernier CA"]="CA_N",e[e.CA_N_MOINS_1="Avant dernier CA"]="CA_N_MOINS_1",e[e.LEADER="Leader"]="LEADER",e[e.MARCHE="Marché"]="MARCHE",e[e.POTENTIEL_PROSPECT="Potentiel prospect"]="POTENTIEL_PROSPECT",e[e.SEG_RELATIONNELLE="Seg. relationnelle client"]="SEG_RELATIONNELLE",e[e.SEG_RELATIONNELLE_GROUPE="Seg. relationnelle groupe"]="SEG_RELATIONNELLE_GROUPE",e[e.DATE_DERNIER_ENTRETIEN="Dernier CR"]="DATE_DERNIER_ENTRETIEN",e[e.DATE_DERNIER_RDV="Dernier RDV"]="DATE_DERNIER_RDV",e[e.NB_RDV_ANNEE_EN_COURS="Nb RDV "]="NB_RDV_ANNEE_EN_COURS",e[e.NB_RDV_12_MOIS_GLISSANTS="Nb RDV 12 derniers M"]="NB_RDV_12_MOIS_GLISSANTS",e[e.DATE_PROCHAIN_RDV="Prochain RDV"]="DATE_PROCHAIN_RDV",e[e.NOTE_BALE2="Note Bâle II"]="NOTE_BALE2",e[e.PART_ENGAG="Part en engagement"]="PART_ENGAG",e[e.PROCHAINE_REVISION="Prochaine révision"]="PROCHAINE_REVISION",e[e.PNB_3112="PNB 31/12/"]="PNB_3112",e[e.PNB_N="PNB N"]="PNB_N",e[e.PNB_N_MOINS_1="PNB N-1"]="PNB_N_MOINS_1",e[e.REV_DATE_DERNIERE_REVUE="Dernière revue"]="REV_DATE_DERNIERE_REVUE",e[e.REV_NB_SSFAMILLES_PROPOSE="Nb produits à proposer"]="REV_NB_SSFAMILLES_PROPOSE",e[e.REV_VALIDEE_PAR="Validé par"]="REV_VALIDEE_PAR",e[e.FLUX_CREDITEURS_N="Flux créditeurs N"]="FLUX_CREDITEURS_N",e[e.FLUX_CREDITEURS_N_MOINS_1="Flux créditeurs N-1"]="FLUX_CREDITEURS_N_MOINS_1",e[e.FLUX_DEBITEURS_N="Flux débiteurs N"]="FLUX_DEBITEURS_N",e[e.FLUX_DEBITEURS_N_MOINS_1="Flux débiteurs N-1"]="FLUX_DEBITEURS_N_MOINS_1",e[e.NB_AFFAIRES_EN_COURS="Nb affaires en cours"]="NB_AFFAIRES_EN_COURS",e[e.NB_APPETENCES="Nb appétences produits"]="NB_APPETENCES",e[e.NB_PROPOSITIONS_EN_COURS="Nb propositions en cours"]="NB_PROPOSITIONS_EN_COURS",e[e.SCORE_ACTIVATION="Score activation"]="SCORE_ACTIVATION",e[e.SCORE_DEFAILLANCE="Score défaillance"]="SCORE_DEFAILLANCE",e[e.SCORE_APPETENCE="Score appétence"]="SCORE_APPETENCE",e[e.TOP_CC="Top CC"]="TOP_CC",e[e.PART_FLUX_CONFIES_CRED="Part de flux créditeurs"]="PART_FLUX_CONFIES_CRED",e[e.PART_FLUX_CONFIES_DEB="Part de flux débiteurs"]="PART_FLUX_CONFIES_DEB",e[e.PREMIER_EQUIPEMENT="1er équipement"]="PREMIER_EQUIPEMENT",e[e.PREMIER_EQUIPEMENT_TAG="1er équipement tag"]="PREMIER_EQUIPEMENT_TAG",e[e.PREMIER_EQUIPEMENT_TEXTE="1er équipement"]="PREMIER_EQUIPEMENT_TEXTE",e[e.OBJECTIF_FLUX="Objectif de flux"]="OBJECTIF_FLUX",e[e.ENCOURS_BDF="Encours BDF"]="ENCOURS_BDF",e[e.BEGACLI="BEGACLI"]="BEGACLI"}(e.INTITULE||(e.INTITULE={}));e.INTITULE;!function(e){e[e.CA="CA/Budget"]="CA",e[e.SEGMENTATION="Segmentation"]="SEGMENTATION",e[e.RENDEZ_VOUS="Rendez vous"]="RENDEZ_VOUS",e[e.RISQUE="Risque"]="RISQUE",e[e.NC="NC"]="NC",e[e.PNB="PNB"]="PNB",e[e.REVUE="Revue de portefeuille"]="REVUE",e[e.FLUX="Flux"]="FLUX",e[e.PROSPECT="Segmentation"]="PROSPECT",e[e.OPPORTUNITES="Opportunités"]="OPPORTUNITES",e[e.PROSPECTION="Prospection"]="PROSPECTION"}(e.FAMILLE||(e.FAMILLE={}));e.FAMILLE;!function(e){e[e.DATE_DERNIER_RDV="itce-calendar"]="DATE_DERNIER_RDV",e[e.DATE_PROCHAIN_RDV="itce-calendar"]="DATE_PROCHAIN_RDV",e[e.DATE_DERNIER_ENTRETIEN="itce-pencil"]="DATE_DERNIER_ENTRETIEN",e[e.NB_RDV_ANNEE_EN_COURS="itce-calendar-o"]="NB_RDV_ANNEE_EN_COURS",e[e.NB_RDV_12_MOIS_GLISSANTS="itce-calendar-o"]="NB_RDV_12_MOIS_GLISSANTS"}(e.ICONE||(e.ICONE={}));e.ICONE}(r=e.Indicateur||(e.Indicateur={}));var o;!function(e){!function(e){e[e.SUPERIEUR=">"]="SUPERIEUR",e[e.INFERIEUR="<"]="INFERIEUR",e[e.EGALE="="]="EGALE",e[e.ENTRE="Entre"]="ENTRE",e[e.NC="= NC"]="NC",e[e.ECHUE="= Echue (plus d'un an)"]="ECHUE",e[e.ENCOURS="= En cours (moins d'un an)"]="ENCOURS",e[e.NONREALISEE="= Non réalisée"]="NONREALISEE"}(e.COMPARATEUR||(e.COMPARATEUR={}));e.COMPARATEUR;!function(e){e[e.ET="ET"]="ET",e[e.OU="OU"]="OU"}(e.OPERATEUR||(e.OPERATEUR={}));e.OPERATEUR}(o=e.Filtre||(e.Filtre={}));var l;!function(e){!function(e){e[e.POPUP_CLIENTS_PRODUIT_A_PROPOSER=0]="POPUP_CLIENTS_PRODUIT_A_PROPOSER",e[e.POPUP_CLIENTS_APPETENCE_PRODUIT=0]="POPUP_CLIENTS_APPETENCE_PRODUIT",e[e.POPUP_CLIENTS_A_ACTIVER=Number.MAX_VALUE]="POPUP_CLIENTS_A_ACTIVER",e[e.POPUP_CLIENTS_TARIFICATION=99977]="POPUP_CLIENTS_TARIFICATION"}(e.POPUP_REVUE||(e.POPUP_REVUE={}));e.POPUP_REVUE}(l=e.Revue||(e.Revue={}));var a;!function(e){!function(e){e[e.VUE_GLOBAL="0"]="VUE_GLOBAL",e[e.VUE_DETAILLE="1"]="VUE_DETAILLE",e[e.VUE_GLOBAL_ET_DETAILLE="2"]="VUE_GLOBAL_ET_DETAILLE"}(e.TYPE_VUE_STAT_GLOBAL||(e.TYPE_VUE_STAT_GLOBAL={}));e.TYPE_VUE_STAT_GLOBAL}(a=e.Rest||(e.Rest={}));var s;!function(e){!function(e){e[e.VUE_AGENT="0"]="VUE_AGENT",e[e.VUE_EDS="1"]="VUE_EDS"}(e.TYPE_VUE||(e.TYPE_VUE={}));e.TYPE_VUE}(s=e.Vue||(e.Vue={}))}(t=e.Enum||(e.Enum={}))}(Portefeuille||(Portefeuille={}));var Portefeuille;!function(e){var t;!function(e){var t;!function(e){"use strict";var t;!function(e){e.$q="$q",e.$modalInstance="$modalInstance",e.$scope="$scope",e.$location="$location",e.$filter="$filter",e.$parse="$parse",e.$window="$window",e.$rootScope="$rootScope",e.$element="$element",e.$anchorScroll="$anchorScroll"}(t=e.Angular||(e.Angular={}));var i;!function(e){e.serviceAgentExtended="serviceAgentExtended",e.serviceAgent="serviceAgent",e.tableServiceOpefi="tableServiceOpefi",e.mwsfRechercheEdsGlobaleService="mwsfRechercheEdsGlobaleService",e.data="data",e.mwEvents="MW_EVENTS",e.portailService="portailService-libPortail"}(i=e.MyWay||(e.MyWay={}));var n;!function(e){e.suiviParComplementaireRestService="SuiviComplementaireService",e.choixEdsService="ChoixEdsService",e.contexteService="ContexteService",e.eventService="EventService",e.filtreService="FiltreService",e.begacliService="BegacliService",e.indicateurService="IndicateurService",e.lisaApplication="LisaApplication",e.listeClientsService="ListeClientsService",e.popupService="PopupService",e.portefeuilleService="PortefeuilleService",e.preferencesService="PreferencesService",e.rechercheAgentRestService="RechercheAgentService",e.recherchePortefeuilleRestService="RecherchePortefeuilleService",e.indicateursRestService="IndicateursService",e.rechercheCommercialRestService="RechercheCommercialeService",e.corporateInformationRestService="CorporateFamilleLienService",e.relationCommercialeRestService="RelationCommercialeService",e.clientRestService="ClientService",e.habilitationService="HabilitationService",e.gestionAffectationRestService="GestionAffectationService",e.choixUtilisateurService="ChoixUtilisateurService",e.modalePaniersService="ModalePaniersService",e.pfDragAndDropService="PfDragAndDropService",e.mwNotificationService="MwNotificationService",e.modalService="modalService",e.applicationUtils="ApplicationUtils",e.preferenceUtilisateurRestService="PreferenceUtilisateurService",e.restStatRentabiliteService="StatRentabiliteService",e.restStatRevueService="StatRevueService",e.restStatPortefeuilleService="StatPortefeuilleService",e.restStatFluxMouvementFinancierService="StatFluxMouvementFinancierService",e.statService="StatsService",e.ihmService="IhmService",e.rechercheRevueService="RechercheRevueService",e.indicateurFlecheService="IndicateurFlecheService",e.creationPourcentageService="CreationPourcentageService",e.restStatPortefeuilleEdsService="StatPortefeuilleEdsService",e.mwCsvService="mwCsvService",e.edsNiveauInferieurService="EdsNiveauInferieurService",e.mockService="MockService"}(n=e.Services||(e.Services={}));var r;!function(e){e.creationDonutService="CreationDonutService",e.creationPourcentageService="CreationPourcentageService"}(r=e.LibrairieD3||(e.LibrairieD3={}));var o;!function(e){e.dataModale="data"}(o=e.Autres||(e.Autres={}))}(t=e.Inject||(e.Inject={}))}(t=e.Constantes||(e.Constantes={}))}(Portefeuille||(Portefeuille={}));var Portefeuille;!function(e){var t;!function(t){"use strict";var i=MyWay.Services.Loggers.LoggerFactory.INSTANCE.getClass,n=function(){function t(t,i,n,r,o,l,a,s,u,c,E,d,p,f,C,g,h,m,v,S,I,P,A){this.serviceAgentExtended=t,this.$scope=i,this.$q=n,this.$location=r,this.$window=o,this.listeClientsService=l,this.$filter=a,this.popupService=s,this.$parse=u,this.tableService=c,this.eventService=E,this.lisaApplication=d,this.contexteService=p,this.indicateurService=f,this.filtreService=C,this.portefeuilleService=g,this.preferencesService=h,this.ihmService=m,this.portailService=v,this.habilitationService=S,this.mwCsvService=I,this.exportService=P,this.$timeout=A,this.chargementEnCours=!1,this.contexteGererRelation={},this.formatDate="DD/MM/YYYY",this.nomFichierExport="Export portefeuilles",this.colonneCsvClient=[{title:"Suivi Par",bind:"nomAgent",cssClass:""},{title:"Identifiant Portefeuille",bind:"identifiantPortefeuille",cssClass:""},{title:"Libellé Portefeuille",bind:"libellePortefeuille",cssClass:""},{title:"Relation économique",bind:"nomRelationEconomique",cssClass:""},{title:"Identifiant Personne",bind:"id",cssClass:""},{title:"Raison Sociale",bind:"nom",cssClass:""},{title:"Leader",bind:"estLeader",cssClass:""},{title:"Prospect",bind:"estClient",cssClass:""},{title:"Sans Contrat",bind:"estSansContrat",cssClass:""},{title:"Actif",bind:"estActif",cssClass:""},{title:"1er Équipement",bind:"premierEquipement",cssClass:""},{title:"Nb Personnes Relation",bind:"nbPersonneRelation",cssClass:""}],this.nombreAppelInitialiserTableaux=0,this.etatChargementLong=-1,this.accessibiliteBoutonVoirProduitsPourClient=!1,this.portefeuilleService.getTypeForcage()?this.initialiser(this.portefeuilleService.getTypeForcage()):this.initialiser(e.Enum.PageClients.TYPE_FORCAGE.SANS)}return t.prototype.initialiser=function(i){var n=this;return t.logger.info(">>> Appel de la méthode : ClientsControleur.initialiser <<<"),console.log("--> ClientsControleur.initialiser typeForcage : ",i),this.estHabiliteConsultRevue=this.habilitationService.estHabiliteConsultRevue(),this.estHabiliteMajRevue=this.habilitationService.estHabiliteMajRevue(),this.messageChoixPtf=e.Constantes.Messages.MESSAGE_CHOIX_PORTEFEUILLE,this.messageAucunPtf=e.Constantes.Messages.MESSAGE_AUCUN_PORTEFEUILLE,this.chargementEnCours=!0,this.listeFiltresClients=[],this.listeFiltresRelationEco=[],this.listeFiltres=[],this.listeIndicateursFiltre=[],this.listeIndicateursRelationEcoFiltre=[],this.listeClients=[],this.listeClientsAAfficher=[],this.listeRelationEco=[],this.listeRelationEcoAAfficher=[],this.listeIndicateursTableau=[],this.eventService.setClientsControleur(this),this.messageLimiteClientsAtteinte=this.valoriserMessageLimiteClientsAtteinte(this.portefeuilleService.getTypeForcage()),this.dateMin=moment(e.Constantes.Application.DATE_MIN).toDate(),this.dateMax=moment(e.Constantes.Application.DATE_MAX).toDate(),console.log("--> ClientsControleur.initialiser portefeuilleService.aPortefeuilles() : ",this.portefeuilleService.aPortefeuille()),console.log("--> ClientsControleur.initialiser portefeuilleService.aPortefeuillesAffiche() : ",this.portefeuilleService.aPortefeuillesAffiche()),console.log("--> ClientsControleur.initialiser portefeuilleService.aPortefeuillesReelAffiche() : ",this.portefeuilleService.aPortefeuillesReelAffiche()),console.log("--> ClientsControleur.initialiser portefeuilleService.aPortefeuilleExpertAffiche() : ",this.portefeuilleService.aPortefeuilleExpertAffiche()),this.portefeuilleService.aPortefeuillesAffiche()?(this.estEnForcageTypeClientsOuProspects()?this.typeVue=e.Enum.PageClients.TYPE_VUE.VUE_CLIENTS:this.typeVue=this.ihmService.getTypeVue(),this.radioBoutonEstVueClient=this.typeVue,this.portefeuilleService.getCaracteristiquesAgent()?(this.nombreAppelInitialiserTableaux=this.nombreAppelInitialiserTableaux+1,this.initApplication(i)):void this.contexteService.getAuthentification().then(function(e){var t={};return t.codeEtablissement=e.codeEtablissement,t.designationAgent=e.agentConnecte.designationLongueAgent,t.identifiantElementStructure=+e.agentConnecte.numeroInterneEds,t.libelleFonction=e.agentConnecte.designationPosteFonctionnel,n.portefeuilleService.setCaracteristiquesAgent(t),n.nombreAppelInitialiserTableaux=n.nombreAppelInitialiserTableaux+1,n.initApplication(i)})):(this.chargementEnCours=!1,this.$q.when())},t.prototype.initApplication=function(t){var i=this;return this.contexteService.getContexte().then(function(n){return i.serviceAgentExtended.DonneesDelocalisees.getDonneesDelocalisees(n.codeEtablissement,e.Constantes.Application.TABLE_DELOC_SEGMENTATIONS).then(function(n){return n.donnees&&n.donnees.forEach(function(t){"BM"===t.CODLTS&&e.Services.Utils.ApplicationUtils.segmentationsBDR.push(t)}),i.initTableaux(t)})})},t.prototype.initTableaux=function(t){var i=this,n=this.portefeuilleService.aPortefeuilleExpertAffiche()?!1:!0;return this.tableauClients=new e.Modeles.Tableaux.TableauClient(this,this,this.$filter,this.$parse,this.listeClients,this.listeIndicateursTableau,n),this.tableauRelations=new e.Modeles.Tableaux.TableauRelation(this,this,this.$filter,this.$parse,this.listeRelationEco,this.listeIndicateursTableau),this.listeTotaleIndicateurs=this.indicateurService.getListeTotaleIndicateursType(),this.pageActuelle=1,this.serviceAgentExtended.getFromContext(e.Constantes.Contexte.ACCES_DEPUIS_BLOC_REVUE).then(function(n){var r="O"===n;return i.isAccesDepuisBlocRevue=r,i.isAfficherMessageLimiteClientAtteinte=i.controlerLimiteClientAtteinte(r),r?(t=e.Enum.PageClients.TYPE_FORCAGE.TOUT,i.listeIndicateursTableau=i.indicateurService.getListeIndicateursRevue(),i.getRelationEconomiques(t)):i.preferencesService.lirePanierDefaut(i.listeTotaleIndicateurs).then(function(n){return i.panierDefaut=n,t===e.Enum.PageClients.TYPE_FORCAGE.TOUT?(i.panierDefaut=i.preferencesService.convertirPanierPreferenceEnApplicatif(i.indicateurService.getPanierDeForcage(),i.listeTotaleIndicateurs,e.Constantes.Application.NOM_PANIER_FORCAGE,!1),i.listeIndicateursTableau=i.panierDefaut.listeChoixIndicateurs):i.listeIndicateursTableau=n?n.listeChoixIndicateurs:[],i.getRelationEconomiques(t)})})},t.prototype.getRelationEconomiques=function(i){var n=this;return this.listeClientsService.getListeRelationsEconomiques(this.portefeuilleService.getCaracteristiquesAgent().identifiantElementStructure,this.portefeuilleService.getListePortefeuillesVisu(),i,this.listeIndicateursTableau,this.isAccesDepuisBlocRevue,this.portefeuilleService.getListeCodeSuiviParComplementairePortefeuillesExpertVisu()).then(function(t){n.listeRelationEco=t.sort(function(e,t){return e.nom>t.nom?1:t.nom>e.nom?-1:0}),n.listeRelationEcoFiltre=angular.copy(n.listeRelationEco),n.listeRelationEcoFiltre.unshift(n.getRelationEcoToutes()),n.choixRelationEco=_.where(n.listeRelationEcoFiltre,{id:""})[0],n.listeRelationEcoAAfficher=n.listeRelationEco,n.tableauRelations=new e.Modeles.Tableaux.TableauRelation(n,n,n.$filter,n.$parse,n.listeRelationEco,n.listeIndicateursTableau),n.listeIndicateursRelationEcoFiltre=n.listeClientsService.getListeIndicateursRelationEcoFiltre(),_.forEach(n.listeRelationEco,function(e){e.listeClients=n.listeClientsService.ordonnerListeClientsAvecLeader(e.listeClients);for(var t=e.listeClients.length,i=0,r=e.listeClients;i<r.length;i++){var o=r[i];o.nbPersonneRelation=t}n.listeClients=n.listeClients.concat(e.listeClients)}),n.listeClientsAAfficher=n.listeClients,n.tableauClients=new e.Modeles.Tableaux.TableauClient(n,n,n.$filter,n.$parse,n.listeClients,n.listeIndicateursTableau,!0),n.majFiltres(),n.relationEcoPourConsultationProduits=angular.copy(n.choixRelationEco)})["catch"](function(i){return n.serviceAgentExtended.getFromContext(e.Constantes.Contexte.ACCES_DEPUIS_BLOC_REVUE).then(function(r){return i.codeLibelle===e.Constantes.Service.RELATION_COMMERCIALE_CODE_MAX_CLIENT_ATTEINT&&"O"!==r?n.contexteService.recupererRetourDebranchement().then(function(t){return t&&t.objetEdsVisu&&t.objetEdsVisu.typeForcage&&t.objetEdsVisu.typeForcage!==e.Enum.PageClients.TYPE_FORCAGE.SANS?(n.portefeuilleService.setTypeForcage(t.objetEdsVisu.typeForcage),n.listeClientsService.setAffichageModificationChoix(t.objetEdsVisu.affichageModificationChoix),n.initialiser(t.objetEdsVisu.typeForcage)):n.accederForcage()}):(t.logger.error("Erreur de récupération du portefeuille",i.codeLibelle,i.libelle),n.popupService.showErreur(i))})})["finally"](function(){return n.nombreAppelInitialiserTableaux=n.nombreAppelInitialiserTableaux-1,n.chargementEnCours=!(0===n.nombreAppelInitialiserTableaux),n.contexteService.recupererRetourDebranchement().then(function(t){if(t&&t.objetEdsVisu&&t.identifiantRelation){if(n.portefeuilleService.setTypeForcage(t.objetEdsVisu.typeForcage),t.objetEdsVisu.typeForcage===e.Enum.PageClients.TYPE_FORCAGE.CLIENTS||t.objetEdsVisu.typeForcage===e.Enum.PageClients.TYPE_FORCAGE.PROSPECTS)n.affichageVueClient();else{var i=n.appliquerFiltresRelationApresDebranchement(t.filtresRelation),r=n.appliquerFiltresApresDebranchement(t.filtres);t.typeVue===e.Enum.PageClients.TYPE_VUE.VUE_CLIENTS?(n.radioBoutonEstVueClient=t.typeVue,n.affichageVueClient(),r&&n.majFiltres()):(n.radioBoutonEstVueClient=t.typeVue,n.affichageVueRelationEco(),n.typeVue=e.Enum.PageClients.TYPE_VUE.VUE_CLIENTS,r?(n.listeFiltres=t.filtres,n.majFiltres()):i&&n.majFiltres(),n.filtrageTableauClient(t.identifiantRelation.toString()))}n.miseAJourTableauAvecContexte(t);var o=[e.Constantes.Contexte.CONTEXTE_VERS_REVUE,e.Constantes.Contexte.CONTEXTE_GERR_PORTF];return n.contexteService.supprimerContexteDevenuInutile(o)}n.ihmService.getTypeVue()===e.Enum.PageClients.TYPE_VUE.VUE_CLIENTS&&n.affichageVueClient(),n.$scope.$applyAsync()})})},t.prototype.appliquerFiltresApresDebranchement=function(e){return e&&e.length>0?(this.filtreService.setFiltresClients(e),!0):!1},t.prototype.appliquerFiltresRelationApresDebranchement=function(e){return e&&e.length>0?(this.filtreService.setFiltresRelationsEco(e),!0):!1},t.prototype.majFiltres=function(){this.typeVue===e.Enum.PageClients.TYPE_VUE.VUE_CLIENTS?(this.listeIndicateursFiltre=this.listeClientsService.getListeIndicateursFiltre(),this.listeFiltresClients=this.filtreService.getFiltresClients(),this.listeFiltres=this.listeFiltresClients,this.listeFiltresClients&&this.listeFiltresClients.length>0&&(this.listeFiltresClients=this.filtreService.majAndGetFiltresClientsAvecListeIndicateursDispo(this.listeIndicateursTableau))):(this.listeIndicateursFiltre=this.listeClientsService.getListeIndicateursRelationEcoFiltre(),this.listeFiltresRelationEco=this.filtreService.getFiltresRelationsEco(),this.listeFiltres=this.listeFiltresRelationEco,this.listeFiltresRelationEco&&this.listeFiltresRelationEco.length>0&&(this.listeFiltresRelationEco=this.filtreService.majAndGetFiltresRelationsEcoAvecListeIndicateursDispo(this.listeIndicateursTableau))),this.majTableauSuiteModificationFiltre(this.listeIndicateursFiltre)},t.prototype.getRelationEcoToutes=function(){var e={};return e.id="",e.nom="Toutes les relations",e.listeClients=[],e.listeIndicateurs=[],e},t.prototype.filtrageTableauClient=function(t){this.typeVue=e.Enum.PageClients.TYPE_VUE.VUE_CLIENTS,t?(this.choixRelationEco=_.where(this.listeRelationEcoFiltre,{id:t})[0],this.listeClientsFiltre=_.where(this.listeClients,{idRelationEconomique:+t}),this.listeClientsAAfficher=this.filtreService.filtrerListeClients(this.listeClientsFiltre,this.listeFiltresClients),this.tableauClients=new e.Modeles.Tableaux.TableauClient(this,this,this.$filter,this.$parse,this.listeClientsAAfficher,this.listeIndicateursTableau,!1)):(this.choixRelationEco=_.where(this.listeRelationEcoFiltre,{id:""})[0],this.listeClientsAAfficher=this.filtreService.filtrerListeClients(this.listeClients,this.listeFiltresClients),this.tableauClients=new e.Modeles.Tableaux.TableauClient(this,this,this.$filter,this.$parse,this.listeClientsAAfficher,this.listeIndicateursTableau,!1)),this.relationEcoPourConsultationProduits=angular.copy(this.choixRelationEco)},t.prototype.onSelectionChange=function(e){t.logger.info(">>> Appel de la méthode : ClientsControleur.onSelectionChange <<<");var i=null;this.estVueClients()&&(this.accessibiliteBoutonVoirProduitsPourClient=e.checked,e.checked&&e.idRelationEconomique&&(i=_.find(this.listeRelationEco,function(t){return t&&t.id===e.idRelationEconomique.toString()?!0:void 0}),this.relationEcoPourConsultationProduits=angular.copy(i))),this.estVueRelationEco()&&(this.estAvecFiltreColonne=!1,this.listeFiltres=this.listeFiltresClients,e.checked&&(this.construireContexteRel(),this.filtrageTableauClient(e.id)))},t.prototype.accederAuxFiltres=function(){var i=this,n={};n.listeIndicateursTableau=angular.copy(this.listeIndicateursTableau),this.typeVue===e.Enum.PageClients.TYPE_VUE.VUE_CLIENTS?(n.listeFiltres=angular.copy(this.listeFiltresClients),n.listeIndicateursFiltre=angular.copy(this.listeIndicateursFiltre),n.estVueClient=!0):(n.listeFiltres=angular.copy(this.listeFiltresRelationEco),n.listeIndicateursFiltre=angular.copy(this.listeIndicateursRelationEcoFiltre),n.estVueClient=!1);var r={};r.model=n,this.popupService.showModalFull("vues/template-modale/modale-filtre-vue.html","ModaleFiltreControleur",r).then(function(n){i.typeVue===e.Enum.PageClients.TYPE_VUE.VUE_CLIENTS?i.filtreService.setFiltresClients(n.listeFiltres):i.filtreService.setFiltresRelationsEco(n.listeFiltres),i.contexteService.tracerSuiviAction(t.logger,e.Constantes.ActionsRemarquables.BTN_FILTRES),i.majFiltres()})},t.prototype.majTableauSuiteModificationFiltre=function(t){var i=this;if(this.chargementEnCours=!0,this.typeVue===e.Enum.PageClients.TYPE_VUE.VUE_CLIENTS){this.listeIndicateursFiltre=t,this.listeClientsAAfficher=this.listeClients,this.typeVue===e.Enum.PageClients.TYPE_VUE.VUE_CLIENTS&&this.choixRelationEco&&""!==this.choixRelationEco.id&&(this.listeClientsAAfficher=this.listeClientsFiltre),this.listeFiltresClients.length>0&&(this.listeClientsAAfficher=this.filtreService.filtrerListeClients(this.listeClientsAAfficher,this.listeFiltresClients));var n=this.portefeuilleService.aPortefeuilleExpertAffiche()?!1:!0;this.tableauClients=new e.Modeles.Tableaux.TableauClient(this,this,this.$filter,this.$parse,this.listeClientsAAfficher,this.listeIndicateursTableau,n)}else this.listeIndicateursRelationEcoFiltre=t,this.listeRelationEcoAAfficher=this.listeRelationEco,this.listeFiltresRelationEco.length>0&&(this.listeRelationEcoAAfficher=this.filtreService.filtrerListeRelationsEco(this.listeRelationEcoAAfficher,this.listeFiltresRelationEco)),
this.tableauRelations=new e.Modeles.Tableaux.TableauRelation(this,this,this.$filter,this.$parse,this.listeRelationEcoAAfficher,this.listeIndicateursTableau);angular.element(document.querySelector("#"+this.definirIndentifiantTableauEnCours())).ready(function(){i.chargementEnCours=!1,i.$scope.$applyAsync()})},t.prototype.accederAuxIndicateursV2=function(){this.contexteService.tracerSuiviAction(t.logger,e.Constantes.ActionsRemarquables.BTN_PANIER),this.$location.path(e.Constantes.Url.SELECTION_INDICATEURS)},t.prototype.accederForcage=function(){var t=this;return this.popupService.showModalMd("vues/template-modale/modale-avertissement-choix-portefeuille-vue.html","ModaleAvertissementChoixPortefeuilleControleur",null).then(function(i){return i?(t.listeClientsService.setAffichageModificationChoix(i.nombreBoutonsAffiches>1),i.typeForcage!==e.Enum.PageClients.TYPE_FORCAGE.SANS?(t.listeClientsService.getEstLimiteClientsAtteinte()&&(t.messageLimiteClientsAtteinte=t.valoriserMessageLimiteClientsAtteinte(i.typeForcage)),t.portefeuilleService.getTypeForcage()!==i.typeForcage&&t.listeClientsService.razRelations(),t.portefeuilleService.setTypeForcage(i.typeForcage),t.initialiser(i.typeForcage)):t.eventService.ouvrirVoletChoixPortefeuilleIndexControleur()):(t.listeClientsService.initialiserEstLimiteClientsAtteinte(null),t.eventService.ouvrirVoletChoixPortefeuilleIndexControleur())})},t.prototype.afficherLigneRelationEco=function(){return!this.chargementEnCours&&this.typeVue===e.Enum.PageClients.TYPE_VUE.VUE_CLIENTS&&this.choixRelationEco&&""!==this.choixRelationEco.id},t.prototype.afficherTableauRelation=function(){return!this.chargementEnCours&&this.typeVue===e.Enum.PageClients.TYPE_VUE.VUE_RELATION_ECONOMIQUE},t.prototype.afficherTableauClients=function(){return!this.chargementEnCours&&this.typeVue===e.Enum.PageClients.TYPE_VUE.VUE_CLIENTS},t.prototype.estVueClients=function(){return this.typeVue===e.Enum.PageClients.TYPE_VUE.VUE_CLIENTS},t.prototype.estVueRelationEco=function(){return this.typeVue===e.Enum.PageClients.TYPE_VUE.VUE_RELATION_ECONOMIQUE},t.prototype.estAfficheBtnRetour=function(){return this.choixRelationEco&&""!==this.choixRelationEco.id},t.prototype.estAfficheBtnEffectuerRevue=function(){return this.typeVue!==e.Enum.PageClients.TYPE_VUE.VUE_RELATION_ECONOMIQUE&&this.estHabiliteMajRevue&&this.estHabiliteConsultRevue&&this.portefeuilleService.aPortefeuillesReelAffiche()},t.prototype.estAfficheBtnVoirProduits=function(){return this.afficherLigneRelationEco()&&this.estHabiliteConsultRevue||this.typeVue===e.Enum.PageClients.TYPE_VUE.VUE_CLIENTS},t.prototype.estAfficheBtnExporter=function(){return this.typeVue===e.Enum.PageClients.TYPE_VUE.VUE_CLIENTS||this.typeVue===e.Enum.PageClients.TYPE_VUE.VUE_RELATION_ECONOMIQUE&&this.choixRelationEco&&""!==this.choixRelationEco.id},t.prototype.estAfficherBoutonSynthese=function(){return this.typeVue!==e.Enum.PageClients.TYPE_VUE.VUE_RELATION_ECONOMIQUE},t.prototype.estDisabledBoutonVoirProduits=function(){return this.typeVue===e.Enum.PageClients.TYPE_VUE.VUE_CLIENTS?this.choixRelationEco&&this.choixRelationEco.id?!1:!this.accessibiliteBoutonVoirProduitsPourClient:!0},t.prototype.estDisabledBtnEffectuerRevue=function(){var t=!0;return this.tableauClients&&this.tableauClients.selectedItems&&this.tableauClients.selectedItems.length>0&&(t=this.typeVue!==e.Enum.PageClients.TYPE_VUE.VUE_CLIENTS),t},t.prototype.getTitreVue=function(){return this.estVueClients()?e.Constantes.Application.TITRE_VUE_CLIENT:e.Constantes.Application.TITRE_VUE_RELATION},t.prototype.getNomPanier=function(){return this.panierDefaut?this.panierDefaut.nom?e.Constantes.Application.CHAINE_NOM_PANIER_INDICATEUR+': "'+this.panierDefaut.nom+'"':e.Constantes.Application.CHAINE_NOM_PANIER_INDICATEUR:""},t.prototype.getTxtRatioFiltrage=function(){if(this.estVueClients()){var t=this.portefeuilleService.getTypeForcage();return t&&t===e.Enum.PageClients.TYPE_FORCAGE.CLIENTS?"Nb clients / prospects: "+this.nbClientsRelationsFiltre()+"/"+this.nbClientsRelationsTotal():t&&t===e.Enum.PageClients.TYPE_FORCAGE.PROSPECTS?"Nb prospects: "+this.nbClientsRelationsFiltre()+"/"+this.nbClientsRelationsTotal():"Nb clients / prospects: "+this.nbClientsRelationsFiltre()+"/"+this.nbClientsRelationsTotal()}return"Nb relations: "+this.nbClientsRelationsFiltre()+"/"+this.nbClientsRelationsTotal()},t.prototype.afficherLigneStatsEtTableau=function(){return!this.chargementEnCours&&(this.estVueClients()&&this.tableauClients.data.length>0||this.estVueRelationEco()&&this.tableauRelations.data.length>0)?this.estAvecFiltreColonne?!1:!0:!1},t.prototype.getTxtEtatPagination=function(){if(!this.chargementEnCours&&this.tableauClients){var t=void 0,i=void 0;if(this.estVueClients()){var n=this.portefeuilleService.getTypeForcage();return t=this.tableauClients.perPage*this.pageActuelle-this.tableauClients.perPage+1,i=this.tableauClients.perPage*this.pageActuelle,i>this.tableauClients.data.length&&(i=this.tableauClients.data.length),n&&n===e.Enum.PageClients.TYPE_FORCAGE.CLIENTS?"Clients "+t+" à "+i+" sur "+this.tableauClients.data.length:n&&n===e.Enum.PageClients.TYPE_FORCAGE.PROSPECTS?"Prospects "+t+" à "+i+" sur "+this.tableauClients.data.length:"Clients / Prospects "+t+" à "+i+" sur "+this.tableauClients.data.length}return t=this.tableauRelations.perPage*this.pageActuelle-this.tableauRelations.perPage+1,i=this.tableauRelations.perPage*this.pageActuelle,i>this.tableauRelations.data.length&&(i=this.tableauRelations.data.length),"Relations "+t+" à "+i+" sur "+this.tableauRelations.data.length}return""},t.prototype.onPageChange=function(e){this.pageActuelle=e,this.$window.scrollTo(0,0)},t.prototype.affichageVueRelationEco=function(){this.accessibiliteBoutonVoirProduitsPourClient=!1,this.typeVue=e.Enum.PageClients.TYPE_VUE.VUE_RELATION_ECONOMIQUE,this.ihmService.setTypeVue(e.Enum.PageClients.TYPE_VUE.VUE_RELATION_ECONOMIQUE),this.estAvecFiltreColonne=!1,this.tableauRelations=new e.Modeles.Tableaux.TableauRelation(this,this,this.$filter,this.$parse,this.listeRelationEcoAAfficher,this.listeIndicateursTableau),this.majFiltres()},t.prototype.affichageVueClient=function(){this.accessibiliteBoutonVoirProduitsPourClient=!1,this.typeVue=e.Enum.PageClients.TYPE_VUE.VUE_CLIENTS,this.ihmService.setTypeVue(e.Enum.PageClients.TYPE_VUE.VUE_CLIENTS),this.estAvecFiltreColonne=!1,this.filtrageTableauClient(""),this.majFiltres()},t.prototype.nbClientsRelationsTotal=function(){return this.chargementEnCours?void 0:this.typeVue===e.Enum.PageClients.TYPE_VUE.VUE_CLIENTS?this.afficherLigneRelationEco()?this.listeClientsFiltre.length:this.listeClients.length:this.listeRelationEco.length},t.prototype.nbClientsRelationsFiltre=function(){return this.chargementEnCours?void 0:this.typeVue===e.Enum.PageClients.TYPE_VUE.VUE_CLIENTS?this.listeClientsAAfficher.length:this.listeRelationEcoAAfficher.length},t.prototype.afficherFiltreActif=function(){return this.typeVue===e.Enum.PageClients.TYPE_VUE.VUE_CLIENTS?this.listeFiltresClients?this.listeFiltresClients.length>0:!1:this.listeFiltresRelationEco?this.listeFiltresRelationEco.length>0:!1},t.prototype.estEnForcageTypeClientsOuProspects=function(){return this.portefeuilleService.getTypeForcage()===e.Enum.PageClients.TYPE_FORCAGE.CLIENTS||this.portefeuilleService.getTypeForcage()===e.Enum.PageClients.TYPE_FORCAGE.PROSPECTS},t.prototype.estEnForcageTypeTout=function(){return this.portefeuilleService.getTypeForcage()===e.Enum.PageClients.TYPE_FORCAGE.TOUT},t.prototype.retourVueRelEco=function(){this.choixRelationEco=null,this.affichageVueRelationEco(),this.miseAJourTableauAvecContexteRel()},t.prototype.retourAccueil=function(){var i=this;this.contexteService.recupererRetourDebranchement().then(function(n){if(n){var r;n.objetEdsVisu&&(r={},r.objetEdsVisu=angular.copy(n.objetEdsVisu),r.objetEdsVisu.locationPath=e.Constantes.Url.PORTEFEUILLE),i.contexteService.supprimerContexteDevenuInutile([e.Constantes.Contexte.CONTEXTE_VERS_REVUE,e.Constantes.Contexte.CONTEXTE_GERR_PORTF]).then(function(){i.serviceAgentExtended.addToContext(e.Constantes.Contexte.CONTEXTE_GERR_PORTF,r)["catch"](function(e){t.logger.info(JSON.stringify(">>retourAccueil<< Erreur lors de l'écriture du contexte de gestion des portefeuilles: "+JSON.stringify(e)))})})["catch"](function(e){t.logger.info(JSON.stringify(">>retourAccueil<< Erreur lors de la suppression du contexte de gestion des portefeuilles: "+JSON.stringify(e)))})}else i.contexteService.supprimerContexteDevenuInutile([e.Constantes.Contexte.CONTEXTE_VERS_REVUE])})["catch"](function(e){t.logger.info(">>retourAccueil<< Erreur lors de la récupération du contexte de gestion des portefeuilles: "+JSON.stringify(e))})["finally"](function(){i.$location.path(e.Constantes.Url.PORTEFEUILLE)})},t.prototype.effectuerRevue=function(){var i=this;t.logger.info(">>> Appel de la méthode : ClientsControleur.effectuerRevue <<<");var n={};return n=this.construireContexte(!0),this.contexteService.ajouterDonneesDebranchementRevueClient(n).then(function(){return i.contexteService.tracerSuiviAction(t.logger,e.Constantes.ActionsRemarquables.BTN_EFFC_REVUE),i.lisaApplication.next(e.Constantes.CodeProcessusLisa.CODE_LISA_SAISIE_REVUE,null).then(function(){})["catch"](function(e){t.logger.debug(">>> Echec sur lisa.next de la méthode : ClientsControleur.effectuerRevue <<<"),i.popupService.showErreur(e)})})},t.prototype.definirIndentifiantTableauEnCours=function(){var t="";return this.typeVue===e.Enum.PageClients.TYPE_VUE.VUE_CLIENTS?t=e.Constantes.Tableau.ID_TABLE_CLIENT:this.typeVue===e.Enum.PageClients.TYPE_VUE.VUE_RELATION_ECONOMIQUE&&(t=e.Constantes.Tableau.ID_TABLE_RELATION),t},t.prototype.miseAJourContexteAvecTableau=function(e){var t=this.definirIndentifiantTableauEnCours();t&&""!==t&&(e.pagination=angular.copy(this.tableService.getPaginationState(t)),e.colonneTriee=angular.copy(this.tableService.getSortedColumn(t)),e.colonneFiltre=angular.copy(this.tableService.getFilterCriteria(t)))},t.prototype.miseAJourTableauAvecContexte=function(t){var i=this,n=this.definirIndentifiantTableauEnCours(),r=angular.copy(t);n&&""!==n&&angular.element(document.querySelector(e.Constantes.Application.ID_TABLE_CLIENT)).ready(function(){i.$timeout(function(){i.tableService.setSortedColumn(n,r.colonneTriee),i.tableService.setFilterCriteria(n,r.colonneFiltre),i.tableService.setPaginationState(n,r.pagination),r.identifiantPersonneSelection&&(n===e.Constantes.Tableau.ID_TABLE_RELATION?i.tableService.setSelectedLines(n,_.filter(i.listeRelationEcoAAfficher,function(e){return e.id===r.identifiantPersonneSelection.toString()})):i.tableService.setSelectedLines(n,_.filter(i.listeClientsAAfficher,function(e){return e.id===r.identifiantPersonneSelection.toString()}))),i.tableService.apply(n)},0)})},t.prototype.construireContexte=function(e){var t={};this.tableauClients.selectedItems&&this.tableauClients.selectedItems.length>0&&this.tableauClients.selectedItems[0]&&this.tableauClients.selectedItems[0].id&&(t.identifiantPersonneSelection=Number(this.tableauClients.selectedItems[0].id)),e&&t.identifiantPersonneSelection?(t.identifiantPersonne=t.identifiantPersonneSelection,t.estClient=this.tableauClients.selectedItems[0].estClient,t.raisonSociale=this.tableauClients.selectedItems[0].nom,t.siren=this.tableauClients.selectedItems[0].siren,t.identifiantRelation=this.tableauClients.selectedItems[0].idRelationEconomique,t.libelleRelation=this.tableauClients.selectedItems[0].nomRelationEconomique):this.portefeuilleService.aPortefeuilleExpertAffiche()?(t.identifiantRelation=Number(this.tableauClients.selectedItems[0].idRelationEconomique),t.libelleRelation=this.tableauClients.selectedItems[0].nomRelationEconomique):(this.relationEcoPourConsultationProduits.id&&(t.identifiantRelation=Number(this.relationEcoPourConsultationProduits.id)),t.libelleRelation=this.relationEcoPourConsultationProduits.nom),t.typeForcage=this.portefeuilleService.getTypeForcage().toString(),t.typeVue=this.radioBoutonEstVueClient,t.filtres=this.listeFiltres,t.filtresRelation=this.listeFiltresRelationEco,t.objetEdsVisu=this.alimenterObjetEds();var i=this.definirIndentifiantTableauEnCours(),n=this.tableService.getMwTableObserver(i);return n&&n.sortedModel&&(t.listeClientAffiches=n.sortedModel),this.miseAJourContexteAvecTableau(t),console.log("<<<< ClientsControleur construireContexte : ",t),t},t.prototype.construireContexteRel=function(){this.contexteGererRelation={};var t=e.Constantes.Tableau.ID_TABLE_RELATION;this.contexteGererRelation.pagination=angular.copy(this.tableService.getPaginationState(t)),this.contexteGererRelation.colonneTriee=angular.copy(this.tableService.getSortedColumn(t)),this.contexteGererRelation.colonneFiltre=angular.copy(this.tableService.getFilterCriteria(t)),this.contexteGererRelation.selectedItems=this.tableauRelations.selectedItems},t.prototype.miseAJourTableauAvecContexteRel=function(){var t=this,i=e.Constantes.Tableau.ID_TABLE_RELATION;this.contexteGererRelation.selectedItems&&angular.element(document.querySelector("#"+e.Constantes.Tableau.ID_TABLE_RELATION)).ready(function(){t.$timeout(function(){t.tableService.setSortedColumn(i,t.contexteGererRelation.colonneTriee),t.tableService.setFilterCriteria(i,t.contexteGererRelation.colonneFiltre),t.tableService.setPaginationState(i,t.contexteGererRelation.pagination);var n=angular.copy(t.contexteGererRelation.selectedItems);t.tableService.setSelectedLines(e.Constantes.Tableau.ID_TABLE_RELATION,n),t.tableService.apply(i)},0)})},t.prototype.getTypeSynthese=function(t){return t===e.Constantes.Rest.CODE_PERSONNALITE_JURIDIQUE_EI?"3":t===e.Constantes.Rest.CODE_PERSONNALITE_JURIDIQUE_PM?"2":null},t.prototype.accederSyntheseClient=function(){var i=this;t.logger.info(">>> Appel de la méthode : ClientsControleur.accederSyntheseClient <<<");for(var n=this.tableauClients.selectedItems[0].id,r=null,o=0,l=this.listeRelationEco;o<l.length;o++)for(var a=l[o],s=0,u=a.listeClients;s<u.length;s++){var c=u[s];c.id===n&&(r=c.codePersonnaliteJuridique)}var E;return E=this.getTypeSynthese(r),this.contexteService.ajoutPourDebranchementSyntheseClient(n,E).then(function(){return i.contexteService.isPCM().then(function(n){var r=sessionStorage;if(null!==r.getItem("myway-portal-id")){console.log("--> XXXX portail Mysys: typeSynthese = "+E);var o={};return o=i.construireContexte(!0),i.contexteService.ajouterDonneesDebranchementSyntheseClient(o,E).then(function(){return i.contexteService.tracerSuiviAction(t.logger,e.Constantes.ActionsRemarquables.BTN_SYNTH_PM),i.lisaApplication.next(e.Constantes.CodeProcessusLisa.CODE_LISA_SYNTHESE_PM,"").then(function(){})["catch"](function(e){t.logger.debug(">>> Echec sur lisa.next de la méthode : ClientsControleur.accederSyntheseClient <<<"),i.popupService.showErreur(e)})})}if(n){console.log("--> XXXX PCM");var o={};return o=i.construireContexte(!0),i.contexteService.ajouterDonneesDebranchementSyntheseClient(o,E).then(function(){return i.contexteService.tracerSuiviAction(t.logger,e.Constantes.ActionsRemarquables.BTN_SYNTH_PM),i.lisaApplication.next(e.Constantes.CodeProcessusLisa.CODE_LISA_SYNTHESE_PM,"").then(function(){})["catch"](function(e){t.logger.debug(">>> Echec sur lisa.next de la méthode : ClientsControleur.accederSyntheseClient <<<"),i.popupService.showErreur(e)})})}return console.log("--> XXXX portail Myway"),i.portailService.lancerSyntheseClient(Number(i.tableauClients.selectedItems[0].id))})})},t.prototype.exporter=function(){var i=this;if(this.exportCSVEnCours!==!0){this.exportCSVEnCours=!0;var n=this.getColonnesExport(),r=_.pluck(n,"bind"),o=this.getColonnesReferences(r),l=_.pluck(n,"title"),a=moment(new Date).format("DDMMYYYY"),s=this.alimenterObjetEds(),u=s&&s.objCaractAgent?s.objCaractAgent.designationAgent:this.contexteService.getDesignation();return this.getDonneesExport(u).then(function(n){var r={header:l,columnOrder:o,filename:i.nomFichierExport+" "+u+" "+a};console.log("donnees : ",n);var s=i.exportService.genererFichierExport(r.header,n,r.filename);return s.then(function(){i.exportCSVEnCours=!1,i.contexteService.tracerSuiviAction(t.logger,e.Constantes.ActionsRemarquables.BTN_EXPORT)})})}},t.prototype.getColonnesExport=function(){var t=angular.copy(this.colonneCsvClient);return this.tableauClients.columns.forEach(function(i){if("nom"!==i.bind&&-1===i.title.indexOf(e.Enum.Indicateur.INTITULE.PREMIER_EQUIPEMENT)){var n=i.bind.substring(17,i.bind.indexOf("]")),r=i.bind.split(".");if(r.length>1){var o="";i.title.indexOf("Part de flux")>-1?o=" (%)":i.title.indexOf("Flux")>-1?o=" (k€)":i.title.indexOf("PNB ")>-1?o=" (€)":i.title.indexOf("CA")>-1?o=" (k€)":i.title.indexOf("Encours BDF")>-1?o=" (k€)":i.title.indexOf("Part en engagement")>-1?o=" (%)":i.title.indexOf("Top CC")>-1?r[1]="valeur":i.title.indexOf("Objectif de flux")>-1&&(o=" (%)"),t.push({title:i.title+o,bind:n+"_"+r[1],cssClass:""}),i.title.indexOf("CA")>-1&&t.push({title:"Date "+i.title,bind:n+"_dateMaj",cssClass:""})}}}),console.log("columns : ",t),t},t.prototype.getColonnesReferences=function(e){var t=[];return _.forEach(e,function(e){var i=e.split(".");t.push(i[i.length-1])}),t},t.prototype.getDonneesExport=function(t){var i=[],n=this.getColonnesExport(),r=this;return this.listeClientsAAfficher.forEach(function(o){if(o){console.log("--> export client : ",o);var l={};l.nomAgent=t,l.identifiantPortefeuille=o.identifiantPortefeuille,l.libellePortefeuille=o.libellePortefeuille,l.nomRelationEconomique=o.nomRelationEconomique,l.id=o.id,l.nom=o.nom,l.estLeader=r.formatBoolean(o.estLeader),l.estClient=r.formatBoolean(!o.estClient),l.estSansContrat=r.formatBoolean(o.estSansContrat),l.estActif=r.formatBoolean(o.estActif);var a=_.find(o.listeIndicateurs,{code:e.Enum.Indicateur.CODE.PREMIER_EQUIPEMENT_TAG});console.log("indicateurPremierEquipement : ",a),l.premierEquipement=r.gereTriHack("valeurDate",a?a.valeurDate:null),l.nbPersonneRelation=o.nbPersonneRelation;var s=0,u=11;n.forEach(function(e){if(s>u){var t=e.bind.split("_");if(t.length>0&&(l[e.bind]=r.gereTriHack(t[1],o.listeIndicateurs[t[0]][t[1]]),"dateMaj"===t[1])){var i=o.listeIndicateurs[t[0]].valeurNumber;if(console.log("valeur : ",i),null===i)l[e.bind]="NC";else{var n=l[e.bind],a=moment(n).format("MM/YYYY");"Invalid date"===a&&(a="NC"),l[e.bind]=" "+a}}}s++}),i.push(l)}}),this.$q.when(i)},t.prototype.gereTriHack=function(t,i){if("valeur"===t){var n=i;return-1!==n.search(e.Constantes.Application.FIN_CHAINE_MAX)?e.Constantes.Application.CHAINE_INDICATEUR_NON_CONNU:void 0!==i&&null!==i&&""!==i?i:e.Constantes.Application.CHAINE_INDICATEUR_NON_CONNU}if("valeurDate"===t){var r=moment(e.Constantes.Application.DATE_MIN).toDate(),o=moment(e.Constantes.Application.DATE_MAX).toDate();return i?moment(i).isSame(o)?e.Constantes.Application.CHAINE_INDICATEUR_NON_CONNU:moment(i).isSame(r)?e.Constantes.Application.CHAINE_INDICATEUR_NON_CONNU:moment(i).format("DD/MM/YYYY"):e.Constantes.Application.CHAINE_INDICATEUR_NON_CONNU}if("valeurNumber"===t){var l=Number.NEGATIVE_INFINITY,a=Number.POSITIVE_INFINITY;if(null!==i&&void 0!==i){if(i===l||i===a)return e.Constantes.Application.CHAINE_INDICATEUR_NON_CONNU;var s=i.toString();return s=s.replace(".",",")}return e.Constantes.Application.CHAINE_INDICATEUR_NON_CONNU}return i},t.prototype.formatBoolean=function(e){return e?"Oui":""},t.prototype.formaterDate=function(e){var t="";return null!==e&&angular.isDefined(e)&&"0001-01-01"!==e&&"9999-12-31"!==e&&"1970-01-01"!==e&&(t=moment(e).format(this.formatDate)),t},t.prototype.consulterProduits=function(){var i=this;t.logger.info(">>> Appel de la méthode : ClientsControleur.consulterProduits <<<");var n={};return n=this.construireContexte(!1),this.contexteService.ajouterDonneesDebranchementBilanRevueRelationEco(n).then(function(){return i.contexteService.tracerSuiviAction(t.logger,e.Constantes.ActionsRemarquables.BTN_CONS_PROD),i.lisaApplication.next(e.Constantes.CodeProcessusLisa.CODE_LISA_BILAN_REVUE,e.Constantes.Url.BILAN_REVUE).then(function(){})["catch"](function(e){t.logger.debug(">>> Echec sur lisa.next de la méthode : ClientsControleur.consulterProduits <<<"),i.popupService.showErreur(e)})})},t.prototype.supprimerTousLesFiltres=function(){this.typeVue===e.Enum.PageClients.TYPE_VUE.VUE_CLIENTS?this.filtreService.razFiltresClient():this.filtreService.razFiltresRelationEco(),this.majFiltres()},t.prototype.controlerLimiteClientAtteinte=function(t){var i=!1;return i=this.portefeuilleService.getTypeForcage()!==e.Enum.PageClients.TYPE_FORCAGE.SANS&&this.messageLimiteClientsAtteinte&&this.listeClientsService.getEstLimiteClientsAtteinte()&&(this.tableauClients&&this.tableauClients.data&&this.tableauClients.data.length>0||this.tableauRelations&&this.tableauRelations.data&&this.tableauRelations.data.length>0)&&!t},t.prototype.ouvrirChoixForcage=function(){return this.accederForcage()},t.prototype.valoriserMessageLimiteClientsAtteinte=function(t){var i="";if(t)switch(t){case e.Enum.PageClients.TYPE_FORCAGE.CLIENTS:i=1===this.portefeuilleService.getListePortefeuillesActifs().length?e.Constantes.Application.LIMITE_CLIENTS_ATTEINTE_CHOIX_CLIENTS_SINGULIER:e.Constantes.Application.LIMITE_CLIENTS_ATTEINTE_CHOIX_CLIENTS_PLURIEL,i=i+" "+e.Constantes.Application.LISTE_RELATIONS_ECONOMIQUES_INACCESSIBLE;break;case e.Enum.PageClients.TYPE_FORCAGE.PROSPECTS:i=1===this.portefeuilleService.getListePortefeuillesActifs().length?e.Constantes.Application.LIMITE_CLIENTS_ATTEINTE_CHOIX_PROSPECTS_SINGULIER:e.Constantes.Application.LIMITE_CLIENTS_ATTEINTE_CHOIX_PROSPECTS_PLURIEL,i=i+" "+e.Constantes.Application.LISTE_RELATIONS_ECONOMIQUES_INACCESSIBLE;break;default:i=1===this.portefeuilleService.getListePortefeuillesActifs().length?e.Constantes.Application.LIMITE_CLIENTS_ATTEINTE_CHOIX_TOUT_SINGULIER:e.Constantes.Application.LIMITE_CLIENTS_ATTEINTE_CHOIX_TOUT_PLURIEL,i=i+" "+e.Constantes.Application.INDICATEURS_PREDEFINIS_NON_MODIFIABLES}return i},t.prototype.afficherModifierChoix=function(){return this.listeClientsService.getAffichageModificationChoix()},t.prototype.alimenterObjetEds=function(){var t={};return t.objCaractAgent=this.portefeuilleService.getCaracteristiquesAgent(),t.listePtfVisu=_.pluck(this.portefeuilleService.getListePortefeuillesActifs(),"id"),t.typeForcage=this.portefeuilleService.getTypeForcage(),t.affichageModificationChoix=this.listeClientsService.getAffichageModificationChoix(),t.locationPath=e.Constantes.Url.CLIENTS,t},t.prototype.onSortChange=function(e,t){var i;return e&&(i=e,i=i.replace("[","."),i=i.replace("]",""),this.afficherTableauRelation()&&this.tableauRelations&&this.tableauRelations.data&&this.tableauRelations.data.length>0&&this.traiterTriDonneesListeTableaux(this.tableauRelations.data,i,t),this.afficherTableauClients()&&this.tableauClients&&this.tableauClients.data&&this.tableauClients.data.length>0&&this.traiterTriDonneesListeTableaux(this.tableauClients.data,i,t)),!1},t.prototype.traiterTriDonneesListeTableaux=function(t,i,n){var r,o,l=this;i&&i.length>0&&t&&t.length>0&&(r=i.split("."),o=angular.copy(t[0]),_.forEach(r,function(n){o=o[n],n===r[r.length-1]&&typeof o===e.Constantes.Application.DONNEE_STRING&&l.valoriserChaineMaxPourComparaison(t,i)}),t.sort(function(e,t){return l.analyserRecursifPourTriUnCritere(e,t,r,0,n)}))},t.prototype.valoriserChaineMaxPourComparaison=function(t,i){var n,r=this;this.chaineMaxPourComparaison="",_.forEach(t,function(e){r.determinerChaineMaxRecursif(e,i)}),n=this.chaineMaxPourComparaison,-1===n.search(e.Constantes.Application.FIN_CHAINE_MAX)&&(this.chaineMaxPourComparaison=n+e.Constantes.Application.FIN_CHAINE_MAX)},t.prototype.determinerChaineMaxRecursif=function(e,t){-1!==t.search("\\.")?this.determinerChaineMaxRecursif(e[t.split(".")[0]],t.substr(t.search("\\.")+1)):(!this.chaineMaxPourComparaison||e[t]>this.chaineMaxPourComparaison)&&(this.chaineMaxPourComparaison=e[t])},t.prototype.analyserRecursifPourTriUnCritere=function(t,i,n,r,o){var l=0,a=1,s=-1,u=l;if(!t||!i)return!t&&i&&(u=a),t&&!i&&(u=s),u=o===!1?u:-1*u;if(t&&i&&n&&n.length>0&&r>=0){if(r===n.length-1){var c=n[r],E=c;if(typeof t[c]===e.Constantes.Application.DONNEE_NUMBER||c===e.Constantes.Application.DONNEE_VALEUR_NUMBER){var d=this.valoriserNombreNCSelonSensTri(o),p="undefined"!=typeof t[E]?t[E]:t[c],f="undefined"!=typeof i[E]?i[E]:i[c];t[E]=this.valoriserProprieteNombreViaEquivalentNC(p,d),i[E]=this.valoriserProprieteNombreViaEquivalentNC(f,d),u=this.comparerNumberANumberB(t[E],i[E],d)}else if(c===e.Constantes.Application.DONNEE_VALEUR_DATE){var C=this.valoriserDateNCSelonSensTri(o),p="undefined"!=typeof t[E]?t[E]:t[c],f="undefined"!=typeof i[E]?i[E]:i[c];t[E]=this.valoriserProprieteDateViaEquivalentNC(p,C),i[E]=this.valoriserProprieteDateViaEquivalentNC(f,C),u=this.comparerDateADateB(t[E],i[E],C)}else{var g=this.valoriserChaineNCSelonSensTri(o),p="undefined"!=typeof t[E]?t[E]:t[c],f="undefined"!=typeof i[E]?i[E]:i[c];t[E]=this.valoriserProprieteChaineViaEquivalentNC(p,g),i[E]=this.valoriserProprieteChaineViaEquivalentNC(f,g),u=this.comparerStringAStringB(t[E],i[E])}return u=o===!1?u:-1*u}return this.analyserRecursifPourTriUnCritere(t[n[r]],i[n[r]],n,r+1,o)}},t.prototype.valoriserChaineNCSelonSensTri=function(e){var t="",i=this.chaineMaxPourComparaison;return e===!1?angular.copy(i):angular.copy(t)},t.prototype.valoriserNombreNCSelonSensTri=function(e){return e===!1?Number.POSITIVE_INFINITY:Number.NEGATIVE_INFINITY},t.prototype.valoriserDateNCSelonSensTri=function(e){return e===!1?angular.copy(this.dateMax):angular.copy(this.dateMin)},t.prototype.valoriserProprieteChaineViaEquivalentNC=function(t,i){return t&&t!==e.Constantes.Application.CHAINE_INDICATEUR_NON_CONNU&&""!==t&&t!==this.chaineMaxPourComparaison?t:i},t.prototype.valoriserProprieteNombreViaEquivalentNC=function(e,t){return null===t||void 0===t||null!==e&&void 0!==e&&e!==Number.NEGATIVE_INFINITY&&e!==Number.POSITIVE_INFINITY?e:t},t.prototype.valoriserProprieteDateViaEquivalentNC=function(e,t){return t&&(!e||moment(e).isSame(this.dateMin)||moment(e).isSame(this.dateMax))?t:e},t.prototype.comparerNumberANumberB=function(e,t,i){var n=0,r=1,o=-1;return void 0===e&&null===t?r:null===e&&void 0===t?o:(null===e&&(e=i),null===t&&(t=i),e>t?r:t>e?o:n)},t.prototype.comparerDateADateB=function(e,t,i){var n=0,r=1,o=-1;return void 0===e&&null===t?r:null===e&&void 0===t?o:(e||(e=i),t||(t=i),moment(e).isAfter(t)?r:moment(e).isBefore(t)?o:n)},t.prototype.comparerStringAStringB=function(e,t){var i=0,n=1,r=-1,o=i;return e>t?o=n:t>e&&(o=r),o},t.CLASS_NAME="ClientsControleur",t.logger=i(t.CLASS_NAME),t.$inject=[e.Constantes.Inject.MyWay.serviceAgentExtended,e.Constantes.Inject.Angular.$scope,e.Constantes.Inject.Angular.$q,e.Constantes.Inject.Angular.$location,e.Constantes.Inject.Angular.$window,e.Constantes.Inject.Services.listeClientsService,e.Constantes.Inject.Angular.$filter,e.Constantes.Inject.Services.popupService,e.Constantes.Inject.Angular.$parse,e.Constantes.Inject.MyWay.tableServiceOpefi,e.Constantes.Inject.Services.eventService,e.Constantes.Inject.Services.lisaApplication,e.Constantes.Inject.Services.contexteService,e.Constantes.Inject.Services.indicateurService,e.Constantes.Inject.Services.filtreService,e.Constantes.Inject.Services.portefeuilleService,e.Constantes.Inject.Services.preferencesService,e.Constantes.Inject.Services.ihmService,e.Constantes.Inject.MyWay.portailService,e.Constantes.Inject.Services.habilitationService,e.Constantes.Inject.Services.mwCsvService,"ExportService","$timeout"],t}();t.ClientsControleur=n,e.app.controller(n.CLASS_NAME,n)}(t=e.Controleurs||(e.Controleurs={}))}(Portefeuille||(Portefeuille={}));var Portefeuille;!function(e){var t;!function(t){"use strict";var i=MyWay.Services.Loggers.LoggerFactory.INSTANCE.getClass,n=function(){function e(){}return e.CLASS_NAME="DetailClientControleur",e.logger=i(e.CLASS_NAME),e.$inject=[],e}();t.DetailClientControleur=n,e.app.controller("DetailClientControleur",n)}(t=e.Controleurs||(e.Controleurs={}))}(Portefeuille||(Portefeuille={}));var Portefeuille;!function(e){var t;!function(t){"use strict";var i=MyWay.Services.Loggers.LoggerFactory.INSTANCE.getClass,n=function(){function t(e,t,i,n,r,o,l,a,s,u,c){this.$scope=e,this.$location=t,this.$window=i,this.lisaApplication=n,this.contexteService=r,this.portefeuilleService=o,this.eventService=l,this.popupService=a,this.$q=s,this.listeClientsService=u,this.choixUtilisateurService=c,this.afficherHeader=!1,this.initialiser()}return t.prototype.initialiser=function(){this.eventService.setIndexControleur(this),this.chargementEnCours=!0,this.estHabiliteChoixAgent=!1,this.estHabiliteChoixEDS=!1,this.titrePage=e.Constantes.Application.TITRE_APPLICATION,this.afficherHeader=!0,this.messageAucunPortefeuille=e.Constantes.Messages.MESSAGE_AUCUN_PORTEFEUILLE,this.chargementEnCours=!1,this.aErreurTechnique=!1,this.messageErreurTechnique=e.Constantes.Messages.MESSAGE_ERREUR_TECHNIQUE},t.prototype.initialiserHabilitationChoixAgent=function(e){this.estHabiliteChoixAgent=e},t.prototype.initialiserHabilitationChoixEDS=function(e){this.estHabiliteChoixEDS=e},t.prototype.estVueMultiSuiviPar=function(){return this.estVueGlobalConsolide},t.prototype.afficherPopupChoixAgent=function(){this.afficherPopupEDS({actionButtonText:null,closeButtonText:null,headerText:"Changer d'agent",bodyText:null,iconName:null,model:e.Enum.Vue.TYPE_VUE.VUE_AGENT.toString()})},t.prototype.afficherPopupChoixEds=function(){this.afficherPopupEDS({actionButtonText:null,closeButtonText:null,headerText:"Choisir l'EDS",bodyText:null,iconName:null,model:e.Enum.Vue.TYPE_VUE.VUE_EDS.toString()})},t.prototype.afficherPopupEDS=function(i){var n=this,r="vues/template-modale/modale-choix-eds-vue.html",o="ModaleChoixEdsControleur",l={};this.contexteService.getContexte().then(function(a){var s=i.model===e.Enum.Vue.TYPE_VUE.VUE_EDS.toString()?n.popupService.showModalFull(r,o,i):n.popupService.showModalMd(r,o,i);return s.then(function(r){return n.contexteService.tracerSuiviAction(t.logger,e.Constantes.ActionsRemarquables.BTN_CHANGER_AGENT),n.estVueGlobalConsolide=i.model===e.Enum.Vue.TYPE_VUE.VUE_EDS.toString(),n.eventService.setEstVueMultiGererPar(n.estVueGlobalConsolide),n.chargementEnCours=!0,n.$window.scrollTo(0,0),n.majDonneesDonneesEds(r,l,null).then(function(){return n.$location.path(e.Constantes.Url.PORTEFEUILLE),n.chargementEnCours=!1,n.$q.when()})})})["catch"](function(e){e?(t.logger.error("Erreur de recherche de l'EDS",e.codeLibelle,e.libelle),n.popupService.showErreur(e)):t.logger.error("Erreur de recherche de l'EDS")})},t.prototype.majDonneesDonneesEds=function(t,i,n){var r=this;return this.edsChoisi=t,!t||t.identifiantElementStructure===i.edsVisu&&this.estVueGlobalConsolide===i.estVueMultiSuiviPar?this.$q.when():(this.contexteService.setEdsVisu(t.identifiantElementStructure),this.contexteService.setestVueMultiSuiviPar(this.estVueGlobalConsolide),this.listeClientsService.razRelations(),this.portefeuilleService.setCaracteristiquesAgent(t),this.portefeuilleService.setTypeForcage(e.Enum.PageClients.TYPE_FORCAGE.SANS),this.estVueMultiSuiviPar()?this.portefeuilleService.getListePortefeuilleEDSChoisi(i.codeEtablissement,this.choixUtilisateurService.edsSelectionne.id).then(function(e){return r.integrerPortefeuilleActifs(e,n)}):this.portefeuilleService.getListePortefeuilleAgentChoisi(t).then(function(e){return r.integrerPortefeuilleActifs(e,n)}))},t.prototype.integrerPortefeuilleActifs=function(e,t){return console.log("indexControleur integrerPortefeuilleActifs listePtfActifs",t),this.listePortefeuilles=angular.copy(e),this.$scope.$apply(),this.portefeuilleService.aPortefeuille()?(t&&t.length>0&&(this.portefeuilleService.setListePortefeuillesActifs(t),this.listePortefeuilles=this.portefeuilleService.getListePortefeuillesVisu()),!this.portefeuilleService.aPortefeuille()||this.portefeuilleService.aPortefeuillesAffiche()&&!this.estVueGlobalConsolide||(this.chargerListePortefeilleDropDown(),this.ouvertureVoletChoixPortefeuille=!0,this.eventService.reinitInitStatsVueGlobale()),this.portefeuilleService.aPortefeuillesAffiche()?(this.chargerListePortefeilleDropDown(),this.eventService.reinitInitStatsVueGlobale(),
this.eventService.initialiserVueGlobale()):this.$q.when()):(this.eventService.reinitInitStatsVueGlobale(),this.$q.when())},t.prototype.getSousTitrePage=function(){var e=this.portefeuilleService.getListePortefeuillesVisu(),t=this.portefeuilleService.getListePortefeuillesActifs(),i="";if(this.estVueGlobalConsolide){var n=_.uniq(t,"idAgent").length,r=_.uniq(e,"idAgent").length,o=n>1?"s":"",l=this.choixUtilisateurService&&this.choixUtilisateurService.edsSelectionne&&this.choixUtilisateurService.edsSelectionne.nomEds?this.choixUtilisateurService.edsSelectionne.nomEds:"";return i=" / "+n+" collaborateur"+o+" selectionné"+o+" sur "+r,l+i}var a=this.edsChoisi?this.edsChoisi.designationAgent:this.contexteService.getDesignation();if(e.length>0){var o=t.length>1?"s":"";i=" / "+t.length+" portefeuille"+o+" sélectionné"+o+" sur "+e.length,1===t.length&&(i+=" ("+t[0].libelle+")")}return"SUIVI PAR "+a+i},t.prototype.chargerListePortefeilleDropDown=function(){this.listePortefeuillesDropDown=this.portefeuilleService.regrouperPortfeuilleParAgent(this.listePortefeuilles)},t.prototype.initListePortefeuilles=function(){var t=this;this.chargementEnCours=!0;var i=this.$q.defer();return this.listePortefeuilles?(this.chargerListePortefeilleDropDown(),this.chargementEnCours=!1,this.$q.when()):this.portefeuilleService.getListePortefeuilleAgentConnecte().then(function(i){t.listePortefeuilles=angular.copy(i),t.chargerListePortefeilleDropDown(),t.chargementEnCours=!1,t.portefeuilleService.aPortefeuillesAffiche()&&t.$location.path(e.Constantes.Url.PORTEFEUILLE)})["catch"](function(e){i.reject(),t.popupService.showErreur(e),t.aErreurTechnique=!0,t.chargementEnCours=!1})},t.prototype.ouvrirChoixPortefeuille=function(){this.ouvertureVoletChoixPortefeuille=!0},t.prototype.quitter=function(){var i=this;t.logger.info(">>> Appel de la méthode : IndexControleur.quitter() <<<");var n=[e.Constantes.Contexte.CONTEXTE_GERR_PORTF];this.contexteService.supprimerContexteDevenuInutile(n).then(function(){t.logger.info("Suppression du contexte => OK")})["catch"](function(){t.logger.error("Suppression du contexte => KO")})["finally"](function(){i.lisaApplication.next(e.Constantes.CodeProcessusLisa.CODE_LISA_SORTIE,"")})},t.CLASS_NAME="IndexControleur",t.logger=i(t.CLASS_NAME),t.$inject=[e.Constantes.Inject.Angular.$scope,e.Constantes.Inject.Angular.$location,e.Constantes.Inject.Angular.$window,e.Constantes.Inject.Services.lisaApplication,e.Constantes.Inject.Services.contexteService,e.Constantes.Inject.Services.portefeuilleService,e.Constantes.Inject.Services.eventService,e.Constantes.Inject.Services.popupService,e.Constantes.Inject.Angular.$q,e.Constantes.Inject.Services.listeClientsService,e.Constantes.Inject.Services.choixUtilisateurService],t}();t.IndexControleur=n,e.app.controller(n.CLASS_NAME,n)}(t=e.Controleurs||(e.Controleurs={}))}(Portefeuille||(Portefeuille={}));var Portefeuille;!function(e){var t;!function(t){"use strict";var i=MyWay.Services.Loggers.LoggerFactory.INSTANCE.getClass,n=function(){function t(i,n,r,o,l,a,s,u,c,E,d,p,f){var C=this;this.serviceAgentExtended=i,this.$q=n,this.$scope=r,this.$location=o,this.portefeuilleService=l,this.eventService=a,this.statService=s,this.ihmService=u,this.contexteService=c,this.habilitationService=E,this.creationDonutService=d,this.indicateurFlecheService=p,this.popupService=f,this.estVueMultiSuiviPar=!1,this.anneeEnCours=moment().year(),this.chargementRentabEnCours=!1,this.chargementRdvEnCours=!1,this.chargementPtfEnCours=!1,this.chargementRevuePtfEnCours=!1,this.isInitRentab=!1,this.isInitRevuePtf=!1,this.isInitPtf=!1,this.isInitRdv=!1,this.afficheAppetencesProduits=!0,this.afficheErreurPoidsPNB=!1,this.estActifBlocFlux=!0,this.chargementFluxEnCours=!1,this.accederGestionPortefeuillesExpert=function(){C.ihmService.setTypeVue(e.Enum.PageClients.TYPE_VUE.VUE_CLIENTS),C.portefeuilleService.setTypeForcage(e.Enum.PageClients.TYPE_FORCAGE.CLIENTS),C.serviceAgentExtended.addToContext(e.Constantes.Contexte.ACCES_DEPUIS_BLOC_REVUE,"N").then(function(){C.contexteService.tracerSuiviAction(t.logger,e.Constantes.ActionsRemarquables.BTN_ACCES_LISTE_CLIENTS),C.$location.path(e.Constantes.Url.CLIENTS)})},this.accederGestionPortefeuilles=function(){C.contexteService.recupererRetourDebranchement().then(function(i){if(i){var n;i.objetEdsVisu&&(n={},n={},n.objetEdsVisu=angular.copy(i.objetEdsVisu)),C.contexteService.supprimerContexteDevenuInutile([e.Constantes.Contexte.CONTEXTE_VERS_REVUE,e.Constantes.Contexte.CONTEXTE_GERR_PORTF]).then(function(){C.serviceAgentExtended.addToContext(e.Constantes.Contexte.CONTEXTE_GERR_PORTF,n)["catch"](function(e){t.logger.info(JSON.stringify(">>accederGestionPortefeuilles<< Erreur lors de l'écriture du contexte de gestion des portefeuilles: "+JSON.stringify(e)))})})["catch"](function(e){t.logger.info(JSON.stringify(">>accederGestionPortefeuilles<< Erreur lors de la suppression du contexte de gestion des portefeuilles: "+JSON.stringify(e)))})}else C.contexteService.supprimerContexteDevenuInutile([e.Constantes.Contexte.CONTEXTE_VERS_REVUE])})["catch"](function(e){t.logger.info(">>accederGestionPortefeuilles<< Erreur lors de la récupération du contexte de gestion des portefeuilles: "+JSON.stringify(e))})["finally"](function(){C.ihmService.setTypeVue(e.Enum.PageClients.TYPE_VUE.VUE_RELATION_ECONOMIQUE),C.portefeuilleService.setTypeForcage(e.Enum.PageClients.TYPE_FORCAGE.SANS),C.serviceAgentExtended.addToContext(e.Constantes.Contexte.ACCES_DEPUIS_BLOC_REVUE,"N").then(function(){C.contexteService.tracerSuiviAction(t.logger,e.Constantes.ActionsRemarquables.BTN_ACCES_LISTE_CLIENTS),C.$location.path(e.Constantes.Url.CLIENTS)})})},this.accederRevuePortefeuilles=function(){C.contexteService.recupererRetourDebranchement().then(function(i){if(i){var n;i.objetEdsVisu&&(n={},n.objetEdsVisu=angular.copy(i.objetEdsVisu)),C.contexteService.supprimerContexteDevenuInutile([e.Constantes.Contexte.CONTEXTE_VERS_REVUE,e.Constantes.Contexte.CONTEXTE_GERR_PORTF]).then(function(){C.serviceAgentExtended.addToContext(e.Constantes.Contexte.CONTEXTE_GERR_PORTF,n)["catch"](function(e){t.logger.info(JSON.stringify(">>accederRevuePortefeuilles<< Erreur lors de l'écriture du contexte de gestion des portefeuilles: "+JSON.stringify(e)))})})["catch"](function(e){t.logger.info(JSON.stringify(">>accederRevuePortefeuilles<< Erreur lors de la suppression du contexte de gestion des portefeuilles: "+JSON.stringify(e)))})}else C.contexteService.supprimerContexteDevenuInutile([e.Constantes.Contexte.CONTEXTE_VERS_REVUE])})["catch"](function(e){t.logger.info(">>accederRevuePortefeuilles<< Erreur lors de la récupération du contexte de gestion des portefeuilles: "+JSON.stringify(e))})["finally"](function(){C.ihmService.setTypeVue(e.Enum.PageClients.TYPE_VUE.VUE_CLIENTS),C.portefeuilleService.setTypeForcage(e.Enum.PageClients.TYPE_FORCAGE.TOUT),C.serviceAgentExtended.addToContext(e.Constantes.Contexte.ACCES_DEPUIS_BLOC_REVUE,"O").then(function(){C.contexteService.tracerSuiviAction(t.logger,e.Constantes.ActionsRemarquables.BTN_ACCES_LISTE_CLIENTS_REVUE),C.$location.path(e.Constantes.Url.CLIENTS)})})},this.initialiser()}return t.prototype.initialiser=function(){return t.logger.info(">>> Appel de la méthode : PortefeuilleControleur.initialiser <<<"),this.reinitInitStats(),this.messageChoixPtf=e.Constantes.Messages.MESSAGE_CHOIX_PORTEFEUILLE,this.messageChoixPtfExpert=e.Constantes.Messages.MESSAGE_CHOIX_PORTEFEUILLE_EXPERT,this.messageAucunPtf=e.Constantes.Messages.MESSAGE_AUCUN_PORTEFEUILLE,this.estHabiliteBlocRentabilite=this.habilitationService.estHabiliteAccesPNB(),this.estHabiliteBlocRevue=this.habilitationService.estHabiliteConsultRevue(),this.estHabiliteConsultAffaires=this.habilitationService.estHabiliteConsultAffaires(),this.estHabiliteConsultPropositions=this.habilitationService.estHabiliteConsultPropositions(),this.eventService.setPortefeuilleControleur(this),this.titrePanelRdv=e.Constantes.Application.TITRE_PANEL_RDV+this.anneeEnCours.toString(),this.titrePanelRdv2=e.Constantes.Application.TITRE_PANEL_RDV_AVEC_CRE,this.creationDonutService.viderDonut(),this.creerConfigBoutonDetailsPortefeuille(),this.creerConfigBoutonDetailsPortefeuilleExpert(),this.creerConfigBoutonAccederRevuePortefeuille(),this.portefeuilleService.aPortefeuillesAffiche()&&this.portefeuilleService.aPortefeuillesReelAffiche()?this.initialiserStatistiques():this.$q.when()},t.prototype.setEstVueMultiSuiviPar=function(e){this.estVueMultiSuiviPar!==e&&(this.estVueMultiSuiviPar=e,this.creerConfigBoutonDetailsPortefeuille(),this.creerConfigBoutonAccederRevuePortefeuille())},t.prototype.initialiserStatistiques=function(){var e=this;if(this.portefeuilleService.aPortefeuillesAffiche()&&this.portefeuilleService.aPortefeuillesReelAffiche()){this.chargementRentabEnCours=!0,this.chargementPtfEnCours=!0,this.chargementRdvEnCours=!0,this.chargementRevuePtfEnCours=!0,this.chargementFluxEnCours=!0;var t=this.estVueMultiSuiviPar?this.statService.getStatsListeEds():this.$q.when();t.then(function(){return e.initBlocRentabilite(),e.initStatsRdvEtPortefeuille(),e.initStatsRevuePortefeuille(),e.initStatsFluxMouvementFinancier(),e.$q.when()})}return this.portefeuilleService.aPortefeuillesReelAffiche()||this.reinitInitStats(),this.$q.when()},t.prototype.initBlocRentabilite=function(){var e=this;if(this.estHabiliteBlocRentabilite){var t=this.estVueMultiSuiviPar?this.statService.getStatsRentabiliteEds():this.statService.getStatsRentabilite();t.then(function(t){t?(e.creerBlocRentab(t),e.isInitRentab=!0):e.initStatRentab()})["catch"](function(t){e.isInitRentab=!1,e.messageInitRentab="Un problème technique empêche la récupération des données: "+t.libelle})["finally"](function(){e.chargementRentabEnCours=!1})}},t.prototype.initStatsRdvEtPortefeuille=function(){var e=this,t=this.estVueMultiSuiviPar?this.statService.getStatsRdvEtPortefeuilleEds():this.statService.getStatsRdvEtPortefeuille();t.then(function(t){e.creerBlocPtf(t),e.creerBlocRdv(t),e.isInitRdv=!0,e.isInitPtf=!0})["catch"](function(t){e.isInitRdv=!1,e.isInitPtf=!1,e.messageInitPtf="Un problème technique empêche la récupération des données: "+t.libelle,e.messageInitRdv="Un problème technique empêche la récupération des données: "+t.libelle,e.creationDonutService.viderDonut()})["finally"](function(){e.chargementPtfEnCours=!1,e.chargementRdvEnCours=!1})},t.prototype.initStatsRevuePortefeuille=function(){var e=this;if(this.estHabiliteBlocRevue){var t=this.estVueMultiSuiviPar?this.statService.getStatsRevuePortefeuilleEds():this.statService.getStatsRevuePortefeuille();t.then(function(t){e.creerBlocRevuePortefeuille(t),e.isInitRevuePtf=!0})["catch"](function(t){e.isInitRevuePtf=!1,e.messageInitRevuePtf="Un problème technique empêche la récupération des données: "+t.libelle})["finally"](function(){e.chargementRevuePtfEnCours=!1})}},t.prototype.initStatsFluxMouvementFinancier=function(){var e,t=this;if(this.chargementFluxEnCours=!0,this.estVueMultiSuiviPar)e=this.statService.getStatsFluxMouvementFinancierEds();else{var i=_.pluck(_.where(this.portefeuilleService.getListePortefeuillesVisu(),{estAffiche:!0}),"id");e=this.statService.getStatsFluxMouvementFinancier(i,null)}e.then(function(e){e&&2===e.length?(t.creerBlocFluxCrediteurs(e[0]),t.creerBlocFluxDebiteurs(e[1]),t.isInitFlux=!0):t.initStatFlux()})["catch"](function(e){t.isInitFlux=!1,t.messageInitFlux="Un problème technique empêche la récupération des données: "+e.libelle})["finally"](function(){t.chargementFluxEnCours=!1})},t.prototype.reinitInitStats=function(){this.initStatPtf(),this.initStatRdv(),this.initStatRevuePtf(),this.initStatRentab(),this.initStatFlux(),this.creationDonutService.viderDonut()},t.prototype.debrancherVersDetailsPorteuille=function(){this.popupService.showModalFull("vues/template-modale/modale-details-portefeuille-vue.html","ModaleDetailsPortefeuilleControleur",this.statService.getStatsDetail()).then(function(e){})},t.prototype.debrancherVersDetailsTauxVisite=function(){this.popupService.showModalFull("vues/template-modale/modale-details-taux-visite-vue.html","ModaleDetailsTauxVisiteControleur",this.statService.getStatsDetail()).then(function(e){})},t.prototype.debrancherVersDetailsRentabilitePNB=function(){this.popupService.showModalFull("vues/template-modale/modale-details-rentabilite-pnb-vue.html","ModaleDetailsRentabilitePNBControleur",this.statService.getStatsDetail()).then(function(e){})},t.prototype.debrancherVersDetailsRevuePortfeuille=function(){this.popupService.showModalFull("vues/template-modale/modale-details-revue-portefeuille-vue.html","ModaleDetailsRevuePortefeuilleControleur",this.statService.getStatsDetail()).then(function(e){})},t.prototype.debrancherVersDetailsFluxCrediteur=function(){this.popupService.showModalFull("vues/template-modale/modale-details-flux-crediteur-vue.html","ModaleDetailsFluxCrediteurControleur",this.statService.getStatsDetail()).then(function(e){})},t.prototype.debrancherVersDetailsFluxDebiteur=function(){this.popupService.showModalFull("vues/template-modale/modale-details-flux-debiteur-vue.html","ModaleDetailsFluxDebiteurControleur",this.statService.getStatsDetail()).then(function(e){})},t.prototype.initStatRdv=function(){this.messageInitRdv=e.Constantes.Messages.MESSAGE_NO_DATA_STATS,this.isInitRdv=!1},t.prototype.initStatPtf=function(){this.messageInitPtf=e.Constantes.Messages.MESSAGE_NO_DATA_STATS,this.isInitPtf=!1},t.prototype.initStatRevuePtf=function(){this.messageInitRevuePtf=e.Constantes.Messages.MESSAGE_NO_DATA_STATS,this.isInitRevuePtf=!1},t.prototype.initStatRentab=function(){this.messageInitRentab=e.Constantes.Messages.MESSAGE_NO_DATA_STATS,this.isInitRentab=!1},t.prototype.initStatFlux=function(){this.messageInitFlux=e.Constantes.Messages.MESSAGE_NO_DATA_STATS,this.isInitFlux=!1},t.prototype.creerConfigBoutonDetailsPortefeuille=function(){this.estVueMultiSuiviPar?this.configBoutonDetailsPortefeuille=null:(this.configBoutonDetailsPortefeuille={},this.configBoutonDetailsPortefeuille.label="Accéder",this.configBoutonDetailsPortefeuille.action=this.accederGestionPortefeuilles)},t.prototype.creerConfigBoutonDetailsPortefeuilleExpert=function(){this.configBoutonDetailsPortefeuilleExpert={},this.configBoutonDetailsPortefeuilleExpert.label="Accéder",this.configBoutonDetailsPortefeuilleExpert.action=this.accederGestionPortefeuillesExpert},t.prototype.creerBlocPtf=function(t){this.dataIndicateurClientsPmeEsi={},this.dataIndicateurClientsPmeEsi.intitule=e.Constantes.Application.BADGE_CLIENTS_PME_ESI,this.dataIndicateurClientsPmeEsi.valeur=t.nombreClientsPMEESI.toString(),this.dataIndicateurClientsPEetPEES={},this.dataIndicateurClientsPEetPEES.intitule=e.Constantes.Application.BADGE_CLIENTS_PE_ET_PEES,this.dataIndicateurClientsPEetPEES.valeur=t.nombreClientsPEetPEES.toString(),this.dataIndicateurClientsPEetPEES.isSousIntitule=!0,this.dataIndicateurClientsMEetMEES={},this.dataIndicateurClientsMEetMEES.intitule=e.Constantes.Application.BADGE_CLIENTS_ME_ET_MEES,this.dataIndicateurClientsMEetMEES.valeur=t.nombreClientsMEetMEES.toString(),this.dataIndicateurClientsMEetMEES.isSousIntitule=!0,this.dataIndicateurClientsGEetGEES={},this.dataIndicateurClientsGEetGEES.intitule=e.Constantes.Application.BADGE_CLIENTS_GE_ET_GEES,this.dataIndicateurClientsGEetGEES.valeur=t.nombreClientsGEetGEES.toString(),this.dataIndicateurClientsGEetGEES.isSousIntitule=!0,this.dataIndicateurClientsPro={},this.dataIndicateurClientsPro.intitule=e.Constantes.Application.BADGE_CLIENTS_PRO,this.dataIndicateurClientsPro.valeur=t.nombreClientsPro.toString(),this.dataIndicateurAutres={},this.dataIndicateurAutres.intitule=e.Constantes.Application.BADGE_AUTRES_CLIENTS,this.dataIndicateurAutres.valeur=t.nombreClientsAutres.toString(),this.creerConfigDonutSegRel(t),this.creerConfigDiagrammeColonnePortefeuille(t)},t.prototype.creerBlocRdv=function(t){this.dataIndicateurNbRdvClientsRealisesAnneeEnCours={},this.dataIndicateurNbRdvClientsRealisesAnneeEnCours.intitule=e.Constantes.Application.BADGE_CLIENTS_REALISES_ANNEE_EN_COURS,this.dataIndicateurNbRdvClientsRealisesAnneeEnCours.valeur=t.nombreRdvClientAnneeEnCours.toString(),this.dataIndicateurNbRdvClientsRealisesAnneeEnCours.isSousIntitule=!0,this.dataIndicateurNbRdvProspectsRealisesAnneeEnCours={},this.dataIndicateurNbRdvProspectsRealisesAnneeEnCours.intitule=e.Constantes.Application.BADGE_PROSPECTS_REALISES_ANNEE_EN_COURS,this.dataIndicateurNbRdvProspectsRealisesAnneeEnCours.valeur=t.nombreRdvProspectAnneeCivile.toString(),this.dataIndicateurNbRdvProspectsRealisesAnneeEnCours.isSousIntitule=!0,this.dataIndicateurNbRdvRealisesAnneeEnCours={},this.dataIndicateurNbRdvRealisesAnneeEnCours.intitule=e.Constantes.Application.BADGE_RDV_REALISES_ANNEE_EN_COURS,this.dataIndicateurNbRdvRealisesAnneeEnCours.valeur=(t.nombreRdvClientAnneeEnCours+t.nombreRdvProspectAnneeCivile).toString(),this.dataIndicateurNbRdvProspectsVusAnneeEnCours={},this.dataIndicateurNbRdvProspectsVusAnneeEnCours.intitule=e.Constantes.Application.BADGE_PROSPECTS_VUS_ANNEE_EN_COURS,this.dataIndicateurNbRdvProspectsVusAnneeEnCours.valeur=t.nombreRdvProspectAnneeEnCours.toString(),this.dataIndicateurNbRelationsEconomiquesAnneeEnCours={},this.dataIndicateurNbRelationsEconomiquesAnneeEnCours.intitule=e.Constantes.Application.BADGE_RELATION_ECONOMIQUE_ANNEE_EN_COURS,this.dataIndicateurNbRelationsEconomiquesAnneeEnCours.valeur=t.nombreRdvRelationEcoClient.toString(),this.configPourcentageVisites={},this.configPourcentageVisites.titre="Taux de visites (relations économiques)",this.configPourcentageVisites.pourcentageUn=t.rdvTauxVisite,this.configPourcentageVisites.degrade=e.Services.LibrairieD3.DEGRADE_POURCENTAGE.BLEU},t.prototype.creerConfigDonutSegRel=function(t){this.configDonutSegRel={},this.configDonutSegRel.titre=e.Constantes.Application.GRAPHE_SEGMENTATION_TITRE_GROUPE,this.configDonutSegRel.degrade=e.Services.LibrairieD3.DEGRADE_DONUT.ROSE;var i=[];t.nombreClientsPMEESI>t.nombreClientsPro?(this.configDonutSegRel.donutChoisi=e.Constantes.Application.DONUT_PME_ESI,this.configDonutSegRel.nombreClients=t.nombreClientsPMEESI.toString(),_.forEach(t.listeSegmentationsPMEESI,function(e){var t={};t.nom=e.libelle,t.pourcentage=e.pourcentage,i.push(t)})):(this.configDonutSegRel.donutChoisi=e.Constantes.Application.DONUT_PRO,this.configDonutSegRel.nombreClients=t.nombreClientsPro.toString(),_.forEach(t.listeSegmentationsPro,function(e){var t={};t.nom=e.libelle,t.pourcentage=e.pourcentage,i.push(t)})),this.configDonutSegRel.listeDonnees=i,this.eventService.initialiserPfDiagrammeDonutControleur()},t.prototype.creerConfigDiagrammeColonnePortefeuille=function(t){this.configDiagrammeColonnePortefeuille=[];var i=Math.max(t.nombreRelations,t.nombreClientsAvecProduitService,t.nombreClientsSansContratEtProspect);this.configDiagrammeColonnePortefeuille.push({id:"colonne-relations",intitule:e.Constantes.Application.DIAGRAMME_COLONNE_RELATIONS,valeur:t.nombreRelations,couleur:e.Modeles.Application.COULEUR_GRANDE_COLONNE.COULEUR_RELATIONS,hauteur:e.Services.Utils.ApplicationUtils.calculerHauteurRelativeColonne(i,t.nombreRelations),estMontant:!1}),this.configDiagrammeColonnePortefeuille.push({id:"colonne-clients",intitule:e.Constantes.Application.DIAGRAMME_COLONNE_CLIENTS,sousIntitule:e.Constantes.Application.DIAGRAMME_COLONNE_CLIENTS_ACTIFS,valeur:t.nombreClientsAvecProduitService,sousValeur:t.nombreClientsActifs,couleur:e.Modeles.Application.COULEUR_GRANDE_COLONNE.COULEUR_CLIENT,couleurSousValeur:e.Modeles.Application.COULEUR_GRANDE_COLONNE.COULEUR_ACTIF,hauteur:e.Services.Utils.ApplicationUtils.calculerHauteurRelativeColonne(i,t.nombreClientsAvecProduitService-t.nombreClientsActifs),sousHauteur:e.Services.Utils.ApplicationUtils.calculerHauteurRelativeColonne(i,t.nombreClientsActifs),estMontant:!1}),this.configDiagrammeColonnePortefeuille.push({id:"colonne-prospects",intitule:e.Constantes.Application.DIAGRAMME_COLONNE_PROSPECTS,valeur:t.nombreClientsSansContratEtProspect,couleur:e.Modeles.Application.COULEUR_GRANDE_COLONNE.COULEUR_SANS_CONTRAT,hauteur:e.Services.Utils.ApplicationUtils.calculerHauteurRelativeColonne(i,t.nombreClientsSansContratEtProspect),estMontant:!1})},t.prototype.creerConfigBoutonAccederRevuePortefeuille=function(){this.estVueMultiSuiviPar?this.configBoutonAccederRevuePortefeuille=null:(this.configBoutonAccederRevuePortefeuille={},this.configBoutonAccederRevuePortefeuille.label="Accéder",this.configBoutonAccederRevuePortefeuille.action=this.accederRevuePortefeuilles)},t.prototype.creerBlocRevuePortefeuille=function(t){this.configPourcentagePortefeuilleRealise={},this.configPourcentagePortefeuilleRealise.titre=e.Constantes.Application.GRAPHE_REVUE_PORTEFEUILLE,this.configPourcentagePortefeuilleRealise.pourcentageUn=t.pourcentageRevuePtfRealisee,this.configPourcentagePortefeuilleRealise.degrade=e.Services.LibrairieD3.DEGRADE_POURCENTAGE.BLEU,this.dataIndicateurNbProduitsAEquiper={},this.dataIndicateurNbProduitsAEquiper.intitule=e.Constantes.Application.BADGE_PRODUITS_PROPOSER,this.estVueMultiSuiviPar?(this.dataIndicateurNbProduitsAEquiper.debranchementLisa=e.Enum.Revue.POPUP_REVUE.POPUP_CLIENTS_PRODUIT_A_PROPOSER,this.dataIndicateurNbProduitsAEquiper.debranchementLocal=null):(this.dataIndicateurNbProduitsAEquiper.debranchementLisa=e.Constantes.CodeProcessusLisa.CODE_LISA_BILAN_REVUES_PORTEFEUILLE,this.dataIndicateurNbProduitsAEquiper.debranchementLocal=e.Constantes.Url.BILAN_REVUES_PORTEFEUILLE),this.dataIndicateurNbProduitsAEquiper.valeur=t.nombreDeProduitsAProposer.toString(),this.dataIndicateurNbProduitsAppetence={},this.dataIndicateurNbProduitsAppetence.intitule=e.Constantes.Application.BADGE_APPETENCE_PRODUITS,this.estVueMultiSuiviPar?(this.dataIndicateurNbProduitsAEquiper.debranchementLisa=e.Enum.Revue.POPUP_REVUE.POPUP_CLIENTS_APPETENCE_PRODUIT,this.dataIndicateurNbProduitsAEquiper.debranchementLocal=null):(this.dataIndicateurNbProduitsAppetence.debranchementLisa=e.Constantes.CodeProcessusLisa.CODE_LISA_BILAN_APPETENCES_PORTEFEUILLE,this.dataIndicateurNbProduitsAppetence.debranchementLocal=e.Constantes.Url.BILAN_APPETENCES_PORTEFEUILLE),this.dataIndicateurNbProduitsAppetence.valeur=t.nombreDeClientsAAppetence?t.nombreDeClientsAAppetence.toString():"0",this.afficheAppetencesProduits=t.nombreDeClientsAAppetence&&0!==t.nombreDeClientsAAppetence?!0:!1,this.dataIndicateurNbClientsAActiver={},this.dataIndicateurNbClientsAActiver.intitule=e.Constantes.Application.BADGE_CLIENTS_ACTIVER,this.dataIndicateurNbClientsAActiver.debranchementLisa=this.estVueMultiSuiviPar?0:e.Enum.Revue.POPUP_REVUE.POPUP_CLIENTS_A_ACTIVER,this.dataIndicateurNbClientsAActiver.valeur=t.nombreDeClientsAActiver.toString(),this.dataIndicateurNbClientsARenegocier={},this.dataIndicateurNbClientsARenegocier.intitule=e.Constantes.Application.BADGE_CLIENTS_RENEGOCIER,this.dataIndicateurNbClientsARenegocier.debranchementLisa=this.estVueMultiSuiviPar?0:e.Enum.Revue.POPUP_REVUE.POPUP_CLIENTS_TARIFICATION,this.dataIndicateurNbClientsARenegocier.valeur=t.nombreDeClientsARenegocier?t.nombreDeClientsARenegocier.toString():"0",this.dataIndicateurNbPropositionsEnCours={},this.dataIndicateurNbPropositionsEnCours.intitule=e.Constantes.Application.BADGE_PROPOSITIONS_EN_COURS,this.dataIndicateurNbPropositionsEnCours.debranchementLisa=this.estVueMultiSuiviPar?0:e.Constantes.CodeProcessusLisa.CODE_LISA_PROPOSITONS,this.dataIndicateurNbPropositionsEnCours.debranchementLocal=null,this.dataIndicateurNbPropositionsEnCours.valeur=t.nombreDePropositionsEnCours.toString(),this.dataIndicateurNbAffairesEnCours={},this.dataIndicateurNbAffairesEnCours.intitule=e.Constantes.Application.BADGE_AFFAIRES_EN_COURS,this.dataIndicateurNbAffairesEnCours.debranchementLisa=this.estVueMultiSuiviPar?0:e.Constantes.CodeProcessusLisa.CODE_LISA_GESTION_AFFAIRES,this.dataIndicateurNbAffairesEnCours.debranchementLocal=null,this.dataIndicateurNbAffairesEnCours.valeur=t.nombreDeAffairesEnCours.toString()},t.prototype.creerBlocRentab=function(e){this.creerConfigPourcentageRentabilite(e),this.configFlecheRentabilite=this.indicateurFlecheService.getConfigIndicateurFleche(e.tauxEvolutionPnb),this.creerConfigDiagrammeColonneRentabilite(e)},t.prototype.creerBlocFluxCrediteurs=function(e){this.configFlecheFluxCrediteurs=this.indicateurFlecheService.getConfigIndicateurFleche(e.tauxEvolutionFlux),this.creerConfigDiagrammeColonneFluxCrediteurs(e)},t.prototype.creerBlocFluxDebiteurs=function(e){this.configFlecheFluxDebiteurs=this.indicateurFlecheService.getConfigIndicateurFleche(e.tauxEvolutionFlux),this.creerConfigDiagrammeColonneFluxDebiteurs(e)},t.prototype.creerConfigDiagrammeColonneFluxCrediteurs=function(t){this.configDiagrammeColonneFluxCrediteurs=[];var i=Math.max(t.flux12DerniersMoisGlissantN,t.flux12DerniersMoisGlissNMoins1),n={};n.intitule=t?moment(t.dateDebFlux12DerMoisGlissNMoins1).format("MM/YYYY")+" à "+moment(t.dateFinFlux12DerMoisGlissNMoins1).format("MM/YYYY"):"",n.valeur=t?t.flux12DerniersMoisGlissNMoins1:0,n.couleur=e.Modeles.Application.COULEUR_GRANDE_COLONNE.COULEUR_PERIODE2,n.estMontant=!0,n.hauteur=e.Services.Utils.ApplicationUtils.calculerHauteurRelativeColonne(i,t.flux12DerniersMoisGlissNMoins1),n.nePasAfficherIntitule=!0,this.configDiagrammeColonneFluxCrediteurs.push(n);var r={};r.intitule=t?moment(t.dateDebFlux12DerMoisGlissN).format("MM/YYYY")+" à "+moment(t.dateFinFlux12DerMoisGlissN).format("MM/YYYY"):"",r.valeur=t?t.flux12DerniersMoisGlissantN:0,r.couleur=e.Modeles.Application.COULEUR_GRANDE_COLONNE.COULEUR_PERIODE1,r.estMontant=!0,r.hauteur=e.Services.Utils.ApplicationUtils.calculerHauteurRelativeColonne(i,t.flux12DerniersMoisGlissantN),r.nePasAfficherIntitule=!0,this.configDiagrammeColonneFluxCrediteurs.push(r)},t.prototype.creerConfigDiagrammeColonneFluxDebiteurs=function(t){this.configDiagrammeColonneFluxDebiteurs=[];var i=Math.max(t.flux12DerniersMoisGlissantN,t.flux12DerniersMoisGlissNMoins1),n={};n.intitule=t?moment(t.dateDebFlux12DerMoisGlissNMoins1).format("MM/YYYY")+" à "+moment(t.dateFinFlux12DerMoisGlissNMoins1).format("MM/YYYY"):"",n.valeur=t?t.flux12DerniersMoisGlissNMoins1:0,n.couleur=e.Modeles.Application.COULEUR_GRANDE_COLONNE.COULEUR_PERIODE2,n.estMontant=!0,n.hauteur=e.Services.Utils.ApplicationUtils.calculerHauteurRelativeColonne(i,t.flux12DerniersMoisGlissNMoins1),n.nePasAfficherIntitule=!0,this.configDiagrammeColonneFluxDebiteurs.push(n);var r={};r.intitule=t?moment(t.dateDebFlux12DerMoisGlissN).format("MM/YYYY")+" à "+moment(t.dateFinFlux12DerMoisGlissN).format("MM/YYYY"):"",r.valeur=t?t.flux12DerniersMoisGlissantN:0,r.couleur=e.Modeles.Application.COULEUR_GRANDE_COLONNE.COULEUR_PERIODE1,r.estMontant=!0,r.hauteur=e.Services.Utils.ApplicationUtils.calculerHauteurRelativeColonne(i,t.flux12DerniersMoisGlissantN),r.nePasAfficherIntitule=!0,this.configDiagrammeColonneFluxDebiteurs.push(r)},t.prototype.creerConfigDiagrammeColonneRentabilite=function(t){this.configDiagrammeColonneRentabilite=[];var i=Math.max(t.pnb12DerniersMoisGlissantN,t.pnb12DerniersMoisGlissNMoins1,t.pnb3112AnneeNMoins1),n={};n.intitule=t.dateDebPnb3112AnneeNMoins1&&moment(t.dateDebPnb3112AnneeNMoins1).isValid()?"31/12/"+t.dateDebPnb3112AnneeNMoins1.getFullYear().toString():"Année précédente",n.valeur=t?t.pnb3112AnneeNMoins1:0,n.couleur=e.Modeles.Application.COULEUR_GRANDE_COLONNE.COULEUR_PERIODE3,n.estMontant=!0,n.nePasAfficherIntitule=!0,n.hauteur=e.Services.Utils.ApplicationUtils.calculerHauteurRelativeColonne(i,t.pnb3112AnneeNMoins1),this.configDiagrammeColonneRentabilite.push(n);var r={};r.intitule=t?moment(t.dateDebPnb12DerMoisGlissNMoins1).format("DD/MM/YYYY")+" à "+moment(t.dateFinPnb12DerMoisGlissNMoins1).format("DD/MM/YYYY"):"",r.valeur=t?t.pnb12DerniersMoisGlissNMoins1:0,r.couleur=e.Modeles.Application.COULEUR_GRANDE_COLONNE.COULEUR_PERIODE2,r.estMontant=!0,r.nePasAfficherIntitule=!0,r.hauteur=e.Services.Utils.ApplicationUtils.calculerHauteurRelativeColonne(i,t.pnb12DerniersMoisGlissNMoins1),this.configDiagrammeColonneRentabilite.push(r);var o={};o.intitule=t?moment(t.dateDebPnb12DerMoisGlissN).format("DD/MM/YYYY")+" à "+moment(t.dateFinPnb12DerMoisGlissN).format("DD/MM/YYYY"):"",o.valeur=t?t.pnb12DerniersMoisGlissantN:0,o.couleur=e.Modeles.Application.COULEUR_GRANDE_COLONNE.COULEUR_PERIODE1,o.estMontant=!0,o.nePasAfficherIntitule=!0,o.hauteur=e.Services.Utils.ApplicationUtils.calculerHauteurRelativeColonne(i,t.pnb12DerniersMoisGlissantN),this.configDiagrammeColonneRentabilite.push(o)},t.prototype.creerConfigPourcentageRentabilite=function(t){this.configPourcentageRentabilite={},this.configPourcentageRentabilite.titre=e.Constantes.Application.GRAPHE_POIDS_PNB,this.configPourcentageRentabilite.pourcentageUn=t?t.ratioPNBImportants:0,this.configPourcentageRentabilite.degrade=e.Services.LibrairieD3.DEGRADE_POURCENTAGE.BLEU},t.CLASS_NAME="PortefeuilleControleur",t.logger=i(t.CLASS_NAME),t.$inject=[e.Constantes.Inject.MyWay.serviceAgentExtended,e.Constantes.Inject.Angular.$q,e.Constantes.Inject.Angular.$scope,e.Constantes.Inject.Angular.$location,e.Constantes.Inject.Services.portefeuilleService,e.Constantes.Inject.Services.eventService,e.Constantes.Inject.Services.statService,e.Constantes.Inject.Services.ihmService,e.Constantes.Inject.Services.contexteService,e.Constantes.Inject.Services.habilitationService,e.Constantes.Inject.LibrairieD3.creationDonutService,e.Constantes.Inject.Services.indicateurFlecheService,e.Constantes.Inject.Services.popupService],t}();t.PortefeuilleControleur=n,e.app.controller("PortefeuilleControleur",n)}(t=e.Controleurs||(e.Controleurs={}))}(Portefeuille||(Portefeuille={}));var Portefeuille;!function(e){var t;!function(t){"use strict";var i=MyWay.Services.Loggers.LoggerFactory.INSTANCE.getClass,n=function(){function t(t,i,n,r,o,l,a,s,u,c,E,d){var p=this;this.$scope=t,this.serviceAgentExtended=i,this.$q=n,this.$location=r,this.ihmService=o,this.preferencesService=l,this.indicateurService=a,this.modalePaniersService=s,this.listeClientsService=u,this.filtreService=c,this.eventService=E,this.contexteService=d,this.panierDeposeEvent=function(t){t.indicateur.choisi=!0;var i={};i.id=p.modalePaniersService.genererIdentifiantAleatoire(),i.indicateur=t.indicateur,p.listeTuilePanierSettings.push(i),p.setEstActiverDropPanier(!1),p.modalePaniersService.desactiverDropTuilesPanier(p.listeTuilePanierSettings),p.rafraichirListeTuileCatalogueSettings(),p.getNombreIndicateurPanier()===e.Constantes.ModalePaniers.NOMBRE_INDICATEUR_MAX&&_.forEach(p.listeTuileCatalogueSettings,function(e){e.dragSettings.desactiverDrag()}),p.$scope.$applyAsync()},this.poubelleDeposeEvent=function(e){var t=_.find(p.listeTuileCatalogueSettings,function(t){return t.indicateur.indicateur.code===e.indicateur.indicateur.code});t.estEnEdition=!0,p.modalePaniersService.supprimerIndicateurPanier(e,p.listeTuileCatalogueSettings,p.listeTuilePanierSettings,void 0,void 0),p.setEstAfficherDropPoubelle(!1),p.modalePaniersService.desactiverDropTuilesPanier(p.listeTuilePanierSettings)},this.txtTooltip='Le bouton "Gérer la sélection" permet de :\n -Ajouter, supprimer et ordonner les indicateurs.\n -Modifier le nom de la sélection.',this.initialiser()}return t.prototype.initialiser=function(){var i=this;return t.logger.info(">>> Appel de la méthode : SelectionIndicateursControleur.initialiser <<<"),this.erreurSelection=!1,this.estDispoAjoutSelection=!1,this.modalePaniersService.setSelectionIndicateursControleur(this),this.strFilArianePageActuelle=e.Constantes.Application.FIL_ARIANE_PAGE_SELECTION_INDICATEURS,this.strFilArianePageOrigine=this.ihmService.getTypeVue()===e.Enum.PageClients.TYPE_VUE.VUE_CLIENTS?"Clients":"Relations économiques",this.estEnEditionPanier||(this.estEnEditionPanier=!1),this.listeTotaleIndicateurs=this.indicateurService.getListeTotaleIndicateursType(),this.preferencesService.lirePaniers(this.listeTotaleIndicateurs,!0).then(function(t){return i.listePaniers||(i.listePaniers=t?t:[]),i.estDispoAjoutSelection=!i.listePaniers||i.listePaniers.length<e.Constantes.Application.LIMITE_NB_PANIERS,i.panierEnCours||(i.panierEnCours=e.Services.Utils.ApplicationUtils.recupererPanierDefaut(i.listePaniers),i.panierDefaut||(i.panierDefaut=i.panierEnCours)),
i.creationListeCatalogueSettings(),i.creationListePanierSettings(),i.panierDropSettings=i.panierDropSettings?i.panierDropSettings:i.modalePaniersService.creerDropSettings(i.panierDeposeEvent),i.poubelleDropSettings=i.poubelleDropSettings?i.poubelleDropSettings:i.modalePaniersService.creerDropSettings(i.poubelleDeposeEvent),i.setEstActiverDropPanier(i.estEnEditionPanier),i.setEstAfficherDropPoubelle(i.estEnEditionPanier),0===i.listePaniers.length?i.ajouterSelection():i.$q.when()})},t.prototype.rafraichirListeTuileCatalogueSettings=function(){var t=this;this.estEnEditionPanier&&(_.forEach(this.listeTuilePanierSettings,function(e){e.estEnEdition=!0}),_.forEach(this.listeTuileCatalogueSettings,function(i){if(t.listeTuilePanierSettings.length>=e.Constantes.ModalePaniers.NOMBRE_INDICATEUR_MAX)i.estEnEdition=!1,i.dragSettings.desactiverDrag();else{var n=_.find(t.listeTuilePanierSettings,function(e){return i.indicateur.indicateur.code===e.indicateur.indicateur.code});n?(i.estEnEdition=!1,i.indicateur.choisi=!0,i.dragSettings.desactiverDrag()):(i.estEnEdition=!0,i.dragSettings.activerDrag())}}))},t.prototype.getNombreIndicateurPanier=function(){return this.listeTuilePanierSettings.length},t.prototype.setEstActiverDropPanier=function(e){e?(this.estAfficherDropPanier=!0,this.panierDropSettings.activerDragOver&&this.panierDropSettings.activerDragOver()):(this.estAfficherDropPanier=!1,this.panierDropSettings.desactiverDragOver&&this.panierDropSettings.desactiverDragOver()),this.$scope.$applyAsync()},t.prototype.setEstAfficherDropPoubelle=function(e){e?this.poubelleDropSettings.activerDragOver&&this.poubelleDropSettings.activerDragOver():this.poubelleDropSettings.desactiverDragOver&&this.poubelleDropSettings.desactiverDragOver(),this.$scope.$applyAsync()},t.prototype.creationListePanierSettings=function(){var e=this;this.listeTuilePanierSettings=[],this.panierEnCours&&_.forEach(this.panierEnCours.listeChoixIndicateurs,function(t){var i={};i.id=e.modalePaniersService.genererIdentifiantAleatoire(),i.indicateur=t,i.estEnEdition=e.estEnEditionPanier,e.listeTuilePanierSettings.push(i)})},t.prototype.creationListeCatalogueSettings=function(){var t=this;this.listeTuileCatalogueSettings=[],_.forEach(this.listeTotaleIndicateurs,function(i){if(i.estVisibleColonne){var n={};n.id=t.modalePaniersService.genererIdentifiantAleatoire(),n.estEnEdition=t.estEnEditionPanier&&t.panierEnCours.listeChoixIndicateurs.length<e.Constantes.ModalePaniers.NOMBRE_INDICATEUR_MAX;var r=void 0;if(t.panierEnCours&&(r=_.find(t.panierEnCours.listeChoixIndicateurs,function(e){return e.indicateur.code===i.code})),r)n.indicateur=r,n.estEnEdition=!1;else{var o={};o.indicateur=i,o.choisi=!1,n.indicateur=o}t.listeTuileCatalogueSettings.push(n)}})},t.prototype.afficherMessageAvertissementFiltre=function(e,t,i,n){this.nomFiltre1=e,this.nomFiltre2=t,this.nomFiltre3=i,this.nomFiltre4=n},t.prototype.getEtatNbIndicateurs=function(){return this.panierEnCours?"Nombre d'indicateurs: "+this.listeTuilePanierSettings.length+"/"+e.Constantes.ModalePaniers.NOMBRE_INDICATEUR_MAX:""},t.prototype.getEtatNbSelections=function(){return this.listePaniers?this.listePaniers.length+"/"+e.Constantes.Application.LIMITE_NB_PANIERS:""},t.prototype.getRoleIndicateurSelection=function(){return this.erreurSelection?"alert":void 0},t.prototype.getRoleIndicateurNom=function(){return this.myForm.nom.$invalid?"alert":void 0},t.prototype.gererSelection=function(){var i=this;return this.contexteService.tracerSuiviAction(t.logger,e.Constantes.ActionsRemarquables.BTN_PERSO_INDIC),this.panierEnCours?(this.estEnEditionPanier=!0,this.modalePaniersService.majEstEditionPanier(!0),this.nomSelTemp=this.panierEnCours.nom,this.chargementEnCours=!0,this.initialiser().then(function(){i.chargementEnCours=!1})):(this.erreurSelection=!0,this.$q.when())},t.prototype.changePanier=function(e){return this.panierEnCours=e,this.erreurSelection=!1,this.initialiser()},t.prototype.ajouterSelection=function(){return this.panierEnCours=e.Services.Utils.ApplicationUtils.recupererNouvelleSelection(),this.listePaniers.push(this.panierEnCours),this.estEnEditionPanier=!0,this.modalePaniersService.majEstEditionPanier(!0),this.estCreationSelection=!0,this.initialiser()},t.prototype.appliquer=function(){var t=this;return this.panierEnCours?(this.chargementEnCours=!0,_.forEach(this.listePaniers,function(e){e.numero===t.panierEnCours.numero?e.estDefaut=!0:e.estDefaut=!1}),this.majIndicateursClientsPanierEnCours().then(function(){return t.preferencesService.ecrirePaniers(t.listePaniers).then(function(){return t.$location.path(e.Constantes.Url.CLIENTS),t.$q.when()})})):(this.erreurSelection=!0,this.$q.when())},t.prototype.majIndicateursClientsPanierEnCours=function(){return this.majIndicateursClientsPanier(this.panierEnCours.listeChoixIndicateurs)},t.prototype.majIndicateursClientsPanierDefaut=function(){return this.majIndicateursClientsPanier(this.panierDefaut.listeChoixIndicateurs)},t.prototype.majIndicateursClientsPanier=function(e){var t=this.indicateurService.getListeEcartIndicateurParametrable(e);return this.indicateurService.setListeIndicateurChoix(e),t.length>0?this.listeClientsService.majClientsIndicateurs(t):this.$q.when()},t.prototype.retour=function(){var t=this;return this.chargementEnCours=!0,this.panierDefaut?this.majIndicateursClientsPanierDefaut().then(function(){return t.$location.path(e.Constantes.Url.CLIENTS),t.$q.when()}):(this.$location.path(e.Constantes.Url.CLIENTS),this.$q.when())},t.prototype.annulerModifSelection=function(){var t=this;return this.chargementEnCours=!0,this.estCreationSelection?(_.remove(this.listePaniers,function(e){return!e.numero}),this.panierEnCours=e.Services.Utils.ApplicationUtils.recupererPanierDefaut(this.listePaniers)):this.panierEnCours.nom=this.nomSelTemp,this.estEnEditionPanier=!1,this.modalePaniersService.majEstEditionPanier(!1),this.initialiser().then(function(){t.chargementEnCours=!1})},t.prototype.enregistrerSelection=function(){var e=this;return this.chargementEnCours=!0,this.estFormulaireValide()?(this.majPanierEnCoursAvecListeTuilesPanierSettings(),this.panierDefaut||(this.panierDefaut=this.panierEnCours),this.preferencesService.ecrirePaniers(this.listePaniers).then(function(){return e.estEnEditionPanier=!1,e.modalePaniersService.majEstEditionPanier(!1),e.initialiser().then(function(){e.chargementEnCours=!1})})):(this.chargementEnCours=!1,this.$q.reject())},t.prototype.estNomAChanger=function(){return e.Services.Utils.ApplicationUtils.estOkNomSelection(this.panierEnCours.nom)?!1:!0},t.prototype.estFormulaireValide=function(){var e=this;if(this.panierEnCours.nom){var t=!0;return _.find(this.listePaniers,function(i){i.nom.toLowerCase()===e.panierEnCours.nom.toLowerCase()&&i.numero!==e.panierEnCours.numero&&(e.messageErreurNomSelection="Nom de sélection déja utilisé",t=!1)}),t&&(this.messageErreurNomSelection=""),t}return this.messageErreurNomSelection="Le nom de la sélection est obligatoire",!1},t.prototype.afficherTuileEmplacementVide=function(){return this.listeTuilePanierSettings.length<e.Constantes.ModalePaniers.NOMBRE_INDICATEUR_MAX},t.prototype.majPanierEnCoursAvecListeTuilesPanierSettings=function(){var e=this;this.panierEnCours.listeChoixIndicateurs=[],_.forEach(this.listeTuilePanierSettings,function(t){var i=t.indicateur;e.panierEnCours.listeChoixIndicateurs.push(i)})},t.CLASS_NAME="SelectionIndicateursControleur",t.logger=i(t.CLASS_NAME),t.$inject=[e.Constantes.Inject.Angular.$scope,e.Constantes.Inject.MyWay.serviceAgentExtended,e.Constantes.Inject.Angular.$q,e.Constantes.Inject.Angular.$location,e.Constantes.Inject.Services.ihmService,e.Constantes.Inject.Services.preferencesService,e.Constantes.Inject.Services.indicateurService,e.Constantes.Inject.Services.modalePaniersService,e.Constantes.Inject.Services.listeClientsService,e.Constantes.Inject.Services.filtreService,e.Constantes.Inject.Services.eventService,e.Constantes.Inject.Services.contexteService],t}();t.SelectionIndicateursControleur=n,e.app.controller(n.CLASS_NAME,n)}(t=e.Controleurs||(e.Controleurs={}))}(Portefeuille||(Portefeuille={}));var Portefeuille;!function(e){var t;!function(e){"use strict";var t;!function(e){e.BTN_CHANGER_AGENT="BTN_AGNT",e.BTN_ACCES_LISTE_CLIENTS="LST_PTF",e.BTN_ACCES_LISTE_CLIENTS_REVUE="LST_REV",e.BTN_PANIER="BTN_PANIER",e.BTN_PERSO_INDIC="BTN_INDIC",e.BTN_FILTRES="BTN_FILTRES",e.BTN_EXPORT="BTN_EXPORT",e.BTN_CONS_PROD="BTN_CONS_PROD",e.BTN_EFFC_REVUE="BTN_EFFC_REVUE",e.BTN_SYNTH_PM="BTN_SYNTH_PM"}(t=e.ActionsRemarquables||(e.ActionsRemarquables={}))}(t=e.Constantes||(e.Constantes={}))}(Portefeuille||(Portefeuille={}));var Portefeuille;!function(e){var t;!function(e){"use strict";var t;!function(e){e.EDS_RECH_GLBL_PARAM_CODE_RELATION="002",e.EDS_RECH_GLBL_PARAM_PRES_PM_PAR_FCT=!0,e.RELATION_COMMERCIALE_NB_MAX_RES=350,e.RELATION_COMMERCIALE_NB_MAX_NO_LIMIT=9999,e.RELATION_COMMERCIALE_CODE_MAX_CLIENT_ATTEINT="MAX_CLIENTS_ATTEINT"}(t=e.Service||(e.Service={}))}(t=e.Constantes||(e.Constantes={}))}(Portefeuille||(Portefeuille={}));var Portefeuille;!function(e){var t;!function(e){"use strict";var t;!function(t){t.TITRE_APPLICATION="Animer les portefeuilles PM et EI",t.TITRE_VUE_CLIENT="Liste des clients",t.TITRE_VUE_RELATION="Liste des relations économiques",t.CHAINE_INDICATEUR_ACTIF="Actif",t.CHAINE_INDICATEUR_INACTIF="Inactif",t.CHAINE_INDICATEUR_CLIENT="Client",t.CHAINE_INDICATEUR_TIERS="Tiers",t.CHAINE_INDICATEUR_PROSPECT="Prospect",t.CHAINE_INDICATEUR_LEADER="Leader",t.CHAINE_INDICATEUR_NON_CONNU="NC",t.CHAINE_AJOUT_PERSONNALISATION="Ajouter nouvelle personnalisation",t.CHAINE_OUI="Oui",t.CHAINE_NON="Non",t.FORMAT_DATE_IHM="DD/MM/YYYY",t.FORMAT_DATE_REST="YYYY-MM-DD",t.CODE_HABILITATION_CHOIX_EDS="SHDC23",t.CODE_HABILITATION_AGENCE_NIVEAU_2="SHDC23",t.CODE_HABILITATION_ACCES_PNB="SHDC26",t.CODE_HABILITATION_CONSULT_REVUE="SHDC24",t.CODE_HABILITATION_CONSULT_AFFAIRES="SHP6AF",t.CODE_HABILITATION_CONSULT_PROPOSITIONS="SHPI04",t.CODE_HABILITATION_MAJ_REVUE="SHDC25",t.CODE_HABILITATION_CONSULT_POT_PROSPECT="SHPIQ1",t.CODE_HABILITATION_MAJ_POT_PROSPECT="SHPIQ2",t.CODE_HABILITATION_CONSULT_SEGMENTATIONS="SHDL01",t.CODE_HABILITATION_CHOIX_AGENT="SHDC22",t.TXT_SELECTIONNER_TOUT="Sélectionner tout",t.TXT_DESELECTIONNER_TOUT="Désélectionner tout",t.NB_LIGNE_TABLEAU=20,t.CODE_LEADER_RELATION="L",t.CHAINE_NOM_PANIER_INDICATEUR="Ma sélection d'indicateurs",t.TXT_CHOIX_PORTEFEUILLE="Choix de portefeuille",t.CLASSE_COLONNE_CLIENTS=".colonne-clients",t.CLASSE_COLONNE_RELATIONS=".colonne-relations",t.CLASSE_BTN_FILTRE=".btn-filtre",t.ID_TABLE_CLIENT="#tab-client",t.CLASSE_ACTIF="actif",t.LIMITE_CLIENTS_ATTEINTE_CHOIX_CLIENTS_SINGULIER="Votre portefeuille est filtré, seuls les clients sont affichés.",t.LIMITE_CLIENTS_ATTEINTE_CHOIX_PROSPECTS_SINGULIER="Votre portefeuille est filtré, seuls les prospects sont affichés.",t.LIMITE_CLIENTS_ATTEINTE_CHOIX_CLIENTS_PLURIEL="Vos portefeuilles sont filtrés, seuls les clients sont affichés.",t.LIMITE_CLIENTS_ATTEINTE_CHOIX_PROSPECTS_PLURIEL="Vos portefeuilles sont filtrés, seuls les prospects sont affichés.",t.LIMITE_CLIENTS_ATTEINTE_CHOIX_TOUT_SINGULIER="Votre portefeuille comporte plus de "+e.Service.RELATION_COMMERCIALE_NB_MAX_RES+" clients/prospects.",t.LIMITE_CLIENTS_ATTEINTE_CHOIX_TOUT_PLURIEL="Vos portefeuilles comportent plus de "+e.Service.RELATION_COMMERCIALE_NB_MAX_RES+" clients/prospects.",t.LISTE_RELATIONS_ECONOMIQUES_INACCESSIBLE="La liste des relations économiques n'est pas accessible.",t.INDICATEURS_PREDEFINIS_NON_MODIFIABLES="Les indicateurs sont prédéfinis et non modifiables.",t.NOM_PANIER_FORCAGE="Indicateurs prédéfinis",t.NOM_PANIER_DEFAUT="Ma sélection d'indicateurs",t.NOM_PANIER_CREATION="Sélection d'indicateurs",t.LIMITE_NB_PANIERS=3,t.FIL_ARIANE_PAGE_SELECTION_INDICATEURS="Personnaliser les indicateurs",t.DIAGRAMME_COLONNE_CLIENTS="Clients",t.DIAGRAMME_COLONNE_CLIENTS_ACTIFS="Dont actifs",t.DIAGRAMME_COLONNE_SANS_CONTRAT="Dont clients sans contrat",t.DIAGRAMME_COLONNE_PROSPECTS="Prospects et<br>clients sans contrat",t.DIAGRAMME_COLONNE_RELATIONS="Relations",t.BADGE_CLIENTS_PME_ESI="Clients PME et ESI",t.BADGE_CLIENTS_PE_ET_PEES="Dont clients PE et PEES",t.BADGE_CLIENTS_ME_ET_MEES="Dont clients ME et MEES",t.BADGE_CLIENTS_GE_ET_GEES="Dont clients GE et GEES",t.BADGE_CLIENTS_PRO="Clients Pro",t.BADGE_AUTRES_CLIENTS="Clients autres marchés",t.GRAPHE_SEGMENTATION_TITRE="Segmentation relationnelle",t.GRAPHE_SEGMENTATION_TITRE_GROUPE="Segmentation relationnelle groupe",t.GRAPHE_SEGMENTATION_TITRE_CLIENT="Segmentation relationnelle client",t.PUCE_SEGMENTATION_FIDELISER="A fidéliser",t.PUCE_SEGMENTATION_SURVEILLER="A surveiller",t.PUCE_SEGMENTATION_DEVELOPPER="A développer",t.PUCE_SEGMENTATION_ACQUERIR="A acquérir",t.PUCE_SEGMENTATION_GERER="A gérer",t.PUCE_SEGMENTATION_PRESERVER="A préserver",t.PUCE_SEGMENTATION_NON_SEGMENTE="Non segmenté",t.DONUT_PRO="PRO",t.DONUT_PME_ESI="PME/ESI",t.TABLE_DELOC_SEGMENTATIONS="DU2L",t.GRAPHE_POIDS_PNB="Poids du PNB des 10 relations économiques les plus importantes",t.ID_PORTEFEUILLE_MAX_SPC=20,t.BADGE_PRODUITS_PROPOSER="Produits à proposer",t.BADGE_APPETENCE_PRODUITS="Appétence produits",t.BADGE_CLIENTS_ACTIVER="Clients à activer",t.BADGE_CLIENTS_RENEGOCIER="Tarifications à renégocier",t.BADGE_PROPOSITIONS_EN_COURS="Propositions en cours",t.BADGE_AFFAIRES_EN_COURS="Affaires en cours",t.GRAPHE_REVUE_PORTEFEUILLE="Taux de revues",t.TITRE_PANEL_RDV="Activité commerciale depuis le 1er janvier ",t.TITRE_PANEL_RDV_AVEC_CRE="(RDV avec CRE)",t.BADGE_RDV_REALISES_ANNEE_EN_COURS="RDV réalisés",t.BADGE_CLIENTS_REALISES_ANNEE_EN_COURS="Dont RDV Clients",t.BADGE_PROSPECTS_REALISES_ANNEE_EN_COURS="Dont RDV Prospects et clients sans contrat",t.BADGE_PROSPECTS_VUS_ANNEE_EN_COURS="Prospects rencontrés",t.BADGE_RELATION_ECONOMIQUE_ANNEE_EN_COURS="Relations économiques rencontrées",t.LIBELLE_AGGLOMERAT_ENTREE_RELATION="Entrée en relation",t.LIBELLE_AGGLOMERAT_RISQUE="Risqué",t.LIBELLE_AGGLOMERAT_PRO_NON_CAPTE="Faiblement/Non capté",t.LIBELLE_AGGLOMERAT_PRO_PARTIELLEMENT_CAPTE="Partiellement capté",t.LIBELLE_AGGLOMERAT_PRO_LARGEMENT_CAPTE="Largement capté",t.LIBELLE_AGGLOMERAT_AUTRES="Non concerné/calculé",t.FIN_CHAINE_MAX=(new Date).toDateString(),t.DATE_MIN="1970/01/01",t.DATE_MAX="9999/12/31",t.DONNEE_NUMBER="number",t.DONNEE_STRING="string",t.DONNEE_VALEUR_NUMBER="valeurNumber",t.DONNEE_VALEUR_DATE="valeurDate",t.LIBELLE_NOTE_PROSPECT=["0","1 étoile","2 étoiles","3 étoiles"],t.LIBELLE_TOP_CC_BLANC="Blanc"}(t=e.Application||(e.Application={}))}(t=e.Constantes||(e.Constantes={}))}(Portefeuille||(Portefeuille={}));var Portefeuille;!function(e){var t;!function(e){"use strict";var t;!function(e){e.CONTEXTE_GERR_PORTF="contexteProcessusGererPortefeuille",e.CONTEXTE_VERS_REVUE="contexteVersRevue",e.CONTEXTE_EDS_PORTEFEUILLES="contexteEdsPortefeuilles",e.IDENTIFIANT_PERSONNE="identifiantPersonne",e.ACCES_DEPUIS_BLOC_REVUE="accesDepuisBlocRevue",e.TYPE_SYNTHESE="typeSynthese"}(t=e.Contexte||(e.Contexte={}))}(t=e.Constantes||(e.Constantes={}))}(Portefeuille||(Portefeuille={}));var Portefeuille;!function(e){var t;!function(t){"use strict";var i;!function(t){t.ORDRE_INDICATEUR=[e.Enum.Indicateur.CODE.CA_N_MOINS_1.toString(),e.Enum.Indicateur.CODE.CA_N.toString(),e.Enum.Indicateur.CODE.CLIENTPROSPECT.toString(),e.Enum.Indicateur.CODE.ACTIF.toString(),e.Enum.Indicateur.CODE.EQUIPE.toString(),e.Enum.Indicateur.CODE.LEADER.toString(),e.Enum.Indicateur.CODE.FLUX_CREDITEURS_N.toString(),e.Enum.Indicateur.CODE.FLUX_CREDITEURS_N_MOINS_1.toString(),e.Enum.Indicateur.CODE.FLUX_DEBITEURS_N.toString(),e.Enum.Indicateur.CODE.FLUX_DEBITEURS_N_MOINS_1.toString(),e.Enum.Indicateur.CODE.OBJECTIF_FLUX.toString(),e.Enum.Indicateur.CODE.NB_AFFAIRES_EN_COURS.toString(),e.Enum.Indicateur.CODE.NB_APPETENCES.toString(),e.Enum.Indicateur.CODE.NB_PROPOSITIONS_EN_COURS.toString(),e.Enum.Indicateur.CODE.PNB_3112.toString(),e.Enum.Indicateur.CODE.PNB_N.toString(),e.Enum.Indicateur.CODE.PNB_N_MOINS_1.toString(),e.Enum.Indicateur.CODE.POTENTIEL_PROSPECT.toString(),e.Enum.Indicateur.CODE.SCORE_ACTIVATION.toString(),e.Enum.Indicateur.CODE.SCORE_APPETENCE.toString(),e.Enum.Indicateur.CODE.SCORE_DEFAILLANCE.toString(),e.Enum.Indicateur.CODE.DATE_DERNIER_ENTRETIEN.toString(),e.Enum.Indicateur.CODE.DATE_DERNIER_RDV.toString(),e.Enum.Indicateur.CODE.NB_RDV_12_MOIS_GLISSANTS.toString(),e.Enum.Indicateur.CODE.NB_RDV_ANNEE_EN_COURS.toString(),e.Enum.Indicateur.CODE.DATE_PROCHAIN_RDV.toString(),e.Enum.Indicateur.CODE.REV_DATE_DERNIERE_REVUE.toString(),e.Enum.Indicateur.CODE.REV_NB_SSFAMILLES_PROPOSE.toString(),e.Enum.Indicateur.CODE.REV_VALIDEE_PAR.toString(),e.Enum.Indicateur.CODE.NOTE_BALE2.toString(),e.Enum.Indicateur.CODE.PART_ENGAG.toString(),e.Enum.Indicateur.CODE.PROCHAINE_REVISION.toString(),e.Enum.Indicateur.CODE.MARCHE.toString(),e.Enum.Indicateur.CODE.SEG_RELATIONNELLE.toString(),e.Enum.Indicateur.CODE.SEG_RELATIONNELLE_GROUPE.toString(),e.Enum.Indicateur.CODE.PREMIER_EQUIPEMENT.toString(),e.Enum.Indicateur.CODE.PREMIER_EQUIPEMENT_TAG.toString(),e.Enum.Indicateur.CODE.PREMIER_EQUIPEMENT_TEXTE.toString(),e.Enum.Indicateur.CODE.ENCOURS_BDF.toString(),e.Enum.Indicateur.CODE.BEGACLI.toString()],t.ORDRE_INDICATEUR_REVUE=[e.Enum.Indicateur.CODE.REV_DATE_DERNIERE_REVUE.toString(),e.Enum.Indicateur.CODE.REV_VALIDEE_PAR.toString(),e.Enum.Indicateur.CODE.NB_APPETENCES.toString(),e.Enum.Indicateur.CODE.REV_NB_SSFAMILLES_PROPOSE.toString(),e.Enum.Indicateur.CODE.NB_AFFAIRES_EN_COURS.toString(),e.Enum.Indicateur.CODE.NB_PROPOSITIONS_EN_COURS.toString(),e.Enum.Indicateur.CODE.POTENTIEL_PROSPECT.toString()],t.INDICATEUR_PANIER_FORCAGE=[e.Enum.Indicateur.CODE.SEG_RELATIONNELLE.toString(),e.Enum.Indicateur.CODE.DATE_DERNIER_ENTRETIEN.toString(),e.Enum.Indicateur.CODE.DATE_DERNIER_RDV.toString(),e.Enum.Indicateur.CODE.DATE_PROCHAIN_RDV.toString(),e.Enum.Indicateur.CODE.NB_RDV_ANNEE_EN_COURS.toString(),e.Enum.Indicateur.CODE.NB_RDV_12_MOIS_GLISSANTS.toString()],t.INDICATEUR_EN_EURO=[e.Enum.Indicateur.CODE.PNB_3112.toString(),e.Enum.Indicateur.CODE.PNB_N.toString(),e.Enum.Indicateur.CODE.PNB_N_MOINS_1.toString(),e.Enum.Indicateur.CODEREL.PNB_3112.toString(),e.Enum.Indicateur.CODEREL.PNB_N.toString(),e.Enum.Indicateur.CODEREL.PNB_N_MOINS_1.toString()],t.INDICATEUR_TAG=[e.Enum.Indicateur.CODE.CLIENTPROSPECT.toString(),e.Enum.Indicateur.CODE.ACTIF.toString(),e.Enum.Indicateur.CODE.EQUIPE.toString(),e.Enum.Indicateur.CODE.LEADER.toString(),e.Enum.Indicateur.CODE.PREMIER_EQUIPEMENT_TEXTE.toString()],t.INDICATEUR_CEER_MANUELLEMENT=[e.Enum.Indicateur.CODEREL.REV_NB_SSFAMILLES_PROPOSE.toString(),e.Enum.Indicateur.CODEREL.PNB_3112.toString(),e.Enum.Indicateur.CODEREL.PNB_N.toString(),e.Enum.Indicateur.CODEREL.PNB_N_MOINS_1.toString(),e.Enum.Indicateur.CODEREL.PNB_N_MOINS_1.toString(),e.Enum.Indicateur.CODEREL.NB_AFFAIRES_EN_COURS.toString(),e.Enum.Indicateur.CODEREL.NB_PROPOSITIONS_EN_COURS.toString(),e.Enum.Indicateur.CODEREL.NB_APPETENCES.toString(),e.Enum.Indicateur.CODEREL.SEG_RELATIONNELLE_GROUPE.toString(),e.Enum.Indicateur.CODEREL.REV_DATE_DERNIERE_REVUE.toString(),e.Enum.Indicateur.CODEREL.ENCOURS_BDF.toString()],t.LISTE_COMPARATEUR_COMMUNE=[e.Enum.Filtre.COMPARATEUR.SUPERIEUR,e.Enum.Filtre.COMPARATEUR.INFERIEUR,e.Enum.Filtre.COMPARATEUR.EGALE,e.Enum.Filtre.COMPARATEUR.ENTRE,e.Enum.Filtre.COMPARATEUR.NC],t.LISTE_COMPARATEUR_INTERVAL=[e.Enum.Filtre.COMPARATEUR.SUPERIEUR,e.Enum.Filtre.COMPARATEUR.INFERIEUR,e.Enum.Filtre.COMPARATEUR.ENTRE,e.Enum.Filtre.COMPARATEUR.NC],t.LISTE_COMPARATEUR_DERNIERE_REVUE=[e.Enum.Filtre.COMPARATEUR.ECHUE,e.Enum.Filtre.COMPARATEUR.ENCOURS,e.Enum.Filtre.COMPARATEUR.NONREALISEE],t.LISTE_COMPARATEUR=[e.Enum.Filtre.COMPARATEUR.ECHUE,e.Enum.Filtre.COMPARATEUR.EGALE,e.Enum.Filtre.COMPARATEUR.ENCOURS,e.Enum.Filtre.COMPARATEUR.ENTRE,e.Enum.Filtre.COMPARATEUR.INFERIEUR,e.Enum.Filtre.COMPARATEUR.NC,e.Enum.Filtre.COMPARATEUR.NONREALISEE,e.Enum.Filtre.COMPARATEUR.SUPERIEUR],t.LISTE_INDICATEUR_NUMERIQUE=[e.Enum.Indicateur.TYPE.NOMBRE,e.Enum.Indicateur.TYPE.MONTANT,e.Enum.Indicateur.TYPE.POURCENT],t.LISTE_OPERATEURS_FILTRE=[e.Enum.Filtre.OPERATEUR.ET,e.Enum.Filtre.OPERATEUR.OU],t.LISTE_TOTAL_INDICATEUR=[{code:e.Enum.Indicateur.CODE.CA_N_MOINS_1.toString(),codeRest:e.Enum.Indicateur.CODEREST.CA_N_MOINS_1.toString(),typeIndicateur:e.Enum.Indicateur.TYPE.MONTANT,intitule:e.Enum.Indicateur.INTITULE.CA_N_MOINS_1.toString(),estUniquementVueClients:!0,estVisibleColonne:!0,famille:e.Enum.Indicateur.FAMILLE.CA,codePreference:e.Enum.Indicateur.CODEPREF.CA_N_MOINS_1.toString()},{code:e.Enum.Indicateur.CODE.CA_N.toString(),codeRest:e.Enum.Indicateur.CODEREST.CA_N.toString(),typeIndicateur:e.Enum.Indicateur.TYPE.MONTANT,intitule:e.Enum.Indicateur.INTITULE.CA_N.toString(),estUniquementVueClients:!0,estVisibleColonne:!0,famille:e.Enum.Indicateur.FAMILLE.CA,codePreference:e.Enum.Indicateur.CODEPREF.CA_N.toString()},{code:e.Enum.Indicateur.CODE.CLIENTPROSPECT.toString(),codeRest:"",codeRel:e.Enum.Indicateur.CODEREL.CLIENTPROSPECT.toString(),typeIndicateur:e.Enum.Indicateur.TYPE.TEXTE,intitule:e.Enum.Indicateur.INTITULE.CLIENTPROSPECT.toString(),estUniquementVueClients:!1,estVisibleColonne:!1,codePreference:e.Enum.Indicateur.CODEPREF.CLIENTPROSPECT.toString()},{code:e.Enum.Indicateur.CODE.ACTIF.toString(),codeRest:e.Enum.Indicateur.CODEREST.ACTIF.toString(),typeIndicateur:e.Enum.Indicateur.TYPE.TEXTE,intitule:e.Enum.Indicateur.INTITULE.ACTIF.toString(),estUniquementVueClients:!0,estVisibleColonne:!1,codePreference:e.Enum.Indicateur.CODEPREF.ACTIF.toString()},{code:e.Enum.Indicateur.CODE.EQUIPE.toString(),codeRest:e.Enum.Indicateur.CODEREST.ACTIF.toString(),typeIndicateur:e.Enum.Indicateur.TYPE.TEXTE,intitule:e.Enum.Indicateur.INTITULE.NON_EQUIPE.toString(),estUniquementVueClients:!0,estVisibleColonne:!1,codePreference:e.Enum.Indicateur.CODEPREF.SANS_CONTRAT.toString()},{code:e.Enum.Indicateur.CODE.LEADER.toString(),codeRest:e.Enum.Indicateur.CODEREST.ACTIF.toString(),typeIndicateur:e.Enum.Indicateur.TYPE.TEXTE,intitule:e.Enum.Indicateur.INTITULE.LEADER.toString(),estUniquementVueClients:!0,estVisibleColonne:!1,codePreference:e.Enum.Indicateur.CODEPREF.LEADER.toString()},{code:e.Enum.Indicateur.CODE.FLUX_CREDITEURS_N.toString(),codeRest:e.Enum.Indicateur.CODEREST.FLUX.toString(),typeIndicateur:e.Enum.Indicateur.TYPE.MONTANT,intitule:e.Enum.Indicateur.INTITULE.FLUX_CREDITEURS_N.toString(),estUniquementVueClients:!0,estVisibleColonne:!0,famille:e.Enum.Indicateur.FAMILLE.FLUX,codePreference:e.Enum.Indicateur.CODEPREF.FLUX_CREDITEURS_N.toString()},{code:e.Enum.Indicateur.CODE.FLUX_CREDITEURS_N_MOINS_1.toString(),codeRest:e.Enum.Indicateur.CODEREST.FLUX.toString(),typeIndicateur:e.Enum.Indicateur.TYPE.MONTANT,intitule:e.Enum.Indicateur.INTITULE.FLUX_CREDITEURS_N_MOINS_1.toString(),estUniquementVueClients:!0,estVisibleColonne:!0,famille:e.Enum.Indicateur.FAMILLE.FLUX,codePreference:e.Enum.Indicateur.CODEPREF.FLUX_CREDITEURS_N_MOINS_1.toString()},{code:e.Enum.Indicateur.CODE.FLUX_DEBITEURS_N.toString(),codeRest:e.Enum.Indicateur.CODEREST.FLUX.toString(),typeIndicateur:e.Enum.Indicateur.TYPE.MONTANT,intitule:e.Enum.Indicateur.INTITULE.FLUX_DEBITEURS_N.toString(),estUniquementVueClients:!0,estVisibleColonne:!0,famille:e.Enum.Indicateur.FAMILLE.FLUX,codePreference:e.Enum.Indicateur.CODEPREF.FLUX_DEBITEURS_N.toString()},{code:e.Enum.Indicateur.CODE.FLUX_DEBITEURS_N_MOINS_1.toString(),codeRest:e.Enum.Indicateur.CODEREST.FLUX.toString(),typeIndicateur:e.Enum.Indicateur.TYPE.MONTANT,intitule:e.Enum.Indicateur.INTITULE.FLUX_DEBITEURS_N_MOINS_1.toString(),estUniquementVueClients:!0,estVisibleColonne:!0,famille:e.Enum.Indicateur.FAMILLE.FLUX,codePreference:e.Enum.Indicateur.CODEPREF.FLUX_DEBITEURS_N_MOINS_1.toString()},{code:e.Enum.Indicateur.CODE.OBJECTIF_FLUX.toString(),codeRest:e.Enum.Indicateur.CODEREST.OBJECTIF_FLUX.toString(),typeIndicateur:e.Enum.Indicateur.TYPE.POURCENT,intitule:e.Enum.Indicateur.INTITULE.OBJECTIF_FLUX.toString(),estUniquementVueClients:!0,estVisibleColonne:!0,famille:e.Enum.Indicateur.FAMILLE.FLUX,codePreference:e.Enum.Indicateur.CODEPREF.OBJECTIF_FLUX.toString()},{code:e.Enum.Indicateur.CODE.PART_FLUX_CONFIES_CRED.toString(),codeRest:e.Enum.Indicateur.CODEREST.PART_FLUX_CONFIES_CRED.toString(),typeIndicateur:e.Enum.Indicateur.TYPE.POURCENT,intitule:e.Enum.Indicateur.INTITULE.PART_FLUX_CONFIES_CRED.toString(),estUniquementVueClients:!0,estVisibleColonne:!0,famille:e.Enum.Indicateur.FAMILLE.FLUX,codePreference:e.Enum.Indicateur.CODEPREF.PART_FLUX_CONFIES_CRED.toString()},{code:e.Enum.Indicateur.CODE.PART_FLUX_CONFIES_DEB.toString(),codeRest:e.Enum.Indicateur.CODEREST.PART_FLUX_CONFIES_DEB.toString(),typeIndicateur:e.Enum.Indicateur.TYPE.POURCENT,intitule:e.Enum.Indicateur.INTITULE.PART_FLUX_CONFIES_DEB.toString(),estUniquementVueClients:!0,estVisibleColonne:!0,famille:e.Enum.Indicateur.FAMILLE.FLUX,codePreference:e.Enum.Indicateur.CODEPREF.PART_FLUX_CONFIES_DEB.toString()},{code:e.Enum.Indicateur.CODE.PREMIER_EQUIPEMENT.toString(),codeRest:e.Enum.Indicateur.CODEREST.PREMIER_EQUIPEMENT.toString(),typeIndicateur:e.Enum.Indicateur.TYPE.DATE,intitule:e.Enum.Indicateur.INTITULE.PREMIER_EQUIPEMENT.toString(),estUniquementVueClients:!0,estVisibleColonne:!0,famille:e.Enum.Indicateur.FAMILLE.OPPORTUNITES,codePreference:e.Enum.Indicateur.CODEPREF.PREMIER_EQUIPEMENT.toString()},{code:e.Enum.Indicateur.CODE.BEGACLI.toString(),codeRest:e.Enum.Indicateur.CODEREST.BEGACLI.toString(),typeIndicateur:e.Enum.Indicateur.TYPE.BEGACLI,intitule:e.Enum.Indicateur.INTITULE.BEGACLI.toString(),estUniquementVueClients:!0,estVisibleColonne:!0,famille:e.Enum.Indicateur.FAMILLE.OPPORTUNITES,codePreference:e.Enum.Indicateur.CODEPREF.BEGACLI.toString()},{code:e.Enum.Indicateur.CODE.NB_AFFAIRES_EN_COURS.toString(),codeRest:e.Enum.Indicateur.CODEREST.AFFAIRES_EN_COURS.toString(),codeRel:e.Enum.Indicateur.CODEREL.NB_AFFAIRES_EN_COURS.toString(),typeIndicateur:e.Enum.Indicateur.TYPE.NOMBRE,intitule:e.Enum.Indicateur.INTITULE.NB_AFFAIRES_EN_COURS.toString(),estUniquementVueClients:!1,estVisibleColonne:!0,famille:e.Enum.Indicateur.FAMILLE.OPPORTUNITES,codePreference:e.Enum.Indicateur.CODEPREF.NB_AFFAIRES_EN_COURS.toString()},{code:e.Enum.Indicateur.CODE.NB_APPETENCES.toString(),codeRest:e.Enum.Indicateur.CODEREST.NB_APPETENCES.toString(),codeRel:e.Enum.Indicateur.CODEREL.NB_APPETENCES.toString(),typeIndicateur:e.Enum.Indicateur.TYPE.NOMBRE,intitule:e.Enum.Indicateur.INTITULE.NB_APPETENCES.toString(),estUniquementVueClients:!1,estVisibleColonne:!0,famille:e.Enum.Indicateur.FAMILLE.OPPORTUNITES,codePreference:e.Enum.Indicateur.CODEPREF.NB_APPETENCES.toString()},{code:e.Enum.Indicateur.CODE.NB_PROPOSITIONS_EN_COURS.toString(),codeRest:e.Enum.Indicateur.CODEREST.PROPOSITIONS_EN_COURS.toString(),codeRel:e.Enum.Indicateur.CODEREL.NB_PROPOSITIONS_EN_COURS.toString(),typeIndicateur:e.Enum.Indicateur.TYPE.NOMBRE,intitule:e.Enum.Indicateur.INTITULE.NB_PROPOSITIONS_EN_COURS.toString(),estUniquementVueClients:!1,estVisibleColonne:!0,famille:e.Enum.Indicateur.FAMILLE.OPPORTUNITES,codePreference:e.Enum.Indicateur.CODEPREF.NB_PROPOSITIONS_EN_COURS.toString()},{code:e.Enum.Indicateur.CODE.PNB_3112.toString(),codeRest:e.Enum.Indicateur.CODEREST.PNB_3112.toString(),codeRel:e.Enum.Indicateur.CODEREL.PNB_3112.toString(),typeIndicateur:e.Enum.Indicateur.TYPE.MONTANT,intitule:e.Enum.Indicateur.INTITULE.PNB_3112.toString()+moment().subtract(1,"year").format("YYYY"),estUniquementVueClients:!1,estVisibleColonne:!0,famille:e.Enum.Indicateur.FAMILLE.PNB,codePreference:e.Enum.Indicateur.CODEPREF.PNB_3112.toString()},{code:e.Enum.Indicateur.CODE.PNB_N.toString(),codeRest:e.Enum.Indicateur.CODEREST.PNB_N.toString(),codeRel:e.Enum.Indicateur.CODEREL.PNB_N.toString(),typeIndicateur:e.Enum.Indicateur.TYPE.MONTANT,intitule:e.Enum.Indicateur.INTITULE.PNB_N.toString(),estUniquementVueClients:!1,estVisibleColonne:!0,famille:e.Enum.Indicateur.FAMILLE.PNB,codePreference:e.Enum.Indicateur.CODEPREF.PNB_N.toString()},{code:e.Enum.Indicateur.CODE.PNB_N_MOINS_1.toString(),codeRest:e.Enum.Indicateur.CODEREST.PNB_N_MOINS_1.toString(),codeRel:e.Enum.Indicateur.CODEREL.PNB_N_MOINS_1.toString(),typeIndicateur:e.Enum.Indicateur.TYPE.MONTANT,intitule:e.Enum.Indicateur.INTITULE.PNB_N_MOINS_1.toString(),estUniquementVueClients:!1,estVisibleColonne:!0,famille:e.Enum.Indicateur.FAMILLE.PNB,codePreference:e.Enum.Indicateur.CODEPREF.PNB_N_MOINS_1.toString()},{code:e.Enum.Indicateur.CODE.POTENTIEL_PROSPECT.toString(),codeRest:e.Enum.Indicateur.CODEREST.POT_PROS.toString(),typeIndicateur:e.Enum.Indicateur.TYPE.TEXTE,intitule:e.Enum.Indicateur.INTITULE.POTENTIEL_PROSPECT.toString(),estUniquementVueClients:!0,estVisibleColonne:!0,famille:e.Enum.Indicateur.FAMILLE.PROSPECTION,codePreference:e.Enum.Indicateur.CODEPREF.POTENTIEL_PROSPECT.toString()},{code:e.Enum.Indicateur.CODE.SCORE_ACTIVATION.toString(),codeRest:e.Enum.Indicateur.CODEREST.SCORE_ACTIVATION.toString(),typeIndicateur:e.Enum.Indicateur.TYPE.NOMBRE,intitule:e.Enum.Indicateur.INTITULE.SCORE_ACTIVATION.toString(),estUniquementVueClients:!0,estVisibleColonne:!0,famille:e.Enum.Indicateur.FAMILLE.PROSPECTION,codePreference:e.Enum.Indicateur.CODEPREF.SCORE_ACTIVATION.toString()},{code:e.Enum.Indicateur.CODE.SCORE_APPETENCE.toString(),codeRest:e.Enum.Indicateur.CODEREST.SCORE_APPETENCE.toString(),typeIndicateur:e.Enum.Indicateur.TYPE.NOMBRE,intitule:e.Enum.Indicateur.INTITULE.SCORE_APPETENCE.toString(),estUniquementVueClients:!0,estVisibleColonne:!0,famille:e.Enum.Indicateur.FAMILLE.PROSPECTION,codePreference:e.Enum.Indicateur.CODEPREF.SCORE_APPETENCE.toString()},{code:e.Enum.Indicateur.CODE.SCORE_DEFAILLANCE.toString(),codeRest:e.Enum.Indicateur.CODEREST.SCORE_DEFAILLANCE.toString(),typeIndicateur:e.Enum.Indicateur.TYPE.NOMBRE,intitule:e.Enum.Indicateur.INTITULE.SCORE_DEFAILLANCE.toString(),estUniquementVueClients:!0,estVisibleColonne:!0,famille:e.Enum.Indicateur.FAMILLE.PROSPECTION,codePreference:e.Enum.Indicateur.CODEPREF.SCORE_DEFAILLANCE.toString()},{code:e.Enum.Indicateur.CODE.DATE_DERNIER_ENTRETIEN.toString(),codeRest:"",codeRel:e.Enum.Indicateur.CODEREL.DATE_DERNIER_ENTRETIEN.toString(),typeIndicateur:e.Enum.Indicateur.TYPE.DATE,intitule:e.Enum.Indicateur.INTITULE.DATE_DERNIER_ENTRETIEN.toString(),estUniquementVueClients:!1,estVisibleColonne:!0,famille:e.Enum.Indicateur.FAMILLE.RENDEZ_VOUS,codePreference:e.Enum.Indicateur.CODEPREF.DATE_DERNIER_ENTRETIEN.toString()},{code:e.Enum.Indicateur.CODE.DATE_DERNIER_RDV.toString(),codeRest:"",codeRel:e.Enum.Indicateur.CODEREL.DATE_DERNIER_RDV.toString(),typeIndicateur:e.Enum.Indicateur.TYPE.DATE,intitule:e.Enum.Indicateur.INTITULE.DATE_DERNIER_RDV.toString(),estUniquementVueClients:!1,estVisibleColonne:!0,famille:e.Enum.Indicateur.FAMILLE.RENDEZ_VOUS,codePreference:e.Enum.Indicateur.CODEPREF.DATE_DERNIER_RDV.toString()},{code:e.Enum.Indicateur.CODE.NB_RDV_12_MOIS_GLISSANTS.toString(),codeRest:"",codeRel:e.Enum.Indicateur.CODEREL.NB_RDV_12_MOIS_GLISSANTS.toString(),typeIndicateur:e.Enum.Indicateur.TYPE.NOMBRE,intitule:e.Enum.Indicateur.INTITULE.NB_RDV_12_MOIS_GLISSANTS.toString(),estUniquementVueClients:!1,estVisibleColonne:!0,famille:e.Enum.Indicateur.FAMILLE.RENDEZ_VOUS,codePreference:e.Enum.Indicateur.CODEPREF.NB_RDV_12_MOIS_GLISSANTS.toString()},{code:e.Enum.Indicateur.CODE.NB_RDV_ANNEE_EN_COURS.toString(),codeRest:"",codeRel:e.Enum.Indicateur.CODEREL.NB_RDV_ANNEE_EN_COURS.toString(),typeIndicateur:e.Enum.Indicateur.TYPE.NOMBRE,intitule:e.Enum.Indicateur.INTITULE.NB_RDV_ANNEE_EN_COURS.toString()+moment().format("YYYY"),estUniquementVueClients:!1,estVisibleColonne:!0,famille:e.Enum.Indicateur.FAMILLE.RENDEZ_VOUS,codePreference:e.Enum.Indicateur.CODEPREF.NB_RDV_ANNEE_EN_COURS.toString()},{code:e.Enum.Indicateur.CODE.DATE_PROCHAIN_RDV.toString(),codeRest:"",codeRel:e.Enum.Indicateur.CODEREL.DATE_PROCHAIN_RDV.toString(),typeIndicateur:e.Enum.Indicateur.TYPE.DATE,intitule:e.Enum.Indicateur.INTITULE.DATE_PROCHAIN_RDV.toString(),estUniquementVueClients:!1,estVisibleColonne:!0,famille:e.Enum.Indicateur.FAMILLE.RENDEZ_VOUS,codePreference:e.Enum.Indicateur.CODEPREF.DATE_PROCHAIN_RDV.toString()
},{code:e.Enum.Indicateur.CODE.REV_DATE_DERNIERE_REVUE.toString(),codeRest:e.Enum.Indicateur.CODEREST.REVUE.toString(),codeRel:e.Enum.Indicateur.CODEREL.REV_DATE_DERNIERE_REVUE.toString(),typeIndicateur:e.Enum.Indicateur.TYPE.DATE,intitule:e.Enum.Indicateur.INTITULE.REV_DATE_DERNIERE_REVUE.toString(),estUniquementVueClients:!1,estVisibleColonne:!0,famille:e.Enum.Indicateur.FAMILLE.REVUE,codePreference:e.Enum.Indicateur.CODEPREF.REV_DATE_DERNIERE_REVUE.toString()},{code:e.Enum.Indicateur.CODE.REV_NB_SSFAMILLES_PROPOSE.toString(),codeRest:e.Enum.Indicateur.CODEREST.REVUE.toString(),codeRel:e.Enum.Indicateur.CODEREL.REV_NB_SSFAMILLES_PROPOSE.toString(),typeIndicateur:e.Enum.Indicateur.TYPE.NOMBRE,intitule:e.Enum.Indicateur.INTITULE.REV_NB_SSFAMILLES_PROPOSE.toString(),estUniquementVueClients:!1,estVisibleColonne:!0,famille:e.Enum.Indicateur.FAMILLE.REVUE,codePreference:e.Enum.Indicateur.CODEPREF.REV_NB_SSFAMILLES_PROPOSE.toString()},{code:e.Enum.Indicateur.CODE.REV_VALIDEE_PAR.toString(),codeRest:e.Enum.Indicateur.CODEREST.REVUE.toString(),typeIndicateur:e.Enum.Indicateur.TYPE.TEXTE,intitule:e.Enum.Indicateur.INTITULE.REV_VALIDEE_PAR.toString(),estUniquementVueClients:!0,estVisibleColonne:!0,famille:e.Enum.Indicateur.FAMILLE.REVUE,codePreference:e.Enum.Indicateur.CODEPREF.REV_VALIDEE_PAR.toString()},{code:e.Enum.Indicateur.CODE.ENCOURS_BDF.toString(),codeRest:e.Enum.Indicateur.CODEREST.ENCOURS_BDF.toString(),codeRel:e.Enum.Indicateur.CODEREL.ENCOURS_BDF.toString(),typeIndicateur:e.Enum.Indicateur.TYPE.MONTANT,intitule:e.Enum.Indicateur.INTITULE.ENCOURS_BDF.toString(),estUniquementVueClients:!1,estVisibleColonne:!0,famille:e.Enum.Indicateur.FAMILLE.RISQUE,codePreference:e.Enum.Indicateur.CODEPREF.ENCOURS_BDF.toString()},{code:e.Enum.Indicateur.CODE.NOTE_BALE2.toString(),codeRest:e.Enum.Indicateur.CODEREST.NOTE_BALE2.toString(),typeIndicateur:e.Enum.Indicateur.TYPE.TEXTE,intitule:e.Enum.Indicateur.INTITULE.NOTE_BALE2.toString(),estUniquementVueClients:!0,estVisibleColonne:!0,famille:e.Enum.Indicateur.FAMILLE.RISQUE,codePreference:e.Enum.Indicateur.CODEPREF.NOTE_BALE2.toString()},{code:e.Enum.Indicateur.CODE.PART_ENGAG.toString(),codeRest:e.Enum.Indicateur.CODEREST.PART_ENGAG.toString(),codeRel:e.Enum.Indicateur.CODEREL.PART_ENGAG.toString(),typeIndicateur:e.Enum.Indicateur.TYPE.POURCENT,intitule:e.Enum.Indicateur.INTITULE.PART_ENGAG.toString(),estUniquementVueClients:!0,estVisibleColonne:!0,famille:e.Enum.Indicateur.FAMILLE.RISQUE,codePreference:e.Enum.Indicateur.CODEPREF.PART_ENGAG.toString()},{code:e.Enum.Indicateur.CODE.PROCHAINE_REVISION.toString(),codeRest:e.Enum.Indicateur.CODEREST.PROCHAINE_REVISION.toString(),typeIndicateur:e.Enum.Indicateur.TYPE.DATE,intitule:e.Enum.Indicateur.INTITULE.PROCHAINE_REVISION.toString(),estUniquementVueClients:!0,estVisibleColonne:!0,famille:e.Enum.Indicateur.FAMILLE.RISQUE,codePreference:e.Enum.Indicateur.CODEPREF.PROCHAINE_REVISION.toString()},{code:e.Enum.Indicateur.CODE.TOP_CC.toString(),codeRest:e.Enum.Indicateur.CODEREST.TOP_CC.toString(),typeIndicateur:e.Enum.Indicateur.TYPE.TEXTE,intitule:e.Enum.Indicateur.INTITULE.TOP_CC.toString(),estUniquementVueClients:!0,estVisibleColonne:!0,famille:e.Enum.Indicateur.FAMILLE.RISQUE,codePreference:e.Enum.Indicateur.CODEPREF.TOP_CC.toString()},{code:e.Enum.Indicateur.CODE.MARCHE.toString(),codeRest:"",typeIndicateur:e.Enum.Indicateur.TYPE.TEXTE,intitule:e.Enum.Indicateur.INTITULE.MARCHE.toString(),estUniquementVueClients:!0,estVisibleColonne:!0,famille:e.Enum.Indicateur.FAMILLE.SEGMENTATION,codePreference:e.Enum.Indicateur.CODEPREF.MARCHE.toString()},{code:e.Enum.Indicateur.CODE.SEG_RELATIONNELLE.toString(),codeRest:"",typeIndicateur:e.Enum.Indicateur.TYPE.TEXTE,intitule:e.Enum.Indicateur.INTITULE.SEG_RELATIONNELLE.toString(),estUniquementVueClients:!0,estVisibleColonne:!0,famille:e.Enum.Indicateur.FAMILLE.SEGMENTATION,codePreference:e.Enum.Indicateur.CODEPREF.SEG_RELATIONNELLE.toString()},{code:e.Enum.Indicateur.CODE.SEG_RELATIONNELLE_GROUPE.toString(),codeRest:e.Enum.Indicateur.CODEREST.SEG_RELATIONNELLE_GROUPE.toString(),codeRel:e.Enum.Indicateur.CODEREL.SEG_RELATIONNELLE_GROUPE.toString(),typeIndicateur:e.Enum.Indicateur.TYPE.TEXTE,intitule:e.Enum.Indicateur.INTITULE.SEG_RELATIONNELLE_GROUPE.toString(),estUniquementVueClients:!1,estVisibleColonne:!0,famille:e.Enum.Indicateur.FAMILLE.SEGMENTATION,codePreference:e.Enum.Indicateur.CODEPREF.SEG_RELATIONNELLE_GROUPE.toString()},{code:e.Enum.Indicateur.CODE.PREMIER_EQUIPEMENT_TAG.toString(),codeRest:e.Enum.Indicateur.CODEREST.PREMIER_EQUIPEMENT_TAG.toString(),typeIndicateur:e.Enum.Indicateur.TYPE.DATE,intitule:e.Enum.Indicateur.INTITULE.PREMIER_EQUIPEMENT_TAG.toString(),estUniquementVueClients:!0,estVisibleColonne:!1,codePreference:e.Enum.Indicateur.CODEPREF.PREMIER_EQUIPEMENT_TAG.toString()},{code:e.Enum.Indicateur.CODE.PREMIER_EQUIPEMENT_TEXTE.toString(),codeRest:e.Enum.Indicateur.CODEREST.PREMIER_EQUIPEMENT_TEXTE.toString(),typeIndicateur:e.Enum.Indicateur.TYPE.TEXTE,intitule:e.Enum.Indicateur.INTITULE.PREMIER_EQUIPEMENT_TEXTE.toString(),estUniquementVueClients:!0,estVisibleColonne:!1,codePreference:e.Enum.Indicateur.CODEPREF.PREMIER_EQUIPEMENT_TEXTE.toString()}]}(i=t.Indicateur||(t.Indicateur={}))}(t=e.Constantes||(e.Constantes={}))}(Portefeuille||(Portefeuille={}));var Portefeuille;!function(e){var t;!function(e){"use strict";var t;!function(e){e.CODE_LISA_SORTIE=1,e.CODE_LISA_ACCES_CLIENTS=2,e.CODE_LISA_SAISIE_REVUE=11,e.CODE_LISA_BILAN_REVUE=12,e.CODE_LISA_SYNTHESE_PM=10,e.CODE_LISA_BILAN_REVUES_PORTEFEUILLE=13,e.CODE_LISA_BILAN_APPETENCES_PORTEFEUILLE=15,e.CODE_LISA_GESTION_AFFAIRES=16,e.CODE_LISA_PROPOSITONS=17}(t=e.CodeProcessusLisa||(e.CodeProcessusLisa={}))}(t=e.Constantes||(e.Constantes={}))}(Portefeuille||(Portefeuille={}));var Portefeuille;!function(e){var t;!function(e){"use strict";var t;!function(e){e.MESSAGE_CHOIX_PORTEFEUILLE="Merci de choisir le ou les portefeuilles à interroger",e.MESSAGE_AUCUN_PORTEFEUILLE="Aucun portefeuille en gestion",e.MESSAGE_ERREUR_TECHNIQUE="Une erreur technique empêche le bon fonctionnement de l'application",e.MESSAGE_NO_DATA_STATS="Aucune donnée",e.MESSAGE_CHOIX_PORTEFEUILLE_EXPERT="Vous avez choisi le portefeuille d'expertise suivant :"}(t=e.Messages||(e.Messages={}))}(t=e.Constantes||(e.Constantes={}))}(Portefeuille||(Portefeuille={}));var Portefeuille;!function(e){var t;!function(e){"use strict";var t;!function(e){e.ID_HTML_MODALE_PANIERS_BODY="modale-panier-body",e.CLASS_HTML_BOUTON_TUILE_STANDARD="mw-tuile-bloc",e.ATTRIBUT_HTML_DISABLED="disabled",e.ATTRIBUT_HTML_STYLE="style",e.STRING_VALUE_TRUE="true",e.STRING_VALUE_CURSOR_POINTER_IMPORTANT="cursor:move !important;",e.NOMBRE_INDICATEUR_MAX=6,e.TUILE_CATALOGUE_TAILLE="md",e.TUILE_CATALOGUE_PICTO_MARQUAGE="itce-star",e.TUILE_TYPE_MARQUAGE_TEXTE="texte",e.TUILE_CATALOGUE_TYPE_MARQUAGE_PICTO="picto",e.TUILE_CATALOGUE_TYPE_MARQUAGE_AUCUN="none",e.TUILE_NOM_MARQUAGE_VIDE="",e.TUILE_NOM_MARQUAGE_CLIENT="Client",e.TUILE_NOM_MARQUAGE_CLIENT_PROSPECT="Client/Prospect",e.TUILE_COULEUR_JAUNE="couleur-jaune",e.TUILE_COULEUR_ROUGE="couleur-rouge",e.TUILE_COULEUR_SOMBRE="couleur-sombre",e.TUILE_PANIER_TAILLE="md"}(t=e.ModalePaniers||(e.ModalePaniers={}))}(t=e.Constantes||(e.Constantes={}))}(Portefeuille||(Portefeuille={}));var Portefeuille;!function(e){var t;!function(e){"use strict";var t;!function(e){e.BOUTON_FERMER="Fermer",e.LIBELLE_ERREUR_CHARGEMENT="Erreur de chargement du service",e.LIBELLE_ERREUR_DEFAULT="Erreur inconnue"}(t=e.Popup||(e.Popup={}))}(t=e.Constantes||(e.Constantes={}))}(Portefeuille||(Portefeuille={}));var Portefeuille;!function(e){var t;!function(e){"use strict";var t;!function(e){e.CODE_PANIER="GERR_PORTF_CLNT_PM-PANIER",e.CODE_EDS="GERR_PORTF_CLNT_PM-EDS",e.CODE_PORTEFEUILLE="GERR_PORTF_CLNT_PM-PORTEFEUILLE"}(t=e.Preferences||(e.Preferences={}))}(t=e.Constantes||(e.Constantes={}))}(Portefeuille||(Portefeuille={}));var Portefeuille;!function(e){var t;!function(e){"use strict";var t;!function(e){e.AGENT_V2_CODE_ACTION_1="1",e.AGENT_V2_TYPE_RECHERCHE_NOM=1,e.AGENT_V2_TYPE_RECHERCHE_GROUPE_FONCTION=4,e.AGENT_V2_TYPE_RECHERCHE_MATRICULE=5,e.AGENT_V2_TYPE_RECHERCHE_AGENCE_RATTACHEMENT=21,e.AGENT_V2_RECHERCHE_GROUPE_FONCTION_BDR="009",e.CODE_PERSONNALITE_JURIDIQUE_EI="1",e.CODE_PERSONNALITE_JURIDIQUE_PM="2",e.CODE_TYPE_PERSONNE_CLIENT="0",e.CODE_TYPE_PERSONNE_TIERS="1",e.CODE_TYPE_PERSONNE_PROPECT_RESTREINT="2",e.CODE_TYPE_PERSONNE_PROPECT_ENRICHI="3",e.CODE_O_TRUE="O",e.CODE_STRING_ACTIF="O",e.CODE_ENTREE_EN_RELATION="EER",e.CODE_RISQUE="RSK",e.CODE_PRO_NON_CAPTE="NCP",e.CODE_PRO_PARTIELLEMENT_CAPTE="PCP",e.CODE_PRO_LARGEMENT_CAPTE="LCP",e.CODE_AUTRES="AUT",e.ENTREE_EN_RELATION="_ER",e.PRO_RISQUE="_RK",e.NON_CALCULE_NON_CONCERNE="NON"}(t=e.Rest||(e.Rest={}))}(t=e.Constantes||(e.Constantes={}))}(Portefeuille||(Portefeuille={}));var Portefeuille;!function(e){var t;!function(e){"use strict";var t;!function(e){e.TAB_LISTE_CLIENTS_CAPTION="Liste clients",e.TAB_LISTE_CLIENTS_NO_ELEMENT="Aucun client",e.TAB_LISTE_CLIENTS_COLONNE_NOM="Nom",e.TAB_LISTE_CLIENTS_COLONNE_DETAIL="Détail",e.TAB_NO_ELEMENT_CLIENT="Aucun client",e.TAB_NO_ELEMENT_RELATION="Aucune relation",e.TAB_LISTE_CLIENTS_COLONNE_ID="N° de personne",e.TAB_LISTE_CLIENTS_COLONNE_RAISON_SOCIALE="Raison sociale",e.TAB_LISTE_CLIENTS_COLONNE_MARCHE="Marché",e.TAB_LISTE_CLIENTS_COLONNE_OBJECTIF_DE_FLUX="Objectif de flux",e.VALEUR_POSSIBLE_POTENTIEL_PROSPECT=["1 étoile","2 étoiles","3 étoiles"],e.VALEUR_POSSIBLE_TOP_CC=["Vert","Orange","Rouge","Blanc"],e.ID_TABLE_CLIENT="tab-client",e.ID_TABLE_RELATION="tab-relation"}(t=e.Tableau||(e.Tableau={}))}(t=e.Constantes||(e.Constantes={}))}(Portefeuille||(Portefeuille={}));var Portefeuille;!function(e){var t;!function(e){"use strict";var t;!function(e){e.TOKEN_ENVIRONNEMENT="##ENVIRONNEMENT##",e.TOKEN_ENVIRONNEMENT_VALEUR_DUA="DUA",e.TOKEN_ENVIRONNEMENT_VALEUR_VFO="VFO"}(t=e.Token||(e.Token={}))}(t=e.Constantes||(e.Constantes={}))}(Portefeuille||(Portefeuille={}));var Portefeuille;!function(e){var t;!function(e){"use strict";var t;!function(e){e.PORTEFEUILLE="/",e.CLIENTS="/clients",e.DETAIL_CLIENT="/client-detail",e.BILAN_REVUE="/revue-visu",e.SAISIE_REVUE="/revue-client",e.BILAN_REVUES_PORTEFEUILLE="/bilan-revues-portefeuille",e.BILAN_APPETENCES_PORTEFEUILLE="/bilan-appetences-portefeuille",e.SELECTION_INDICATEURS="/selection-indicateurs"}(t=e.Url||(e.Url={}))}(t=e.Constantes||(e.Constantes={}))}(Portefeuille||(Portefeuille={}));var Portefeuille;!function(e){var t;!function(e){"use strict";var t;!function(e){e.URL_REST="##URL-REST##",e.URL_REST_TIERSCORPORATEV1_CORPORATE_INFORMATION=e.URL_REST+"/tierscorporate/v1/corporateInformation",e.URL_REST_TIERSCORPORATESERVICV1_RECHERCHE_COMMERCIALE=e.URL_REST+"/tierscorporateservic/v1/rechercheCommerciale",e.URL_REST_PORTEFEUILLEV1_RECHERCHE=e.URL_REST+"/portefeuille/v1/recherche",e.URL_REST_PORTEFEUILLEV1_RECHERCHE_LISTE=e.URL_REST+"/portefeuille/v1/recherche/getListe",e.URL_REST_PORTEFEUILLEV1_RELATION_COMMERCIALE=e.URL_REST+"/portefeuille/v1/relationCommerciale",e.URL_REST_PORTEFEUILLEV1_SUIVI_COMPLEMENTAIRE=e.URL_REST+"/portefeuille/v1/suiviComplementaire",e.URL_REST_PORTEFEUILLEV1_CLIENT=e.URL_REST+"/portefeuille/v1/client",e.URL_REST_AGENTV2_RECHERCHE=e.URL_REST+"/agent/v2/recherche",e.URL_REST_AGENTV2_GESTION_AFFECTATION=e.URL_REST+"/agent/v2/gestionAffectation",e.URL_REST_STRUCTUREV2_EDS_NIVEAU_INFERIEURE=e.URL_REST+"/structure/v2/edsNiveauInferieur",e.URL_REST_PREFERENCE_UTILISATEUR=e.URL_REST+"/preferenceUtilisateur/v1/",e.URL_REST_PORTEFEUILLECORPORATEV1_STATRENTABILITE=e.URL_REST+"/portefeuillcorporate/v1/statRentabilite",e.URL_REST_PORTEFEUILLECORPORATEV1_STATFLUXMOUVEMENTFINANCIER=e.URL_REST+"/portefeuillcorporate/v1/statFluxMvtFinancier",e.URL_REST_PORTEFEUILLECORPORATEV1_STATPTF=e.URL_REST+"/portefeuillcorporate/v1/statPortefeuille",e.URL_REST_PROPOSITIONCORPORATEV1_STATREVUE=e.URL_REST+"/propositioncorporate/v1/statRevue",e.URL_REST_PROPOSITIONCORPORATEV1_RECHERCHE_REVUE=e.URL_REST+"/propositioncorporate/v1/rechercheRevue",e.URL_REST_PROPOSITIONCORPORATEV1_STAT_PORTEFEUILLE_EDS=e.URL_REST+"/propositioncorporate/v1/statPortefeuilleEds"}(t=e.urlsRest||(e.urlsRest={}))}(t=e.Constantes||(e.Constantes={}))}(Portefeuille||(Portefeuille={}));var Portefeuille;!function(e){var t;!function(t){"use strict";function i(e){return function(e,t){return t?_.where(e,{utilise:!1}):_.where(e,{utiliseRelationEco:!1})}}function n(t){return function(t){return void 0!==t&&null!==t&&""!==t&&t!==Number.POSITIVE_INFINITY&&t!==Number.NEGATIVE_INFINITY?e.Services.Utils.DataUtils.formatNombre(t):e.Constantes.Application.CHAINE_INDICATEUR_NON_CONNU}}function r(t){return function(t,i){var n=i?"€":"k€";return void 0!==t&&null!==t&&""!==t&&t!==Number.POSITIVE_INFINITY&&t!==Number.NEGATIVE_INFINITY?t.toString().replace(/\B(?=(\d{3})+(?!\d))/g,String.fromCharCode(160))+" "+n:e.Constantes.Application.CHAINE_INDICATEUR_NON_CONNU}}function o(t){return function(t){return void 0!==t&&null!==t&&""!==t&&t!==Number.POSITIVE_INFINITY&&t!==Number.NEGATIVE_INFINITY?e.Services.Utils.DataUtils.formatPourcent(t)+" %":e.Constantes.Application.CHAINE_INDICATEUR_NON_CONNU}}function l(t){return function(t){var i=_.filter(t,function(t){return t.indicateur.typeIndicateur!==e.Enum.Indicateur.TYPE.DATE});return i}}function a(t){return function(t){var i=t;return void 0===t||null===t||""===t||-1!==i.search(e.Constantes.Application.FIN_CHAINE_MAX)?e.Constantes.Application.CHAINE_INDICATEUR_NON_CONNU:t}}function s(){var t=moment(e.Constantes.Application.DATE_MIN).toDate(),i=moment(e.Constantes.Application.DATE_MAX).toDate();return function(n){return n?moment(n).isSame(i)?e.Constantes.Application.CHAINE_INDICATEUR_NON_CONNU:moment(n).isSame(t)?e.Constantes.Application.CHAINE_INDICATEUR_NON_CONNU:moment(n).format("DD/MM/YYYY"):e.Constantes.Application.CHAINE_INDICATEUR_NON_CONNU}}function u(){var t=Number.NEGATIVE_INFINITY,i=Number.POSITIVE_INFINITY;return function(n){return null!==n&&void 0!==n?n===t||n===i?e.Constantes.Application.CHAINE_INDICATEUR_NON_CONNU:n.toString():e.Constantes.Application.CHAINE_INDICATEUR_NON_CONNU}}t.indicateurUtilisantPasFiltre=i,t.nombreFiltre=n,t.montantFiltre=r,t.pourcentFiltre=o,t.sansIndicateurDateFiltre=l,t.valeurNonConnuFiltre=a,t.dateNC=s,t.nombreNC=u,e.app.filter("indicateurUtilisantPasFiltre",["$filter",i]),e.app.filter("sansIndicateurDateFiltre",["$filter",l]),e.app.filter("valeurNonConnuFiltre",["$filter",a]),e.app.filter("montantFiltre",["$filter",r]),e.app.filter("pourcentFiltre",["$filter",o]),e.app.filter("nombreFiltre",["$filter",n]),e.app.filter("nombreNC",["$filter",u]),e.app.filter("dateNC",["$filter",s])}(t=e.Filtres||(e.Filtres={}))}(Portefeuille||(Portefeuille={}));var Portefeuille;!function(e){var t;!function(t){"use strict";function i(t){return t||(t=""),{id:"123456789"+t,nom:"GYEC"+t,siren:"02547841002596"+t,relationEconomique:"Relation Economique "+t,listeIndicateurs:[{intitule:"PNB N-1 civile",valeur:"32 254 k€",couleur:e.Enum.PfTuileIndicateur.COULEUR.PNB,icone:"",typeIndicateur:e.Enum.Indicateur.TYPE.NOMBRE,code:"",famille:e.Enum.Indicateur.FAMILLE.PNB},{intitule:"PNB N glissante",valeur:"35 326 k€",couleur:e.Enum.PfTuileIndicateur.COULEUR.PNB,icone:"globe",typeIndicateur:e.Enum.Indicateur.TYPE.NOMBRE,code:"",famille:e.Enum.Indicateur.FAMILLE.PNB},{intitule:"Dernier RDV",valeur:"25/06/2018",couleur:e.Enum.PfTuileIndicateur.COULEUR.AGENDA,icone:"calendar",typeIndicateur:e.Enum.Indicateur.TYPE.DATE,code:"",famille:e.Enum.Indicateur.FAMILLE.RENDEZ_VOUS},{intitule:"Volume engagement utilisé N-1 civile",valeur:"5 356 k€",couleur:e.Enum.PfTuileIndicateur.COULEUR.EQUIPEMENTS,icone:"product-category-circle",typeIndicateur:e.Enum.Indicateur.TYPE.NOMBRE,code:"",famille:e.Enum.Indicateur.FAMILLE.CA}]}}function n(i){i||(i="");for(var n=[],r=0;3>r;r++)n.push(t.getClient(r.toString()));return{nom:"GEDECO "+i,id:"41100125"+i,siren:"123456789123456"+i,relationEconomique:"Nom Relation economique "+i,listeClients:n,listeIndicateurs:[{intitule:"Chiffre d'affaire",valeur:"100 000 254 k€",couleur:e.Enum.PfTuileIndicateur.COULEUR.CA,icone:"money",typeIndicateur:e.Enum.Indicateur.TYPE.NOMBRE,code:"",famille:e.Enum.Indicateur.FAMILLE.CA},{intitule:"PNB N glissante",valeur:"35 326 k€",couleur:e.Enum.PfTuileIndicateur.COULEUR.PNB,icone:"globe",typeIndicateur:e.Enum.Indicateur.TYPE.NOMBRE,code:"",famille:e.Enum.Indicateur.FAMILLE.PNB},{intitule:"Dernier RDV",valeur:"25/06/2018",couleur:e.Enum.PfTuileIndicateur.COULEUR.AGENDA,icone:"calendar",typeIndicateur:e.Enum.Indicateur.TYPE.DATE,code:"",famille:e.Enum.Indicateur.FAMILLE.RENDEZ_VOUS},{intitule:"Prochain RDV",valeur:"25/10/2018",couleur:e.Enum.PfTuileIndicateur.COULEUR.AGENDA,icone:"calendar",typeIndicateur:e.Enum.Indicateur.TYPE.DATE,code:"",famille:e.Enum.Indicateur.FAMILLE.RENDEZ_VOUS},{intitule:"Volume engagement utilisé N-1 civile",valeur:"5 356 k€",couleur:e.Enum.PfTuileIndicateur.COULEUR.EQUIPEMENTS,icone:"product-category-circle",typeIndicateur:e.Enum.Indicateur.TYPE.NOMBRE,code:"",famille:e.Enum.Indicateur.FAMILLE.CA}]}}t.getClient=i,t.getRelationEco=n}(t=e.Mocks||(e.Mocks={}))}(Portefeuille||(Portefeuille={}));var Portefeuille;!function(e){var t;!function(t){"use strict";var i=function(){function t(t,i){this.$modalInstance=t,this.listeClientsService=i,this.nbMaxPortefeuilles=e.Constantes.Service.RELATION_COMMERCIALE_NB_MAX_RES,this.initialiser()}return t.prototype.initialiser=function(){t.logger.info(">>> Appel de la méthode : ModaleAvertissementChoixPortefeuilleControleur.initialiser <<<"),this.listePortefeuilles=this.listeClientsService.getListePortefeuillesAvecLimite(),this.estEnMultiPortefeuille=this.listePortefeuilles.length>1,this.determinerAffichageBtnClientsEtProspects(),this.determinerMessagesAction()},t.prototype.determinerAffichageBtnClientsEtProspects=function(){var t=0,i=0;_.forEach(this.listePortefeuilles,function(e){t+=e.nombreTotalClients,i+=e.nombreTotalProspectsTiers}),this.estAfficherBtnClients=t<=e.Constantes.Service.RELATION_COMMERCIALE_NB_MAX_RES&&t>0,this.estAfficherBtnProspects=i<=e.Constantes.Service.RELATION_COMMERCIALE_NB_MAX_RES&&i>0},t.prototype.determinerMessagesAction=function(){this.listeMessageAction=[],this.estAfficherBtnProspects&&this.listeMessageAction.push('- "Afficher les prospects" : la liste des "Relations économiques" de votre séléction ne sera pas accessible.'),this.estAfficherBtnClients&&this.listeMessageAction.push('- "Afficher les clients" : la liste des "Relations économiques" de votre séléction ne sera pas accessible.'),this.estEnMultiPortefeuille?this.listeMessageAction.push('- "Nouvelle sélection" : modifier votre sélection de portefeuilles.'):this.listeMessageAction.push('- "Afficher" : les indicateurs seront prédéfinis et non modifiables.')},t.prototype.fermer=function(){this.$modalInstance.dismiss()},t.prototype.afficherClients=function(){this.$modalInstance.close(this.setRetourPopup(e.Enum.PageClients.TYPE_FORCAGE.CLIENTS))},t.prototype.afficherProspects=function(){this.$modalInstance.close(this.setRetourPopup(e.Enum.PageClients.TYPE_FORCAGE.PROSPECTS))},t.prototype.afficherTout=function(){this.$modalInstance.close(this.setRetourPopup(e.Enum.PageClients.TYPE_FORCAGE.TOUT))},t.prototype.nouvelleSelection=function(){this.$modalInstance.close(this.setRetourPopup(e.Enum.PageClients.TYPE_FORCAGE.SANS))},t.prototype.setRetourPopup=function(t){var i,n={};switch(n.typeForcage=t,t){case e.Enum.PageClients.TYPE_FORCAGE.CLIENTS:i=2+(this.estAfficherBtnProspects===!0?1:0);break;case e.Enum.PageClients.TYPE_FORCAGE.PROSPECTS:i=2+(this.estAfficherBtnClients===!0?1:0);break;case e.Enum.PageClients.TYPE_FORCAGE.TOUT:i=1+(this.estAfficherBtnClients===!0?1:0)+(this.estAfficherBtnProspects===!0?1:0);break;case e.Enum.PageClients.TYPE_FORCAGE.SANS:i=1+(this.estAfficherBtnClients===!0?1:0)+(this.estAfficherBtnProspects===!0?1:0);break;default:i=1}return n.nombreBoutonsAffiches=i,n},t.CLASS_NAME="ModaleAvertissementChoixPortefeuilleControleur",t.logger=MyWay.Services.Loggers.LoggerFactory.INSTANCE.getClass(t.CLASS_NAME),t.$inject=[e.Constantes.Inject.Angular.$modalInstance,e.Constantes.Inject.Services.listeClientsService],t}();t.ModaleAvertissementChoixPortefeuilleControleur=i,e.app.controller(i.CLASS_NAME,i)}(t=e.Controleurs||(e.Controleurs={}))}(Portefeuille||(Portefeuille={}));var Portefeuille;!function(e){var t;!function(t){"use strict";var i=function(){function t(e,t,i,n,r,o,l){this.$q=e,this.data=t,this.$modalInstance=i,this.choixEdsService=n,this.popupService=r,this.choixUtilisateurService=o,this.contexteService=l,this.ancienNiveauEds=0,this.agenceReadOnly=!1,this.initialiser()}return t.prototype.initialiser=function(){var e=this;t.logger.info(">>> Appel de la méthode : ModaleChoixEdsControleur.initialiser <<<"),this.titre=this.data.headerText,this.edsAncien=this.choixUtilisateurService.edsSelectionne,this.estVueEDS&&(this.choixUtilisateurService.edsSelectionne=null,this.sauveAgentRechercher?this.changeAgent(this.sauveAgentRechercher):this.contexteService.getAuthentification().then(function(t){e.agentChoisi={},e.agentChoisi.id=t.agentConnecte.referenceExterneAgent,e.agentChoisi.designation=t.agentConnecte.designationLongueAgent,e.agentChoisi.idEds=t.agentConnecte.numeroInterneEds,e.agentChoisi.idEdsHierarchique=t.agentConnecte.numeroEdsSuperieur,e.agentChoisi.libelle=t.agentConnecte.libelleEds,e.agentChoisi.refEDS=t.agentConnecte.numeroInterneEds,e.agentChoisi.typeEdsHierarchique=t.agentConnecte.typeEdsRattachement,e.agentChoisi.typeFonction=t.agentConnecte.typeFonction,e.agentChoisi.dateDebutValidite=new Date(t.agentConnecte.dateDebutValidite),e.agentChoisi.dateFinValidite=new Date(t.agentConnecte.dateFinValidite),e.changeAgent(e.agentChoisi)}))},t.prototype.changeAgent=function(e){var i=this;return this.chargementAgences=!0,this.choixUtilisateurService.edsSelectionne=null,this.agenceChoisi=null,this.sauveAgentRechercher=e,this.choixUtilisateurService.rechercherListeAgence(+e.id).then(function(e){i.listeAgences=e,i.listeAgences&&1===i.listeAgences.length?(i.agenceChoisi=e[0],i.changementAgence(i.agenceChoisi,null),i.agenceReadOnly=!0):i.agenceReadOnly=!1,i.chargementAgences=!1})["catch"](function(e){t.logger.error("Erreur de recherche de la liste des agences",e.codeLibelle,e.libelle),i.popupService.showErreur(e),i.chargementAgences=!1})},t.prototype.changementAgence=function(e,i){var n=this;return this.chargementAgents=!0,this.choixUtilisateurService.edsSelectionne=null,this.choixUtilisateurService.rechercherEdsInferieurs(e).then(function(t){return i||(n.changementAgence(n.agenceChoisi,e),n.agenceChoisi.affiche=!0),n.chargementAgents=!1,n.$q.when()})["catch"](function(e){return t.logger.error("Erreur de recherche de la liste des agents",e.codeLibelle,e.libelle),n.popupService.showErreur(e)})},t.prototype.valider=function(){var e=this;this.choixEdsService.getCaracteristiquesAgent(this.agentChoisi).then(function(t){e.estVueEDS||(e.choixUtilisateurService.edsSelectionne=null),e.$modalInstance.close(t)})["catch"](function(i){t.logger.error("Erreur de recherche de l'EDS",i.codeLibelle,i.libelle),e.popupService.showErreur(i)})},Object.defineProperty(t.prototype,"estVueEDS",{get:function(){return this.data.model===e.Enum.Vue.TYPE_VUE.VUE_EDS.toString()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"estChoisiEDS",{get:function(){return this.agentChoisi&&this.agentChoisi.id?!0:!1},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"estChoisiEDSvalide",{get:function(){return!this.estVueEDS&&this.estChoisiEDS||this.estVueEDS&&this.estChoisiEDS&&this.agenceChoisi&&this.edsSelectionne?!0:!1},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"edsRattachement",{get:function(){return this.estVueEDS&&this.agenceChoisi?this.agenceChoisi:{}},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"afficheListeEdsRattachement",{get:function(){return!this.agenceReadOnly&&this.agentChoisi&&this.agentChoisi.id?!0:!1},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"afficheLibelleEdsRattachement",{get:function(){return this.agenceReadOnly&&this.agentChoisi&&this.agentChoisi.id?!0:!1},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"nomEdsRattachement",{get:function(){return this.agenceChoisi&&this.agenceChoisi.nomEds?this.agenceChoisi.nomEds:""},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"afficheEdsSelectionne",{get:function(){return this.estVueEDS},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"nomEdsSelectionne",{get:function(){return this.choixUtilisateurService.edsSelectionne?this.choixUtilisateurService.edsSelectionne.nomEds:""},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"edsSelectionne",{get:function(){return this.choixUtilisateurService.edsSelectionne},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"afficheBlocEds",{get:function(){return this.estVueEDS&&this.estChoisiEDS&&null!=this.agenceChoisi},enumerable:!0,configurable:!0}),t.prototype.fermer=function(){this.choixUtilisateurService.edsSelectionne=this.edsAncien,this.$modalInstance.dismiss()},t.CLASS_NAME="ModaleChoixEdsControleur",t.logger=MyWay.Services.Loggers.LoggerFactory.INSTANCE.getClass(t.CLASS_NAME),t.$inject=[e.Constantes.Inject.Angular.$q,e.Constantes.Inject.MyWay.data,e.Constantes.Inject.Angular.$modalInstance,e.Constantes.Inject.Services.choixEdsService,e.Constantes.Inject.Services.popupService,e.Constantes.Inject.Services.choixUtilisateurService,e.Constantes.Inject.Services.contexteService],t}();t.ModaleChoixEdsControleur=i,e.app.controller(i.CLASS_NAME,i)}(t=e.Controleurs||(e.Controleurs={}))}(Portefeuille||(Portefeuille={}));var Portefeuille;!function(e){var t;!function(t){"use strict";var i=function(){function t(e,t){this.$modalInstance=e,this.data=t,this.initialiser()}return t.prototype.initialiser=function(){t.logger.info(">>> Appel de la méthode : ModaleClientsActiverControleur.initialiser <<<"),this.clientsAActiver=angular.copy(this.data),this.tableauRaisonsSociales=new e.Modeles.Tableaux.TableauRaisonsSociales(!0),this.titreModale="Clients à activer",this.clientsAActiver&&(this.tableauRaisonsSociales.data=this.clientsAActiver)},t.prototype.fermer=function(){this.$modalInstance.dismiss()},t.CLASS_NAME="ModaleClientsActiverControleur",t.logger=MyWay.Services.Loggers.LoggerFactory.INSTANCE.getClass(t.CLASS_NAME),t.$inject=[e.Constantes.Inject.Angular.$modalInstance,e.Constantes.Inject.Autres.dataModale],t}();t.ModaleClientsActiverControleur=i,e.app.controller(i.CLASS_NAME,i)}(t=e.Controleurs||(e.Controleurs={}))}(Portefeuille||(Portefeuille={}));var Portefeuille;!function(e){var t;!function(t){"use strict";var i=function(){function t(e,t){this.$modalInstance=e,this.data=t,this.initialiser()}return t.prototype.initialiser=function(){t.logger.info(">>> Appel de la méthode : ModaleClientsRenegocierControleur.initialiser <<<"),this.clientsARenegocier=angular.copy(this.data),this.tableauRaisonsSociales=new e.Modeles.Tableaux.TableauRaisonsSociales(!1),this.titreModale="Tarifications à renégocier",this.clientsARenegocier&&(this.tableauRaisonsSociales.data=this.clientsARenegocier)},t.prototype.fermer=function(){this.$modalInstance.dismiss()},t.CLASS_NAME="ModaleClientsRenegocierControleur",t.logger=MyWay.Services.Loggers.LoggerFactory.INSTANCE.getClass(t.CLASS_NAME),t.$inject=[e.Constantes.Inject.Angular.$modalInstance,e.Constantes.Inject.Autres.dataModale],t}();t.ModaleClientsRenegocierControleur=i,e.app.controller(i.CLASS_NAME,i)}(t=e.Controleurs||(e.Controleurs={}))}(Portefeuille||(Portefeuille={}));var Portefeuille;!function(e){var t;!function(t){"use strict";var i=function(){function t(e,t,i){this.$modalInstance=e,this.data=t,this.indicateurFlecheService=i,this.initialiser()}return t.prototype.initialiser=function(){t.logger.info(">>> Appel de la méthode : ModaleDetailsFluxCrediteurControleur.initialiser <<<"),this.titreModale="Flux commerciaux créditeurs",this.creerConfigDiagrammeColonneDetailPtfParSuviPar(this.data)},t.prototype.creerConfigDiagrammeColonneDetailPtfParSuviPar=function(t){var i,n=this,r=0;this.configDiagrammeColonneFluxCrediteur=[];var o=Math.max.apply(Math,(l=_.pluck(t.detailParSuviPar,"fluxCrediteursNMoins1")).concat.apply(l,_.pluck(t.detailParSuviPar,"fluxCrediteursAnneeN")));t.detailParSuviPar.forEach(function(t){i={},i.dataIndicateurMutliColonne=[],i.dataIndicateurMutliColonne.push({id:"colonne-flux-cred-"+r,intitule:"",valeur:t.fluxCrediteursNMoins1,couleur:e.Modeles.Application.COULEUR_GRANDE_COLONNE.COULEUR_PERIODE2,hauteur:e.Services.Utils.ApplicationUtils.calculerHauteurRelativeColonne(o,t.fluxCrediteursNMoins1),estMontant:!0}),r+=1,i.dataIndicateurMutliColonne.push({id:"colonne-flux-cred-"+r,intitule:"",valeur:t.fluxCrediteursAnneeN,couleur:e.Modeles.Application.COULEUR_GRANDE_COLONNE.COULEUR_PERIODE1,hauteur:e.Services.Utils.ApplicationUtils.calculerHauteurRelativeColonne(o,t.fluxCrediteursAnneeN),estMontant:!0}),r+=1,i.id="pnb-detail-agent-"+r,i.intitule=t.nomSuiviPar,i.tendence=n.indicateurFlecheService.getConfigIndicateurFleche(t.tauxEvolutionFluxCrediteurs),n.configDiagrammeColonneFluxCrediteur.push(i)}),this.legendeColonne1=moment(t.dateDebFluxAnneeNMoins1).format("MM/YYYY")+" à "+moment(t.dateFinFluxAnneeNMoins1).format("MM/YYYY"),this.couleurColonne1=e.Modeles.Application.COULEUR_GRANDE_COLONNE.COULEUR_PERIODE2,this.legendeColonne2=moment(t.dateDebFluxAnneeN).format("MM/YYYY")+" à "+moment(t.dateFinFluxAnneeN).format("MM/YYYY"),this.couleurColonne2=e.Modeles.Application.COULEUR_GRANDE_COLONNE.COULEUR_PERIODE1,this.configTendenceFluxCrediteurTotal=this.indicateurFlecheService.getConfigIndicateurFleche(t.tauxEvolutionFluxCrediteurs);var l},Object.defineProperty(t.prototype,"libelle1Total",{get:function(){return"Total flux créditeurs N-1 : "+e.Services.Utils.DataUtils.formaterMontantkiloText(this.data.fluxCrediteursNMoins1)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"libelle2Total",{get:function(){return"Total flux créditeurs N : "+e.Services.Utils.DataUtils.formaterMontantkiloText(this.data.fluxCrediteursAnneeN)},enumerable:!0,configurable:!0}),t.prototype.fermer=function(){this.$modalInstance.dismiss()},t.CLASS_NAME="ModaleDetailsFluxCrediteurControleur",t.logger=MyWay.Services.Loggers.LoggerFactory.INSTANCE.getClass(t.CLASS_NAME),t.$inject=[e.Constantes.Inject.Angular.$modalInstance,e.Constantes.Inject.MyWay.data,e.Constantes.Inject.Services.indicateurFlecheService],t}();t.ModaleDetailsFluxCrediteurControleur=i,e.app.controller(i.CLASS_NAME,i)}(t=e.Controleurs||(e.Controleurs={}))}(Portefeuille||(Portefeuille={}));var Portefeuille;!function(e){var t;!function(t){"use strict";var i=function(){function t(e,t,i){this.$modalInstance=e,this.data=t,this.indicateurFlecheService=i,this.initialiser()}return t.prototype.initialiser=function(){t.logger.info(">>> Appel de la méthode : ModaleDetailsFluxDebiteurControleur.initialiser <<<"),this.titreModale="Flux commerciaux débiteurs",this.creerConfigDiagrammeColonneDetailPtfParSuviPar(this.data)},t.prototype.creerConfigDiagrammeColonneDetailPtfParSuviPar=function(t){var i,n=this,r=0;this.configDiagrammeColonneFluxDebiteur=[];var o=Math.max.apply(Math,(l=_.pluck(t.detailParSuviPar,"fluxDebiteursNMoins1")).concat.apply(l,_.pluck(t.detailParSuviPar,"fluxDebiteursAnneeN")));t.detailParSuviPar.forEach(function(t){i={},i.dataIndicateurMutliColonne=[],i.dataIndicateurMutliColonne.push({id:"colonne-flux-debit-"+r,intitule:"",valeur:t.fluxDebiteursNMoins1,couleur:e.Modeles.Application.COULEUR_GRANDE_COLONNE.COULEUR_PERIODE2,hauteur:e.Services.Utils.ApplicationUtils.calculerHauteurRelativeColonne(o,t.fluxDebiteursNMoins1),estMontant:!0}),r+=1,i.dataIndicateurMutliColonne.push({id:"colonne-flux-debit-"+r,intitule:"",valeur:t.fluxDebiteursAnneeN,couleur:e.Modeles.Application.COULEUR_GRANDE_COLONNE.COULEUR_PERIODE1,hauteur:e.Services.Utils.ApplicationUtils.calculerHauteurRelativeColonne(o,t.fluxDebiteursAnneeN),
estMontant:!0}),r+=1,i.id="pnb-detail-agent-"+r,i.intitule=t.nomSuiviPar,i.tendence=n.indicateurFlecheService.getConfigIndicateurFleche(t.tauxEvolutionFluxDebiteurs),n.configDiagrammeColonneFluxDebiteur.push(i)}),this.legendeColonne1=moment(t.dateDebFluxAnneeNMoins1).format("MM/YYYY")+" à "+moment(t.dateFinFluxAnneeNMoins1).format("MM/YYYY"),this.couleurColonne1=e.Modeles.Application.COULEUR_GRANDE_COLONNE.COULEUR_PERIODE2,this.legendeColonne2=moment(t.dateDebFluxAnneeN).format("MM/YYYY")+" à "+moment(t.dateFinFluxAnneeN).format("MM/YYYY"),this.couleurColonne2=e.Modeles.Application.COULEUR_GRANDE_COLONNE.COULEUR_PERIODE1,this.configTendenceFluxDebiteurTotal=this.indicateurFlecheService.getConfigIndicateurFleche(t.tauxEvolutionFluxDebiteurs);var l},Object.defineProperty(t.prototype,"libelle1Total",{get:function(){return"Total flux débiteurs N-1 : "+e.Services.Utils.DataUtils.formaterMontantkiloText(this.data.fluxDebiteursNMoins1)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"libelle2Total",{get:function(){return"Total flux débiteurs N : "+e.Services.Utils.DataUtils.formaterMontantkiloText(this.data.fluxDebiteursAnneeN)},enumerable:!0,configurable:!0}),t.prototype.fermer=function(){this.$modalInstance.dismiss()},t.CLASS_NAME="ModaleDetailsFluxDebiteurControleur",t.logger=MyWay.Services.Loggers.LoggerFactory.INSTANCE.getClass(t.CLASS_NAME),t.$inject=[e.Constantes.Inject.Angular.$modalInstance,e.Constantes.Inject.MyWay.data,e.Constantes.Inject.Services.indicateurFlecheService],t}();t.ModaleDetailsFluxDebiteurControleur=i,e.app.controller(i.CLASS_NAME,i)}(t=e.Controleurs||(e.Controleurs={}))}(Portefeuille||(Portefeuille={}));var Portefeuille;!function(e){var t;!function(t){"use strict";var i=function(){function t(e,t){this.$modalInstance=e,this.data=t,this.initialiser()}return t.prototype.initialiser=function(){t.logger.info(">>> Appel de la méthode : ModaleDetailsPortefeuilleControleur.initialiser <<<"),this.titreModale="Portefeuille(s)",this.creerConfigDiagrammeColonneDetailPtfParSuviPar(this.data.detailParSuviPar),this.typeDiagramme=1},t.prototype.creerConfigDiagrammeColonneDetailPtfParSuviPar=function(t){var i=this;this.configDiagrammeColonnePortefeuille=[];var n=Math.max.apply(Math,_.pluck(t,"nbClientsAvecProduitService"));this.nombreTotalClient=_.pluck(t,"nbClientsAvecProduitService").reduce(function(e,t){return e+t}),this.nombreTotalDontActif=_.pluck(t,"nombreClientsActifs").reduce(function(e,t){return e+t}),t.forEach(function(t){i.configDiagrammeColonnePortefeuille.push({id:"colonne-clients"+t.nomSuiviPar,intitule:e.Constantes.Application.DIAGRAMME_COLONNE_CLIENTS,sousIntitule:e.Constantes.Application.DIAGRAMME_COLONNE_CLIENTS_ACTIFS,valeur:t.nbClientsAvecProduitService,sousValeur:t.nombreClientsActifs,couleur:e.Modeles.Application.COULEUR_GRANDE_COLONNE.COULEUR_CLIENT,couleurSousValeur:e.Modeles.Application.COULEUR_GRANDE_COLONNE.COULEUR_ACTIF,hauteur:e.Services.Utils.ApplicationUtils.calculerHauteurRelativeColonne(n,Math.abs(t.nbClientsAvecProduitService-t.nombreClientsActifs)),sousHauteur:e.Services.Utils.ApplicationUtils.calculerHauteurRelativeColonne(n,t.nombreClientsActifs),estMontant:!1,nomSuiviPar:t.nomSuiviPar})})},Object.defineProperty(t.prototype,"libelleTotal",{get:function(){return"Total clients : "+this.nombreTotalClient+" dont "+this.nombreTotalDontActif+" actifs"},enumerable:!0,configurable:!0}),t.prototype.fermer=function(){this.$modalInstance.dismiss()},t.CLASS_NAME="ModaleDetailsPortefeuilleControleur",t.logger=MyWay.Services.Loggers.LoggerFactory.INSTANCE.getClass(t.CLASS_NAME),t.$inject=[e.Constantes.Inject.Angular.$modalInstance,e.Constantes.Inject.MyWay.data],t}();t.ModaleDetailsPortefeuilleControleur=i,e.app.controller(i.CLASS_NAME,i)}(t=e.Controleurs||(e.Controleurs={}))}(Portefeuille||(Portefeuille={}));var Portefeuille;!function(e){var t;!function(t){"use strict";var i=function(){function t(e,t,i){this.$modalInstance=e,this.data=t,this.indicateurFlecheService=i,this.initialiser()}return t.prototype.initialiser=function(){t.logger.info(">>> Appel de la méthode : ModaleDetailsRentabilitePNBControleur.initialiser <<<"),this.titreModale="PNB (IPADE)",this.creerConfigDiagrammeColonneDetailPtfParSuviPar(this.data)},t.prototype.creerConfigDiagrammeColonneDetailPtfParSuviPar=function(t){var i,n=this,r=0;this.configDiagrammeColonnePnb=[];var o=Math.max.apply(Math,(l=_.pluck(t.detailParSuviPar,"pnb12DerniersMoisGlissNMoins1")).concat.apply(l,_.pluck(t.detailParSuviPar,"pnb12DerniersMoisGlissantN")));t.detailParSuviPar.forEach(function(t){i={},i.dataIndicateurMutliColonne=[],i.dataIndicateurMutliColonne.push({id:"colonne-pnb-"+r,intitule:"",valeur:t.pnb12DerniersMoisGlissNMoins1,couleur:e.Modeles.Application.COULEUR_GRANDE_COLONNE.COULEUR_PERIODE2,hauteur:e.Services.Utils.ApplicationUtils.calculerHauteurRelativeColonne(o,t.pnb12DerniersMoisGlissNMoins1),estMontant:!0}),r+=1,i.dataIndicateurMutliColonne.push({id:"colonne-pnb-"+r,intitule:"",valeur:t.pnb12DerniersMoisGlissantN,couleur:e.Modeles.Application.COULEUR_GRANDE_COLONNE.COULEUR_PERIODE1,hauteur:e.Services.Utils.ApplicationUtils.calculerHauteurRelativeColonne(o,t.pnb12DerniersMoisGlissantN),estMontant:!0}),r+=1,i.id="pnb-detail-agent-"+r,i.intitule=t.nomSuiviPar,i.tendence=n.indicateurFlecheService.getConfigIndicateurFleche(t.tauxEvolutionPnb),n.configDiagrammeColonnePnb.push(i)}),this.legendeColonne1=moment(t.dateDebPnb12DerMoisGlissNMoins1).format("DD/MM/YYYY")+" à "+moment(t.dateFinPnb12DerMoisGlissNMoins1).format("DD/MM/YYYY"),this.couleurColonne1=e.Modeles.Application.COULEUR_GRANDE_COLONNE.COULEUR_PERIODE2,this.legendeColonne2=moment(t.dateDebPnb12DerMoisGlissN).format("DD/MM/YYYY")+" à "+moment(t.dateFinPnb12DerMoisGlissN).format("DD/MM/YYYY"),this.couleurColonne2=e.Modeles.Application.COULEUR_GRANDE_COLONNE.COULEUR_PERIODE1,this.configTendencePNBTotal=this.indicateurFlecheService.getConfigIndicateurFleche(t.tauxEvolutionPnb);var l},Object.defineProperty(t.prototype,"libelle1Total",{get:function(){return"Total PNB N-1 : "+e.Services.Utils.DataUtils.formaterMontantkiloText(this.data.pnb12DerniersMoisGlissNMoins1)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"libelle2Total",{get:function(){return"Total PNB N : "+e.Services.Utils.DataUtils.formaterMontantkiloText(this.data.pnb12DerniersMoisGlissantN)},enumerable:!0,configurable:!0}),t.prototype.fermer=function(){this.$modalInstance.dismiss()},t.CLASS_NAME="ModaleDetailsRentabilitePNBControleur",t.logger=MyWay.Services.Loggers.LoggerFactory.INSTANCE.getClass(t.CLASS_NAME),t.$inject=[e.Constantes.Inject.Angular.$modalInstance,e.Constantes.Inject.MyWay.data,e.Constantes.Inject.Services.indicateurFlecheService],t}();t.ModaleDetailsRentabilitePNBControleur=i,e.app.controller(i.CLASS_NAME,i)}(t=e.Controleurs||(e.Controleurs={}))}(Portefeuille||(Portefeuille={}));var Portefeuille;!function(e){var t;!function(t){"use strict";var i=function(){function t(e,t){this.$modalInstance=e,this.data=t,this.initialiser()}return t.prototype.initialiser=function(){t.logger.info(">>> Appel de la méthode : ModaleDetailsRevuePortefeuilleControleur.initialiser <<<"),this.titreModale="Taux de revues",this.creerConfigDiagrammePourcentageDetailTauxRevueParSuviPar(this.data)},t.prototype.creerConfigDiagrammePourcentageDetailTauxRevueParSuviPar=function(t){var i=this;this.configDiagrammePourcentageTauxRevue=[];var n=0;t.detailParSuviPar.forEach(function(t){i.configDiagrammePourcentageTauxRevue.push({titre:"",id:"pourcentage-clients-revue"+n,degrade:e.Services.LibrairieD3.DEGRADE_POURCENTAGE.BLEU,pourcentageUn:t.tauxDeRevue,nombreUn:t.tauxDeRevue,legende:t.nomSuiviPar}),n+=1}),this.pourcentageTauxTotal=this.data.tauxDeRevueTotal},t.prototype.fermer=function(){this.$modalInstance.dismiss()},t.CLASS_NAME="ModaleDetailsRevuePortefeuilleControleur",t.logger=MyWay.Services.Loggers.LoggerFactory.INSTANCE.getClass(t.CLASS_NAME),t.$inject=[e.Constantes.Inject.Angular.$modalInstance,e.Constantes.Inject.MyWay.data],t}();t.ModaleDetailsRevuePortefeuilleControleur=i,e.app.controller(i.CLASS_NAME,i)}(t=e.Controleurs||(e.Controleurs={}))}(Portefeuille||(Portefeuille={}));var Portefeuille;!function(e){var t;!function(t){"use strict";var i=function(){function t(e,t){this.$modalInstance=e,this.data=t,this.initialiser()}return t.prototype.initialiser=function(){t.logger.info(">>> Appel de la méthode : ModaleDetailsPortefeuilleControleur.initialiser <<<"),this.titreModale="Taux de visites (Relations économiques)",this.creerConfigDiagrammePourcentageDetailTauxVisiteParSuviPar(this.data)},t.prototype.creerConfigDiagrammePourcentageDetailTauxVisiteParSuviPar=function(t){var i=this;this.configDiagrammePourcentageTauxVisite=[];var n=0;t.detailParSuviPar.forEach(function(t){i.configDiagrammePourcentageTauxVisite.push({titre:"",id:"pourcentage-clients-visite"+n,degrade:e.Services.LibrairieD3.DEGRADE_POURCENTAGE.BLEU,pourcentageUn:t.tauxDeVisite,nombreUn:t.tauxDeVisite,legende:t.nomSuiviPar}),n+=1}),this.pourcentageTauxTotal=this.data.tauxDeVisiteTotal},t.prototype.fermer=function(){this.$modalInstance.dismiss()},t.CLASS_NAME="ModaleDetailsTauxVisiteControleur",t.logger=MyWay.Services.Loggers.LoggerFactory.INSTANCE.getClass(t.CLASS_NAME),t.$inject=[e.Constantes.Inject.Angular.$modalInstance,e.Constantes.Inject.MyWay.data],t}();t.ModaleDetailsTauxVisiteControleur=i,e.app.controller(i.CLASS_NAME,i)}(t=e.Controleurs||(e.Controleurs={}))}(Portefeuille||(Portefeuille={}));var Portefeuille;!function(e){var t;!function(t){"use strict";var i=function(){function t(e,t,i,n,r,o,l){this.$scope=e,this.$modalInstance=t,this.data=i,this.$filter=n,this.indicateurService=r,this.filtreService=o,this.begacliService=l,this.initialiser()}return t.prototype.initialiser=function(){var i=this;t.logger.info(">>> Appel de la méthode : ModaleFiltreControleur.initialiser <<<"),console.log("--> filtre Begacli",this.begacliService.getFiltreBegacli()),this.listeIndicateurs=this.data.model.listeIndicateursFiltre,this.listeIndicateursTableau=this.data.model.listeIndicateursTableau,this.listeFiltres=this.data.model.listeFiltres,this.estVueClient=this.data.model.estVueClient,this.sansFiltreActif=0===this.listeFiltres.length,this.listeIndicateursFiltreDisponible=[],_.forEach(this.listeIndicateursTableau,function(t){t.indicateur.code!==e.Enum.Indicateur.CODE.PREMIER_EQUIPEMENT.toString()&&(i.estVueClient?i.ajouterFiltreDisponible(t.indicateur.code):t.indicateur.estUniquementVueClients||i.ajouterFiltreDisponible(t.indicateur.codeRel))}),_.forEach(this.indicateurService.getListeTotaleIndicateursType(),function(t){t.estVisibleColonne||t.code===e.Enum.Indicateur.CODE.PREMIER_EQUIPEMENT.toString()||(i.estVueClient?i.ajouterFiltreDisponible(t.code):t.estUniquementVueClients||i.ajouterFiltreDisponible(t.codeRel))});var n=this.$filter("sansIndicateurDateFiltre")(this.listeIndicateursFiltreDisponible);this.pasDeFiltreDisponible=0===n.length,this.unSeulFiltreDisponible=1===n.length,this.sansFiltreActif&&this.ajouterCondition(!1)},t.prototype.ajouterFiltreDisponible=function(t){var i=_.find(this.listeIndicateurs,function(e){return t===e.indicateur.code});i&&i.indicateur.code!==e.Enum.Indicateur.CODE.PREMIER_EQUIPEMENT_TAG.toString()&&this.listeIndicateursFiltreDisponible.push(i)},t.prototype.ajouterCondition=function(e){this.filtreService.ajouterFiltre(this.listeFiltres,e)},t.prototype.appliquer=function(){var e={};e.listeFiltres=this.listeFiltres,e.listeIndicateursFiltre=this.listeIndicateurs,console.log("--> appliquer : ",this.listeFiltres),0===this.listeFiltres.length&&this.begacliService.setCasesDecochees(),this.$modalInstance.close(e)},t.prototype.fermer=function(){this.$modalInstance.dismiss()},t.prototype.appuiToucheEntrer=function(e){13!==e.keyCode||this.desactiverBoutonAppliquer()||(e.preventDefault(),this.appliquer())},t.prototype.afficherBoutonAjouter=function(){return 1===this.listeFiltres.length&&this.unSeulFiltreDisponible?!1:!(this.listeFiltres.length>=2)},t.prototype.desactiverBoutonAnnuler=function(){return this.pasDeFiltreDisponible||this.sansFiltreActif&&0===this.listeFiltres.length},t.prototype.desactiverBoutonAppliquer=function(){var t=this,i=!1;return _.forEach(this.listeFiltres,function(n,r){if(!n.indicateur)return i=!0,!1;switch(n.indicateur.indicateur.typeIndicateur){case e.Enum.Indicateur.TYPE.TEXTE:if(!_.find(n.indicateur.listeValeurs,function(e){return e.actif}))return i=!0,!1;break;case e.Enum.Indicateur.TYPE.BEGACLI:if(!t.begacliService.getCasesCochees())return i=!0,!1;break;case e.Enum.Indicateur.TYPE.NOMBRE:case e.Enum.Indicateur.TYPE.DATE:case e.Enum.Indicateur.TYPE.MONTANT:case e.Enum.Indicateur.TYPE.POURCENT:if(t.controllerComparateurKo(n))return i=!0,!1;break;default:return i=!0,!1}return!n.operateur&&r>0?(i=!0,!1):void 0}),i||this.pasDeFiltreDisponible||this.sansFiltreActif&&0===this.listeFiltres.length},t.prototype.estVide=function(e){return null===e||void 0===e||0>e},t.prototype.controllerComparateurKo=function(t){var i=!1;return t.comparateur?t.comparateur===e.Enum.Filtre.COMPARATEUR.NC||t.comparateur===e.Enum.Filtre.COMPARATEUR.NONREALISEE||t.comparateur===e.Enum.Filtre.COMPARATEUR.ECHUE||t.comparateur===e.Enum.Filtre.COMPARATEUR.ENCOURS?i=!1:t.comparateur===e.Enum.Filtre.COMPARATEUR.ENTRE?this.estVide(t.valeurMultiple1)||this.estVide(t.valeurMultiple2)?i=!0:t.valeurMultiple1>t.valeurMultiple2&&(i=!0):this.estVide(t.valeurUnique)&&(i=!0):i=!0,i},t.CLASS_NAME="ModaleFiltreControleur",t.logger=MyWay.Services.Loggers.LoggerFactory.INSTANCE.getClass(t.CLASS_NAME),t.$inject=[e.Constantes.Inject.Angular.$scope,e.Constantes.Inject.Angular.$modalInstance,e.Constantes.Inject.MyWay.data,e.Constantes.Inject.Angular.$filter,e.Constantes.Inject.Services.indicateurService,e.Constantes.Inject.Services.filtreService,e.Constantes.Inject.Services.begacliService],t}();t.ModaleFiltreControleur=i,e.app.controller("ModaleFiltreControleur",i)}(t=e.Controleurs||(e.Controleurs={}))}(Portefeuille||(Portefeuille={}));var Portefeuille;!function(e){var t;!function(t){"use strict";var i=function(){function t(t,i,n,r,o,l,a,s,u,c,E,d,p){var f=this;this.$rootScope=t,this.$scope=i,this.modalePaniersService=n,this.$modalInstance=r,this.data=o,this.preferencesService=l,this.popupService=a,this.indicateurService=s,this.listeClientsService=u,this.$q=c,this.mwEvents=E,this.$location=d,this.scroll=p,this.panierDeposeEvent=function(t){t.indicateur.choisi=!0;var i={};i.id=f.modalePaniersService.genererIdentifiantAleatoire(),i.indicateur=t.indicateur,f.listeTuilePanierSettings.push(i),f.setEstActiverDropPanier(!1),f.modalePaniersService.desactiverDropTuilesPanier(f.listeTuilePanierSettings),f.rafraichirListeTuileCatalogueSettings(),f.getNombreIndicateurPanier()===e.Constantes.ModalePaniers.NOMBRE_INDICATEUR_MAX&&_.forEach(f.listeTuileCatalogueSettings,function(e){e.dragSettings.desactiverDrag()}),f.modalePaniersService.afficherMessageAvertissementFiltre(f.listeFiltresRelationEco,f.listeFiltresClients,_.pluck(f.listeTuilePanierSettings,"indicateur")),f.$scope.$apply()},this.poubelleDeposeEvent=function(e){if(f.estEnEditionCatalogue){var t=_.find(f.listeTuileCatalogueSettings,function(t){return t.indicateur.indicateur.code===e.indicateur.indicateur.code});t.estEnEdition=!0}f.modalePaniersService.supprimerIndicateurPanier(e,f.listeTuileCatalogueSettings,f.listeTuilePanierSettings,f.listeFiltresClients,f.listeFiltresRelationEco),f.setEstAfficherDropPoubelle(!1),f.modalePaniersService.desactiverDropTuilesPanier(f.listeTuilePanierSettings)},this.listeTotaleIndicateurs=o.model.listeTotaleIndicateurs,this.listePaniers=o.model.listePaniers?o.model.listePaniers:[],this.listeFiltresClients=o.model.listeFiltresClients,this.listeFiltresRelationEco=o.model.listeFiltresRelationEco,this.txtAjoutPerso=e.Constantes.Application.CHAINE_AJOUT_PERSONNALISATION,this.listeErreurs=[],this.initialiser()}return t.prototype.initialiser=function(){var i=this;this.chargementEnCours=!1,t.logger.info(">>> Appel de la méthode : ModalePaniersControleur.initialiser <<<"),this.modalePaniersService.setModalePaniersControleur(this),this.estAfficherDropPanier=!1,this.estEnEditionPanier=!1,0===this.listePaniers.length&&this.ajouterSelection();var n=_.where(this.listePaniers,{estDefaut:!0});this.panierEnCours=n.length>0?n[0]:this.listePaniers[0],this.listePaniers.length<e.Constantes.Application.LIMITE_NB_PANIERS&&this.panierEnCours.nom&&this.listePaniers.push(this.recupererPanierFacticeAjoutSelection()),this.panierEnCours.numero&&this.estFormulaireValide(),this.listeTuileCatalogueSettings=[],_.forEach(this.listeTotaleIndicateurs,function(e){if(e.estVisibleColonne){var t={};t.id=i.modalePaniersService.genererIdentifiantAleatoire(),t.estEnEdition=!1;var n=_.find(i.panierEnCours.listeChoixIndicateurs,function(t){return t.indicateur.code===e.code});if(n)t.indicateur=n;else{var r={};r.indicateur=e,r.choisi=!1,t.indicateur=r}i.listeTuileCatalogueSettings.push(t)}}),this.listeTuilePanierSettings=[],_.forEach(this.panierEnCours.listeChoixIndicateurs,function(e){var t={};t.id=i.modalePaniersService.genererIdentifiantAleatoire(),t.indicateur=e,t.estEnEdition=!1,i.listeTuilePanierSettings.push(t)}),this.panierDropSettings=this.modalePaniersService.creerDropSettings(this.panierDeposeEvent),this.poubelleDropSettings=this.modalePaniersService.creerDropSettings(this.poubelleDeposeEvent)},t.prototype.recupererPanierFacticeAjoutSelection=function(){var t={numero:0,estDefaut:!1,listeChoixIndicateurs:null,nom:e.Constantes.Application.CHAINE_AJOUT_PERSONNALISATION};return t},t.prototype.setEstActiverDropPanier=function(e){this.estAfficherDropPanier=e,e?this.panierDropSettings.activerDragOver():this.panierDropSettings.desactiverDragOver(),this.$scope.$apply()},t.prototype.setEstAfficherDropPoubelle=function(e){e?this.poubelleDropSettings.activerDragOver():this.poubelleDropSettings.desactiverDragOver(),this.$scope.$apply()},t.prototype.setEstAfficherBoutonAjouter=function(e){this.estAfficherBoutonAjouter=e,this.$scope.$apply()},t.prototype.rafraichirListeTuileCatalogueSettings=function(){var t=this,i=this.listeTuileCatalogueSettings;this.listeTuileCatalogueSettings=[],this.$scope.$apply(),this.listeTuileCatalogueSettings=i,this.estEnEditionCatalogue&&_.forEach(this.listeTuileCatalogueSettings,function(i){i.indicateur.choisi||(t.getNombreIndicateurPanier()<e.Constantes.ModalePaniers.NOMBRE_INDICATEUR_MAX&&(i.estEnEdition=!0),i&&i.dragSettings&&i.dragSettings.desactiverDrag())}),this.estEnEditionPanier&&_.forEach(this.listeTuilePanierSettings,function(e){e.estEnEdition=!0,e&&e.dragSettings&&e.dragSettings.desactiverDrag()}),this.$scope.$apply()},t.prototype.getNombreIndicateurPanier=function(){return this.listeTuilePanierSettings.length},t.prototype.ajouterSelection=function(){_.forEach(this.listePaniers,function(e){e.estDefaut=!1}),this.listePaniers.push({nom:"",listeChoixIndicateurs:[],estDefaut:!0,numero:void 0})},t.prototype.ajouterIndicateur=function(){this.estEnEditionCatalogue=!0,_.forEach(this.listeTuileCatalogueSettings,function(e){e.indicateur.choisi||(e.estEnEdition=!0,e.dragSettings.desactiverDrag())}),this.listeCodesIndicateursPanierInit=_.pluck(this.listeTuilePanierSettings,"indicateur.indicateur.code")},t.prototype.activerModeEditionPanier=function(){var t=this;this.estEnEditionPanier=!0,_.forEach(this.listeTuilePanierSettings,function(e){e.estEnEdition=!0,e.dragSettings.desactiverDrag()}),this.estEnEditionCatalogue=!0,_.forEach(this.listeTuileCatalogueSettings,function(i){i.indicateur.choisi||(t.getNombreIndicateurPanier()<e.Constantes.ModalePaniers.NOMBRE_INDICATEUR_MAX&&(i.estEnEdition=!0),i.dragSettings.desactiverDrag())}),this.listeCodesIndicateursPanierInit=_.pluck(this.listeTuilePanierSettings,"indicateur.indicateur.code")},t.prototype.supprimerTousLesIndicateurs=function(){var e=this,t=[];_.forEach(this.listeTuilePanierSettings,function(e){t.push(e)}),_.forEach(t,function(t){e.modalePaniersService.supprimerIndicateurPanier(t,e.listeTuileCatalogueSettings,e.listeTuilePanierSettings,e.listeFiltresClients,e.listeFiltresRelationEco)})},t.prototype.enregistrerEditionPanier=function(){this.initFinEditionPanier(),this.enregistrerEditionCatalogue()},t.prototype.annulerEditionPanier=function(){this.initFinEditionPanier(),this.remettrePanierInitial(),this.annulerEditionCatalogue()},t.prototype.initFinEditionPanier=function(){this.estEnEditionPanier=!1,_.forEach(this.listeTuilePanierSettings,function(e){e.estEnEdition=!1,e.dragSettings.activerDrag()})},t.prototype.enregistrerEditionCatalogue=function(){this.initFinEditionCatalogue()},t.prototype.annulerEditionCatalogue=function(){this.initFinEditionCatalogue(),this.remettrePanierInitial()},t.prototype.initFinEditionCatalogue=function(){var t=this;this.estEnEditionCatalogue=!1,_.forEach(this.listeTuileCatalogueSettings,function(i){i.estEnEdition=!1,t.getNombreIndicateurPanier()===e.Constantes.ModalePaniers.NOMBRE_INDICATEUR_MAX?i.dragSettings.desactiverDrag():i.indicateur.choisi?i.dragSettings.desactiverDrag():i.dragSettings.activerDrag()})},t.prototype.remettrePanierInitial=function(){var t=this;this.listeTuilePanierSettings=[],_.forEach(this.listeCodesIndicateursPanierInit,function(e){var i=_.find(t.listeTuileCatalogueSettings,function(t){return t.indicateur.indicateur.code===e}),n={};n.id=t.modalePaniersService.genererIdentifiantAleatoire(),n.indicateur=i.indicateur,n.indicateur.choisi=!0,n.estEnEdition=!1,t.listeTuilePanierSettings.push(n)}),_.forEach(this.listeTuileCatalogueSettings,function(e){var i=_.find(t.listeCodesIndicateursPanierInit,function(t){return e.indicateur.indicateur.code===t});i||(e.indicateur.choisi=!1)}),this.listeTuilePanierSettings.length===e.Constantes.ModalePaniers.NOMBRE_INDICATEUR_MAX?this.modalePaniersService.cacherBoutonValider():this.modalePaniersService.afficherBoutonValider(),this.modalePaniersService.afficherMessageAvertissementFiltre(this.listeFiltresRelationEco,this.listeFiltresClients,_.pluck(this.listeTuilePanierSettings,"indicateur")),this.rafraichirListeTuileCatalogueSettings()},t.prototype.majIndicateursClients=function(){var e=this.indicateurService.getListeEcartIndicateurParametrable(this.panierEnCours.listeChoixIndicateurs);return this.indicateurService.setListeIndicateurChoix(this.panierEnCours.listeChoixIndicateurs),e.length>0?this.listeClientsService.majClientsIndicateurs(e):this.$q.when()},t.prototype.changePanier=function(e){0===e.numero?this.ajouterSelection():_.forEach(this.listePaniers,function(t){t.nom===e.nom?t.estDefaut=!0:t.estDefaut=!1}),_.remove(this.listePaniers,function(e){return 0===e.numero}),this.initialiser()},t.prototype.afficherMessageAvertissementFiltre=function(e,t,i,n){this.nomFiltre1=e,this.nomFiltre2=t,this.nomFiltre3=i,this.nomFiltre4=n},t.prototype.estFormulaireValide=function(){return this.panierEnCours.nom?!0:(this.listeErreurs.push({message:"Le champ Nom est obligatoire",champs:"Nom",ancre:"id-nom"}),!1)},t.prototype.goToAnchor=function(e){this.$location.hash(e),this.scroll.yOffset=100,this.scroll()},t.prototype.valider=function(){var e=this;return this.goToAnchor("id-erreur-form"),this.estFormulaireValide()?(this.chargementEnCours=!0,this.panierEnCours.listeChoixIndicateurs=_.pluck(this.listeTuilePanierSettings,"indicateur"),this.majIndicateursClients().then(function(){return e.preferencesService.ecrirePaniers(e.listePaniers)}).then(function(){var t={};t.panier=e.panierEnCours,e.chargementEnCours=!1,e.$modalInstance.close(t)})["catch"](function(i){t.logger.error("Erreur lors de l'enregistrement du panier dans les préférences",i.codeLibelle,i.libelle),e.chargementEnCours=!1,e.popupService.showErreur(i)})):this.$q.when()},t.prototype.estAfficheBtnGererLaSelection=function(){return!this.estEnEditionPanier},t.prototype.estAfficheBtnSupprimerLaSelection=function(){return this.getNombreIndicateurPanier()>0},t.prototype.estValidable=function(){return this.estEnEditionPanier||this.estEnEditionCatalogue||!this.panierEnCours},t.prototype.estChangementPanierDisponible=function(){return this.panierEnCours.nom?!0:!1},t.prototype.fermer=function(){this.$modalInstance.dismiss()},t.CLASS_NAME="ModalePaniersControleur",t.logger=MyWay.Services.Loggers.LoggerFactory.INSTANCE.getClass(t.CLASS_NAME),t.$inject=[e.Constantes.Inject.Angular.$rootScope,e.Constantes.Inject.Angular.$scope,e.Constantes.Inject.Services.modalePaniersService,e.Constantes.Inject.Angular.$modalInstance,e.Constantes.Inject.MyWay.data,e.Constantes.Inject.Services.preferencesService,e.Constantes.Inject.Services.popupService,e.Constantes.Inject.Services.indicateurService,e.Constantes.Inject.Services.listeClientsService,e.Constantes.Inject.Angular.$q,e.Constantes.Inject.MyWay.mwEvents,e.Constantes.Inject.Angular.$location,e.Constantes.Inject.Angular.$anchorScroll],t}();t.ModalePaniersControleur=i,e.app.controller(i.CLASS_NAME,i)}(t=e.Controleurs||(e.Controleurs={}))}(Portefeuille||(Portefeuille={}));var Portefeuille;!function(e){var t;!function(t){var i;!function(t){"use strict";var i=function(){function t(e,t,i){this.serviceAgentExtended=e,this.$scope=t,this.eventService=i,this.afficherDate=!0}return t.prototype.getTexteCA=function(t){var i=e.Services.Utils.DataUtils.getTexteCA(t,e.Enum.Indicateur.CODE.CA_N_MOINS_1.toString());return this.afficherDate=i===e.Constantes.Application.CHAINE_INDICATEUR_NON_CONNU?!1:!0,i},t.prototype.getTexteDate=function(t){var i=e.Services.Utils.DataUtils.getTexteDate(t,e.Enum.Indicateur.CODE.CA_N_MOINS_1.toString());return i},t.$inject=[e.Constantes.Inject.MyWay.serviceAgentExtended,e.Constantes.Inject.Angular.$scope,e.Constantes.Inject.Services.eventService],t}();t.ColonneDataCAN1Controleur=i,e.app.controller("ColonneDataCAN1Controleur",i)}(i=t.TemplateTableau||(t.TemplateTableau={}))}(t=e.Controleurs||(e.Controleurs={}))}(Portefeuille||(Portefeuille={}));var Portefeuille;!function(e){var t;!function(t){var i;!function(t){"use strict";var i=function(){function t(e,t,i){this.serviceAgentExtended=e,this.$scope=t,this.eventService=i,this.afficherDate=!0}return t.prototype.getTexteCA=function(t){var i=e.Services.Utils.DataUtils.getTexteCA(t,e.Enum.Indicateur.CODE.CA_N.toString());return this.afficherDate=i===e.Constantes.Application.CHAINE_INDICATEUR_NON_CONNU?!1:!0,i},t.prototype.getTexteDate=function(t){var i=e.Services.Utils.DataUtils.getTexteDate(t,e.Enum.Indicateur.CODE.CA_N.toString());return i},t.prototype.getTendance=function(t){var i=_.find(t.listeIndicateurs,{code:e.Enum.Indicateur.CODE.CA_N});return i.tendance},t.$inject=[e.Constantes.Inject.MyWay.serviceAgentExtended,e.Constantes.Inject.Angular.$scope,e.Constantes.Inject.Services.eventService],t}();t.ColonneDataCANControleur=i,e.app.controller("ColonneDataCANControleur",i)}(i=t.TemplateTableau||(t.TemplateTableau={}))}(t=e.Controleurs||(e.Controleurs={}))}(Portefeuille||(Portefeuille={}));var Portefeuille;!function(e){var t;!function(t){var i;!function(t){"use strict";var i=function(){function t(t,i,n){this.serviceAgentExtended=t,this.$scope=i,this.eventService=n,this.indicateurActif=e.Constantes.Application.CHAINE_INDICATEUR_ACTIF,this.indicateurInactif=e.Constantes.Application.CHAINE_INDICATEUR_INACTIF,this.indicateurProspect=e.Constantes.Application.CHAINE_INDICATEUR_PROSPECT,this.indicateurLeader=e.Constantes.Application.CHAINE_INDICATEUR_LEADER}return t.prototype.getNoteProspect=function(t){var i=_.find(t.listeIndicateurs,{code:e.Enum.Indicateur.CODE.POTENTIEL_PROSPECT});return i&&i.valeur?_.indexOf(e.Constantes.Application.LIBELLE_NOTE_PROSPECT,i.valeur):0},t.prototype.afficherEtoile=function(e,t){var i=this.getNoteProspect(e);return i&&i>0&&i>=t},t.prototype.isProspect=function(e){return!e.estClient},t.prototype.isActif=function(e){return!this.isProspect(e)&&e.estActifRenseigne&&e.estActif},t.prototype.isInactif=function(e){return!this.isProspect(e)&&e.estActifRenseigne&&!e.estActif&&!this.isSansContrat(e)},t.prototype.isSansContrat=function(e){return e.estSansContrat&&e.estClient},t.prototype.isPremierEquipement=function(t){var i=_.find(t.listeIndicateurs,{code:e.Enum.Indicateur.CODE.PREMIER_EQUIPEMENT_TAG});return i&&i.valeur&&""!==i.valeur&&i.valeur!==e.Constantes.Application.CHAINE_INDICATEUR_NON_CONNU?(this.indicateurPremierEquipement=": "+i.valeur,!0):!1},t.$inject=[e.Constantes.Inject.MyWay.serviceAgentExtended,e.Constantes.Inject.Angular.$scope,e.Constantes.Inject.Services.eventService],t}();t.ColonneDataClientControleur=i,e.app.controller("ColonneDataClientControleur",i)}(i=t.TemplateTableau||(t.TemplateTableau={}))}(t=e.Controleurs||(e.Controleurs={}))}(Portefeuille||(Portefeuille={}));var Portefeuille;!function(e){var t;!function(t){var i;!function(t){"use strict";var i=MyWay.Services.Loggers.LoggerFactory.INSTANCE.getClass,n=function(){function t(){}return t.prototype.recupererDerniereRevue=function(t){var i;return i=_.find(t.listeIndicateurs,function(t){return t&&t.code===e.Enum.Indicateur.CODE.REV_DATE_DERNIERE_REVUE.toString()})},t.prototype.valoriserDateRevue=function(t){var i;return i=this.recupererDerniereRevue(t),i&&i.valeurDate&&moment(i.valeurDate).isValid()&&!moment(i.valeurDate).isSame(e.Constantes.Application.DATE_MIN)&&!moment(i.valeurDate).isSame(e.Constantes.Application.DATE_MAX)?moment(i.valeurDate).format("DD/MM/YYYY"):e.Constantes.Application.CHAINE_INDICATEUR_NON_CONNU},t.prototype.ancienneRevue=function(i){var n;return n=this.recupererDerniereRevue(i),n&&n.valeurDate&&moment(n.valeurDate).isValid()&&!moment(n.valeurDate).isSame(e.Constantes.Application.DATE_MIN)&&!moment(n.valeurDate).isSame(e.Constantes.Application.DATE_MAX)&&moment(n.valeurDate).isBefore(t.dateLimite)},t.CLASS_NAME="ColonneDataDerniereRevueControleur",t.logger=i(t.CLASS_NAME),t.dateLimite=moment(new Date).subtract(1,"year").toDate(),t.$inject=[],t}();t.ColonneDataDerniereRevueControleur=n,e.app.controller(n.CLASS_NAME,n)}(i=t.TemplateTableau||(t.TemplateTableau={}))}(t=e.Controleurs||(e.Controleurs={}))}(Portefeuille||(Portefeuille={}));var Portefeuille;!function(e){var t;!function(t){var i;!function(t){"use strict";var i=MyWay.Services.Loggers.LoggerFactory.INSTANCE.getClass,n=function(){function n(){}return n.prototype.recupererDerniereRevue=function(t){var i;return i=_.find(t.listeIndicateurs,function(t){return t&&t.code===e.Enum.Indicateur.CODEREL.REV_DATE_DERNIERE_REVUE.toString()})},n.prototype.valoriserDateRevue=function(t){var i;return i=this.recupererDerniereRevue(t),i&&i.valeurDate&&moment(i.valeurDate).isValid()&&!moment(i.valeurDate).isSame(e.Constantes.Application.DATE_MIN)&&!moment(i.valeurDate).isSame(e.Constantes.Application.DATE_MAX)?moment(i.valeurDate).format("DD/MM/YYYY"):e.Constantes.Application.CHAINE_INDICATEUR_NON_CONNU},n.prototype.ancienneRevue=function(i){var n;return n=this.recupererDerniereRevue(i),n&&n.valeurDate&&moment(n.valeurDate).isValid()&&!moment(n.valeurDate).isSame(e.Constantes.Application.DATE_MIN)&&!moment(n.valeurDate).isSame(e.Constantes.Application.DATE_MAX)&&moment(n.valeurDate).isBefore(t.ColonneDataDerniereRevueControleur.dateLimite)},n.CLASS_NAME="ColonneDataDerniereRevueRelControleur",n.logger=i(n.CLASS_NAME),n.dateLimite=moment(new Date).subtract(1,"year").toDate(),n.$inject=[],n}();t.ColonneDataDerniereRevueRelControleur=n,e.app.controller(n.CLASS_NAME,n)}(i=t.TemplateTableau||(t.TemplateTableau={}))}(t=e.Controleurs||(e.Controleurs={}))}(Portefeuille||(Portefeuille={}));var Portefeuille;!function(e){var t;!function(t){var i;!function(t){"use strict";var i=function(){function t(){}return t.prototype.getMontant=function(t){var i="",n=_.find(t.listeIndicateurs,{code:e.Enum.Indicateur.CODE.FLUX_CREDITEURS_N});return n&&(i=void 0!==n.valeurNumber&&null!=n.valeurNumber&&n.valeurNumber!==Number.POSITIVE_INFINITY&&n.valeurNumber!==Number.NEGATIVE_INFINITY?n.valeurNumber.toString().replace(/\B(?=(\d{3})+(?!\d))/g,String.fromCharCode(160))+" k€":e.Constantes.Application.CHAINE_INDICATEUR_NON_CONNU),i},t.prototype.getTendance=function(t){var i=_.find(t.listeIndicateurs,{code:e.Enum.Indicateur.CODE.FLUX_CREDITEURS_N});return i.tendance},t.$inject=[e.Constantes.Inject.MyWay.serviceAgentExtended,e.Constantes.Inject.Angular.$scope,e.Constantes.Inject.Services.eventService],
t}();t.ColonneFluxCrediteurControleur=i,e.app.controller("ColonneFluxCrediteurControleur",i)}(i=t.TemplateTableau||(t.TemplateTableau={}))}(t=e.Controleurs||(e.Controleurs={}))}(Portefeuille||(Portefeuille={}));var Portefeuille;!function(e){var t;!function(t){var i;!function(t){"use strict";var i=function(){function t(){}return t.prototype.getMontant=function(t){var i="",n=_.find(t.listeIndicateurs,{code:e.Enum.Indicateur.CODE.FLUX_DEBITEURS_N});return n&&(i=void 0!==n.valeurNumber&&null!=n.valeurNumber&&n.valeurNumber!==Number.POSITIVE_INFINITY&&n.valeurNumber!==Number.NEGATIVE_INFINITY?n.valeurNumber.toString().replace(/\B(?=(\d{3})+(?!\d))/g,String.fromCharCode(160))+" k€":e.Constantes.Application.CHAINE_INDICATEUR_NON_CONNU),i},t.prototype.getTendance=function(t){var i=_.find(t.listeIndicateurs,{code:e.Enum.Indicateur.CODE.FLUX_DEBITEURS_N});return i.tendance},t.$inject=[e.Constantes.Inject.MyWay.serviceAgentExtended,e.Constantes.Inject.Angular.$scope,e.Constantes.Inject.Services.eventService],t}();t.ColonneFluxDebiteurControleur=i,e.app.controller("ColonneFluxDebiteurControleur",i)}(i=t.TemplateTableau||(t.TemplateTableau={}))}(t=e.Controleurs||(e.Controleurs={}))}(Portefeuille||(Portefeuille={}));var Portefeuille;!function(e){var t;!function(t){var i;!function(t){"use strict";var i=function(){function t(){}return t.prototype.getMontant=function(t){var i="",n=_.find(t.listeIndicateurs,{code:e.Enum.Indicateur.CODE.PNB_N});return n&&void 0!==n.valeurNumber&&null!=n.valeurNumber&&n.valeurNumber!==Number.POSITIVE_INFINITY&&n.valeurNumber!==Number.NEGATIVE_INFINITY&&(i=n.valeurNumber.toString()),i},t.prototype.getTendance=function(t){var i=_.find(t.listeIndicateurs,{code:e.Enum.Indicateur.CODE.PNB_N});return i.tendance},t.$inject=[e.Constantes.Inject.MyWay.serviceAgentExtended,e.Constantes.Inject.Angular.$scope,e.Constantes.Inject.Services.eventService],t}();t.ColonnePnbAnneeNControleur=i,e.app.controller("ColonnePnbAnneeNControleur",i)}(i=t.TemplateTableau||(t.TemplateTableau={}))}(t=e.Controleurs||(e.Controleurs={}))}(Portefeuille||(Portefeuille={}));var Portefeuille;!function(e){var t;!function(t){var i;!function(t){"use strict";var i=function(){function t(t,i,n){this.serviceAgentExtended=t,this.$scope=i,this.eventService=n,this.indicateurProspect=e.Constantes.Application.CHAINE_INDICATEUR_PROSPECT}return t.prototype.filtrerTableauClients=function(e){this.eventService.filtrageTableauClientClientsControleur(e)},t.prototype.isProspect=function(e){return void 0!==e.estClient&&!e.estClient},t.$inject=[e.Constantes.Inject.MyWay.serviceAgentExtended,e.Constantes.Inject.Angular.$scope,e.Constantes.Inject.Services.eventService],t}();t.ColonneDataRelationControleur=i,e.app.controller("ColonneDataRelationControleur",i)}(i=t.TemplateTableau||(t.TemplateTableau={}))}(t=e.Controleurs||(e.Controleurs={}))}(Portefeuille||(Portefeuille={}));var Portefeuille;!function(e){var t;!function(t){var i;!function(t){"use strict";var i=MyWay.Services.Loggers.LoggerFactory.INSTANCE.getClass,n=function(){function t(){}return t.prototype.valoriserPotentielProspect=function(t){var i;return i=_.find(t.listeIndicateurs,function(t){return t&&t.code===e.Enum.Indicateur.CODE.POTENTIEL_PROSPECT.toString()&&~e.Constantes.Tableau.VALEUR_POSSIBLE_POTENTIEL_PROSPECT.indexOf(t.valeur)}),i?i.valeur:e.Constantes.Application.CHAINE_INDICATEUR_NON_CONNU},t.CLASS_NAME="ColonnePotentielProspectControleur",t.logger=i(t.CLASS_NAME),t.$inject=[],t}();t.ColonnePotentielProspectControleur=n,e.app.controller(n.CLASS_NAME,n)}(i=t.TemplateTableau||(t.TemplateTableau={}))}(t=e.Controleurs||(e.Controleurs={}))}(Portefeuille||(Portefeuille={}));var Portefeuille;!function(e){var t;!function(t){var i;!function(t){"use strict";var i=MyWay.Services.Loggers.LoggerFactory.INSTANCE.getClass,n=function(){function t(){this.indicateurActif=e.Constantes.Application.CHAINE_INDICATEUR_ACTIF,this.indicateurInactif=e.Constantes.Application.CHAINE_INDICATEUR_INACTIF,this.indicateurProspect=e.Constantes.Application.CHAINE_INDICATEUR_PROSPECT}return t.prototype.isProspect=function(e){return void 0!==e.estClient&&!e.estClient},t.prototype.isActif=function(e){return e.estActifRenseigne&&e.estActif},t.prototype.isInactif=function(e){return e.estActifRenseigne&&!e.estActif},t.CLASS_NAME="ColonneStatutControleur",t.logger=i(t.CLASS_NAME),t.$inject=[],t}();t.ColonneStatutControleur=n,e.app.controller(n.CLASS_NAME,n)}(i=t.TemplateTableau||(t.TemplateTableau={}))}(t=e.Controleurs||(e.Controleurs={}))}(Portefeuille||(Portefeuille={}));var Portefeuille;!function(e){var t;!function(t){var i;!function(t){"use strict";var i=MyWay.Services.Loggers.LoggerFactory.INSTANCE.getClass,n=function(){function t(){}return t.prototype.valoriserTopCC=function(t){var i;return i=_.find(t.listeIndicateurs,function(t){return t&&t.code===e.Enum.Indicateur.CODE.TOP_CC.toString()&&~e.Constantes.Tableau.VALEUR_POSSIBLE_TOP_CC.indexOf(t.valeur)}),i?i.valeur:e.Constantes.Tableau.VALEUR_POSSIBLE_TOP_CC[3]},t.CLASS_NAME="ColonneTopCCControleur",t.logger=i(t.CLASS_NAME),t.$inject=[],t}();t.ColonneTopCCControleur=n,e.app.controller(n.CLASS_NAME,n)}(i=t.TemplateTableau||(t.TemplateTableau={}))}(t=e.Controleurs||(e.Controleurs={}))}(Portefeuille||(Portefeuille={}));var Portefeuille;!function(e){var t;!function(e){var t;!function(e){"use strict";!function(e){e[e.COULEUR_CLIENT="#007399"]="COULEUR_CLIENT",e[e.COULEUR_SANS_CONTRAT="#D7BDE2"]="COULEUR_SANS_CONTRAT",e[e.COULEUR_ACTIF="#27BAE9"]="COULEUR_ACTIF",e[e.COULEUR_PROSPECT="#545494"]="COULEUR_PROSPECT",e[e.COULEUR_RELATIONS="#cc6666"]="COULEUR_RELATIONS",e[e.COULEUR_PERIODE1="#545494"]="COULEUR_PERIODE1",e[e.COULEUR_PERIODE2="#00cccc"]="COULEUR_PERIODE2",e[e.COULEUR_PERIODE3="#E6A016"]="COULEUR_PERIODE3",e[e.COULEUR_MT_NEGATIF="#FF0000"]="COULEUR_MT_NEGATIF"}(e.COULEUR_GRANDE_COLONNE||(e.COULEUR_GRANDE_COLONNE={}));e.COULEUR_GRANDE_COLONNE}(t=e.Application||(e.Application={}))}(t=e.Modeles||(e.Modeles={}))}(Portefeuille||(Portefeuille={}));var Portefeuille;!function(e){var t;!function(e){var t;!function(e){"use strict"}(t=e.ApplicationStats||(e.ApplicationStats={}))}(t=e.Modeles||(e.Modeles={}))}(Portefeuille||(Portefeuille={}));var Portefeuille;!function(e){var t;!function(e){var t;!function(e){"use strict"}(t=e.Application||(e.Application={}))}(t=e.Modeles||(e.Modeles={}))}(Portefeuille||(Portefeuille={}));var Portefeuille;!function(e){var t;!function(e){var t;!function(e){"use strict"}(t=e.Application||(e.Application={}))}(t=e.Modeles||(e.Modeles={}))}(Portefeuille||(Portefeuille={}));var Portefeuille;!function(e){var t;!function(e){var t;!function(e){"use strict"}(t=e.Application||(e.Application={}))}(t=e.Modeles||(e.Modeles={}))}(Portefeuille||(Portefeuille={}));var Portefeuille;!function(e){var t;!function(e){var t;!function(e){"use strict"}(t=e.Application||(e.Application={}))}(t=e.Modeles||(e.Modeles={}))}(Portefeuille||(Portefeuille={}));var Portefeuille;!function(e){var t;!function(t){var i;!function(t){var i=function(){function i(e,i,n,r){this.tableauColonneDataClient={title:"Client",bind:"nom",cssClass:"col-md-2 col-lg-2",disableFilter:!1,template:"vues/templates-tableau/colonne-tableau-data-client.html"},this.width="col-md-12 col-lg-12",this.orderBy="",this.reserve=!1,this.perPage=20,this.multiSelect=!1,this.filterEnable=!0,this.sortEnable=!0,this.moreEnable=!1,this.caption="Liste des clients",this.theadSticky="mw-zone-travail",this.readOnly=!1,this.templateUrl="",this.data=[],this.selectedItems=[],this.disabledItems=[],this.columns=[this.tableauColonneDataClient],this.selectionChangeHandler=e,this.tableauColonneDataClient.comparator=new t.Comparator.ClientComparator(i,n),this.initialiser(r)}return i.prototype.initialiser=function(t){if(!_.isEmpty(t)){var i=t[0].listeIndicateurs;if(!_.isEmpty(i)){var n=i.map(function(t,i){var n;switch(n=t.valeurNumber?{title:t.intitule,bind:"listeIndicateurs["+i+"].valeurNumber",cssClass:"col-md-2 col-lg-2",disableFilter:!0}:{title:t.intitule,bind:"listeIndicateurs["+i+"].valeur",cssClass:"col-md-2 col-lg-2",disableFilter:!0},t.typeIndicateur){case e.Enum.Indicateur.TYPE.DATE:n.filter=" | date: 'dd/MM/yyyy'";break;case e.Enum.Indicateur.TYPE.MONTANT:n.filter=" | currency"}return n});this.columns=this.columns.concat(n)}}this.data=t},i}();t.TableauClientEco=i}(i=t.Tableaux||(t.Tableaux={}))}(t=e.Modeles||(e.Modeles={}))}(Portefeuille||(Portefeuille={}));var Portefeuille;!function(e){var t;!function(t){var i;!function(t){var i=function(){function i(i,n,r,o,l,a,s){this.tableauColonneDataClient={title:"Clients / Prospects",bind:"nom",cssClass:"col-md-2 colonne-clients",disableFilter:!1,template:"vues/templates-tableau/colonne-tableau-data-client.html"},this.tableauColonneDataNbPersonnes={title:"Nb personnes / relation",bind:"nbPersonneRelation",cssClass:"col-md-2 text-align-right",disableFilter:!0},this.width="col-md-12 col-lg-12",this.reserve=!1,this.perPage=e.Constantes.Application.NB_LIGNE_TABLEAU,this.multiSelect=!1,this.filterEnable=!0,this.sortEnable=!0,this.moreEnable=!1,this.caption="Liste des clients",this.theadSticky="mw-zone-travail",this.readOnly=!1,this.templateUrl="",this.data=[],this.selectedItems=[],this.disabledItems=[],this.columns=[this.tableauColonneDataClient,this.tableauColonneDataNbPersonnes],this.hasNoneElements=e.Constantes.Tableau.TAB_NO_ELEMENT_CLIENT,s===!0?this.columns=[this.tableauColonneDataClient,this.tableauColonneDataNbPersonnes]:this.columns=[this.tableauColonneDataClient],this.selectionChangeHandler=i,this.tableHandler=n,this.tableauColonneDataClient.comparator=new t.Comparator.ClientComparator(r,o),this.choixIndicateurs=a,this.initEtatFiltre(i),this.initialiser(l,r,o)}return i.prototype.initialiser=function(t,i,n){if(!_.isEmpty(t)&&!_.isEmpty(this.choixIndicateurs)){var r=[];_.forEach(this.choixIndicateurs,function(i){var n=-1;if(_.find(t,function(e){return n=_.findIndex(e.listeIndicateurs,function(e){return e.code===i.indicateur.code})}),-1!==n&&i.indicateur.estVisibleColonne){var o=void 0;o=i.indicateur.typeIndicateur===e.Enum.Indicateur.TYPE.MONTANT||i.indicateur.typeIndicateur===e.Enum.Indicateur.TYPE.NOMBRE||i.indicateur.typeIndicateur===e.Enum.Indicateur.TYPE.POURCENT?{title:i.indicateur.intitule,bind:"listeIndicateurs["+n+"].valeurNumber",cssClass:"col-md-1",disableFilter:!0}:i.indicateur.typeIndicateur===e.Enum.Indicateur.TYPE.DATE?{title:i.indicateur.intitule,bind:"listeIndicateurs["+n+"].valeurDate",cssClass:"col-md-1",disableFilter:!0}:{title:i.indicateur.intitule,bind:"listeIndicateurs["+n+"].valeur",cssClass:"col-md-1",disableFilter:!0},o.filter="";var l=!1;switch((i.indicateur.code===e.Enum.Indicateur.CODE.PNB_3112.toString()||i.indicateur.code===e.Enum.Indicateur.CODE.PNB_N.toString()||i.indicateur.code===e.Enum.Indicateur.CODE.PNB_N_MOINS_1.toString())&&(l=!0),i.indicateur.typeIndicateur){case e.Enum.Indicateur.TYPE.DATE:o.filter=" | dateNC";break;case e.Enum.Indicateur.TYPE.MONTANT:o.filter=" | montantFiltre: "+l,o.cssClass=o.cssClass+" text-align-right";break;case e.Enum.Indicateur.TYPE.POURCENT:o.filter=" | pourcentFiltre",o.cssClass=o.cssClass+" text-align-right";break;case e.Enum.Indicateur.TYPE.NOMBRE:o.filter=" | nombreNC",o.cssClass=o.cssClass+" text-align-right"}i.indicateur.famille===e.Enum.Indicateur.FAMILLE.CA&&(i.indicateur.codeRest===e.Enum.Indicateur.CODEREST.CA_N.toString()&&(o.template="vues/templates-tableau/colonne-tableau-data-ca-n.html"),i.indicateur.codeRest===e.Enum.Indicateur.CODEREST.CA_N_MOINS_1.toString()&&(o.template="vues/templates-tableau/colonne-tableau-data-ca-n-1.html")),i.indicateur.code===e.Enum.Indicateur.CODE.PNB_N.toString()&&(o.template="vues/templates-tableau/colonne-tableau-pnb-n.html"),i.indicateur.code===e.Enum.Indicateur.CODE.FLUX_CREDITEURS_N.toString()&&(o.template="vues/templates-tableau/colonne-tableau-flux-crediteur.html"),i.indicateur.code===e.Enum.Indicateur.CODE.FLUX_DEBITEURS_N.toString()&&(o.template="vues/templates-tableau/colonne-tableau-flux-debiteur.html"),i.indicateur.code===e.Enum.Indicateur.CODE.POTENTIEL_PROSPECT.toString()&&(o.template="vues/templates-tableau/colonne-potentiel-prospect.html"),i.indicateur.code===e.Enum.Indicateur.CODE.REV_DATE_DERNIERE_REVUE.toString()&&(o.template="vues/templates-tableau/colonne-date-derniere-revue.html"),i.indicateur.code===e.Enum.Indicateur.CODE.TOP_CC.toString()&&(o.bind="listeIndicateurs["+n+"].valeurNumber",o.template="vues/templates-tableau/colonne-tableau-top-cc.html"),o.filter+=" | valeurNonConnuFiltre";var a=i.indicateur.codeRest;(a===e.Enum.Indicateur.CODEREST.SCORE_ACTIVATION.toString()||a===e.Enum.Indicateur.CODEREST.SCORE_APPETENCE.toString())&&(o.title=o.title+" (/100)"),a===e.Enum.Indicateur.CODEREST.SCORE_DEFAILLANCE.toString()&&(o.title=o.title+" (/20)"),r.push(o)}}),this.columns=this.columns.concat(r)}this.data=t},i.prototype.initEtatFiltre=function(t){angular.element(document.querySelector(e.Constantes.Application.CLASSE_COLONNE_RELATIONS)).ready(function(){if(document.querySelector(e.Constantes.Application.CLASSE_COLONNE_CLIENTS)){var i=angular.element(document.querySelector(e.Constantes.Application.CLASSE_COLONNE_CLIENTS).querySelector(e.Constantes.Application.CLASSE_BTN_FILTRE));t.estAvecFiltreColonne=i.hasClass(e.Constantes.Application.CLASSE_ACTIF),i.on("click",function(){t.estAvecFiltreColonne=i.hasClass(e.Constantes.Application.CLASSE_ACTIF)})}})},i}();t.TableauClient=i}(i=t.Tableaux||(t.Tableaux={}))}(t=e.Modeles||(e.Modeles={}))}(Portefeuille||(Portefeuille={}));var Portefeuille;!function(e){var t;!function(t){var i;!function(t){var i=function(){function t(t){this.tableauColonneId={title:e.Constantes.Tableau.TAB_LISTE_CLIENTS_COLONNE_ID,bind:"identifiantPersonne",cssClass:"col-md-3"},this.tableauColonneRaisonSociale={title:e.Constantes.Tableau.TAB_LISTE_CLIENTS_COLONNE_RAISON_SOCIALE,bind:"raisonSociale",cssClass:"col-md-3"},this.tableauColonneMarche={title:e.Constantes.Tableau.TAB_LISTE_CLIENTS_COLONNE_MARCHE,bind:"libelleSegment",cssClass:"col-md-3"},this.tableauColonneObjectifDeFlux={title:e.Constantes.Tableau.TAB_LISTE_CLIENTS_COLONNE_OBJECTIF_DE_FLUX,bind:"",cssClass:"col-md-3",template:"vues/templates-tableau/colonne-objectif-flux.html"},this.width="col-md-12 col-lg-12",this.orderBy="raisonSociale",this.reserve=!1,this.perPage=10,this.multiSelect=!1,this.filterEnable=!1,this.sortEnable=!1,this.moreEnable=!1,this.caption="Infos clients",this.readOnly=!1,this.theadSticky="mw-zone-travail",this.templateUrl="",this.data=[],this.selectedItems=[],this.disabledItems=[],this.columns=[this.tableauColonneRaisonSociale,this.tableauColonneId,this.tableauColonneMarche],this.hasNoneElements=e.Constantes.Tableau.TAB_LISTE_CLIENTS_NO_ELEMENT,t&&(this.columns=[this.tableauColonneRaisonSociale,this.tableauColonneId,this.tableauColonneMarche,this.tableauColonneObjectifDeFlux])}return t}();t.TableauRaisonsSociales=i}(i=t.Tableaux||(t.Tableaux={}))}(t=e.Modeles||(e.Modeles={}))}(Portefeuille||(Portefeuille={}));var Portefeuille;!function(e){var t;!function(t){var i;!function(t){var i=function(){function i(i,n,r,o,l,a){this.tableauColonneDataRelation={title:"Relations",bind:"nom",cssClass:"col-md-2 col-lg-2 colonne-relations",disableFilter:!1,template:"vues/templates-tableau/colonne-tableau-data-relation.html"},this.tableauColonneDataNbClients={title:"Nb clients / prospects",bind:"listeClients.length",cssClass:"col-md-1 col-lg-1 text-align-right",disableFilter:!0},this.width="col-md-12 col-lg-12",this.orderBy="nom",this.reserve=!1,this.perPage=e.Constantes.Application.NB_LIGNE_TABLEAU,this.multiSelect=!1,this.filterEnable=!0,this.sortEnable=!0,this.moreEnable=!1,this.caption="Liste des relations économiques",this.theadSticky="mw-zone-travail",this.readOnly=!1,this.templateUrl="",this.data=[],this.selectedItems=[],this.disabledItems=[],this.columns=[this.tableauColonneDataRelation,this.tableauColonneDataNbClients],this.hasNoneElements=e.Constantes.Tableau.TAB_NO_ELEMENT_RELATION,this.selectionChangeHandler=i,this.tableHandler=n,this.tableauColonneDataRelation.comparator=new t.Comparator.RelationComparator(r,o),this.choixIndicateurs=a,this.initEtatFiltre(i),this.initialiser(l)}return i.prototype.initialiser=function(t){if(!_.isEmpty(t)&&!_.isEmpty(this.choixIndicateurs)){var i=[];_.forEach(this.choixIndicateurs,function(n){var r=_.findIndex(t[0].listeIndicateurs,function(e){return e.code===n.indicateur.codeRel});if(-1!==r&&n.indicateur.estVisibleColonne){var o=void 0;o=n.indicateur.typeIndicateur===e.Enum.Indicateur.TYPE.MONTANT||n.indicateur.typeIndicateur===e.Enum.Indicateur.TYPE.NOMBRE||n.indicateur.typeIndicateur===e.Enum.Indicateur.TYPE.POURCENT?{title:n.indicateur.intitule,bind:"listeIndicateurs["+r+"].valeurNumber",cssClass:"col-md-1",disableFilter:!0}:n.indicateur.typeIndicateur===e.Enum.Indicateur.TYPE.DATE?{title:n.indicateur.intitule,bind:"listeIndicateurs["+r+"].valeurDate",cssClass:"col-md-1",disableFilter:!0}:{title:n.indicateur.intitule,bind:"listeIndicateurs["+r+"].valeur",cssClass:"col-md-1",disableFilter:!0},o.filter="";var l=!1;switch((n.indicateur.code===e.Enum.Indicateur.CODE.PNB_3112.toString()||n.indicateur.code===e.Enum.Indicateur.CODE.PNB_N.toString()||n.indicateur.code===e.Enum.Indicateur.CODE.PNB_N_MOINS_1.toString())&&(l=!0),n.indicateur.code===e.Enum.Indicateur.CODE.REV_DATE_DERNIERE_REVUE.toString()&&(o.template="vues/templates-tableau/colonne-date-derniere-revue-rel.html"),n.indicateur.typeIndicateur){case e.Enum.Indicateur.TYPE.DATE:o.filter=" | dateNC";break;case e.Enum.Indicateur.TYPE.MONTANT:o.filter=" | montantFiltre: "+l,o.cssClass=o.cssClass+" text-align-right";break;case e.Enum.Indicateur.TYPE.POURCENT:o.filter=" | pourcentFiltre",o.cssClass=o.cssClass+" text-align-right";break;case e.Enum.Indicateur.TYPE.NOMBRE:o.filter=" | nombreNC",o.cssClass=o.cssClass+" text-align-right"}o.filter+=" | valeurNonConnuFiltre",i.push(o)}}),this.columns=this.columns.concat(i)}this.data=t},i.prototype.initEtatFiltre=function(t){angular.element(document.querySelector(e.Constantes.Application.CLASSE_COLONNE_RELATIONS)).ready(function(){if(document.querySelector(e.Constantes.Application.CLASSE_COLONNE_RELATIONS)){var i=angular.element(document.querySelector(e.Constantes.Application.CLASSE_COLONNE_RELATIONS).querySelector(e.Constantes.Application.CLASSE_BTN_FILTRE));t.estAvecFiltreColonne=i.hasClass(e.Constantes.Application.CLASSE_ACTIF),i.on("click",function(){t.estAvecFiltreColonne=i.hasClass(e.Constantes.Application.CLASSE_ACTIF)})}})},i}();t.TableauRelation=i}(i=t.Tableaux||(t.Tableaux={}))}(t=e.Modeles||(e.Modeles={}))}(Portefeuille||(Portefeuille={}));var Portefeuille;!function(e){var t;!function(e){var t;!function(e){"use strict"}(t=e.Application||(e.Application={}))}(t=e.Services||(e.Services={}))}(Portefeuille||(Portefeuille={}));var Portefeuille;!function(e){var t;!function(t){"use strict";var i=MyWay.Services.Loggers.LoggerFactory.INSTANCE.getClass,n=function(){function t(t,i){this.filtreService=t,this.begacliService=i,this.listeOperateurs=e.Constantes.Indicateur.LISTE_OPERATEURS_FILTRE,this.isOpen=!0,this.initialiser()}return t.prototype.initialiser=function(){var e=this;if(t.logger.info(">>> Appel de la méthode : PfBlocConditionFiltreControleur.initialiser <<<"),this.sauvegardeIndicateur=null,this.filtreBegacli=this.begacliService.getFiltreBegacli(),this.filtre.indicateur){var i=_.pluck(_.where(this.filtre.indicateur.listeValeurs,{actif:!0}),"libelle"),n=_.find(this.listeIndicateurs,function(t){return e.filtre.indicateur.indicateur.code===t.indicateur.code?(e.filtre.indicateur=t,e.dernierIndicateurSelect=t,!0):!1});n&&this.filtre.indicateur.listeValeurs&&this.filtre.indicateur.listeValeurs.length>0&&_.forEach(n.listeValeurs,function(e){i.indexOf(e.libelle)>=0&&(e.actif=!0)}),this.selectionnerListeFiltre()}},t.prototype.getListeIndicateurs=function(t){var i,n=this.presenceBegacliAutreIndex(t);return i=[],_.forEach(this.listeIndicateurs,function(t){n===!0?t.indicateur.code!==e.Enum.Indicateur.CODE.BEGACLI.toString()&&i.push(t):i.push(t)}),i},t.prototype.presenceBegacliAutreIndex=function(t){if(1===this.listeFiltres.length)return!1;var i=0;0===t&&(i=1);var n=this.listeFiltres[i];return n&&n.indicateur&&n.indicateur.indicateur&&n.indicateur.indicateur.code===e.Enum.Indicateur.CODE.BEGACLI.toString()?!0:!1},t.prototype.begacliChangeMaj=function(e){e.choisiMaj===!0&&(e.choisiMin=!1)},t.prototype.begacliChangeMin=function(e){e.choisiMin===!0&&(e.choisiMaj=!1)},t.prototype.selectionnerListeFiltre=function(){var t={DateDerniereRevue:e.Constantes.Indicateur.LISTE_COMPARATEUR_DERNIERE_REVUE,DateDerniereRevueRel:e.Constantes.Indicateur.LISTE_COMPARATEUR_DERNIERE_REVUE};this.listeComparateurs=t[this.filtre.indicateur.indicateur.code]?t[this.filtre.indicateur.indicateur.code]:e.Constantes.Indicateur.LISTE_COMPARATEUR_COMMUNE,-1===_.indexOf(this.listeComparateurs,this.filtre.comparateur)&&(this.filtre.comparateur=null),this.sauvegardeIndicateur&&this.sauvegardeIndicateur.indicateur.code!==this.filtre.indicateur.indicateur.code&&(this.filtre.valeurUnique=void 0,this.filtre.valeurMultiple1=void 0,this.filtre.valeurMultiple2=void 0),this.sauvegardeIndicateur=this.filtre.indicateur},t.prototype.supprimerCondition=function(){this.filtre.indicateur&&(this.estVueClient?this.filtre.indicateur.utilise=!1:this.filtre.indicateur.utiliseRelationEco=!1),this.listeFiltres.splice(this.listeFiltres.indexOf(this.filtre),1),1===this.listeFiltres.length&&(this.listeFiltres[0].operateur=null)},t.prototype.selectionIndicateur=function(){this.selectionnerListeFiltre(),this.dernierIndicateurSelect&&(this.estVueClient?this.dernierIndicateurSelect.utilise=!1:this.dernierIndicateurSelect.utiliseRelationEco=!1),this.filtre.indicateur&&(this.estVueClient?this.filtre.indicateur.utilise=!0:this.filtre.indicateur.utiliseRelationEco=!0,this.dernierIndicateurSelect=this.filtre.indicateur)},Object.defineProperty(t.prototype,"comparateurUniqueInactif",{get:function(){return this.estComparateurDeTypeEntre||-1===_.indexOf(e.Constantes.Indicateur.LISTE_COMPARATEUR,this.filtre.comparateur)},enumerable:!0,configurable:!0}),t.prototype.comparateurEstDeTypeEntre=function(t){return t===e.Enum.Filtre.COMPARATEUR.ENTRE},t.prototype.comparateurEstDeTypeNC=function(t){return t===e.Enum.Filtre.COMPARATEUR.NC},t.prototype.comparateurNonRenseigne=function(e){return!e},Object.defineProperty(t.prototype,"estComparateurDeTypeEntre",{get:function(){return this.comparateurEstDeTypeEntre(this.filtre.comparateur)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"typeIndicateur",{get:function(){return this.estIndicateur?this.filtre.indicateur.indicateur.typeIndicateur:null},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"codeIndicateur",{get:function(){return this.estIndicateur?this.filtre.indicateur.indicateur.code:null},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"estIndicateur",{get:function(){return this.filtre&&this.filtre.indicateur&&this.filtre.indicateur.indicateur?!0:!1},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"listeValeurs",{get:function(){return this.filtre&&this.filtre.indicateur?this.filtre.indicateur.listeValeurs:null},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"cacheChampSaisieDateSimple",{get:function(){return this.comparateurEstDeTypeEntre(this.filtre.comparateur)||this.comparateurNonRenseigne(this.filtre.comparateur)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"cacheChampsSaisieDate",{get:function(){return-1!==_.indexOf(e.Constantes.Indicateur.LISTE_COMPARATEUR_DERNIERE_REVUE,this.filtre.comparateur)||this.comparateurEstDeTypeNC(this.filtre.comparateur)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"estIndicateurDeTypeDate",{get:function(){return this.typeIndicateur===e.Enum.Indicateur.TYPE.DATE},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"estIndicateurNumerique",{get:function(){return-1!==_.indexOf(e.Constantes.Indicateur.LISTE_INDICATEUR_NUMERIQUE,this.typeIndicateur)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"estComparateurDeTypeNC",{get:function(){return this.comparateurEstDeTypeNC(this.filtre.comparateur)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"uniteMin",{get:function(){return this.getUnite("")},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"uniteMax",{get:function(){return this.getUnite(this.codeIndicateur===e.Enum.Indicateur.CODE.PREMIER_EQUIPEMENT_TAG.toString()?"mois":"")},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"estUniteMin",{get:function(){return this.uniteMin&&0!==this.uniteMin.length},enumerable:!0,configurable:!0}),t.prototype.getUnite=function(e){return this.estIndicateurMontant?this.devise:this.estIndicateurPourcent?"%":this.estIndicateurDeTypeDate?"":e},Object.defineProperty(t.prototype,"devise",{get:function(){return-1!==_.indexOf(e.Constantes.Indicateur.INDICATEUR_EN_EURO,this.codeIndicateur)?"€":"k€"},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"estIndicateurMontant",{get:function(){return this.typeIndicateur===e.Enum.Indicateur.TYPE.MONTANT},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"estIndicateurPourcent",{get:function(){return this.typeIndicateur===e.Enum.Indicateur.TYPE.POURCENT},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"estIndicateurTexte",{get:function(){return this.typeIndicateur===e.Enum.Indicateur.TYPE.TEXTE},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"estIndicateurBegacli",{get:function(){return this.typeIndicateur===e.Enum.Indicateur.TYPE.BEGACLI},enumerable:!0,configurable:!0}),t.CLASS_NAME="PfBlocConditionFiltreControleur",t.logger=i(t.CLASS_NAME),t.$inject=[e.Constantes.Inject.Services.filtreService,e.Constantes.Inject.Services.begacliService],t}();t.PfBlocConditionFiltreControleur=n,e.app.controller("PfBlocConditionFiltreControleur",n)}(t=e.Controleurs||(e.Controleurs={}))}(Portefeuille||(Portefeuille={}));var Portefeuille;!function(e){var t;!function(t){"use strict";function i(){return{restrict:"E",templateUrl:"typescript/directives/pf-bloc-condition-filtre/pf-bloc-condition-filtre-vue.html",controller:"PfBlocConditionFiltreControleur",controllerAs:"pfBlocConditionFiltreCtrl",bindToController:!0,scope:{listeIndicateurs:"=",listeFiltres:"=",noIndex:"=",filtre:"=",afficherOperateur:"=",estVueClient:"="}}}t.mwPfBlocConditionFiltre=i,e.app.directive("mwPfBlocConditionFiltre",i)}(t=e.Directives||(e.Directives={}))}(Portefeuille||(Portefeuille={}));var Portefeuille;!function(e){var t;!function(t){"use strict";var i=MyWay.Services.Loggers.LoggerFactory.INSTANCE.getClass,n=function(){function t(e,t,i,n,r){this.$location=e,this.contexteService=t,this.portefeuilleService=i,this.eventService=n,this.listeClientsService=r,this.finInit=!1,this.initialiser()}return t.prototype.initialiser=function(){t.logger.info(">>> Appel de la méthode : PfChoixPortefeuilleControleur.initialiser <<<"),this.eventService.setChoixPortfeuilleControleur(this),this.listePortefeuilles=null,this.ouvertureVoletChoixPortefeuille=!1,this.listePortefeuillesDropDown=null,this.tousPortfeuillesSelectionnes=this.aTousPortefeuillesCoches()},t.prototype.annulerChoixPortefeuille=function(){this.restaurerPoretefeuille(),this.ouvertureVoletChoixPortefeuille=!1,this.eventService.chargerListePortefeilleDropDown(),this.finInit=!0},t.prototype.selectionnerListe=function(e){return null!==e&&void 0!==e?this.listePortefeuillesDropDown[e].listPortefeuilleParAgent:this.listePortefeuilles},t.prototype.aPortefeuillesNonCoches=function(t,i){return void 0===i?_.filter(this.selectionnerListe(t),function(e){return e.estAffiche===!1||void 0===e.estAffiche}).length>0:i?_.where(this.selectionnerListe(t),function(t){return t.id<=e.Constantes.Application.ID_PORTEFEUILLE_MAX_SPC&&!t.estAffiche}).length>0:_.filter(this.selectionnerListe(t),function(t){return t.id>e.Constantes.Application.ID_PORTEFEUILLE_MAX_SPC&&!t.estAffiche}).length>0},t.prototype.aPortefeuilleCoche=function(t,i){return void 0===i?_.where(this.selectionnerListe(t),{estAffiche:!0}).length>0:i?_.where(this.selectionnerListe(t),function(t){return t.id<=e.Constantes.Application.ID_PORTEFEUILLE_MAX_SPC&&t.estAffiche}).length>0:_.filter(this.selectionnerListe(t),function(t){return t.id>e.Constantes.Application.ID_PORTEFEUILLE_MAX_SPC&&t.estAffiche}).length>0},t.prototype.aTousPortefeuillesCoches=function(t,i){return void 0===i?0===_.where(this.selectionnerListe(t),{estAffiche:!1}).length:i?0===_.filter(this.selectionnerListe(t),function(t){return t.id<=e.Constantes.Application.ID_PORTEFEUILLE_MAX_SPC&&!t.estAffiche}).length:0===_.filter(this.selectionnerListe(t),function(t){return t.id>e.Constantes.Application.ID_PORTEFEUILLE_MAX_SPC&&!t.estAffiche}).length},t.prototype.keyDownTroisEtat=function(e,t){e.keyCode===MyWay.UI.Constants.CLAVIER_KEYCODE.ESPACE&&this.forceMultiSelection(void 0,t)},t.prototype.forceMultiSelection=function(t,i,n){var r;this.setIndetermine(i,n)&&(r=!1),this.aPortefeuilleCoche(i,n)||(r=!0),null!==i&&void 0!==i?(angular.forEach(this.listePortefeuillesDropDown[i].listPortefeuilleParAgent,function(t){void 0===n?t.estAffiche=r:n?(t.id<=e.Constantes.Application.ID_PORTEFEUILLE_MAX_SPC&&(t.estAffiche=r),t.id>e.Constantes.Application.ID_PORTEFEUILLE_MAX_SPC&&r&&(t.estAffiche=!r)):(t.id>e.Constantes.Application.ID_PORTEFEUILLE_MAX_SPC&&(t.estAffiche=r),t.id<=e.Constantes.Application.ID_PORTEFEUILLE_MAX_SPC&&r&&(t.estAffiche=!r))}),this.listePortefeuillesDropDown[i].estAffiche=r):(angular.forEach(this.listePortefeuilles,function(e){e.estAffiche=r}),angular.forEach(this.listePortefeuillesDropDown,function(e){e.estAffiche=r})),void 0!==t&&t.preventDefault()},t.prototype.getLabelTroisEtats=function(t,i){return this.aPortefeuilleCoche(t,i)?e.Constantes.Application.TXT_DESELECTIONNER_TOUT:e.Constantes.Application.TXT_SELECTIONNER_TOUT},t.prototype.getLibelleEtIdPortefeuille=function(e,t){return this.listePortefeuillesDropDown&&this.listePortefeuillesDropDown.length>0&&this.listePortefeuillesDropDown[t]&&this.listePortefeuillesDropDown[t].listPortefeuilleParAgent&&this.listePortefeuillesDropDown[t].listPortefeuilleParAgent.length>0&&this.listePortefeuillesDropDown[t].listPortefeuilleParAgent[e]?this.getEstPortefeuille(e,t)?this.listePortefeuillesDropDown[t].listPortefeuilleParAgent[e].libelle+" - "+this.listePortefeuillesDropDown[t].listPortefeuilleParAgent[e].id:this.listePortefeuillesDropDown[t].listPortefeuilleParAgent[e].libelle:""},t.prototype.getEstPortefeuille=function(t,i){return this.listePortefeuillesDropDown&&this.listePortefeuillesDropDown.length>0&&this.listePortefeuillesDropDown[i]&&this.listePortefeuillesDropDown[i].listPortefeuilleParAgent&&this.listePortefeuillesDropDown[i].listPortefeuilleParAgent.length>0&&this.listePortefeuillesDropDown[i].listPortefeuilleParAgent[t]?this.listePortefeuillesDropDown[i].listPortefeuilleParAgent[t].id>e.Constantes.Application.ID_PORTEFEUILLE_MAX_SPC-1:!1},t.prototype.getEstSuiviParComplementaire=function(t,i){return this.listePortefeuillesDropDown&&this.listePortefeuillesDropDown.length>0&&this.listePortefeuillesDropDown[i]&&this.listePortefeuillesDropDown[i].listPortefeuilleParAgent&&this.listePortefeuillesDropDown[i].listPortefeuilleParAgent.length>0&&this.listePortefeuillesDropDown[i].listPortefeuilleParAgent[t]?this.listePortefeuillesDropDown[i].listPortefeuilleParAgent[t].id<e.Constantes.Application.ID_PORTEFEUILLE_MAX_SPC:!1},t.prototype.getLibelleAgent=function(e){return this.listePortefeuillesDropDown&&this.listePortefeuillesDropDown.length>0&&this.listePortefeuillesDropDown[e]?this.listePortefeuillesDropDown[e].nomPrenonAgent:""},t.prototype.getTxtChoixPortefeuille=function(){if(this.listePortefeuilles&&this.listePortefeuillesDropDown){var t=_.where(this.portefeuilleService.regrouperToutPortfeuille(this.listePortefeuillesDropDown),{estAffiche:!0}).length;return e.Constantes.Application.TXT_CHOIX_PORTEFEUILLE+" "+("("+t+"/"+this.listePortefeuilles.length+")");
}return e.Constantes.Application.TXT_CHOIX_PORTEFEUILLE+" (???/???)"},t.prototype.majSelection=function(e,t){this.getEstSuiviParComplementaire(e,t)?(this.deselectChoixPortefeuille(),this.deselectAutresChoixSuiviParComplementaire(e,t)):this.deselectChoixSuiviParComplementaire()},t.prototype.deselectAutresChoixSuiviParComplementaire=function(t,i){var n=0;this.listePortefeuillesDropDown[i].listPortefeuilleParAgent.forEach(function(i){n!==t&&i.id<e.Constantes.Application.ID_PORTEFEUILLE_MAX_SPC&&(i.estAffiche=!1),n++})},t.prototype.deselectChoixPortefeuille=function(){this.listePortefeuillesDropDown.forEach(function(t){t.listPortefeuilleParAgent.forEach(function(t){t.id>e.Constantes.Application.ID_PORTEFEUILLE_MAX_SPC-1&&(t.estAffiche=!1)})})},t.prototype.deselectChoixSuiviParComplementaire=function(){this.listePortefeuillesDropDown.forEach(function(t){t.listPortefeuilleParAgent.forEach(function(t){t.id<e.Constantes.Application.ID_PORTEFEUILLE_MAX_SPC&&(t.estAffiche=!1)})})},t.prototype.ouvrirFermerChoixPortefeuille=function(){this.sauvegarderPoretefeuille()},t.prototype.sauvegarderPoretefeuille=function(){var e=this;this.sauveListePortefeuille=[],this.listePortefeuilles.forEach(function(t){e.sauveListePortefeuille.push(angular.copy(t))})},t.prototype.restaurerPoretefeuille=function(){var e=this;this.sauveListePortefeuille?(this.listePortefeuilles.length=0,this.sauveListePortefeuille.forEach(function(t){e.listePortefeuilles.push(t)}),this.viderSauvagardePortefeuille()):this.listePortefeuilles.forEach(function(e){e.estAffiche=!1})},t.prototype.viderSauvagardePortefeuille=function(){this.sauveListePortefeuille=null},t.prototype.setIndetermine=function(e,t){return this.aPortefeuilleCoche(e,t)&&this.aPortefeuillesNonCoches(e,t)},t.prototype.validerChoixPortefeuille=function(){var t=this;return this.viderSauvagardePortefeuille(),this.sauveListePortefeuille&&(this.sauveListePortefeuille.length=0,this.sauveListePortefeuille=null),this.listePortefeuilles=this.portefeuilleService.regrouperToutPortfeuille(this.listePortefeuillesDropDown),this.portefeuilleService.setListePortfeuillesVisu(this.listePortefeuilles).then(function(){if(t.ouvertureVoletChoixPortefeuille=!1,t.listeClientsService.razRelations(),t.$location.path()===e.Constantes.Url.CLIENTS){t.listeClientsService.initialiserEstLimiteClientsAtteinte(null);var i=t.portefeuilleService.aPortefeuillesReelAffiche()?e.Enum.PageClients.TYPE_FORCAGE.TOUT:t.portefeuilleService.aPortefeuilleExpertAffiche()?e.Enum.PageClients.TYPE_FORCAGE.CLIENTS:void 0;return t.portefeuilleService.setTypeForcage(i),t.eventService.initialiserListeRelationEtClient(i)}return t.eventService.initialiserVueGlobale()})},t.prototype.nbPortefeuilleReel=function(){return this.portefeuilleService.nbPortefeuilleReel()},t.prototype.aSuiviParComplementaire=function(){return this.portefeuilleService.aSuiviParComplementaire()},t.prototype.aPortefeuilleReel=function(){return this.portefeuilleService.aPortefeuilleReel()},t.prototype.aPortefeuille=function(){return this.portefeuilleService.aPortefeuille()},t.prototype.estDesignation=function(){return""!==this.contexteService.getDesignation()},t.prototype.stopPropagation=function(e){e.stopPropagation()},t.prototype.isCheckedGlobal=function(e){return!this.aPortefeuillesNonCoches(e)&&!this.setIndetermine(e)},t.CLASS_NAME="PfChoixPortefeuilleControleur",t.logger=i(t.CLASS_NAME),t.$inject=[e.Constantes.Inject.Angular.$location,e.Constantes.Inject.Services.contexteService,e.Constantes.Inject.Services.portefeuilleService,e.Constantes.Inject.Services.eventService,e.Constantes.Inject.Services.listeClientsService],t}();t.PfChoixPortefeuilleControleur=n,e.app.controller("PfChoixPortefeuilleControleur",n)}(t=e.Controleurs||(e.Controleurs={}))}(Portefeuille||(Portefeuille={}));var Portefeuille;!function(e){var t;!function(t){"use strict";function i(){return{restrict:"E",templateUrl:"typescript/directives/pf-choix-portefeuille/pf-choix-portefeuille-vue.html",controller:"PfChoixPortefeuilleControleur",controllerAs:"PfChoixPortefeuilleCtrl",bindToController:!0,scope:{listePortefeuillesDropDown:"=",listePortefeuilles:"=",ouvertureVoletChoixPortefeuille:"=",estVueGlobalConsolide:"="}}}t.mwPfChoixPortefeuille=i,e.app.directive("mwPfChoixPortefeuille",i)}(t=e.Directives||(e.Directives={}))}(Portefeuille||(Portefeuille={}));var Portefeuille;!function(e){var t;!function(t){"use strict";var i=MyWay.Services.Loggers.LoggerFactory.INSTANCE.getClass,n=function(){function e(){this.initialiser()}return e.prototype.initialiser=function(){e.logger.info(">>> Appel de la méthode : PfDiagrammeColonneControleur.initialiser <<<"),this.typeDiagramme||(this.typeDiagramme=0)},e.CLASS_NAME="PfDiagrammeColonneControleur",e.logger=i(e.CLASS_NAME),e.$inject=[],e}();t.PfDiagrammeColonneControleur=n,e.app.controller("PfDiagrammeColonneControleur",n)}(t=e.Controleurs||(e.Controleurs={}))}(Portefeuille||(Portefeuille={}));var Portefeuille;!function(e){var t;!function(t){"use strict";function i(){return{restrict:"E",templateUrl:"typescript/directives/pf-diagramme-colonne/pf-diagramme-colonne-vue.html",controller:"PfDiagrammeColonneControleur",controllerAs:"pfDiagrammeColonneCtrl",bindToController:!0,transclude:!0,scope:{svgId:"=",config:"=",typeDiagramme:"=?"}}}t.mwPfDiagrammeColonne=i,e.app.directive("mwPfDiagrammeColonne",i)}(t=e.Directives||(e.Directives={}))}(Portefeuille||(Portefeuille={}));var Portefeuille;!function(e){var t;!function(t){"use strict";var i=MyWay.Services.Loggers.LoggerFactory.INSTANCE.getClass,n=function(){function t(e,t){this.eventService=e,this.begacliService=t,this.initialiser()}return t.prototype.initialiser=function(){t.logger.info(">>> Appel de la méthode : PfDetailFiltreControleur.initialiser <<<")},t.prototype.supprimerFiltres=function(){this.begacliService.setCasesDecochees(),this.eventService.supprimerTousLesFiltresClientsControleur()},t.prototype.getTxtFiltre=function(t){var i;switch(t.indicateur.indicateur.typeIndicateur){case e.Enum.Indicateur.TYPE.TEXTE:i=this.getTxtListeValeurs(t);break;case e.Enum.Indicateur.TYPE.BEGACLI:i=this.begacliService.getFiltreBegacliTexte(t);break;default:switch(t.comparateur){case e.Enum.Filtre.COMPARATEUR.SUPERIEUR:i=this.getTxtValUnique(t);break;case e.Enum.Filtre.COMPARATEUR.INFERIEUR:i=this.getTxtValUnique(t);break;case e.Enum.Filtre.COMPARATEUR.EGALE:i=this.getTxtValUnique(t);break;case e.Enum.Filtre.COMPARATEUR.ENTRE:i=this.getTxtValMultiple(t);break;case e.Enum.Filtre.COMPARATEUR.NC:i=this.getTxtValNC(t);break;case e.Enum.Filtre.COMPARATEUR.ECHUE:i=this.getTxtValDerniereRevue(t);break;case e.Enum.Filtre.COMPARATEUR.ENCOURS:i=this.getTxtValDerniereRevue(t);break;case e.Enum.Filtre.COMPARATEUR.NONREALISEE:i=this.getTxtValDerniereRevue(t);break;default:i=""}}return i},t.prototype.getTxtListeValeurs=function(e){var t=e.indicateur.indicateur.intitule,i=_.pluck(_.where(e.indicateur.listeValeurs,{actif:!0}),"libelle");return t+" = ["+i.join(", ")+"]"},t.prototype.getDevise=function(t){return-1!==_.indexOf(e.Constantes.Indicateur.INDICATEUR_EN_EURO,t)?"€":"k€"},t.prototype.getTxtValUnique=function(e){return this.getTexteValeurs(e,!1)},t.prototype.getTxtValMultiple=function(e){return this.getTexteValeurs(e,!0)},t.prototype.getTexteValeurs=function(t,i){var n="",r="",o=i?t.valeurMultiple1:t.valeurUnique,l=o.toString(),a=i?t.valeurMultiple2:null,s=i?a.toString():null,u=t.indicateur.indicateur;return u.typeIndicateur===e.Enum.Indicateur.TYPE.MONTANT&&(l=e.Services.Utils.DataUtils.formatMontant(o),s=a?e.Services.Utils.DataUtils.formatMontant(a):null,n=" "+this.getDevise(u.code),r=n),u.typeIndicateur===e.Enum.Indicateur.TYPE.POURCENT&&(l=e.Services.Utils.DataUtils.formatPourcent(o),s=a?e.Services.Utils.DataUtils.formatPourcent(a):null,n=" %",r=n),u.typeIndicateur===e.Enum.Indicateur.TYPE.DATE&&(l=moment(l).format("DD/MM/YYYY"),s=a?moment(s).format("DD/MM/YYYY"):null,n="",r=n),u.intitule+" "+t.comparateur.toString()+" "+l+n+(s?" et "+s+r:"")},t.prototype.getTxtValNC=function(e){return e.indicateur.indicateur.intitule+" "+e.comparateur.toString()},t.prototype.getTxtValDerniereRevue=function(e){return e.indicateur.indicateur.intitule+" "+e.comparateur.toString()},t.CLASS_NAME="PfDetailFiltreControleur",t.logger=i(t.CLASS_NAME),t.$inject=[e.Constantes.Inject.Services.eventService,e.Constantes.Inject.Services.begacliService],t}();t.PfDetailFiltreControleur=n,e.app.controller(n.CLASS_NAME,n)}(t=e.Controleurs||(e.Controleurs={}))}(Portefeuille||(Portefeuille={}));var Portefeuille;!function(e){var t;!function(t){"use strict";function i(){return{restrict:"E",templateUrl:"typescript/directives/pf-detail-filtre/pf-detail-filtre-vue.html",controller:"PfDetailFiltreControleur",controllerAs:"pfDetailFiltreCtrl",bindToController:!0,scope:{listeFiltres:"="}}}t.mwPfDetailFiltre=i,e.app.directive("mwPfDetailFiltre",i)}(t=e.Directives||(e.Directives={}))}(Portefeuille||(Portefeuille={}));var Portefeuille;!function(e){var t;!function(t){"use strict";var i=MyWay.Services.Loggers.LoggerFactory.INSTANCE.getClass;!function(e){e[e.VIOLET_NIV1="#D955AC"]="VIOLET_NIV1",e[e.VIOLET_NIV2="#B84F6B"]="VIOLET_NIV2",e[e.VIOLET_NIV3="#66334A"]="VIOLET_NIV3"}(t.COULEUR_GRANDE_BARRE||(t.COULEUR_GRANDE_BARRE={}));var n=(t.COULEUR_GRANDE_BARRE,function(){function t(e){this.$element=e,this.initialiser()}return t.prototype.initialiser=function(){t.logger.info(">>> Appel de la méthode : PfDiagrammeGrandeBarreControleur.initialiser <<<"),this.valeurMax=this.recupererValeurMax(),this.pourcentage=this.calculerRapportValeur()},t.prototype.recupererValeurMax=function(){return Math.max.apply(Math,_.pluck(this.listeConfig,"valeur"))},t.prototype.calculerRapportValeur=function(){return 80*this.config.valeur/this.valeurMax},t.CLASS_NAME="PfDiagrammeGrandeBarreControleur",t.logger=i(t.CLASS_NAME),t.$inject=[e.Constantes.Inject.Angular.$element],t}());t.PfDiagrammeGrandeBarreControleur=n,e.app.controller("PfDiagrammeGrandeBarreControleur",n)}(t=e.Controleurs||(e.Controleurs={}))}(Portefeuille||(Portefeuille={}));var Portefeuille;!function(e){var t;!function(t){"use strict";function i(){return{restrict:"E",templateUrl:"typescript/directives/pf-diagramme-grande-barre/pf-diagramme-grande-barre-vue.html",controller:"PfDiagrammeGrandeBarreControleur",controllerAs:"pfDiagrammeGrandeBarreCtrl",bindToController:!0,scope:{config:"=",listeConfig:"="}}}t.mwPfDiagrammeGrandeBarre=i,e.app.directive("mwPfDiagrammeGrandeBarre",i)}(t=e.Directives||(e.Directives={}))}(Portefeuille||(Portefeuille={}));var Portefeuille;!function(e){var t;!function(t){"use strict";var i=MyWay.Services.Loggers.LoggerFactory.INSTANCE.getClass,n=function(){function t(t,i,n,r,o){this.$element=t,this.creationDonutService=i,this.eventService=n,this.statService=r,this.scope=o,this.listeDonuts=[e.Constantes.Application.DONUT_PME_ESI,e.Constantes.Application.DONUT_PRO],this.eventService.setPfDiagrammeDonutControleur(this),this.initialiser()}return t.prototype.initialiser=function(){var i=this;t.logger.info(">>> Appel de la méthode : PfDiagrammeDonutControleur.initialiser <<<"),this.$element.ready(function(){var t=-1;if(t=_.findIndex(i.config.listeDonnees,function(e){return e&&e.pourcentage>0?!0:void 0}),"0"===i.config.nombreClients&&(t=-1),-1===t){var n={titre:i.config.titre,degrade:e.Services.LibrairieD3.DEGRADE_DONUT.GRIS,nombreClients:i.config.nombreClients,listeDonnees:[]};n.listeDonnees.push({nom:"Donut Gris",pourcentage:Number.MAX_VALUE}),i.creationDonutService.creerDonut(n,i.svgId),i.listeConfigPuceLegende=[]}else if(i.creationDonutService.creerDonut(i.config,i.svgId),i.config&&i.config.listeDonnees){i.listeConfigPuceLegende=[];var r=i.creationDonutService.getCouleurDegrade(i.config.degrade);_.forEach(i.config.listeDonnees,function(e){var t={};t.intitule=e.nom,t.couleur=r(e.nom),t.affichagePuceLegendeActif=e.pourcentage&&e.pourcentage>0?!0:!1,i.listeConfigPuceLegende.push(t)})}i.scope.$applyAsync()})},t.prototype.echangerDonuts=function(t,i,n,r){var o=this;this.statService.getStatsRdvEtPortefeuille().then(function(i){i&&(o.config=e.Services.Utils.ApplicationUtils.getConfigDonutSelonType(t,i),o.initialiser())})},t.CLASS_NAME="PfDiagrammeDonutControleur",t.logger=i(t.CLASS_NAME),t.$inject=[e.Constantes.Inject.Angular.$element,e.Constantes.Inject.LibrairieD3.creationDonutService,e.Constantes.Inject.Services.eventService,e.Constantes.Inject.Services.statService,e.Constantes.Inject.Angular.$scope],t}();t.PfDiagrammeDonutControleur=n,e.app.controller("PfDiagrammeDonutControleur",n)}(t=e.Controleurs||(e.Controleurs={}))}(Portefeuille||(Portefeuille={}));var Portefeuille;!function(e){var t;!function(t){"use strict";function i(){return{restrict:"E",templateUrl:"typescript/directives/pf-diagramme-donut/pf-diagramme-donut-vue.html",controller:"PfDiagrammeDonutControleur",controllerAs:"pfDiagrammeDonutCtrl",bindToController:!0,scope:{svgId:"=",config:"="}}}t.mwPfDiagrammeDonut=i,e.app.directive("mwPfDiagrammeDonut",i)}(t=e.Directives||(e.Directives={}))}(Portefeuille||(Portefeuille={}));var Portefeuille;!function(e){var t;!function(t){"use strict";var i=MyWay.Services.Loggers.LoggerFactory.INSTANCE.getClass;!function(e){e[e.BLEU_NIV1="#76DDFB"]="BLEU_NIV1",e[e.BLEU_NIV2="#53A8E2"]="BLEU_NIV2",e[e.BLEU_NIV3="#CFE3F0"]="BLEU_NIV3"}(t.COULEUR_PETITE_BARRE||(t.COULEUR_PETITE_BARRE={}));var n=(t.COULEUR_PETITE_BARRE,function(){function e(){this.initialiser()}return e.prototype.initialiser=function(){e.logger.info(">>> Appel de la méthode : PfDiagrammePetiteBarreControleur.initialiser <<<"),this.valeurMax=this.recupererValeurMax(),this.pourcentage=this.calculerRapportValeur()},e.prototype.recupererValeurMax=function(){return Math.max.apply(Math,_.pluck(this.listeConfig,"valeur"))},e.prototype.calculerRapportValeur=function(){return 80*this.config.valeur/this.valeurMax},e.CLASS_NAME="PfDiagrammePetiteBarreControleur",e.logger=i(e.CLASS_NAME),e.$inject=[],e}());t.PfDiagrammePetiteBarreControleur=n,e.app.controller("PfDiagrammePetiteBarreControleur",n)}(t=e.Controleurs||(e.Controleurs={}))}(Portefeuille||(Portefeuille={}));var Portefeuille;!function(e){var t;!function(t){"use strict";function i(){return{restrict:"E",templateUrl:"typescript/directives/pf-diagramme-petite-barre/pf-diagramme-petite-barre-vue.html",controller:"PfDiagrammePetiteBarreControleur",controllerAs:"pfDiagrammePetiteBarreCtrl",bindToController:!0,scope:{config:"=",listeConfig:"="}}}t.mwPfDiagrammePetiteBarre=i,e.app.directive("mwPfDiagrammePetiteBarre",i)}(t=e.Directives||(e.Directives={}))}(Portefeuille||(Portefeuille={}));var Portefeuille;!function(e){var t;!function(t){"use strict";var i=MyWay.Services.Loggers.LoggerFactory.INSTANCE.getClass,n=function(){function t(t,i,n){var r=this;this.$scope=t,this.$element=i,this.pfDragAndDropService=n,this.dragStart=function(t){r.dragSettings.dragStartBeforeEvent&&r.dragSettings.dragStartBeforeEvent();var i=document.getElementById(r.dragSettings.idHTMLElementConteneur).getElementsByClassName(e.Constantes.DragAndDrop.HTML_CLASS_NAME_PF_DROP_TARGET_ELEMENT);_.forEach(i,function(t){t.classList.add(e.Constantes.DragAndDrop.HTML_CLASS_NAME_PF_DROP_TARGET_ON_DRAG)}),r.pfDragAndDropService.setDonnees(r.dragSettings.donneesATransmettre)},this.dragEnd=function(t){r.dragSettings.dragEndBeforeEvent&&r.dragSettings.dragEndBeforeEvent();var i=document.getElementById(r.dragSettings.idHTMLElementConteneur).getElementsByClassName(e.Constantes.DragAndDrop.HTML_CLASS_NAME_PF_DROP_TARGET_ELEMENT);_.forEach(i,function(t){t.classList.remove(e.Constantes.DragAndDrop.HTML_CLASS_NAME_PF_DROP_TARGET_ON_DRAG)})},this.activerDrag=function(){r.dragSettings.estActiver=!0,r.$element.attr(e.Constantes.DragAndDrop.ATTRIBUT_DRAGGABLE,e.Constantes.DragAndDrop.STRING_VALUE_TRUE)},this.desactiverDrag=function(){r.dragSettings.estActiver=!1,r.$element.attr(e.Constantes.DragAndDrop.ATTRIBUT_DRAGGABLE,e.Constantes.DragAndDrop.STRING_VALUE_FALSE)},this.initialiser()}return t.prototype.initialiser=function(){this.dragSettings=this.$scope.dragSettings,this.dragSettings.activerDrag=this.activerDrag,this.dragSettings.desactiverDrag=this.desactiverDrag,this.dragSettings.estActiver?this.activerDrag():this.desactiverDrag(),this.$element.bind(e.Constantes.DragAndDrop.EVENT_LISTENER_DRAGSTART,this.dragStart),this.$element.bind(e.Constantes.DragAndDrop.EVENT_LISTENER_DRAGEND,this.dragEnd)},t.CLASS_NAME="PfCoreDraggableControleur",t.logger=i(t.CLASS_NAME),t.$inject=[e.Constantes.Inject.Angular.$scope,e.Constantes.Inject.Angular.$element,e.Constantes.Inject.Services.pfDragAndDropService],t}();t.PfCoreDraggableControleur=n,e.app.controller(n.CLASS_NAME,n)}(t=e.Controleurs||(e.Controleurs={}))}(Portefeuille||(Portefeuille={}));var Portefeuille;!function(e){var t;!function(t){"use strict";function i(){return{restrict:"A",controller:"PfCoreDraggableControleur",bindToController:!0,scope:{dragSettings:"="}}}t.mwPfCoreDraggable=i,e.app.directive("mwPfCoreDraggable",i)}(t=e.Directives||(e.Directives={}))}(Portefeuille||(Portefeuille={}));var Portefeuille;!function(e){var t;!function(t){"use strict";var i=MyWay.Services.Loggers.LoggerFactory.INSTANCE.getClass,n=function(){function t(t,i,n){var r=this;this.$scope=t,this.$element=i,this.pfDragAndDropService=n,this.onDragOver=function(e){e.preventDefault()},this.onDrop=function(t){t.preventDefault(),t.stopPropagation();var i=document.getElementById(r.dropSettings.idHTMLElementConteneur).getElementsByClassName(e.Constantes.DragAndDrop.HTML_CLASS_NAME_PF_DROP_TARGET_ELEMENT);_.forEach(i,function(t){t.classList.remove(e.Constantes.DragAndDrop.HTML_CLASS_NAME_PF_DROP_TARGET_ON_DRAG)});var n=r.pfDragAndDropService.getDonnees();r.dropSettings.dropEventAction(n)},this.activerDragOver=function(){r.dropSettings.estActiver=!0,r.$element.bind(e.Constantes.DragAndDrop.EVENT_LISTENER_DRAGOVER,r.onDragOver),r.$element.addClass(e.Constantes.DragAndDrop.HTML_CLASS_NAME_PF_DROP_TARGET_ELEMENT)},this.desactiverDragOver=function(){r.dropSettings.estActiver=!1,r.$element.unbind(e.Constantes.DragAndDrop.EVENT_LISTENER_DRAGOVER,r.onDragOver),r.$element.removeClass(e.Constantes.DragAndDrop.HTML_CLASS_NAME_PF_DROP_TARGET_ELEMENT),r.$element.removeClass(e.Constantes.DragAndDrop.HTML_CLASS_NAME_PF_DROP_TARGET_ON_DRAG)},this.initialiser()}return t.prototype.initialiser=function(){this.dropSettings=this.$scope.dropSettings,this.dropSettings.activerDragOver=this.activerDragOver,this.dropSettings.desactiverDragOver=this.desactiverDragOver,this.dropSettings.estActiver?this.activerDragOver():this.desactiverDragOver(),this.$element.bind(e.Constantes.DragAndDrop.EVENT_LISTENER_DROP,this.onDrop)},t.CLASS_NAME="PfCoreDropTargetControleur",t.logger=i(t.CLASS_NAME),t.$inject=[e.Constantes.Inject.Angular.$scope,e.Constantes.Inject.Angular.$element,e.Constantes.Inject.Services.pfDragAndDropService],t}();t.PfCoreDropTargetControleur=n,e.app.controller(n.CLASS_NAME,n)}(t=e.Controleurs||(e.Controleurs={}))}(Portefeuille||(Portefeuille={}));var Portefeuille;!function(e){var t;!function(t){"use strict";function i(){return{restrict:"A",controller:"PfCoreDropTargetControleur",bindToController:!0,scope:{dropSettings:"="}}}t.mwPfCoreDropTarget=i,e.app.directive("mwPfCoreDropTarget",i)}(t=e.Directives||(e.Directives={}))}(Portefeuille||(Portefeuille={}));var Portefeuille;!function(e){var t;!function(e){"use strict";var t;!function(e){e.EVENT_LISTENER_DRAGSTART="dragstart",e.EVENT_LISTENER_DRAGEND="dragend",e.EVENT_LISTENER_DRAGOVER="dragover",e.EVENT_LISTENER_DROP="drop",e.ATTRIBUT_DRAGGABLE="draggable",e.STRING_VALUE_TRUE="true",e.STRING_VALUE_FALSE="false",e.HTML_CLASS_NAME_PF_DROP_TARGET_ELEMENT="pf-drop-target-element",e.HTML_CLASS_NAME_PF_DROP_TARGET_ON_DRAG="pf-drop-target-on-drag"}(t=e.DragAndDrop||(e.DragAndDrop={}))}(t=e.Constantes||(e.Constantes={}))}(Portefeuille||(Portefeuille={}));var Portefeuille;!function(e){var t;!function(e){var t;!function(e){"use strict"}(t=e.Application||(e.Application={}))}(t=e.Modeles||(e.Modeles={}))}(Portefeuille||(Portefeuille={}));var Portefeuille;!function(e){var t;!function(t){var i;!function(t){"use strict";var i=MyWay.Services.Loggers.LoggerFactory.INSTANCE.getClass,n=function(){function e(){}return e.prototype.getDonnees=function(){return this.donnees},e.prototype.setDonnees=function(e){this.donnees=e},e.CLASS_NAME="PfDragAndDropService",e.logger=i(e.CLASS_NAME),e.$inject=[],e}();e.app.service("PfDragAndDropService",n)}(i=t.Application||(t.Application={}))}(t=e.Services||(e.Services={}))}(Portefeuille||(Portefeuille={}));var Portefeuille;!function(e){var t;!function(t){"use strict";var i=MyWay.Services.Loggers.LoggerFactory.INSTANCE.getClass,n=function(){function e(){this.initialiser()}return e.prototype.initialiser=function(){t.PfDiagrammeColonneControleur.logger.info(">>> Appel de la méthode : PfDiagrammePourcentageControleur.initialiser <<<")},e.CLASS_NAME="PfDiagrammePourcentageControleur",e.logger=i(e.CLASS_NAME),e.$inject=[],e}();t.PfDiagrammePourcentageControleur=n,e.app.controller("PfDiagrammePourcentageControleur",n)}(t=e.Controleurs||(e.Controleurs={}))}(Portefeuille||(Portefeuille={}));var Portefeuille;!function(e){var t;!function(t){"use strict";function i(){return{restrict:"E",templateUrl:"typescript/directives/pf-diagramme-pourcentage/pf-diagramme-pourcentage-vue.html",controller:"PfDiagrammePourcentageControleur",controllerAs:"pfDiagrammePourcentageCtrl",bindToController:!0,transclude:!0,scope:{config:"="}}}t.mwPfDiagrammePourcentage=i,e.app.directive("mwPfDiagrammePourcentage",i)}(t=e.Directives||(e.Directives={}))}(Portefeuille||(Portefeuille={}));var Portefeuille;!function(e){var t;!function(t){"use strict";var i=MyWay.Services.Loggers.LoggerFactory.INSTANCE.getClass,n=function(){function e(){this.initialiser()}return e.prototype.initialiser=function(){t.PfDiagrammeColonneControleur.logger.info(">>> Appel de la méthode : PfDiagrammeMultiColonneControleur.initialiser <<<")},e.CLASS_NAME="PfDiagrammeMultiColonneControleur",e.logger=i(e.CLASS_NAME),e.$inject=[],e}();t.PfDiagrammeMultiColonneControleur=n,e.app.controller("PfDiagrammeMultiColonneControleur",n)}(t=e.Controleurs||(e.Controleurs={}))}(Portefeuille||(Portefeuille={}));var Portefeuille;!function(e){var t;!function(t){"use strict";function i(){return{restrict:"E",templateUrl:"typescript/directives/pf-diagramme-multi-colonne/pf-diagramme-multi-colonne-vue.html",controller:"PfDiagrammeMultiColonneControleur",controllerAs:"pfDiagrammeMultiColonneCtrl",bindToController:!0,transclude:!0,scope:{config:"="}}}t.mwPfDiagrammeMultiColonne=i,e.app.directive("mwPfDiagrammeMultiColonne",i)}(t=e.Directives||(e.Directives={}))}(Portefeuille||(Portefeuille={}));var Portefeuille;!function(e){var t;!function(t){"use strict";var i=MyWay.Services.Loggers.LoggerFactory.INSTANCE.getClass,n=function(){function n(e,t,i,n,r){this.portefeuilleService=e,this.contexteService=t,this.statsService=i,this.lisaService=n,this.popupService=r,this.initialiser()}return n.prototype.initialiser=function(){n.logger.info(">>> Appel de la méthode : PfIndicateurBadgeControleur.initialiser <<<"),this.chargementIndicateurBadgeEnCours=!1},n.prototype.show=function(){return this.debranchementLisa>0&&(this.valeur>"0"||this.showZero===!0)?!0:!1},n.prototype.debrancherVers=function(){var e=this;n.logger.info(">>> Appel de la méthode : PfIndicateurBadgeControleur.debrancherVers <<<"),this.portefeuilleService.getCaracteristiquesAgent()?this.debrancherVersSuite():this.portefeuilleService.getCaracteristiquesAgentConnecte().then(function(t){e.portefeuilleService.setCaracteristiquesAgent(t),e.debrancherVersSuite()})},n.prototype.debrancherVersSuite=function(){var i=this;if(n.logger.info(">>> Appel de la méthode : PfIndicateurBadgeControleur.debrancherVersSuite <<<"),this.debranchementLisa===e.Constantes.CodeProcessusLisa.CODE_LISA_BILAN_REVUES_PORTEFEUILLE||this.debranchementLisa===e.Constantes.CodeProcessusLisa.CODE_LISA_BILAN_APPETENCES_PORTEFEUILLE||this.debranchementLisa===e.Constantes.CodeProcessusLisa.CODE_LISA_GESTION_AFFAIRES||this.debranchementLisa===e.Constantes.CodeProcessusLisa.CODE_LISA_PROPOSITONS){var r={},o={};return o.objCaractAgent=this.portefeuilleService.getCaracteristiquesAgent(),o.listePtfVisu=_.pluck(_.where(this.portefeuilleService.getListePortefeuillesVisu(),{estAffiche:!0}),"id"),o.nombrePortefeuilleTotalAgent=this.portefeuilleService.getListePortefeuillesVisu().length,o.locationPath=e.Constantes.Url.PORTEFEUILLE,r.objetEdsVisu=o,this.contexteService.ajouterDonneesDebranchementBilanRevuePortefeuille(r).then(function(){return i.lisaService.next(i.debranchementLisa,i.debranchementLocal).then(function(){})["catch"](function(e){t.ClientsControleur.logger.debug(">>> Echec sur lisa.next de la méthode : PfIndicateurBadgeControleur.debrancherVers <<<"),i.popupService.showErreur(e)})})}if(this.debranchementLisa===e.Enum.Revue.POPUP_REVUE.POPUP_CLIENTS_A_ACTIVER){var l=void 0,a=void 0;this.portefeuilleService&&(l=this.portefeuilleService.getCaracteristiquesAgent(),a=_.pluck(_.where(this.portefeuilleService.getListePortefeuillesVisu(),{estAffiche:!0}),"id"),l&&a&&a.length>0&&(this.chargementIndicateurBadgeEnCours=!0,this.statsService.getClientsAActiver(l.codeEtablissement,l.identifiantElementStructure,a).then(function(e){e&&e.length>0&&i.popupService.showModal("vues/template-modale/modale-clients-activer-vue.html","ModaleClientsActiverControleur",e)})["catch"](function(e){t.ClientsControleur.logger.debug(">>> Echec sur l'ouverture de la popup des clients à activer: PfIndicateurBadgeControleur.debrancherVers <<<"),i.popupService.showErreur(e)})["finally"](function(){i.chargementIndicateurBadgeEnCours=!1})))}else{if(this.debranchementLisa!==e.Enum.Revue.POPUP_REVUE.POPUP_CLIENTS_TARIFICATION)return this.lisaService.next(this.debranchementLisa,this.debranchementLocal)["catch"](function(e){t.ClientsControleur.logger.debug(">>> Echec sur lisa.next de la méthode : PfIndicateurBadgeControleur.debrancherVers <<<"),i.popupService.showErreur(e)});var l=void 0,a=void 0;this.portefeuilleService&&(l=this.portefeuilleService.getCaracteristiquesAgent(),a=_.pluck(_.where(this.portefeuilleService.getListePortefeuillesVisu(),{estAffiche:!0}),"id"),l&&a&&a.length>0&&(this.chargementIndicateurBadgeEnCours=!0,this.statsService.getClientsARenegocier(l.codeEtablissement,l.identifiantElementStructure,a).then(function(e){e&&e.length>0&&i.popupService.showModal("vues/template-modale/modale-clients-activer-vue.html","ModaleClientsRenegocierControleur",e)})["catch"](function(e){t.ClientsControleur.logger.debug(">>> Echec sur l'ouverture de la popup des clients à activer: PfIndicateurBadgeControleur.debrancherVers <<<"),i.popupService.showErreur(e)})["finally"](function(){i.chargementIndicateurBadgeEnCours=!1})))}},n.CLASS_NAME="PfIndicateurBadgeControleur",n.logger=i(n.CLASS_NAME),n.$inject=[e.Constantes.Inject.Services.portefeuilleService,e.Constantes.Inject.Services.contexteService,e.Constantes.Inject.Services.statService,PdtEntreprise.Constantes.Inject.Services.LISA_SERVICE,PdtEntreprise.Constantes.Inject.Services.POPUP_SERVICE],n}();t.PfIndicateurBadgeControleur=n,e.app.controller("PfIndicateurBadgeControleur",n)}(t=e.Controleurs||(e.Controleurs={}))}(Portefeuille||(Portefeuille={}));var Portefeuille;!function(e){var t;!function(t){"use strict";function i(){return{restrict:"E",templateUrl:"typescript/directives/pf-indicateur-badge/pf-indicateur-badge-vue.html",controller:"PfIndicateurBadgeControleur",controllerAs:"pfIndicateurBadgeCtrl",bindToController:!0,scope:{intitule:"=",valeur:"=",isSousIntitule:"=",debranchementLisa:"=",debranchementLocal:"=",showZero:"="}}}t.mwPfIndicateurBadge=i,e.app.directive("mwPfIndicateurBadge",i)}(t=e.Directives||(e.Directives={}))}(Portefeuille||(Portefeuille={}));var Portefeuille;!function(e){var t;!function(t){"use strict";var i=MyWay.Services.Loggers.LoggerFactory.INSTANCE.getClass;!function(e){e[e.VERT="couleur-verte"]="VERT",e[e.ORANGE="couleur-orange"]="ORANGE",e[e.ROUGE="couleur-rouge"]="ROUGE"}(t.COULEUR_INDICATEUR_FLECHE||(t.COULEUR_INDICATEUR_FLECHE={}));t.COULEUR_INDICATEUR_FLECHE;!function(e){e[e.HAUT="itce-arrow-up-circle"]="HAUT",e[e.BAS="itce-arrow-down-circle"]="BAS",e[e.DROITE="itce-arrow-right-circle"]="DROITE"}(t.ICONE_INDICATEUR_FLECHE||(t.ICONE_INDICATEUR_FLECHE={}));var n=(t.ICONE_INDICATEUR_FLECHE,function(){function e(){this.initialiser()}return e.prototype.initialiser=function(){e.logger.info(">>> Appel de la méthode : PfIndicateurFlecheControleur.initialiser <<<")},Object.defineProperty(e.prototype,"isPositif",{get:function(){return"itce-arrow-up-circle"===this.config.icone},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isNeutre",{get:function(){return"itce-arrow-right-circle"===this.config.icone},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isNegatif",{get:function(){return"itce-arrow-down-circle"===this.config.icone},enumerable:!0,configurable:!0}),e.CLASS_NAME="PfIndicateurFlecheControleur",e.logger=i(e.CLASS_NAME),e.$inject=[],e}());t.PfIndicateurFlecheControleur=n,e.app.controller("PfIndicateurFlecheControleur",n)}(t=e.Controleurs||(e.Controleurs={}))}(Portefeuille||(Portefeuille={}));var Portefeuille;!function(e){var t;!function(t){"use strict";function i(){return{restrict:"E",templateUrl:"typescript/directives/pf-indicateur-fleche/pf-indicateur-fleche-vue.html",controller:"PfIndicateurFlecheControleur",controllerAs:"pfIndicateurFlecheCtrl",bindToController:!0,scope:{config:"="}}}t.mwPfIndicateurFleche=i,e.app.directive("mwPfIndicateurFleche",i)}(t=e.Directives||(e.Directives={}))}(Portefeuille||(Portefeuille={}));var Portefeuille;!function(e){var t;!function(t){"use strict";var i=MyWay.Services.Loggers.LoggerFactory.INSTANCE.getClass,n=function(){function n(e,t){this.$compile=e,this.choixUtilisateurService=t,this.initialiser()}return n.prototype.initialiser=function(){t.PfTuileIndicateurControleur.logger.info(">>> Appel de la méthode : PfTuileIndicateurControleur.initialiser <<<")},Object.defineProperty(n.prototype,"nomEds",{get:function(){return this.eds&&this.eds.nomEds&&this.eds.nomEds.length>0?this.eds.nomEds:"-x-"},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"edsSelectionne",{set:function(e){this.choixUtilisateurService.edsSelectionne=e},enumerable:!0,configurable:!0}),n.prototype.ouvrir=function(){var e=this;return this.eds.agencesInferieur?void(this.eds.affiche=!this.eds.affiche):this.choixUtilisateurService.rechercherEdsInferieurs(this.eds).then(function(){e.eds.affiche=!0})},Object.defineProperty(n.prototype,"estfermer",{get:function(){return!(this.eds&&this.eds.affiche)},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"estOuvert",{get:function(){return this.eds&&this.eds.affiche},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"estCoche",{get:function(){return this.choixUtilisateurService.edsSelectionne===this.eds},enumerable:!0,configurable:!0}),n.prototype.selectionnerEDS=function(){return this.choixUtilisateurService.edsSelectionne=this.eds},Object.defineProperty(n.prototype,"estVide",{get:function(){return this.eds&&this.eds.agencesInferieur&&0===this.eds.agencesInferieur.length},enumerable:!0,configurable:!0}),n.CLASS_NAME="PfElementEdsControleur",n.logger=i(n.CLASS_NAME),n.$inject=["$compile",e.Constantes.Inject.Services.choixUtilisateurService],n}();t.PfElementEdsControleur=n,e.app.controller("PfElementEdsControleur",n)}(t=e.Controleurs||(e.Controleurs={}))}(Portefeuille||(Portefeuille={}));var Portefeuille;!function(e){var t;!function(t){"use strict";function i(e){return{restrict:"EA",templateUrl:"typescript/directives/pf-element-eds/pf-element-eds-vue.html",controller:"PfElementEdsControleur",controllerAs:"popupCtrl",bindToController:!0,transclude:!0,scope:{eds:"="},compile:function(t,i,n){var r,o=t.contents().remove();return function(t,i,l,a,s){return r||(r=e(o,n)),r(t,function(e){i.append(e)})}}}}t.mwPfElementEds=i,e.app.directive("mwPfElementEds",["$compile",i])}(t=e.Directives||(e.Directives={}))}(Portefeuille||(Portefeuille={}));var Portefeuille;
!function(e){var t;!function(t){"use strict";var i=MyWay.Services.Loggers.LoggerFactory.INSTANCE.getClass,n=function(){function e(){this.initialiser()}return e.prototype.initialiser=function(){e.logger.info(">>> Appel de la méthode : PfIndicateurColonneControleur.initialiser <<<")},e.prototype.estVisibleSousValeur=function(){return void 0!==this.data.sousValeur},e.prototype.estVisibleIntituleSousValeur=function(){return 0!==this.data.sousValeur},Object.defineProperty(e.prototype,"estVisibleSuiviPar",{get:function(){return void 0!==this.data.nomSuiviPar&&null!==this.data.nomSuiviPar},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"estSousValeurEnNombre",{get:function(){return!this.data.estMontant&&this.estVisibleIntituleSousValeur()},enumerable:!0,configurable:!0}),e.CLASS_NAME="PfIndicateurColonneControleur",e.logger=i(e.CLASS_NAME),e.$inject=[],e}();t.PfIndicateurColonneControleur=n,e.app.controller("PfIndicateurColonneControleur",n)}(t=e.Controleurs||(e.Controleurs={}))}(Portefeuille||(Portefeuille={}));var Portefeuille;!function(e){var t;!function(t){"use strict";function i(){return{restrict:"E",templateUrl:"typescript/directives/pf-indicateur-colonne/pf-indicateur-colonne-vue.html",controller:"PfIndicateurColonneControleur",controllerAs:"pfIndicateurColonneCtrl",bindToController:!0,scope:{data:"="}}}t.mwPfIndicateurColonne=i,e.app.directive("mwPfIndicateurColonne",i)}(t=e.Directives||(e.Directives={}))}(Portefeuille||(Portefeuille={}));var Portefeuille;!function(e){var t;!function(t){"use strict";var i=MyWay.Services.Loggers.LoggerFactory.INSTANCE.getClass,n=function(){function n(e){this.creationPourcentageService=e,this.initialiser()}return n.prototype.initialiser=function(){var e=this;t.PfIndicateurColonneControleur.logger.info(">>> Appel de la méthode : PfIndicateurPourcentageControleur.initialiser <<<"),angular.element(document.querySelector("#"+this.config.id)).ready(function(){e.creationPourcentageService.creerPourcentage(e.config,e.config.id)})},Object.defineProperty(n.prototype,"id",{get:function(){return this.config.id},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"isIE",{get:function(){return e.Services.Utils.ApplicationUtils.isIE()},enumerable:!0,configurable:!0}),n.CLASS_NAME="PfIndicateurPourcentageControleur",n.logger=i(n.CLASS_NAME),n.$inject=[e.Constantes.Inject.Services.creationPourcentageService],n}();t.PfIndicateurPourcentageControleur=n,e.app.controller("PfIndicateurPourcentageControleur",n)}(t=e.Controleurs||(e.Controleurs={}))}(Portefeuille||(Portefeuille={}));var Portefeuille;!function(e){var t;!function(t){"use strict";function i(){return{restrict:"E",templateUrl:"typescript/directives/pf-indicateur-pourcentage/pf-indicateur-pourcentage-vue.html",controller:"PfIndicateurPourcentageControleur",controllerAs:"pfIndicateurPourcentageCtrl",bindToController:!0,scope:{config:"="}}}t.mwPfIndicateurPourcentage=i,e.app.directive("mwPfIndicateurPourcentage",i)}(t=e.Directives||(e.Directives={}))}(Portefeuille||(Portefeuille={}));var Portefeuille;!function(e){var t;!function(t){"use strict";var i=MyWay.Services.Loggers.LoggerFactory.INSTANCE.getClass,n=function(){function t(e,t,i){this.$filter=e,this.$parse=t,this.eventService=i,this.eventService.setPfLigneRelationEcoControleur(this),this.initialiser()}return t.prototype.reInitialiser=function(e){var i=this;t.logger.info(">>> Appel de la méthode : PfLigneRelationEcoControleur.initialiser <<<"),this.estOuvert=!1,this.listeIndicateursAAfficher=[],_.forEach(e,function(e){var t=_.findIndex(i.relationEconomique.listeIndicateurs,function(t){return t.code===e.indicateur.codeRel});-1!==t&&e.indicateur.estVisibleColonne&&i.listeIndicateursAAfficher.push(i.relationEconomique.listeIndicateurs[t])})},t.prototype.initialiser=function(){var e=this;t.logger.info(">>> Appel de la méthode : PfLigneRelationEcoControleur.initialiser <<<"),this.estOuvert=!1,this.listeIndicateursAAfficher=[],_.forEach(this.listeIndicateursTableau,function(t){var i=_.findIndex(e.relationEconomique.listeIndicateurs,function(e){return e.code===t.indicateur.codeRel});-1!==i&&t.indicateur.estVisibleColonne&&e.listeIndicateursAAfficher.push(e.relationEconomique.listeIndicateurs[i])})},t.prototype.afficherMoinsPlus=function(){t.logger.info(">>> Appel de la méthode : PfLigneRelationEcoControleur.afficherMoinsPlus <<<"),this.estOuvert=!this.estOuvert},t.prototype.onSelectionChange=function(e){},t.CLASS_NAME="PfLigneRelationEcoControleur",t.logger=i(t.CLASS_NAME),t.$inject=[e.Constantes.Inject.Angular.$filter,e.Constantes.Inject.Angular.$parse,e.Constantes.Inject.Services.eventService],t}();t.PfLigneRelationEcoControleur=n,e.app.controller("PfLigneRelationEcoControleur",n)}(t=e.Controleurs||(e.Controleurs={}))}(Portefeuille||(Portefeuille={}));var Portefeuille;!function(e){var t;!function(t){"use strict";function i(){return{restrict:"E",templateUrl:"typescript/directives/pf-ligne-relation-eco/pf-ligne-relation-eco-vue.html",controller:"PfLigneRelationEcoControleur",controllerAs:"pfLigneRelationEcoCtrl",bindToController:!0,scope:{relationEconomique:"=",listeIndicateursTableau:"="}}}t.mwPfLigneRelationEco=i,e.app.directive("mwPfLigneRelationEco",i)}(t=e.Directives||(e.Directives={}))}(Portefeuille||(Portefeuille={}));var Portefeuille;!function(e){var t;!function(t){"use strict";var i=MyWay.Services.Loggers.LoggerFactory.INSTANCE.getClass,n=function(){function e(){this.initialiser()}return e.prototype.initialiser=function(){t.PfDiagrammeDonutControleur.logger.info(">>> Appel de la méthode : PfPuceLegendeControleur.initialiser <<<")},e.CLASS_NAME="PfPuceLegendeControleur",e.logger=i(e.CLASS_NAME),e.$inject=[],e}();t.PfPuceLegendeControleur=n,e.app.controller("PfPuceLegendeControleur",n)}(t=e.Controleurs||(e.Controleurs={}))}(Portefeuille||(Portefeuille={}));var Portefeuille;!function(e){var t;!function(t){"use strict";function i(){return{restrict:"E",templateUrl:"typescript/directives/pf-puce-legende/pf-puce-legende-vue.html",controller:"PfPuceLegendeControleur",controllerAs:"pfPuceLegendeCtrl",bindToController:!0,scope:{intitule:"@",couleur:"@",affichagePuceLegendeActif:"=",sousIntitule:"@",sousCouleur:"@"}}}t.mwPfPuceLegende=i,e.app.directive("mwPfPuceLegende",i)}(t=e.Directives||(e.Directives={}))}(Portefeuille||(Portefeuille={}));var Portefeuille;!function(e){var t;!function(t){"use strict";var i=MyWay.Services.Loggers.LoggerFactory.INSTANCE.getClass,n=function(){function t(t,i){var n=this;this.$element=t,this.modalePaniersService=i,this.dragStartBeforeEvent=function(){n.modalePaniersService.activerDropPanier(),n.modalePaniersService.activerDropTuilesPanier(n.listeTuilePanierSettings),n.listeTuilePanierSettings.length===e.Constantes.ModalePaniers.NOMBRE_INDICATEUR_MAX-1&&n.modalePaniersService.cacherBoutonValider()},this.dragEndBeforeEvent=function(){n.modalePaniersService.desactiverDropPanier(),n.modalePaniersService.desactiverDropTuilesPanier(n.listeTuilePanierSettings),n.listeTuilePanierSettings.length===e.Constantes.ModalePaniers.NOMBRE_INDICATEUR_MAX-1&&n.modalePaniersService.afficherBoutonValider()},this.initialiser()}return t.prototype.initialiser=function(){t.logger.info(">>> Appel de la méthode : PfTuileCatalogueControleur.initialiser <<<"),this.configTuile=this.getConfigTuile(),this.tuileCatalogueSettings.dragSettings=this.modalePaniersService.creerDragSettings(this.tuileCatalogueSettings),this.tuileCatalogueSettings.dragSettings.estActiver=this.modalePaniersService.getEstEditionPanier(),this.tuileCatalogueSettings.indicateur.choisi?this.tuileCatalogueSettings.dragSettings.estActiver=!1:this.listeTuilePanierSettings.length===e.Constantes.ModalePaniers.NOMBRE_INDICATEUR_MAX&&(this.tuileCatalogueSettings.dragSettings.estActiver=!1),this.tuileCatalogueSettings.dragSettings.dragStartBeforeEvent=this.dragStartBeforeEvent,this.tuileCatalogueSettings.dragSettings.dragEndBeforeEvent=this.dragEndBeforeEvent,this.$element.ready(this.modalePaniersService.rendreCompatibleTuilesAvecDragAndDrop)},t.prototype.getConfigTuile=function(){var t={};return t.taille=e.Constantes.ModalePaniers.TUILE_CATALOGUE_TAILLE,t.typeMarquage=e.Constantes.ModalePaniers.TUILE_TYPE_MARQUAGE_TEXTE,this.tuileCatalogueSettings.indicateur.indicateur.estUniquementVueClients||(t.typeMarquage=e.Constantes.ModalePaniers.TUILE_CATALOGUE_TYPE_MARQUAGE_AUCUN,this.tuileCatalogueSettings.indicateur.indicateur.intitule=this.modifIntitule(this.tuileCatalogueSettings.indicateur.indicateur.intitule)),t},t.prototype.modifIntitule=function(e){var t=_.padLeft("",40,String.fromCharCode(160));return-1===e.indexOf(t)&&(e=t+" "+e),e},t.prototype.afficherMarquage=function(){return this.tuileCatalogueSettings.indicateur.choisi?!0:this.tuileCatalogueSettings.indicateur.indicateur.estUniquementVueClients?!0:!0},t.prototype.nomMarquage=function(){return this.tuileCatalogueSettings.indicateur.indicateur.estUniquementVueClients?e.Constantes.ModalePaniers.TUILE_NOM_MARQUAGE_CLIENT_PROSPECT:void 0},t.prototype.couleur=function(){return this.tuileCatalogueSettings.indicateur.choisi?e.Constantes.ModalePaniers.TUILE_COULEUR_JAUNE:this.tuileCatalogueSettings.indicateur.indicateur.estUniquementVueClients?e.Constantes.ModalePaniers.TUILE_COULEUR_ROUGE:e.Constantes.ModalePaniers.TUILE_COULEUR_SOMBRE},t.prototype.ajouter=function(){this.listeTuilePanierSettings.length===e.Constantes.ModalePaniers.NOMBRE_INDICATEUR_MAX-1&&(this.modalePaniersService.cacherBoutonValider(),_.forEach(this.listeTuileCatalogueSettings,function(e){e.estEnEdition=!1})),this.tuileCatalogueSettings.indicateur.choisi=!0,this.tuileCatalogueSettings.estEnEdition=!1;var t={};t.id=this.modalePaniersService.genererIdentifiantAleatoire(),t.indicateur=this.tuileCatalogueSettings.indicateur,this.listeTuilePanierSettings.push(t),this.modalePaniersService.afficherMessageAvertissementFiltre(this.listeFiltresRelationEco,this.listeFiltresClients,_.pluck(this.listeTuilePanierSettings,"indicateur")),this.modalePaniersService.rafraichirListeTuileCatalogueSettings()},t.prototype.estClientEtChoisi=function(){return this.tuileCatalogueSettings.indicateur.indicateur.estUniquementVueClients&&this.tuileCatalogueSettings.indicateur.choisi},t.CLASS_NAME="PfTuileCatalogueControleur",t.logger=i(t.CLASS_NAME),t.$inject=[e.Constantes.Inject.Angular.$element,e.Constantes.Inject.Services.modalePaniersService],t}();t.PfTuileCatalogueControleur=n,e.app.controller("PfTuileCatalogueControleur",n)}(t=e.Controleurs||(e.Controleurs={}))}(Portefeuille||(Portefeuille={}));var Portefeuille;!function(e){var t;!function(t){"use strict";function i(){return{restrict:"E",templateUrl:"typescript/directives/pf-tuile-catalogue/pf-tuile-catalogue-vue.html",controller:"PfTuileCatalogueControleur",controllerAs:"pfTuileCatalogueCtrl",bindToController:!0,scope:{tuileCatalogueSettings:"=",listeTuileCatalogueSettings:"=",listeTuilePanierSettings:"=",listeFiltresClients:"=",listeFiltresRelationEco:"="}}}t.mwPfTuileCatalogue=i,e.app.directive("mwPfTuileCatalogue",i)}(t=e.Directives||(e.Directives={}))}(Portefeuille||(Portefeuille={}));var Portefeuille;!function(e){var t;!function(t){"use strict";var i=MyWay.Services.Loggers.LoggerFactory.INSTANCE.getClass,n=function(){function e(){this.initialiser()}return e.prototype.initialiser=function(){e.logger.info(">>> Appel de la méthode : PfPanelNiveau2Controleur.initialiser <<<")},e.CLASS_NAME="PfPanelNiveau2Controleur",e.logger=i(e.CLASS_NAME),e.$inject=[],e}();t.PfPanelNiveau2Controleur=n,e.app.controller("PfPanelNiveau2Controleur",n)}(t=e.Controleurs||(e.Controleurs={}))}(Portefeuille||(Portefeuille={}));var Portefeuille;!function(e){var t;!function(t){"use strict";function i(){return{restrict:"E",templateUrl:"typescript/directives/pf-panel-niveau-2/pf-panel-niveau-2-vue.html",controller:"PfPanelNiveau2Controleur",controllerAs:"pfPanelNiveau2Ctrl",bindToController:!0,scope:{id:"@",titre:"@",titre2:"@",icone:"@?",configBouton:"="},transclude:!0}}t.mwPfPanelNiveau2=i,e.app.directive("mwPfPanelNiveau2",i)}(t=e.Directives||(e.Directives={}))}(Portefeuille||(Portefeuille={}));var Portefeuille;!function(e){var t;!function(t){"use strict";var i=MyWay.Services.Loggers.LoggerFactory.INSTANCE.getClass,n=function(){function t(){this.initialiser()}return t.prototype.initialiser=function(){t.logger.info(">>> Appel de la méthode : PfTuileIndicateurControleur.initialiser <<<"),this.isEuro=!0,this.intitule===e.Enum.Indicateur.INTITULE.SEG_RELATIONNELLE_GROUPE.toString()&&(this.intitule="Seg. rel. groupe"),console.log("--> tuile indicateur controleur , intitule : ",this.intitule),this.intitule===e.Enum.Indicateur.INTITULE.ENCOURS_BDF.toString()&&(this.isEuro=!1,console.log("--> encours BDF en k€ "))},t.prototype.valeurNumberDefini=function(){return null!==this.valeurNumber&&void 0!==this.valeurNumber},t.prototype.isGreen=function(){return this.type!==e.Enum.Indicateur.TYPE.DATE&&this.valeurNumber>0},t.prototype.isOrange=function(){return this.type!==e.Enum.Indicateur.TYPE.DATE&&0===this.valeurNumber},t.prototype.isTypeDate=function(){return this.type===e.Enum.Indicateur.TYPE.DATE},t.prototype.isTypeMontant=function(){return this.valeurNumberDefini()&&this.type===e.Enum.Indicateur.TYPE.MONTANT},t.prototype.isTypeNombre=function(){return this.valeurNumberDefini()&&this.type===e.Enum.Indicateur.TYPE.NOMBRE},t.prototype.isTypePourcent=function(){return this.valeurNumberDefini()&&this.type===e.Enum.Indicateur.TYPE.POURCENT},t.prototype.isTypeTexte=function(){return this.type===e.Enum.Indicateur.TYPE.TEXTE},t.prototype.isTypeBegacli=function(){return this.type===e.Enum.Indicateur.TYPE.BEGACLI},t.CLASS_NAME="PfTuileIndicateurControleur",t.logger=i(t.CLASS_NAME),t.$inject=[],t}();t.PfTuileIndicateurControleur=n,e.app.controller("PfTuileIndicateurControleur",n)}(t=e.Controleurs||(e.Controleurs={}))}(Portefeuille||(Portefeuille={}));var Portefeuille;!function(e){var t;!function(t){"use strict";function i(){return{restrict:"E",templateUrl:"typescript/directives/pf-tuile-indicateur/pf-tuile-indicateur-vue.html",controller:"PfTuileIndicateurControleur",controllerAs:"pfTuileIndicateurCtrl",bindToController:!0,replace:!0,scope:{type:"=",intitule:"=",valeur:"=",valeurNumber:"=",icone:"="}}}t.mwPfTuileIndicateur=i,e.app.directive("mwPfTuileIndicateur",i)}(t=e.Directives||(e.Directives={}))}(Portefeuille||(Portefeuille={}));var Portefeuille;!function(e){var t;!function(t){var i;!function(t){"use strict";var i=MyWay.Services.Loggers.LoggerFactory.INSTANCE.getClass,n=function(){function t(){this.expReguliere=null,this.initialiser()}return t.prototype.initialiser=function(){this.filtreBegacli={},this.filtreBegacli.listeLettres=[],this.filtreBegacli.listeNombres=[],this.ajouterUniversLettre("Banque au quotidien","b"),this.ajouterUniversLettre("Epargne","e"),this.ajouterUniversLettre("Gestion des flux","g"),this.ajouterUniversLettre("Assurance prévoyance","a"),this.ajouterUniversLettre("Financement Court terme","c"),this.ajouterUniversLettre("Financement moyen Long terme","l"),this.ajouterUniversLettre("Ingénierie sociale","i");for(var e=this.filtreBegacli.listeLettres.length,t=0;e>=t;t++)this.AjouterNombre(t.toString());this.filtreBegacli.choisiNC=!1},t.prototype.ajouterUniversLettre=function(e,t){var i={};i.univers=e,i.lettreMin=t.toLocaleLowerCase(),i.choisiMin=!1,i.lettreMaj=t.toLocaleUpperCase(),i.choisiMaj=!1,this.filtreBegacli.listeLettres.push(i)},t.prototype.AjouterNombre=function(e){var t={};t.nombre=e,t.choisi=!1,this.filtreBegacli.listeNombres.push(t)},t.prototype.setCasesDecochees=function(){_.forEach(this.filtreBegacli.listeLettres,function(e){e.choisiMaj=!1,e.choisiMin=!1}),_.forEach(this.filtreBegacli.listeNombres,function(e){e.choisi=!1}),this.filtreBegacli.choisiNC=!1,this.expReguliere=null},t.prototype.getCasesCochees=function(){var e=0;return _.forEach(this.filtreBegacli.listeLettres,function(t){(t.choisiMaj===!0||t.choisiMin===!0)&&e++}),_.forEach(this.filtreBegacli.listeNombres,function(t){t.choisi===!0&&e++}),this.filtreBegacli.choisiNC===!0&&e++,e>0?!0:!1},t.prototype.completerUniversBegacli=function(t){for(var i,n=0,r=t.listePortefeuilles;n<r.length;n++)for(var o=r[n],l=0,a=o.listeRelation;l<a.length;l++)for(var s=a[l],u=0,c=s.listeClient;u<c.length;u++){var E=c[u];console.log(" ==> itemClient : ",E),i=_.find(E.listeIndicateurClient,{code:e.Enum.Indicateur.CODE.BEGACLI.toString()}),i&&(i.valeur=this.completerNombreMajuscules(i.valeur))}return t},t.prototype.completerUniversBegacliClient=function(t){for(var i,n=0,r=t.listeClientIndicateur;n<r.length;n++){var o=r[n];i=_.find(o.listeIndicateurClient,{code:e.Enum.Indicateur.CODE.BEGACLI.toString()}),i&&(i.valeur=this.completerNombreMajuscules(i.valeur))}return t},t.prototype.completerNombreMajuscules=function(e){if(null===e)return null;var t,i=0;t=e.length;for(var n=0;t>n;n++)e[n]>="A"&&e[n]<="Z"&&(i+=1);return i+"-"+e},t.prototype.getFiltreBegacliTexte=function(e){var t;t=e.indicateur.indicateur.intitule+" = ";var i=this.texteUnivers(),n=this.texteNombre(),r=this.texteNC();return(""!==i||""!==n)&&(t+="["),t+=i,""!==i&&""!==n&&(t+=" et "),t+=n,(""!==i||""!==n)&&(t+="]"),(""!==i||""!==n)&&""!==r&&(t+=" ou "),t+=r,t=t},t.prototype.texteNC=function(){var e="";return this.filtreBegacli.choisiNC===!0&&(e="NC"),e},t.prototype.texteNombre=function(){var e=this,t="";return _.forEach(this.filtreBegacli.listeNombres,function(i){i.choisi===!0&&(t=e.ajoutercaractere(t,i.nombre))}),""!==t&&(t="Nbr Univers équipés= ["+t+"]"),t},t.prototype.texteUnivers=function(){var e=this,t="";return _.forEach(this.filtreBegacli.listeLettres,function(i){i.choisiMaj===!0&&(t=e.ajoutercaractere(t,i.lettreMaj)),i.choisiMin===!0&&(t=e.ajoutercaractere(t,i.lettreMin))}),""!==t&&(t="Univers = ["+t+"]"),t},t.prototype.ajoutercaractere=function(e,t){return""===e?t:e+","+t},t.prototype.getFiltreBegacli=function(){return this.filtreBegacli},t.prototype.calculerExpReguliere=function(){var e="",t=0;return _.forEach(this.filtreBegacli.listeNombres,function(i){i.choisi===!0&&(e+=i.nombre,t++)}),e=""===e?"..":"["+e+"].",_.forEach(this.filtreBegacli.listeLettres,function(i){i.choisiMaj===!0?(t++,e+=i.lettreMaj):i.choisiMin===!0?(t++,e+=i.lettreMin):e+="."}),0===t&&(e=""),e},t.prototype.getExpReguliere=function(){return this.expReguliere=this.calculerExpReguliere(),this.expReguliere},t.CLASS_NAME=e.Constantes.Inject.Services.begacliService,t.logger=i(t.CLASS_NAME),t.$inject=[],t}();e.app.service(n.CLASS_NAME,n)}(i=t.Application||(t.Application={}))}(t=e.Services||(e.Services={}))}(Portefeuille||(Portefeuille={}));var Portefeuille;!function(e){var t;!function(t){var i;!function(t){"use strict";var i=MyWay.Services.Loggers.LoggerFactory.INSTANCE.getClass,n=function(){function t(e,t){this.contexteService=e,this.$q=t}return t.prototype.getCaracteristiquesAgent=function(e){var t=this.$q.defer();return this.contexteService.getContexte().then(function(i){var n={};n.designationAgent=e.designation,n.identifiantElementStructure=e.idEds,n.libelleFonction=e.libelleFonction,n.codeEtablissement=i.codeEtablissement,t.resolve(n)})["catch"](function(e){t.reject(e)}),t.promise},t.CLASS_NAME="EventService",t.logger=i(t.CLASS_NAME),t.$inject=[e.Constantes.Inject.Services.contexteService,e.Constantes.Inject.Angular.$q],t}();e.app.service("ChoixEdsService",n)}(i=t.Application||(t.Application={}))}(t=e.Services||(e.Services={}))}(Portefeuille||(Portefeuille={}));var Portefeuille;!function(e){var t;!function(t){var i;!function(t){"use strict";var i=MyWay.Services.Loggers.LoggerFactory.INSTANCE.getClass,n=function(){function t(e,t,i,n,r){this.gestionAffectationService=e,this.rechercheAgentService=t,this.edsNiveauInferieurService=i,this.contexteService=n,this.$q=r}return t.prototype.rechercherListeAgence=function(t){var i=this;return this.contexteService.getContexte().then(function(n){var r={};return r.codeEtablissement=n.codeEtablissement,r.codeAgentAffectation=t,r.dateDebutPeriodeAffectation=moment().format(e.Constantes.Application.FORMAT_DATE_REST),i.gestionAffectationService.getGestionAffectation(r)}).then(function(e){var t=[];return _.forEach(e.listeGestionAffectationAgent,function(e){var i={};i.id=e.identifiantEDSRattachement,i.nomEds=e.libelleEDSRattachement,i.affiche=!1,t.push(i)}),t})},t.prototype.rechercherAgent=function(t){var i=this,n=this.$q.defer();return this.contexteService.getContexte().then(function(n){var r={};return r.codeEtablissement=n.codeEtablissement,r.codeAction=e.Constantes.Rest.AGENT_V2_CODE_ACTION_1,r.typeRecherche=e.Constantes.Rest.AGENT_V2_TYPE_RECHERCHE_GROUPE_FONCTION,r.identifiantEDSRattachement=t,r.groupeFonction=e.Constantes.Rest.AGENT_V2_RECHERCHE_GROUPE_FONCTION_BDR,i.rechercheAgentService.getListeCaracteristiquesAgent(r)}).then(function(e){var i=[];_.forEach(e.listeAgents,function(e){if(e.identifiantEDSHierarchique===t){var n={};n.designationAgent=e.designationAgent,n.identifiantElementStructure=e.identifiantElementStructure,n.libelleFonction=e.libelleFonction,n.codeEtablissement=e.codeEtablissement,n.identifiantAgent=e.identifiantAgent,i.push(n)}}),n.resolve(i)})["catch"](function(e){n.reject(e)}),n.promise},t.prototype.rechercherEdsInferieurs=function(e){var t=this,i=this.$q.defer();return this.contexteService.getContexte().then(function(i){var n={};return n.codeEtablissement=i.codeEtablissement,n.identifiantInterneEDS=e.id,t.edsNiveauInferieurService.getEdsNiveauInferieur(n)}).then(function(t){var n=[];_.forEach(t.infoEDS,function(t){var i={};i.id=t.identifiantInterneEDS,i.nomEds=t.libelleEDS,i.agencesSuperieur=e,i.agencesInferieur=null,i.typeEDS=t.typeEDS,i.libelleTypeEDS=t.libelleTypeEDS,i.affiche=!1,n.push(i)}),e.agencesInferieur=n,i.resolve(e)})["catch"](function(e){i.reject(e)}),i.promise},Object.defineProperty(t.prototype,"edsSelectionne",{get:function(){return this._edsSelectionne},set:function(e){this._edsSelectionne=e},enumerable:!0,configurable:!0}),t.CLASS_NAME="ChoixUtilisateurService",t.logger=i(t.CLASS_NAME),t.$inject=[e.Constantes.Inject.Services.gestionAffectationRestService,e.Constantes.Inject.Services.rechercheAgentRestService,e.Constantes.Inject.Services.edsNiveauInferieurService,e.Constantes.Inject.Services.contexteService,e.Constantes.Inject.Angular.$q],t}();e.app.service("ChoixUtilisateurService",n)}(i=t.Application||(t.Application={}))}(t=e.Services||(e.Services={}))}(Portefeuille||(Portefeuille={}));var Portefeuille;!function(e){var t;!function(t){var i;!function(t){"use strict";var i=MyWay.Services.Loggers.LoggerFactory.INSTANCE.getClass,n=function(){function t(e,t,i,n){this.serviceAgentExtended=e,this.$q=t,this.$location=i,this.eventService=n}return t.prototype.getAuthentification=function(){var e=this;return t.logger.info(">>> Appel de la méthode : ContexteService.getAuthentification <<<"),this.authentificationInfo?this.$q.when(this.authentificationInfo):this.setAuthentification().then(function(){return e.authentificationInfo})},t.prototype.setAuthentification=function(){var e=this;return t.logger.info(">>> Appel de la méthode : ContexteService.setAuthentification <<<"),this.serviceAgentExtended.getAuthentificationInfo().then(function(t){return e.authentificationInfo=t})},t.prototype.setContexte=function(){t.logger.debug(">>> Appel de la méthode : ContexteService.setContexte <<<");var e=null;return this.contexte?e=this.contexte:this.authentificationInfo&&this.authentificationInfo.agentConnecte&&(e={},e.identifiantUser=this.authentificationInfo.agentConnecte.referenceExterneAgent,e.codeEtablissement=this.authentificationInfo.codeEtablissement,e.designation=this.authentificationInfo.agentConnecte.designationLongueAgent,e.edsUser=+this.authentificationInfo.agentConnecte.numeroInterneEds,e.edsVisu=+this.authentificationInfo.agentConnecte.numeroInterneEds,e.edsSuperieurUser=+this.authentificationInfo.agentConnecte.numeroEdsSuperieur,this.contexte=e),this.$q.when(e)},t.prototype.getContexte=function(){var e=this;return t.logger.debug(">>> Appel de la méthode : ContexteApplication.getContexte <<<"),this.contexte?this.$q.when(this.contexte):this.setContexte().then(function(){return e.$q.when(e.contexte)})},t.prototype.getDesignation=function(){return this.contexte?this.contexte.designation:""},t.prototype.setEdsVisu=function(e){this.contexte.edsVisu=e},t.prototype.setestVueMultiSuiviPar=function(e){this.contexte.estVueMultiSuiviPar=e},t.prototype.ajoutPourDebranchementSyntheseClient=function(i,n){var r=this,o=[],l=[e.Constantes.Contexte.IDENTIFIANT_PERSONNE,e.Constantes.Contexte.TYPE_SYNTHESE];return this.viderContexteDebranchement(l).then(function(){return o.push(r.serviceAgentExtended.addToContext(e.Constantes.Contexte.IDENTIFIANT_PERSONNE,i)),o.push(r.serviceAgentExtended.addToContext(e.Constantes.Contexte.TYPE_SYNTHESE,n)),r.$q.all(o)["catch"](function(e){throw t.logger.error("Erreur lors de l'ajout dans le contexte pour l'appel de synthèse client",e),e})})},t.prototype.ajouterDonneesDebranchementSyntheseClient=function(i,n){var r=this,o=[];if(!i)return this.$q.reject(new MyWay.Services.Erreur("Paramètre contexteGererPortefeuille absent à tort => Débranchement vers Synthèse Client impossible."));var l=[e.Constantes.Contexte.CONTEXTE_GERR_PORTF,e.Constantes.Contexte.IDENTIFIANT_PERSONNE,e.Constantes.Contexte.TYPE_SYNTHESE];return this.viderContexteDebranchement(l).then(function(){return o.push(r.serviceAgentExtended.addToContext(e.Constantes.Contexte.CONTEXTE_GERR_PORTF,i)),o.push(r.serviceAgentExtended.addToContext(e.Constantes.Contexte.IDENTIFIANT_PERSONNE,i.identifiantPersonne)),o.push(r.serviceAgentExtended.addToContext(e.Constantes.Contexte.TYPE_SYNTHESE,n)),r.$q.all(o)["catch"](function(e){throw t.logger.error("Erreur lors de l'ajout dans le contexte du contrat d'entrée de synthése client",e),e})})},t.prototype.ajouterDonneesDebranchementRevueClient=function(i){var n=this,r=[];if(!i)return this.$q.reject(new MyWay.Services.Erreur("Paramètre contexteGererPortefeuille absent à tort => Débranchement vers Revue Client impossible."));var o=[e.Constantes.Contexte.CONTEXTE_GERR_PORTF,e.Constantes.Contexte.CONTEXTE_VERS_REVUE];return this.viderContexteDebranchement(o).then(function(){var o=n.alimenterContexteVersRevue(i);return r.push(n.serviceAgentExtended.addToContext(e.Constantes.Contexte.CONTEXTE_GERR_PORTF,i)),r.push(n.serviceAgentExtended.addToContext(e.Constantes.Contexte.CONTEXTE_VERS_REVUE,o)),n.$q.all(r)["catch"](function(e){throw t.logger.error("Erreur lors de l'ajout dans le contexte du contrat d'entrée de la revue client",e),e})})},t.prototype.ajouterDonneesDebranchementBilanRevueRelationEco=function(i){var n=this,r=[];if(!i)return this.$q.reject(new MyWay.Services.Erreur("Paramètre contexteGererPortefeuille absent à tort => Débranchement vers Bilan Revue Relation éco impossible."));var o=[e.Constantes.Contexte.CONTEXTE_GERR_PORTF,e.Constantes.Contexte.CONTEXTE_VERS_REVUE];return this.viderContexteDebranchement(o).then(function(){var o=n.alimenterContexteVersRevue(i);return r.push(n.serviceAgentExtended.addToContext(e.Constantes.Contexte.CONTEXTE_GERR_PORTF,i)),r.push(n.serviceAgentExtended.addToContext(e.Constantes.Contexte.CONTEXTE_VERS_REVUE,o)),n.$q.all(r)["catch"](function(e){throw t.logger.error("Erreur lors de l'ajout dans le contexte du contrat d'entrée du bilan de revues d'une relation économique",e),e})})},t.prototype.ajouterDonneesDebranchementBilanRevuePortefeuille=function(i){var n=this,r=[];if(!i)return this.$q.reject(new MyWay.Services.Erreur("Paramètre contexteGererPortefeuille absent à tort => Débranchement vers Bilan Revue Portefeuille impossible."));var o=[e.Constantes.Contexte.CONTEXTE_GERR_PORTF,e.Constantes.Contexte.CONTEXTE_VERS_REVUE,e.Constantes.Contexte.CONTEXTE_EDS_PORTEFEUILLES];return this.viderContexteDebranchement(o).then(function(){var o=n.alimenterContexteVersRevue(i),l=n.alimenterContexteVersEsdPortefeuilles(i);return r.push(n.serviceAgentExtended.addToContext(e.Constantes.Contexte.CONTEXTE_GERR_PORTF,i)),r.push(n.serviceAgentExtended.addToContext(e.Constantes.Contexte.CONTEXTE_VERS_REVUE,o)),r.push(n.serviceAgentExtended.addToContext(e.Constantes.Contexte.CONTEXTE_EDS_PORTEFEUILLES,JSON.stringify(l))),n.$q.all(r)["catch"](function(e){throw t.logger.error("Erreur lors de l'ajout dans le contexte du contrat d'entrée du bilan de revues d'une liste de portefeuilles",e),e})})},t.prototype.supprimerContexteDevenuInutile=function(e){return this.viderContexteDebranchement(e).then(function(){t.logger.info("Suppression du contexte réalisée avec succès.")})["catch"](function(e){throw t.logger.error("Erreur lors de la suppression du contexte",e),e})},t.prototype.recupererRetourDebranchement=function(){var t=this;return this.serviceAgentExtended.getFromContext(e.Constantes.Contexte.CONTEXTE_GERR_PORTF).then(function(e){return t.$q.when(e)})},t.prototype.isPCM=function(){return t.logger.info("Vérification intéropérabilité application bancaire"),this.serviceAgentExtended.Capacites.getCapacite(MyWay.Services.Capacites.REGLE.INTEROP_APPLI_BANCAIRE)},t.prototype.viderContexteDebranchement=function(e){var t=this,i=[];return _.forEach(e,function(e){e&&i.push(t.serviceAgentExtended.addToContext(e,null))}),this.$q.all(i).then(function(e){return t.$q.when()})},t.prototype.alimenterContexteVersRevue=function(e){var t;return e&&(t={},e.identifiantPersonne&&(t.identifiantPersonne=e.identifiantPersonne),t.estClient=e.estClient,e.raisonSociale&&(t.raisonSociale=e.raisonSociale),e.identifiantRelation&&(t.identifiantRelation=e.identifiantRelation),e.libelleRelation&&(t.libelleRelation=e.libelleRelation),e.siren&&(t.siren=e.siren),e.objetEdsVisu&&(e.objetEdsVisu.objCaractAgent&&(t.idEds=e.objetEdsVisu.objCaractAgent.identifiantElementStructure,t.designationAgent=e.objetEdsVisu.objCaractAgent.designationAgent),t.nombreTotalPortefeuilles=e.objetEdsVisu.nombrePortefeuilleTotalAgent,t.listeIdsPortefeuille=e.objetEdsVisu.listePtfVisu),t.typeForcage=e.typeForcage,t.listeClientAffiches=e.listeClientAffiches),t},t.prototype.alimenterContexteVersEsdPortefeuilles=function(e){var t;return t={},e&&e.objetEdsVisu&&(e.objetEdsVisu.objCaractAgent&&(t.idEds=e.objetEdsVisu.objCaractAgent.identifiantElementStructure),t.listeIdsPortefeuille=e.objetEdsVisu.listePtfVisu),t},t.prototype.tracerSuiviAction=function(e,t){e.warn("ActionBouton "+t)},t.prototype.tracerSuiviActionPromise=function(e){var t={action:e,agentCode:null,agentEdsCode:null,agentEdsInternalRef:null,agentEdsType:null,computerEdsInternalId:null,computerSi:null,data:null,dateUse:null,deviceId:null,deviceType:null,establishment:null,processIdBusiness:null,processIdCurrent:null,processIdMaster:null,resultStep:null,state:null,stepIdCurrent:null,timezone:null};return this.serviceAgentExtended.TraceSuivi.tracer(t)},t.$inject=[e.Constantes.Inject.MyWay.serviceAgentExtended,e.Constantes.Inject.Angular.$q,e.Constantes.Inject.Angular.$location,e.Constantes.Inject.Services.eventService],t.CLASS_NAME="ContexteService",t.logger=i(t.CLASS_NAME),t}();e.app.service(n.CLASS_NAME,n)}(i=t.Application||(t.Application={}))}(t=e.Services||(e.Services={}))}(Portefeuille||(Portefeuille={}));var Portefeuille;!function(e){var t;!function(t){var i;!function(t){"use strict";var i=MyWay.Services.Loggers.LoggerFactory.INSTANCE.getClass,n=function(){function t(e){this.$q=e}return t.prototype.setPfDiagrammeDonutControleur=function(e){this.pfDiagrammeDonutControleur=e},t.prototype.initialiserPfDiagrammeDonutControleur=function(){this.pfDiagrammeDonutControleur&&this.pfDiagrammeDonutControleur.initialiser()},t.prototype.setPortefeuilleControleur=function(e){this.portefeuilleControleur=e},t.prototype.setPfLigneRelationEcoControleur=function(e){this.pfLigneRelationEcoControleur=e},t.prototype.reInitialiserLigneRelationEcoPfLigneRelationEcoControleur=function(e){this.pfLigneRelationEcoControleur&&this.pfLigneRelationEcoControleur.reInitialiser(e)},t.prototype.setClientsControleur=function(e){this.clientsControleur=e},t.prototype.setIndexControleur=function(e){this.indexControleur=e},t.prototype.setChoixPortfeuilleControleur=function(e){this.pfChoixPortefeuilleControleur=e},t.prototype.initialiserListePortfeuilleIndexControleur=function(){
return this.pfChoixPortefeuilleControleur?this.indexControleur.initListePortefeuilles():void 0},t.prototype.majDonneesDonneesEdsIndexControleur=function(e,t,i){return this.indexControleur?this.indexControleur.majDonneesDonneesEds(e,t,i):this.$q.when()},t.prototype.initialiserHabilitationChoixAgentIndexControleur=function(e){this.indexControleur&&this.indexControleur.initialiserHabilitationChoixAgent(e)},t.prototype.initialiserHabilitationChoixEDSIndexControleur=function(e){this.indexControleur&&this.indexControleur.initialiserHabilitationChoixEDS(e)},t.prototype.ouvrirVoletChoixPortefeuilleIndexControleur=function(){this.indexControleur&&this.indexControleur.ouvrirChoixPortefeuille()},t.prototype.filtrageTableauClientClientsControleur=function(e){this.clientsControleur&&this.clientsControleur.filtrageTableauClient(e)},t.prototype.initialiserListeRelationEtClient=function(e){return this.clientsControleur?this.clientsControleur.initialiser(e):void 0},t.prototype.initialiserVueGlobale=function(){return this.portefeuilleControleur?this.portefeuilleControleur.initialiserStatistiques():void 0},t.prototype.supprimerTousLesFiltresClientsControleur=function(){this.clientsControleur&&this.clientsControleur.supprimerTousLesFiltres()},t.prototype.reinitInitStatsVueGlobale=function(){this.portefeuilleControleur&&this.portefeuilleControleur.reinitInitStats()},t.prototype.initListePortefeuilles=function(){return this.indexControleur?this.indexControleur.initListePortefeuilles():this.$q.when()},t.prototype.chargerListePortefeilleDropDown=function(){this.indexControleur&&this.indexControleur.chargerListePortefeilleDropDown()},t.prototype.setEstVueMultiGererPar=function(e){this.portefeuilleControleur&&this.portefeuilleControleur.setEstVueMultiSuiviPar(e)},t.CLASS_NAME="EventService",t.logger=i(t.CLASS_NAME),t.$inject=[e.Constantes.Inject.Angular.$q],t}();e.app.service(n.CLASS_NAME,n)}(i=t.Application||(t.Application={}))}(t=e.Services||(e.Services={}))}(Portefeuille||(Portefeuille={}));var Portefeuille;!function(e){var t;!function(t){var i;!function(t){"use strict";var i=MyWay.Services.Loggers.LoggerFactory.INSTANCE.getClass,n=function(){function t(e,t){this.serviceAgent=e,this.mwNotificationService=t}return t.prototype.exporterCSV=function(e,t){var i=this,n={nomFichier:t};return this.serviceAgent.Export.exporterFichier(e,MyWay.Services.Export.FORMAT_FICHIER.CSV,n).then(function(){i.mwNotificationService.showNotification("Export du tableau réussi")})},t.prototype.chargerDonneesTableau=function(e){var t=[];return _.forEach(e,function(e){var i={ligne:[]};for(var n in e){var r={};r.cellule=e[n],i.ligne.push(r)}t.push(i)}),t},t.prototype.genererFichierExport=function(e,t,i){var n;return n={entetes:e,contenu:this.chargerDonneesTableau(t)},this.exporterCSV(n,i)},t.CLASS_NAME="ExportService",t.logger=i(t.CLASS_NAME),t.$inject=[e.Constantes.Inject.MyWay.serviceAgentExtended,"MwNotificationService"],t}();t.ExportService=n,e.app.service(n.CLASS_NAME,n)}(i=t.Application||(t.Application={}))}(t=e.Services||(e.Services={}))}(Portefeuille||(Portefeuille={}));var Portefeuille;!function(e){var t;!function(t){var i;!function(i){"use strict";var n=MyWay.Services.Loggers.LoggerFactory.INSTANCE.getClass,r=function(){function i(e,t){this.eventService=e,this.begacliService=t,this.filtresClients=[],this.filtresRelationsEco=[]}return i.prototype.filtrerListeClients=function(e,t){var i=this;return t.length>0?_.filter(e,function(e){return i.estConformeAuxCriteres(i.creerTableauResultatsFiltre(e.listeIndicateurs,t,!0),t)}):e},i.prototype.filtrerListeRelationsEco=function(e,t){var i=this;return t.length>0?_.filter(e,function(e){return i.estConformeAuxCriteres(i.creerTableauResultatsFiltre(e.listeIndicateurs,t,!1),t)}):e},i.prototype.estConformeAuxCriteres=function(t,i){if(1===i.length)return t[0];switch(i[1].operateur){case e.Enum.Filtre.OPERATEUR.ET:var n=_.find(t,function(e){return e===!1});return n===!1?!1:!0;case e.Enum.Filtre.OPERATEUR.OU:var r=_.find(t,function(e){return e===!0});return r?!0:!1;default:return!1}},i.prototype.creerTableauResultatsFiltre=function(t,i,n){var r=this,o=[];return _.forEach(i,function(i){var n=_.find(t,{code:i.indicateur.indicateur.code});switch(i.indicateur.indicateur.typeIndicateur){case e.Enum.Indicateur.TYPE.TEXTE:o.push(r.traiterFiltreTypeTexte(n.valeur,i.indicateur.listeValeurs));break;case e.Enum.Indicateur.TYPE.BEGACLI:o.push(r.traiterFiltreTypeBegacli(n.valeur,i.indicateur.listeValeurs));break;case e.Enum.Indicateur.TYPE.DATE:o.push(r.traiterFiltreTypeDate(n.valeurDate,i));break;case e.Enum.Indicateur.TYPE.NOMBRE:case e.Enum.Indicateur.TYPE.POURCENT:case e.Enum.Indicateur.TYPE.MONTANT:o.push(r.traiterFiltreTypeNombre(n.valeurNumber,i))}}),o},i.prototype.traiterFiltreTypeTexte=function(t,i){var n=_.find(i,function(i){var n="NC"===i.libelle&&-1!==t.indexOf(e.Constantes.Application.FIN_CHAINE_MAX);return i.actif&&(i.libelle===t||n)});return(null===t||void 0===t)&&(n=null),n?!0:!1},i.prototype.traiterFiltreTypeBegacli=function(e,t){var i=this.begacliService.getExpReguliere(),n=!1;if(this.begacliService.getFiltreBegacli().choisiNC&&"NC"===e)return n=!0;if(""!==i){var r=new RegExp(i);r.test(e)&&(n=!0)}return n},i.prototype.traiterFiltreTypeNombre=function(t,i){if(null===t||void 0===t||t===Number.POSITIVE_INFINITY||t===Number.NEGATIVE_INFINITY)return i.comparateur===e.Enum.Filtre.COMPARATEUR.NC?!0:!1;switch(i.comparateur){case e.Enum.Filtre.COMPARATEUR.SUPERIEUR:return t>i.valeurUnique;case e.Enum.Filtre.COMPARATEUR.INFERIEUR:return t<i.valeurUnique;case e.Enum.Filtre.COMPARATEUR.EGALE:return t===i.valeurUnique;case e.Enum.Filtre.COMPARATEUR.ENTRE:return t>=i.valeurMultiple1&&t<=i.valeurMultiple2;default:return!1}},i.prototype.traiterFiltreTypeDate=function(t,i){var n=t;if(null===t||void 0===t||moment(n).isSame(e.Constantes.Application.DATE_MIN)||moment(n).isSame(e.Constantes.Application.DATE_MAX))return i.comparateur===e.Enum.Filtre.COMPARATEUR.NC||i.comparateur===e.Enum.Filtre.COMPARATEUR.NONREALISEE?!0:!1;switch(i.comparateur){case e.Enum.Filtre.COMPARATEUR.SUPERIEUR:return t>i.valeurUnique;case e.Enum.Filtre.COMPARATEUR.INFERIEUR:return t<i.valeurUnique;case e.Enum.Filtre.COMPARATEUR.EGALE:return moment(t).format("MMM Do YY")===moment(i.valeurUnique.toString()).format("MMM Do YY");case e.Enum.Filtre.COMPARATEUR.ENTRE:return t>=i.valeurMultiple1&&t<=i.valeurMultiple2;case e.Enum.Filtre.COMPARATEUR.ECHUE:return t<moment().subtract(1,"year").toDate();case e.Enum.Filtre.COMPARATEUR.ENCOURS:return t>=moment().subtract(1,"year").toDate();default:return!1}},i.prototype.majFiltresClientNouveauxIndicateurs=function(i,n,r,o){this.supprimerFiltres(i,n,r),_.forEach(n,function(i){var n=_.find(r,function(e){return e.indicateur.code===i.indicateur.code});if(!n){var l={};l.indicateur=i.indicateur,l.utilise=!1,l.utiliseRelationEco=!1,l.listeValeurs=[],l.indicateur.typeIndicateur===e.Enum.Indicateur.TYPE.TEXTE&&_.forEach(o,function(i){var n=_.find(i.listeIndicateurs,function(e){return e.code===l.indicateur.code}),r={};r.libelle=n.valeur,r.actif=!1,n.code===e.Enum.Indicateur.CODE.TOP_CC.toString()&&(r.ordreAffichage=t.Utils.ApplicationUtils.ValeurNumberTopCC(n.valeur)),l.listeValeurs.push(r),l.listeValeurs=_.uniq(l.listeValeurs,"libelle")}),r.push(l)}})},i.prototype.majFiltresRelationEcoNouveauxIndicateurs=function(t,i,n,r){this.supprimerFiltres(t,i,n),_.forEach(i,function(t){var i=_.find(n,function(e){return e.indicateur.code===t.indicateur.code});if(!i){var o={};o.indicateur=t.indicateur,o.utilise=!1,o.utiliseRelationEco=!1,o.listeValeurs=[],o.indicateur.typeIndicateur===e.Enum.Indicateur.TYPE.TEXTE&&_.forEach(r,function(e){var t=_.find(e.listeIndicateurs,function(e){return e.code===o.indicateur.codeRel});if(t){var i={};i.libelle=t.valeur,i.actif=!1,o.listeValeurs.push(i),o.listeValeurs=_.uniq(o.listeValeurs,"libelle")}}),n.push(o)}})},i.prototype.supprimerFiltres=function(e,t,i){_.forEach(angular.copy(e),function(n){var r=_.find(t,function(e){return e.indicateur.code===n.indicateur.indicateur.code});if(!r){var o=_.find(i,function(e){return e.indicateur.code===n.indicateur.indicateur.code});o.utilise=!1,o.utiliseRelationEco=!1,_.remove(e,function(e){return e.indicateur.indicateur.code===n.indicateur.indicateur.code})}}),1===e.length&&(e[0].operateur=null)},i.prototype.razFiltresRelationEco=function(){this.filtresRelationsEco=[]},i.prototype.razFiltresClient=function(){this.filtresClients=[]},i.prototype.ajouterFiltre=function(i,n){var r={};r.id=t.Utils.ApplicationUtils.genererIdentifiantAleatoire(),n&&(r.operateur=e.Enum.Filtre.OPERATEUR.ET),i.push(r)},i.prototype.setFiltresRelationsEco=function(e){this.filtresRelationsEco=e},i.prototype.setFiltresClients=function(e){this.filtresClients=e},i.prototype.getFiltresRelationsEco=function(){return this.filtresRelationsEco},i.prototype.getFiltresClients=function(){return this.filtresClients},i.prototype.majAndGetFiltresClientsAvecListeIndicateursDispo=function(t){var i=this,n=angular.copy(this.filtresClients);return _.forEach(n,function(n){_.findIndex(_.pluck(t,"indicateur"),{code:n.indicateur.indicateur.code})<0&&_.remove(i.filtresClients,function(t){return t.indicateur&&t.indicateur.indicateur&&-1===_.indexOf(e.Constantes.Indicateur.INDICATEUR_TAG,t.indicateur.indicateur.code)?t.id===n.id:void 0})}),this.filtresClients&&1===this.filtresClients.length&&(this.filtresClients[0].operateur=void 0),this.filtresClients},i.prototype.majAndGetFiltresRelationsEcoAvecListeIndicateursDispo=function(t){var i=this,n=angular.copy(this.filtresRelationsEco);return _.forEach(n,function(n){_.findIndex(_.pluck(t,"indicateur"),{codeRel:n.indicateur.indicateur.code})<0&&_.remove(i.filtresRelationsEco,function(t){return t.indicateur&&t.indicateur.indicateur&&t.indicateur.indicateur.code!==e.Enum.Indicateur.CODEREL.CLIENTPROSPECT.toString()?t.id===n.id:void 0})}),this.filtresRelationsEco&&1===this.filtresRelationsEco.length&&(this.filtresRelationsEco[0].operateur=void 0),this.filtresRelationsEco},i.CLASS_NAME="IndicateurService",i.logger=n(i.CLASS_NAME),i.$inject=[e.Constantes.Inject.Services.eventService,e.Constantes.Inject.Services.begacliService],i}();e.app.service("FiltreService",r)}(i=t.Application||(t.Application={}))}(t=e.Services||(e.Services={}))}(Portefeuille||(Portefeuille={}));var Portefeuille;!function(e){var t;!function(t){var i;!function(t){"use strict";var i=MyWay.Services.Loggers.LoggerFactory.INSTANCE.getClass,n=function(){function e(){}return e.prototype.setHabiliteAgenceNiveau2=function(e){this.habiliteAgenceNiveau2=e},e.prototype.estHabiliteAgenceNiveau2=function(){return this.habiliteAgenceNiveau2},e.prototype.setHabiliteAccesPNB=function(e){this.habiliteAccesPNB=e},e.prototype.estHabiliteAccesPNB=function(){return this.habiliteAccesPNB},e.prototype.setHabiliteConsultRevue=function(e){this.habiliteConsultREVUE=e},e.prototype.estHabiliteConsultRevue=function(){return this.habiliteConsultREVUE},e.prototype.setHabiliteMajRevue=function(e){this.habiliteMajREVUE=e},e.prototype.estHabiliteMajRevue=function(){return this.habiliteMajREVUE},e.prototype.setHabiliteConsultAffaires=function(e){this.habiliteConsultAFFAIRES=e},e.prototype.setHabiliteConsultPropositions=function(e){this.habiliteConsultPropositions=e},e.prototype.estHabiliteConsultAffaires=function(){return this.habiliteConsultAFFAIRES},e.prototype.estHabiliteConsultPropositions=function(){return this.habiliteConsultPropositions},e.prototype.setHabiliteConsultPotentielProspect=function(e){this.habiliteConsultPotProspect=e},e.prototype.estHabiliteConsultPotentielProspect=function(){return this.habiliteConsultPotProspect},e.prototype.setHabiliteConsultSegmentations=function(e){this.habiliteConsultSegmentations=e},e.prototype.estHabiliteConsultSegmentations=function(){return this.habiliteConsultSegmentations},e.CLASS_NAME="EventService",e.logger=i(e.CLASS_NAME),e.$inject=[],e}();e.app.service("HabilitationService",n)}(i=t.Application||(t.Application={}))}(t=e.Services||(e.Services={}))}(Portefeuille||(Portefeuille={}));var Portefeuille;!function(e){var t;!function(t){var i;!function(t){"use strict";var i=MyWay.Services.Loggers.LoggerFactory.INSTANCE.getClass,n=function(){function t(e){this.$q=e}return t.prototype.getTypeVue=function(){return this.typeVue?this.typeVue:e.Enum.PageClients.TYPE_VUE.VUE_RELATION_ECONOMIQUE},t.prototype.setTypeVue=function(e){e&&(this.typeVue=e)},t.CLASS_NAME="IhmService",t.logger=i(t.CLASS_NAME),t.$inject=[e.Constantes.Inject.Angular.$q],t}();e.app.service(n.CLASS_NAME,n)}(i=t.Application||(t.Application={}))}(t=e.Services||(e.Services={}))}(Portefeuille||(Portefeuille={}));var Portefeuille;!function(e){var t;!function(t){var i;!function(t){"use strict";var i=MyWay.Services.Loggers.LoggerFactory.INSTANCE.getClass,n=function(){function t(){}return t.prototype.getConfigIndicateurFleche=function(t){var i={};return t>0?(i.valeurFormate="+"+t.toLocaleString()+"%",i.couleur=e.Controleurs.COULEUR_INDICATEUR_FLECHE.VERT.toString(),i.icone=e.Controleurs.ICONE_INDICATEUR_FLECHE.HAUT.toString(),i):0>t?(i.valeurFormate=t.toLocaleString()+"%",i.couleur=e.Controleurs.COULEUR_INDICATEUR_FLECHE.ROUGE.toString(),i.icone=e.Controleurs.ICONE_INDICATEUR_FLECHE.BAS.toString(),i):(i.valeurFormate="0%",i.couleur=e.Controleurs.COULEUR_INDICATEUR_FLECHE.ORANGE.toString(),i.icone=e.Controleurs.ICONE_INDICATEUR_FLECHE.DROITE.toString(),i)},t.CLASS_NAME="IndicateurFlecheService",t.logger=i(t.CLASS_NAME),t.$inject=[],t}();e.app.service("IndicateurFlecheService",n)}(i=t.Application||(t.Application={}))}(t=e.Services||(e.Services={}))}(Portefeuille||(Portefeuille={}));var Portefeuille;!function(e){var t;!function(t){var i;!function(t){"use strict";var i=MyWay.Services.Loggers.LoggerFactory.INSTANCE.getClass,n=function(){function t(e){this.habilitationService=e,this.listeIndicateursChoix=[]}return t.prototype.getListeIndicateurChoix=function(){return this.listeIndicateursChoix},t.prototype.setListeIndicateurChoix=function(e){this.listeIndicateursChoix=e},t.prototype.getListeEcartIndicateurParametrable=function(e){var t=[];if(this.listeIndicateursChoix){var i=_.pluck(e,"indicateur.code"),n=_.pluck(this.listeIndicateursChoix,"indicateur.code"),r=i.filter(function(e){return n.indexOf(e)<0});r&&_.forEach(this.getListeTotalIndicateursParametrables(),function(e){r.indexOf(e.code)>-1&&t.push(e)})}return t},t.prototype.getListeTotalIndicateursParametrables=function(){var e=this.getListeTotaleIndicateursType();return _.remove(e,function(e){return""===e.codeRest}),e},t.prototype.getListeTotaleIndicateursType=function(){var t=angular.copy(e.Constantes.Indicateur.LISTE_TOTAL_INDICATEUR),i=!this.habilitationService.estHabiliteAccesPNB(),n=!this.habilitationService.estHabiliteConsultRevue(),r=!this.habilitationService.estHabiliteConsultAffaires()||!this.habilitationService.estHabiliteConsultRevue(),o=!this.habilitationService.estHabiliteConsultPotentielProspect();return(i||n||r||o)&&(t=_.filter(t,function(t){return!((i?t.famille===e.Enum.Indicateur.FAMILLE.PNB:0)||(n?t.famille===e.Enum.Indicateur.FAMILLE.REVUE:0)||(r?t.famille===e.Enum.Indicateur.FAMILLE.OPPORTUNITES||t.code===e.Enum.Indicateur.CODE.NB_PROPOSITIONS_EN_COURS.toString():0)||(o?t.code===e.Enum.Indicateur.CODE.POTENTIEL_PROSPECT.toString():0))})),t},t.prototype.getPanierDeForcage=function(){var t={};return t.listeCodesIndicateurs=[],(i=t.listeCodesIndicateurs).push.apply(i,e.Constantes.Indicateur.INDICATEUR_PANIER_FORCAGE),t.estDefaut=!1,t.nom=e.Constantes.Application.NOM_PANIER_FORCAGE,t;var i},t.prototype.getListeIndicateursRevue=function(){var t,i,n=[];return _.forEach(this.getListeTotaleIndicateursType(),function(r){i=_.indexOf(e.Constantes.Indicateur.ORDRE_INDICATEUR_REVUE,r.code),-1!==i&&(t={},t.indicateur=r,t.choisi=!0,t.position=i,n.push(t))}),_.sortByOrder(n,["position"])},t.prototype.getIndicateurIListeIndicateur=function(e,t){return this.getIndicateur(e.listeIndicateurs,t)},t.prototype.getIndicateur=function(e,t){return _.find(e,{code:t})},t.CLASS_NAME="IndicateurService",t.logger=i(t.CLASS_NAME),t.$inject=[e.Constantes.Inject.Services.habilitationService],t}();e.app.service(n.CLASS_NAME,n)}(i=t.Application||(t.Application={}))}(t=e.Services||(e.Services={}))}(Portefeuille||(Portefeuille={}));var Portefeuille;!function(e){var t;!function(t){var i;!function(t){"use strict";var i=MyWay.Services.Loggers.LoggerFactory.INSTANCE.getClass,n=function(){function t(e,t,i,n,r,o,l,a,s){this.$rootScope=e,this.serviceAgentExtended=t,this.$q=i,this.$location=n,this.contexteService=r,this.popupService=o,this.eventService=l,this.habilitationService=a,this.preferencesService=s,this.promesseInitialisation=!1}return t.prototype.initialisation=function(){var i=this,n=this.$q.defer();return this.promesseInitialisation?this.$q.when():this.serviceAgentExtended.init(t.SERVICE_AGENT_INIT).then(function(){return i.contexteService.getAuthentification()}).then(function(){var r=[];return r.push(i.contexteService.getContexte()),r.push(i.preferencesService.completerCreationPaniers()),t.logger.info(">>> Appel de la méthode : InitialisationApplicationService.initialisation <<<"),MyWay.Services.CoreCommon.ServiceDePromesse.all(r).then(function(n){return i.eventService.initialiserListePortfeuilleIndexControleur().then(function(){return i.serviceAgentExtended.Habilitation.EstHabilite(t.LISTE_HABILITATION).then(function(t){console.log("--> habilitations : ",t);var n=t[0],r=t[1];i.habilitationService.setHabiliteAgenceNiveau2(r),i.habilitationService.setHabiliteAccesPNB(t[2]),i.habilitationService.setHabiliteConsultRevue(t[3]),i.habilitationService.setHabiliteMajRevue(t[4]),i.habilitationService.setHabiliteConsultAffaires(t[5]),i.habilitationService.setHabiliteConsultPotentielProspect(t[6]),i.habilitationService.setHabiliteConsultSegmentations(t[7]);var o=t[8];return i.habilitationService.setHabiliteConsultPropositions(t[9]),i.eventService.initialiserHabilitationChoixAgentIndexControleur(n),i.eventService.initialiserHabilitationChoixEDSIndexControleur(o),i.serviceAgentExtended.getFromContext(e.Constantes.Contexte.CONTEXTE_GERR_PORTF).then(function(e){return console.log("=>>>>> Retour débranchement contexteGererPortefeuille",e),e&&e.objetEdsVisu?i.contexteService.getContexte().then(function(t){return console.log("=>>>>> Retour débranchement getContexte",t),i.eventService.majDonneesDonneesEdsIndexControleur(e.objetEdsVisu.objCaractAgent,t,e.objetEdsVisu.listePtfVisu).then(function(){return i.promesseInitialisation=!0,i.$location.path(e.objetEdsVisu.locationPath),i.$q.when()})}):(i.promesseInitialisation=!0,i.$q.when())})})})})["catch"](function(e){n.reject(),i.popupService.showErreur(e)})})["catch"](function(e){n.reject(),i.popupService.showErreur(e)})},t.CLASS_NAME="InitialisationApplicationService",t.logger=i(t.CLASS_NAME),t.$inject=[e.Constantes.Inject.Angular.$rootScope,e.Constantes.Inject.MyWay.serviceAgentExtended,e.Constantes.Inject.Angular.$q,e.Constantes.Inject.Angular.$location,e.Constantes.Inject.Services.contexteService,e.Constantes.Inject.Services.popupService,e.Constantes.Inject.Services.eventService,e.Constantes.Inject.Services.habilitationService,e.Constantes.Inject.Services.preferencesService],t.LISTE_HABILITATION=[e.Constantes.Application.CODE_HABILITATION_CHOIX_AGENT,e.Constantes.Application.CODE_HABILITATION_AGENCE_NIVEAU_2,e.Constantes.Application.CODE_HABILITATION_ACCES_PNB,e.Constantes.Application.CODE_HABILITATION_CONSULT_REVUE,e.Constantes.Application.CODE_HABILITATION_MAJ_REVUE,e.Constantes.Application.CODE_HABILITATION_CONSULT_AFFAIRES,e.Constantes.Application.CODE_HABILITATION_CONSULT_POT_PROSPECT,e.Constantes.Application.CODE_HABILITATION_CONSULT_SEGMENTATIONS,e.Constantes.Application.CODE_HABILITATION_CHOIX_EDS,e.Constantes.Application.CODE_HABILITATION_CONSULT_PROPOSITIONS],t.SERVICE_AGENT_INIT={codeApplication:"portefeuille",disableScopeSave:!1,scopeType:MyWay.Services.Context.ScopeType.Service,donneesScopeASauvegarder:["portefeuille"]},t}();t.InitialisationApplicationService=n,e.app.service(n.CLASS_NAME,n)}(i=t.Application||(t.Application={}))}(t=e.Services||(e.Services={}))}(Portefeuille||(Portefeuille={}));var Portefeuille;!function(e){var t;!function(t){var i;!function(t){"use strict";var i=MyWay.Services.Loggers.LoggerFactory.INSTANCE.getClass,n=function(){function t(e,t,i,n){this.serviceAgentExtended=e,this.$location=t,this.$window=i,this.$q=n}return t.prototype.next=function(i,n){var r=this;return"localhost"===this.$location.host()?this.naviguerHorsLisa(n):this.serviceAgentExtended.Lisa.Next(i)["catch"](function(i){return e.Constantes.Token.TOKEN_ENVIRONNEMENT===e.Constantes.Token.TOKEN_ENVIRONNEMENT_VALEUR_DUA?(t.logger.debug("Pas de LISA et en DUA"),r.naviguerHorsLisa(n)):(t.logger.debug("Pas de LISA et pas en DUA"),r.$q.reject(i))})},t.prototype.naviguerHorsLisa=function(e){var t=this;return e&&e.length>0?e.length>4&&"http:"===e.substr(0,5)?this.$q.when().then(function(){t.$window.location.href=e}):this.$q.when().then(function(){t.$location.path(e)}):this.$q.reject(new MyWay.Services.Erreur(": Navigation locale impossible. Vérifier le paramétrage LISA."))},t.CLASS_NAME="LisaApplication",t.logger=i(t.CLASS_NAME),t.$inject=[e.Constantes.Inject.MyWay.serviceAgentExtended,e.Constantes.Inject.Angular.$location,e.Constantes.Inject.Angular.$window,e.Constantes.Inject.Angular.$q],t}();e.app.service("LisaApplication",n)}(i=t.Application||(t.Application={}))}(t=e.Services||(e.Services={}))}(Portefeuille||(Portefeuille={}));var Portefeuille;!function(e){var t;!function(t){var i;!function(i){"use strict";var n=MyWay.Services.Loggers.LoggerFactory.INSTANCE.getClass,r=function(){function i(e,t,i,n,r,o,l,a,s,u,c,E,d,p){this.serviceAgentExtended=e,this.$location=t,this.$window=i,this.$q=n,this.recherchePortefeuilleService=r,this.relationCommercialeRestService=o,this.clientRestService=l,this.contexteService=a,this.indicateurService=s,this.ihmService=u,this.habilitationService=c,this.begacliService=E,this.mockService=d,this.suiviParComplementaireRestService=p,this.listeRelationsEconomiques=[],this.listeIndicateursFiltre=[]}return i.prototype.getListeRelationsEconomiquesCache=function(){return this.listeRelationsEconomiques},i.prototype.clonerIndicateurClient=function(t,i,n){for(var r,o,l=0,a=n.listeClientIndicateur;l<a.length;l++){var s=a[l];if(r=_.find(s.listeIndicateurClient,{code:t}),o={},o.code=i,r){if(i===e.Enum.Indicateur.CODEREST.PREMIER_EQUIPEMENT_TEXTE.toString()){var u=void 0;u=r.valeur?e.Constantes.Application.CHAINE_OUI:e.Constantes.Application.CHAINE_NON,o.valeur=u}else o.valeur=r.valeur;o.dateMaj=r.dateMaj,o.tendance=r.tendance}s.listeIndicateurClient||(s.listeIndicateurClient=Array()),s.listeIndicateurClient.push(o)}return n},i.prototype.getListeRelationsEconomiques=function(i,n,r,o,l,a){var s=this,u={},c={};if(this.initialiserEstLimiteClientsAtteinte(i),this.listeRelationsEconomiques&&0!==this.listeRelationsEconomiques.length&&this.isAccesDepuisBlocRevue===l&&r!==e.Enum.PageClients.TYPE_FORCAGE.SANS){console.log("--> else uniquement , que indicateurs");var E=this.indicateurService.getListeEcartIndicateurParametrable(o);return this.indicateurService.setListeIndicateurChoix(o),E.length>0?this.majClientsIndicateurs(E).then(function(){return s.$q.when(s.listeRelationsEconomiques)}):this.$q.when(this.listeRelationsEconomiques)}this.isAccesDepuisBlocRevue=l,this.indicateurService.setListeIndicateurChoix(o);var d=[];return a.length>0?this.contexteService.getContexte().then(function(e){return u.codeEtablissement=e.codeEtablissement,c.listeSuivi=[],c.suiviComplementaireModifie=null,a.forEach(function(t){c.listeSuivi.push({codeEtablissement:e.codeEtablissement,codeTypeSuiviComplementaire:t,idEdsInterne:e.edsVisu,designationLongueEds:null,libelleSuiviComplementaire:null,libelleSuiviComplementClient:null,numeroPersonne:null,dateMajEnregistrement:null,typeElementStructure:null,indicateurRestitutionClient:null,indicateurRestitutionClientRMP:null,informationAnimation:null})}),console.log("Recup client Expert query >>>> ",c),s.suiviParComplementaireRestService.getClientsSuiviComplementaire(c)}).then(function(t){var i=[];_.forEach(s.listeIndicateursFiltre,function(e){e.listeValeurs=[]});var n={};n.identifiantPortefeuille=0,n.libellePortefeuille="Portefeuille expertise",n.id="0",n.nom=e.Constantes.Application.CHAINE_INDICATEUR_NON_CONNU,s.ajouterListeClientsExpertIdSirenTotal(t.listeSuivi,d),n.listeClients=s.listeClientsRestToAppExpert(t.listeSuivi),n.listeIndicateurs=[],n.estClient=!0,0!==n.listeClients.length&&i.push(n),s.listeRelationsEconomiques=i,s.listeTotalIdSirenClients=d,u.listeClients=d,u.listeIndicateurs=[],u.listeIndicateurs.push(e.Enum.Indicateur.CODEREST.ACTIF.toString()),s.habilitationService.estHabiliteConsultPotentielProspect()&&u.listeIndicateurs.push(e.Enum.Indicateur.CODEREST.POT_PROS.toString()),u.listeIndicateurs.push(e.Enum.Indicateur.CODEREST.PREMIER_EQUIPEMENT_TAG.toString());var r=!1;return _.forEach(s.indicateurService.getListeIndicateurChoix(),function(t){t.choisi&&(t.indicateur.codeRest&&t.indicateur.code!==e.Enum.Indicateur.CODE.PREMIER_EQUIPEMENT.toString()?u.listeIndicateurs.push(t.indicateur.codeRest):t.indicateur.code===e.Enum.Indicateur.CODE.PREMIER_EQUIPEMENT.toString()&&(r=!0))}),u.listeIndicateurs=_.uniq(u.listeIndicateurs),s.getResultatListeRelations(u,r)}):(console.log("Recup client Portefeuille"),this.contexteService.getContexte().then(function(t){u.codeEtablissement=t.codeEtablissement;var o={};switch(o.codeEtablissement=t.codeEtablissement,o.identifiantEds=i,o.listeIdentifiantPortefeuille=s.listePortefeuillesToListeId(n),o.nombreLimiteMaxClient=e.Constantes.Service.RELATION_COMMERCIALE_NB_MAX_RES,r){case e.Enum.PageClients.TYPE_FORCAGE.CLIENTS:o.filtrageClientProspect=e.Enum.FiltrageRelationCommerciale.FILTRECLIENTPROSPECT.CLIENT.toString();break;case e.Enum.PageClients.TYPE_FORCAGE.PROSPECTS:o.filtrageClientProspect=e.Enum.FiltrageRelationCommerciale.FILTRECLIENTPROSPECT.PROSPECTTIERS.toString();break;default:o.filtrageClientProspect=e.Enum.FiltrageRelationCommerciale.FILTRECLIENTPROSPECT.TOUS.toString(),r===e.Enum.PageClients.TYPE_FORCAGE.TOUT&&(o.nombreLimiteMaxClient=e.Constantes.Service.RELATION_COMMERCIALE_NB_MAX_NO_LIMIT)}return s.relationCommercialeRestService.getRelationCommerciale(o)}).then(function(i){return s.serviceAgentExtended.getFromContext(e.Constantes.Contexte.ACCES_DEPUIS_BLOC_REVUE).then(function(n){if(i.messageInformation&&i.messageInformation.code===e.Constantes.Service.RELATION_COMMERCIALE_CODE_MAX_CLIENT_ATTEINT&&"O"!==n){s.estLimiteClientsAtteinte=!0,s.listePortefeuillesAvecLimite=[],_.forEach(i.listePortefeuilles,function(e){var t={};t.id=e.identifiantPortefeuille,t.libelle=e.libellePortefeuille,t.nombreTotalClients=e.nombreTotalClients,t.nombreTotalProspectsTiers=e.nombreTotalProspectsTiers,s.listePortefeuillesAvecLimite.push(t)});var r={};return r.codeLibelle=i.messageInformation.code,r.libelle=i.messageInformation.libelle,s.$q.reject(r)}var o=[];_.forEach(s.listeIndicateursFiltre,function(e){e.listeValeurs=[]}),_.forEach(i.listePortefeuilles,function(i){_.forEach(i.listeRelation,function(n){var r={};r.identifiantPortefeuille=i.identifiantPortefeuille,r.libellePortefeuille=i.libellePortefeuille,r.id=n.identifiantRelationEco.toString(),r.nom=n.libelleRelationEco?n.libelleRelationEco:e.Constantes.Application.CHAINE_INDICATEUR_NON_CONNU,s.ajouterListeClientsIdSirenTotal(n.listeClient,d),r.listeClients=s.listeClientsRestToApp(n.listeClient,r.nom,n.identifiantRelationEco,r.identifiantPortefeuille,r.libellePortefeuille);for(var l=0,a=e.Constantes.Indicateur.INDICATEUR_CEER_MANUELLEMENT;l<a.length;l++){var u=a[l];n.listeIndicateurRelation.push(s.creerIndcateur(u))}r.listeIndicateurs=s.getIndicateursPourRelation(n.listeIndicateurRelation),r.estClient=void 0;var c=_.where(r.listeIndicateurs,{code:e.Enum.Indicateur.CODEREL.CLIENTPROSPECT.toString()});c&&(r.estClient=t.Utils.DataUtils.getEstClientDepuisIndicateur(c[0])),0!==r.listeClients.length&&o.push(r)})}),s.listeRelationsEconomiques=o,s.listeTotalIdSirenClients=d,u.listeClients=d,u.listeIndicateurs=[],u.listeIndicateurs.push(e.Enum.Indicateur.CODEREST.ACTIF.toString()),s.habilitationService.estHabiliteConsultPotentielProspect()&&u.listeIndicateurs.push(e.Enum.Indicateur.CODEREST.POT_PROS.toString()),u.listeIndicateurs.push(e.Enum.Indicateur.CODEREST.PREMIER_EQUIPEMENT_TAG.toString());var l=!1;return _.forEach(s.indicateurService.getListeIndicateurChoix(),function(t){t.choisi&&(t.indicateur.codeRest&&t.indicateur.code!==e.Enum.Indicateur.CODE.PREMIER_EQUIPEMENT.toString()?u.listeIndicateurs.push(t.indicateur.codeRest):t.indicateur.code===e.Enum.Indicateur.CODE.PREMIER_EQUIPEMENT.toString()&&(l=!0))}),u.listeIndicateurs=_.uniq(u.listeIndicateurs),s.getResultatListeRelations(u,l)})}))},i.prototype.getResultatListeRelations=function(t,i){var n=this;return t&&t.listeIndicateurs.length>0&&t.listeClients.length>0?this.clientRestService.getClientsIndicateurs(t).then(function(t){return t=n.begacliService.completerUniversBegacliClient(t),console.log("==> client : ",t),t=n.clonerIndicateurClient(e.Enum.Indicateur.CODEREST.PREMIER_EQUIPEMENT_TAG.toString(),e.Enum.Indicateur.CODEREST.PREMIER_EQUIPEMENT_TEXTE.toString(),t),i&&(t=n.clonerIndicateurClient(e.Enum.Indicateur.CODEREST.PREMIER_EQUIPEMENT_TAG.toString(),e.Enum.Indicateur.CODEREST.PREMIER_EQUIPEMENT.toString(),t)),_.forEach(t.listeClientIndicateur,function(e){e.listeIndicateurClient&&(e.listeIndicateurClient=e.listeIndicateurClient.sort(function(e,t){return e.code>t.code?1:t.code>e.code?-1:0})),n.ajouterIndicateurPourClient(e.identifiantPersonne,e.listeIndicateurClient)}),n.listeRelationsEconomiques}):this.$q.when(this.listeRelationsEconomiques)},i.prototype.creerIndcateur=function(e){var t={};return t.code=e,t},i.prototype.majClientsIndicateurs=function(t){var i=this;console.log("--> majClientsIndicateurs");var n=[];if(_.forEach(t,function(e){if(i.listeRelationsEconomiques&&i.listeRelationsEconomiques.length>0&&i.listeRelationsEconomiques[0].listeClients&&i.listeRelationsEconomiques[0].listeClients.length>0){var t=_.pluck(i.listeRelationsEconomiques[0].listeClients[0].listeIndicateurs,"code");t.indexOf(e.code)<0&&n.push(e)}}),n.length>0){var r={};return this.contexteService.getContexte().then(function(t){r.codeEtablissement=t.codeEtablissement,r.listeIndicateurs=_.pluck(n,"codeRest"),r.listeIndicateurs=_.uniq(r.listeIndicateurs),r.listeClients=i.listeTotalIdSirenClients;var o=!1;return _.forEach(i.indicateurService.getListeIndicateurChoix(),function(t){t.choisi&&(t.indicateur.codeRest&&t.indicateur.code!==e.Enum.Indicateur.CODE.PREMIER_EQUIPEMENT.toString()?r.listeIndicateurs.push(t.indicateur.codeRest):t.indicateur.code===e.Enum.Indicateur.CODE.PREMIER_EQUIPEMENT.toString()&&(o=!0))}),i.clientRestService.getClientsIndicateurs(r).then(function(t){t=i.begacliService.completerUniversBegacliClient(t),console.log("==> client1 : ",t),t=i.clonerIndicateurClient(e.Enum.Indicateur.CODEREST.PREMIER_EQUIPEMENT_TAG.toString(),e.Enum.Indicateur.CODEREST.PREMIER_EQUIPEMENT_TEXTE.toString(),t),o&&(t=i.clonerIndicateurClient(e.Enum.Indicateur.CODEREST.PREMIER_EQUIPEMENT_TAG.toString(),e.Enum.Indicateur.CODEREST.PREMIER_EQUIPEMENT.toString(),t)),_.forEach(t.listeClientIndicateur,function(e){e.listeIndicateurClient&&(e.listeIndicateurClient=e.listeIndicateurClient.sort(function(e,t){return e.code>t.code?1:t.code>e.code?-1:0})),i.reinitIndicateursCalculesRelations(e.identifiantPersonne)}),_.forEach(t.listeClientIndicateur,function(e){i.ajouterIndicateurPourClient(e.identifiantPersonne,e.listeIndicateurClient)})})})}return this.$q.when()},i.prototype.reinitIndicateursCalculesRelations=function(t){var i=this;_.forEach(this.listeRelationsEconomiques,function(n){_.forEach(n.listeClients,function(r){if(r.id===t.toString()){i.initIndicateurNombre(n,e.Enum.Indicateur.CODEREL.REV_NB_SSFAMILLES_PROPOSE),i.initIndicateurNombre(n,e.Enum.Indicateur.CODEREL.PNB_3112),i.initIndicateurNombre(n,e.Enum.Indicateur.CODEREL.PNB_N),i.initIndicateurNombre(n,e.Enum.Indicateur.CODEREL.PNB_N_MOINS_1),
i.initIndicateurNombre(n,e.Enum.Indicateur.CODEREL.NB_AFFAIRES_EN_COURS),i.initIndicateurNombre(n,e.Enum.Indicateur.CODEREL.NB_PROPOSITIONS_EN_COURS),i.initIndicateurNombre(n,e.Enum.Indicateur.CODEREL.NB_APPETENCES),i.initIndicateurNombre(n,e.Enum.Indicateur.CODEREL.ENCOURS_BDF);var o=_.find(n.listeIndicateurs,{code:e.Enum.Indicateur.CODEREL.SEG_RELATIONNELLE_GROUPE});o&&(o.valeur="NC",o.typeIndicateur=e.Enum.Indicateur.TYPE.TEXTE);var l=_.find(n.listeIndicateurs,{code:e.Enum.Indicateur.CODEREL.REV_DATE_DERNIERE_REVUE});return l&&(l.valeur="NC",l.valeurDate=void 0,l.typeIndicateur=e.Enum.Indicateur.TYPE.DATE),!1}})})},i.prototype.initIndicateurNombre=function(e,t){var i=_.find(e.listeIndicateurs,{code:t});i&&(i.valeurNumber=0)},i.prototype.ajouterIndicateurPourClient=function(i,n){var r=this;_.forEach(this.listeRelationsEconomiques,function(o){_.forEach(o.listeClients,function(l){if(l.id===i.toString()){l.listeIndicateurs=l.listeIndicateurs.concat(r.getIndicateursPourClient(n));var a=_.where(l.listeIndicateurs,{code:e.Enum.Indicateur.CODE.ACTIF.toString()});a&&a.length>0&&(l.estActif=t.Utils.DataUtils.getEstActifDepuisIndicateur(a[0]),a[0].valeur!==e.Constantes.Application.CHAINE_INDICATEUR_NON_CONNU&&(l.estActifRenseigne=!0));var s=_.find(l.listeIndicateurs,{code:e.Enum.Indicateur.CODE.EQUIPE});if(s&&l.estClient&&(l.estSansContrat=s.valeur===e.Constantes.Application.CHAINE_NON),!l.estClient){l.estActif=null,l.estActifRenseigne=!1;var u=_.find(l.listeIndicateurs,{code:e.Enum.Indicateur.CODE.ACTIF});u.valeur="NC",l.estSansContrat=null;var c=_.find(l.listeIndicateurs,{code:e.Enum.Indicateur.CODE.EQUIPE});c.valeur="NC"}r.cumulerNombre(l,o,e.Enum.Indicateur.CODE.REV_NB_SSFAMILLES_PROPOSE,e.Enum.Indicateur.CODEREL.REV_NB_SSFAMILLES_PROPOSE),r.cumulerNombre(l,o,e.Enum.Indicateur.CODE.PNB_3112,e.Enum.Indicateur.CODEREL.PNB_3112),r.cumulerNombre(l,o,e.Enum.Indicateur.CODE.PNB_N,e.Enum.Indicateur.CODEREL.PNB_N),r.cumulerNombre(l,o,e.Enum.Indicateur.CODE.PNB_N_MOINS_1,e.Enum.Indicateur.CODEREL.PNB_N_MOINS_1),r.cumulerNombre(l,o,e.Enum.Indicateur.CODE.NB_AFFAIRES_EN_COURS,e.Enum.Indicateur.CODEREL.NB_AFFAIRES_EN_COURS),r.cumulerNombre(l,o,e.Enum.Indicateur.CODE.NB_PROPOSITIONS_EN_COURS,e.Enum.Indicateur.CODEREL.NB_PROPOSITIONS_EN_COURS),r.cumulerNombre(l,o,e.Enum.Indicateur.CODE.NB_APPETENCES,e.Enum.Indicateur.CODEREL.NB_APPETENCES),r.cumulerNombre(l,o,e.Enum.Indicateur.CODE.ENCOURS_BDF,e.Enum.Indicateur.CODEREL.ENCOURS_BDF);var E=_.find(o.listeIndicateurs,{code:e.Enum.Indicateur.CODEREL.SEG_RELATIONNELLE_GROUPE});if(E&&void 0!==E.valeur){var d=_.find(l.listeIndicateurs,{code:e.Enum.Indicateur.CODE.SEG_RELATIONNELLE_GROUPE});d&&(E.valeur=d.valeur)}var p=_.find(l.listeIndicateurs,{code:e.Enum.Indicateur.CODE.TOP_CC});p&&(p.valeurNumber=t.Utils.ApplicationUtils.ValeurNumberTopCC(p.valeur));var f=_.find(l.listeIndicateurs,{code:e.Enum.Indicateur.CODE.REV_DATE_DERNIERE_REVUE}),C=_.find(o.listeIndicateurs,{code:e.Enum.Indicateur.CODEREL.REV_DATE_DERNIERE_REVUE});return f&&C&&1===r.comparerDateADateB(f.valeurDate,C.valeurDate)&&(C.valeur=f.valeur,C.valeurDate=f.valeurDate),!1}})})},i.prototype.cumulerNombre=function(e,t,i,n){var r=_.find(e.listeIndicateurs,{code:i}),o=_.find(t.listeIndicateurs,{code:n});o&&r&&(o.valeurNumber+=this.gererInfinity(r.valeurNumber))},i.prototype.gererInfinity=function(e){return e===-(1/0)||e===1/0?0:e},i.prototype.listePortefeuillesToListeId=function(e){var t=[];return _.forEach(e,function(e){e.estAffiche&&t.push(e.id)}),t},i.prototype.listeClientsRestToApp=function(i,n,r,o,l){var a=this,s=[];return _.forEach(i,function(i){var u={};u.nom=i.raisonSociale?i.raisonSociale:e.Constantes.Application.CHAINE_INDICATEUR_NON_CONNU,u.nomRelationEconomique=n,u.idRelationEconomique=r,u.codePersonnaliteJuridique=i.codePersonnaliteJuridique,u.identifiantPortefeuille=o,u.libellePortefeuille=l,u.id=i.identifiantPersonne.toString(),u.siren=i.numeroSiren,u.estActifRenseigne=!1,u.listeIndicateurs=a.getIndicateursPourClient(i.listeIndicateurClient),u.estLeader=t.Utils.DataUtils.getEstLeaderDepuisCodeLeader(i.codeLeaderEspaceEntreprise),u.estClient=void 0;var c=_.where(u.listeIndicateurs,{code:e.Enum.Indicateur.CODE.CLIENTPROSPECT.toString()});c&&(u.estClient=t.Utils.DataUtils.getEstClientDepuisIndicateur(c[0])),s.push(u)}),s},i.prototype.listeClientsRestToAppExpert=function(e){var t=this,i=[];return _.forEach(e,function(e){var n={};n.estSansContrat=null,n.identifiantPortefeuille=0,n.libellePortefeuille="",n.id=e.numeroPersonne.toString(),n.estActifRenseigne=!1,e.informationAnimation&&(n.estClient="0"===e.informationAnimation.codeTypeRelationPersonne||null===e.informationAnimation.codeTypeRelationPersonne,n.estLeader="2"===e.informationAnimation.typeRoleRelation,n.nom=e.informationAnimation.raisonSociale,n.nomRelationEconomique=e.informationAnimation.intituleRelation,n.idRelationEconomique=e.informationAnimation.identifiantRelationEconomique,n.codePersonnaliteJuridique=e.informationAnimation.codePersonaliteJuridique,n.siren=e.informationAnimation.numeroSiren,n.listeIndicateurs=t.getIndicateursPourClientExpert(e),n.nbPersonneRelation=e.informationAnimation.nombrePersonneMenage),n.listeIndicateurs=t.getIndicateursPourClientExpert(e),i.push(n)}),_.uniq(i,"id")},i.prototype.razRelations=function(){this.listeRelationsEconomiques=[]},i.prototype.getIndicateursPourRelation=function(i){var n=this,r=[];return i&&_.forEach(i,function(i){var o=t.Utils.ApplicationUtils.getIndicateur(i);r.push(o);var l={},a={};l.code=o.code,l.typeIndicateur=o.typeIndicateur,l.intitule=o.intitule,a.indicateur=l,a.utilise=!1,a.utiliseRelationEco=!1,a.listeValeurs=[];var s=_.pluck(n.listeIndicateursFiltre,"indicateur.code");o.intitule&&s.indexOf(o.code)<0&&n.listeIndicateursFiltre.push(a),o.typeIndicateur===e.Enum.Indicateur.TYPE.TEXTE&&_.forEach(n.listeIndicateursFiltre,function(t){if(t.indicateur.code===i.code){var n={};n.libelle=o.valeur?o.valeur:e.Constantes.Application.CHAINE_INDICATEUR_NON_CONNU,n.actif=!1,t.listeValeurs.push(n),t.listeValeurs=_.uniq(t.listeValeurs,"libelle")}})}),r},i.prototype.getIndicateursPourClient=function(i){var n=this,r=[];return i&&_.forEach(i,function(i){var o=t.Utils.ApplicationUtils.getIndicateur(i);r.push(o);var l={},a={};l.code=o.code,l.typeIndicateur=o.typeIndicateur,l.intitule=o.intitule,a.indicateur=l,a.utilise=!1,a.utiliseRelationEco=!1,a.listeValeurs=[];var s=_.pluck(n.listeIndicateursFiltre,"indicateur.code");o.intitule&&s.indexOf(o.code)<0&&n.listeIndicateursFiltre.push(a),o.typeIndicateur===e.Enum.Indicateur.TYPE.TEXTE&&_.forEach(n.listeIndicateursFiltre,function(n){if(n.indicateur.code===i.code){var r={};r.libelle=o.valeur?o.valeur:e.Constantes.Application.CHAINE_INDICATEUR_NON_CONNU,r.actif=!1,o.code===e.Enum.Indicateur.CODE.TOP_CC.toString()&&(r.ordreAffichage=t.Utils.ApplicationUtils.ValeurNumberTopCC(o.valeur)),n.listeValeurs.push(r),n.listeValeurs=_.uniq(n.listeValeurs,"libelle")}}),o.typeIndicateur===e.Enum.Indicateur.TYPE.BEGACLI&&_.forEach(n.listeIndicateursFiltre,function(t){if(t.indicateur.code===i.code){var n={};n.libelle=o.valeur?o.valeur:e.Constantes.Application.CHAINE_INDICATEUR_NON_CONNU,n.actif=!1,t.listeValeurs.push(n),t.listeValeurs=_.uniq(t.listeValeurs,"libelle")}})}),r},i.prototype.getIndicateursPourClientExpert=function(t){var i=[];if(t.informationAnimation){var n=t.informationAnimation.dateDernierRdvRealise&&"0001"!==t.informationAnimation.dateDernierRdvRealise.substring(0,4)?new Date(t.informationAnimation.dateDernierRdvRealise):null;i.push(this.getIndicateurPourCodeIndicateur(n,e.Enum.Indicateur.CODE.DATE_DERNIER_RDV.toString(),e.Enum.Indicateur.TYPE.DATE)),i.push(this.getIndicateurPourCodeIndicateur(t.informationAnimation.nombreRdvAnneeEnCours,e.Enum.Indicateur.CODE.NB_RDV_ANNEE_EN_COURS.toString(),e.Enum.Indicateur.TYPE.NOMBRE)),i.push(this.getIndicateurPourCodeIndicateur(t.informationAnimation.nombreRdv12Mois,e.Enum.Indicateur.CODE.NB_RDV_12_MOIS_GLISSANTS.toString(),e.Enum.Indicateur.TYPE.NOMBRE)),i.push(this.getIndicateurPourCodeIndicateur(t.informationAnimation.libelleCourtSegmentation,e.Enum.Indicateur.CODE.MARCHE.toString(),e.Enum.Indicateur.TYPE.TEXTE)),i.push(this.getIndicateurPourCodeIndicateur(t.informationAnimation.libelleSegmentClientele2,e.Enum.Indicateur.CODE.SEG_RELATIONNELLE.toString(),e.Enum.Indicateur.TYPE.TEXTE)),n=t.informationAnimation.dateDernierEntretien&&"0001"!==t.informationAnimation.dateDernierEntretien.substring(0,4)?new Date(t.informationAnimation.dateDernierEntretien):null,i.push(this.getIndicateurPourCodeIndicateur(n,e.Enum.Indicateur.CODE.DATE_DERNIER_ENTRETIEN.toString(),e.Enum.Indicateur.TYPE.DATE)),n=t.informationAnimation.dateProchainRdv&&"0001"!==t.informationAnimation.dateProchainRdv.substring(0,4)?new Date(t.informationAnimation.dateProchainRdv):null,i.push(this.getIndicateurPourCodeIndicateur(n,e.Enum.Indicateur.CODE.DATE_PROCHAIN_RDV.toString(),e.Enum.Indicateur.TYPE.DATE))}return i},i.prototype.getIndicateurPourCodeIndicateur=function(t,i,n){return{code:i,dateMaj:null,icone:null,intitule:"",typeIndicateur:n,valeur:n===e.Enum.Indicateur.TYPE.TEXTE?t:null,valeurDate:n===e.Enum.Indicateur.TYPE.DATE?t:null,valeurNumber:n===e.Enum.Indicateur.TYPE.NOMBRE?t:null,tendance:null}},i.prototype.ajouterListeClientsIdSirenTotal=function(e,t){_.forEach(e,function(e){var i={};i.idClient=e.identifiantPersonne,i.sirenClient=e.numeroSiren,t.push(i)})},i.prototype.ajouterListeClientsExpertIdSirenTotal=function(e,t){_.forEach(e,function(e){var i={};i.idClient=e.numeroPersonne,i.sirenClient=e.informationAnimation.numeroSiren,t.push(i)})},i.prototype.getListeIndicateursFiltre=function(){return this.ordonnerValeurListeFiltre(this.listeIndicateursFiltre),this.listeIndicateursFiltre},i.prototype.getListeIndicateursRelationEcoFiltre=function(){return this.ordonnerValeurListeFiltre(this.listeIndicateursFiltre),this.listeIndicateursFiltre},i.prototype.getListePortefeuillesAvecLimite=function(){return this.listePortefeuillesAvecLimite},i.prototype.ordonnerValeurListeFiltre=function(t){_.forEach(t,function(t){t.listeValeurs=t.listeValeurs.sort(function(n,r){return t.indicateur.code===e.Enum.Indicateur.CODE.TOP_CC.toString()?i.compareInterne(n.ordreAffichage,r.ordreAffichage,null):t.indicateur.code===e.Enum.Indicateur.CODE.LEADER.toString()||t.indicateur.code===e.Enum.Indicateur.CODE.EQUIPE.toString()||t.indicateur.code===e.Enum.Indicateur.CODE.PREMIER_EQUIPEMENT_TEXTE.toString()?i.compareInterneOuiNon(n.libelle,r.libelle,e.Constantes.Application.CHAINE_INDICATEUR_NON_CONNU):i.compareInterne(n.libelle,r.libelle,e.Constantes.Application.CHAINE_INDICATEUR_NON_CONNU)})})},i.prototype.ordonnerListeClientsAvecLeader=function(e){return e.sort(function(e,t){return i.compareInterne(e.estLeader,t.estLeader,!1)})},i.compareInterne=function(e,t,i){return e===i?1:t===i?-1:e>t?1:t>e?-1:0},i.compareInterneOuiNon=function(e,t,i){return e===i?1:t===i?-1:e>t?-1:t>e?1:0},i.prototype.comparerDateADateB=function(e,t){var i=0,n=1,r=-1;return void 0===e&&null===t||void 0===t?n:null===e&&void 0===t||void 0===e?r:moment(e).isAfter(t)?n:moment(e).isBefore(t)?r:i},i.prototype.initialiserEstLimiteClientsAtteinte=function(e){this.identifiantEds!==e&&(this.estLimiteClientsAtteinte=!1,this.identifiantEds=e)},i.prototype.getEstLimiteClientsAtteinte=function(){return this.estLimiteClientsAtteinte},i.prototype.getAffichageModificationChoix=function(){return this.affichageModificationChoix},i.prototype.setAffichageModificationChoix=function(e){this.affichageModificationChoix=e},i.CLASS_NAME="ListeClientsService",i.logger=n(i.CLASS_NAME),i.$inject=[e.Constantes.Inject.MyWay.serviceAgentExtended,e.Constantes.Inject.Angular.$location,e.Constantes.Inject.Angular.$window,e.Constantes.Inject.Angular.$q,e.Constantes.Inject.Services.recherchePortefeuilleRestService,e.Constantes.Inject.Services.relationCommercialeRestService,e.Constantes.Inject.Services.clientRestService,e.Constantes.Inject.Services.contexteService,e.Constantes.Inject.Services.indicateurService,e.Constantes.Inject.Services.ihmService,e.Constantes.Inject.Services.habilitationService,e.Constantes.Inject.Services.begacliService,e.Constantes.Inject.Services.mockService,e.Constantes.Inject.Services.suiviParComplementaireRestService],i}();e.app.service(r.CLASS_NAME,r)}(i=t.Application||(t.Application={}))}(t=e.Services||(e.Services={}))}(Portefeuille||(Portefeuille={}));var Portefeuille;!function(e){var t;!function(t){var i;!function(t){"use strict";var i=MyWay.Services.Loggers.LoggerFactory.INSTANCE.getClass,n=function(){function e(){}return e.prototype.ajouterLeader=function(e){for(var t=0,i=e.listePortefeuilles;t<i.length;t++)for(var n=i[t],r=0,o=n.listeRelation;r<o.length;r++)for(var l=o[r],a=0,s=l.listeClient;a<s.length;a++){var u=s[a],c={};c.code="leader",c.valeur="L"===u.codeLeaderEspaceEntreprise?"O":"N",c.dateMaj="31/12/2100",u.listeIndicateurClient.push(c)}return console.log("--> XXXX relationCommerciale avec leader : ",e),e},e.prototype.ajouterObjectif=function(e){for(var t=0,i=e.listePortefeuilles;t<i.length;t++)for(var n=i[t],r=0,o=n.listeRelation;r<o.length;r++)for(var l=o[r],a=0,s=l.listeClient;a<s.length;a++){var u=s[a],c={};c.code="OBJECTIF_FLUX",c.valeur=this.getRandomInt(100),c.dateMaj="31/12/2100",u.listeIndicateurClient.push(c)}return console.log("--> XXXX relationCommerciale avec leader : ",e),e},e.prototype.ajouterEncoursBDF=function(e){for(var t=0,i=e.listePortefeuilles;t<i.length;t++)for(var n=i[t],r=0,o=n.listeRelation;r<o.length;r++)for(var l=o[r],a=0,s=l.listeClient;a<s.length;a++){var u=s[a],c={};c.code="ENCOURS_BDF",c.valeur=this.getRandomInt(100),c.dateMaj="31/12/2100",u.listeIndicateurClient.push(c)}return e},e.prototype.ajouterBegacli=function(e){for(var t=0,i=e.listePortefeuilles;t<i.length;t++)for(var n=i[t],r=0,o=n.listeRelation;r<o.length;r++)for(var l=o[r],a=0,s=l.listeClient;a<s.length;a++){var u=s[a],c={};c.code="BEGACLI",c.valeur=this.getRandomBegacli(),c.dateMaj="31/12/2100",u.listeIndicateurClient.push(c)}return e},e.prototype.ajouterBouchonIndicateurClient=function(e,t,i){console.log("--> ajouterBouchonIndicateurClient recherche : ",t);var n,r;if(_.indexOf(e.listeIndicateurs,t)<0){console.log("--> ajouterBouchonIndicateurClient trouve !");for(var o=0,l=i.listeClientIndicateur;o<l.length;o++){var a=l[o];n=_.find(a.listeIndicateurClient,{code:"DateDerniereRevue"}),r={},r.code=t,r.valeur=n?n.valeur:"",r.dateMaj="31/12/2100",a.listeIndicateurClient||(a.listeIndicateurClient=Array()),a.listeIndicateurClient.push(r)}}return i},e.prototype.getRandomInt=function(e){var t=Math.floor(Math.random()*e);return 0===t?null:(t-1).toString()},e.prototype.getRandomBegacli=function(){var e=Math.floor(4*Math.random());return 0===e?null:this.getRandom("B","b")+this.getRandom("E","e")+this.getRandom("G","g")+this.getRandom("A","a")+this.getRandom("C","c")+this.getRandom("L","l")+this.getRandom("I","i")},e.prototype.getRandom=function(e,t){var i=Math.floor(2*Math.random());return 0===i?e:t},e.CLASS_NAME="MockService",e.logger=i(e.CLASS_NAME),e.$inject=[],e}();e.app.service(e.Constantes.Inject.Services.mockService,n)}(i=t.Application||(t.Application={}))}(t=e.Services||(e.Services={}))}(Portefeuille||(Portefeuille={}));var Portefeuille;!function(e){var t;!function(t){var i;!function(t){"use strict";var i=MyWay.Services.Loggers.LoggerFactory.INSTANCE.getClass,n=function(){function t(){}return t.prototype.setModalePaniersControleur=function(e){this.modalePaniersControleur=e},t.prototype.setSelectionIndicateursControleur=function(e){this.selectionIndicateursControleur=e},t.prototype.majEstEditionPanier=function(e){this.estEditionPanier=e},t.prototype.getEstEditionPanier=function(){return this.estEditionPanier?this.estEditionPanier:!1},t.prototype.activerDropPanier=function(){this.modalePaniersControleur&&this.modalePaniersControleur.setEstActiverDropPanier(!0),this.selectionIndicateursControleur&&this.selectionIndicateursControleur.setEstActiverDropPanier(!0)},t.prototype.desactiverDropPanier=function(){this.modalePaniersControleur&&this.modalePaniersControleur.setEstActiverDropPanier(!1),this.selectionIndicateursControleur&&this.selectionIndicateursControleur.setEstActiverDropPanier(!1)},t.prototype.activerDropTuilesPanier=function(e){_.forEach(e,function(e){e.dropSettings.activerDragOver()})},t.prototype.desactiverDropTuilesPanier=function(e){_.forEach(e,function(e){e.dropSettings&&e.dropSettings.desactiverDragOver()})},t.prototype.afficherDropPoubelle=function(){this.modalePaniersControleur&&this.modalePaniersControleur.setEstAfficherDropPoubelle(!0),this.selectionIndicateursControleur&&this.selectionIndicateursControleur.setEstAfficherDropPoubelle(!0)},t.prototype.cacherDropPoubelle=function(){this.modalePaniersControleur&&this.modalePaniersControleur.setEstAfficherDropPoubelle(!1),this.selectionIndicateursControleur&&this.selectionIndicateursControleur.setEstAfficherDropPoubelle(!1)},t.prototype.afficherBoutonValider=function(){this.modalePaniersControleur&&this.modalePaniersControleur.setEstAfficherBoutonAjouter(!0)},t.prototype.cacherBoutonValider=function(){this.modalePaniersControleur&&this.modalePaniersControleur.setEstAfficherBoutonAjouter(!1)},t.prototype.rafraichirListeTuileCatalogueSettings=function(){this.modalePaniersControleur&&this.modalePaniersControleur.rafraichirListeTuileCatalogueSettings(),this.selectionIndicateursControleur&&this.selectionIndicateursControleur.rafraichirListeTuileCatalogueSettings()},t.prototype.rendreCompatibleTuilesAvecDragAndDrop=function(){var t=document.getElementById(e.Constantes.ModalePaniers.ID_HTML_MODALE_PANIERS_BODY).getElementsByClassName(e.Constantes.ModalePaniers.CLASS_HTML_BOUTON_TUILE_STANDARD);_.forEach(t,function(t){t.setAttribute(e.Constantes.ModalePaniers.ATTRIBUT_HTML_DISABLED,e.Constantes.ModalePaniers.STRING_VALUE_TRUE),t.setAttribute(e.Constantes.ModalePaniers.ATTRIBUT_HTML_STYLE,e.Constantes.ModalePaniers.STRING_VALUE_CURSOR_POINTER_IMPORTANT)})},t.prototype.creerDragSettings=function(t){var i={};return i.idHTMLElementConteneur=e.Constantes.ModalePaniers.ID_HTML_MODALE_PANIERS_BODY,i.donneesATransmettre=t,i.estActiver=this.estEditionPanier?this.estEditionPanier:!1,i},t.prototype.creerDropSettings=function(t){var i={};return i.idHTMLElementConteneur=e.Constantes.ModalePaniers.ID_HTML_MODALE_PANIERS_BODY,i.estActiver=this.estEditionPanier?this.estEditionPanier:!1,i.dropEventAction=t,i},t.prototype.supprimerIndicateurPanier=function(e,t,i,n,r){var o=_.find(t,function(t){return t.indicateur.indicateur.code===e.indicateur.indicateur.code});o.indicateur.choisi=!1,_.remove(i,function(t){return t.indicateur.indicateur.code===e.indicateur.indicateur.code}),this.afficherMessageAvertissementFiltre(r,n,_.pluck(i,"indicateur")),this.rafraichirListeTuileCatalogueSettings()},t.prototype.copierListe=function(e){var t=[];return _.forEach(e,function(e){t.push(e)}),t},t.prototype.afficherMessageAvertissementFiltre=function(e,t,i){var n=null,r=null,o=null,l=null;_.forEach(e,function(e){var t=_.find(i,function(t){return t.indicateur.codeRel===e.indicateur.indicateur.code});t||(n?r=e.indicateur.indicateur.intitule:n=e.indicateur.indicateur.intitule)}),_.forEach(t,function(e){var t=_.find(i,function(t){return t.indicateur.code===e.indicateur.indicateur.code});t||(o?l=e.indicateur.indicateur.intitule:o=e.indicateur.indicateur.intitule)}),this.modalePaniersControleur&&this.modalePaniersControleur.afficherMessageAvertissementFiltre(n,r,o,l),this.selectionIndicateursControleur&&this.selectionIndicateursControleur.afficherMessageAvertissementFiltre(n,r,o,l)},t.prototype.genererIdentifiantAleatoire=function(){return Math.floor((new Date).valueOf()*Math.random())},t.CLASS_NAME="ModalePaniersService",t.logger=i(t.CLASS_NAME),t.$inject=[],t}();e.app.service("ModalePaniersService",n)}(i=t.Application||(t.Application={}))}(t=e.Services||(e.Services={}))}(Portefeuille||(Portefeuille={}));var Portefeuille;!function(e){var t;!function(t){var i;!function(t){"use strict";var i=function(){function e(e,t,i,n,r){this.$q=e,this.$parse=t,this.$window=i,this.$document=n,this.$timeout=r}return e.prototype.downloadCsv=function(e,t,i){var n=this,r=this.$q.defer();i=this.getOptions(i);var o=this.stringify(e,t,i),l=new Blob([o],{type:"text/csv;charset="+i.charset+";"});if(window.navigator.msSaveOrOpenBlob)navigator.msSaveBlob(l,i.filename)?r.resolve(null):r.reject(null);else{var a=this.$window.URL.createObjectURL(l),s=angular.element("<a></a>");s.attr("href",a),s.attr("download",i.filename),s.attr("target","_blank"),this.$document.find("body").append(s),this.$timeout(function(){s[0].click(),s.remove(),n.$window.URL.revokeObjectURL(a),r.resolve(null)})}return r.promise},e.prototype.getOptions=function(t){var i=angular.extend({},e.DEFAULT_OPTIONS,t||{});return this.isSpecialChar(i.fieldSeparator)&&(i.fieldSeparator=this.getSpecialChar(i.fieldSeparator)),i},e.prototype.stringify=function(t,i,n){var r=this,o=[];if(t&&angular.forEach(t,function(e,t){for(var i=[],l=0;l<e.length;l++)i.push(r.stringifyField(e[l],n));o.push(i.join(n.fieldSeparator))}),n.header){var l=[];angular.forEach(n.header,function(e){l.push(r.stringifyField(e,n))}),o.push(l.join(n.fieldSeparator))}else if(n.label&&i&&i.length){var a=[],s=n.columnOrder||i[0];angular.forEach(s,function(e,t){var i=n.columnOrder?e:t;a.push(r.stringifyField(i,n))}),o.push(a.join(n.fieldSeparator))}angular.forEach(i,function(e,t){var i=[],l=n.columnOrder||e;angular.forEach(l,function(t){var o=n.columnOrder?e[t]:t;i.push(r.stringifyField(o,n))}),o.push(i.join(n.fieldSeparator))});var u=o.join(e.EOL);return n.addByteOrderMarker&&(u=e.BOM+u),u},e.prototype.isSpecialChar=function(t){return void 0!==e.SPECIAL_CHARS[t]},e.prototype.getSpecialChar=function(t){return e.SPECIAL_CHARS[t]},e.prototype.stringifyField=function(e,t){var i=e;return this.isFloat(e)?"locale"===t.decimalSeparator?i=e.toLocaleString():"."!==t.decimalSeparator&&(i=e.toString().replace(".",t.decimalSeparator)):"string"==typeof e?(i=e.replace(/"/g,'""'),(t.quoteStrings||-1!==e.indexOf(t.fieldSeparator)||-1!==e.indexOf("\n")||-1!==e.indexOf("\r"))&&(i=t.txtDelimiter+i+t.txtDelimiter)):"boolean"==typeof e&&(i=e?"TRUE":"FALSE"),i},e.prototype.isFloat=function(e){return+e===e&&(!isFinite(e)||Boolean(e%1))},e.EOL="\r\n",e.BOM="\ufeff",e.SPECIAL_CHARS={"\\t":"	","\\b":"\b","\\v":"","\\f":"\f","\\r":"\r"},e.DEFAULT_OPTIONS={txtDelimiter:'"',decimalSeparator:",",quoteStrings:!0,addByteOrderMarker:!0,fieldSeparator:";",charset:"utf-8",label:!1,filename:"export.csv"},e.$inject=["$q","$parse","$window","$document","$timeout"],e}();t.CsvService=i,e.app.service("mwCsvService",i)}(i=t.Application||(t.Application={}))}(t=e.Services||(e.Services={}))}(Portefeuille||(Portefeuille={}));var Portefeuille;!function(e){var t;!function(t){var i;!function(t){"use strict";var i=function(){function t(e,t){this.modalService=e,this.lisaApplication=t}return t.prototype.showInfos=function(t,i){var n={closeButtonText:e.Constantes.Popup.BOUTON_FERMER,headerText:t,bodyText:i,iconName:"itce-warning",size:"md"};return this.modalService.showPopup(n)},t.prototype.showErreur=function(t){return t.libelle||(t.libelle=e.Constantes.Popup.LIBELLE_ERREUR_CHARGEMENT),this.modalService.showErreur(MyWay.UI.TYPE_POPUP_ERREUR.BLOQUANT,t.codeLibelle,t.libelle)},t.prototype.showConfirmations=function(e,t,i,n){var r={actionButtonText:i,closeButtonText:n,headerText:e,bodyText:t,size:"md"};return this.modalService.showConfirm(r)},t.prototype.showModal=function(e,t,i){var n={templateUrl:e,controller:t,controllerAs:"popupCtrl",windowClass:"app-modal-window-MEG",backdrop:"static",keyboard:!0,size:"lg",resolve:{callback:function(){},data:function(){return i}}};return this.modalService.showModal(n)},t.prototype.showModalMd=function(e,t,i){var n={templateUrl:e,controller:t,controllerAs:"popupCtrl",windowClass:"app-modal-window-MEG",backdrop:"static",keyboard:!0,size:"md",resolve:{callback:function(){},data:function(){return i}}};return this.modalService.showModal(n)},t.prototype.showModalLg=function(e,t,i){var n={templateUrl:e,controller:t,controllerAs:"popupCtrl",windowClass:"app-modal-window-MEG",backdrop:"static",keyboard:!0,size:"lg",resolve:{callback:function(){},data:function(){return i}}};return this.modalService.showModal(n)},t.prototype.showModalFull=function(e,t,i){var n={templateUrl:e,controller:t,controllerAs:"popupCtrl",windowClass:"app-modal-window-MEG",backdrop:"static",keyboard:!0,size:"full",resolve:{callback:function(){},data:function(){return i}}};return this.modalService.showModal(n)},t.$inject=[e.Constantes.Inject.Services.modalService,e.Constantes.Inject.Services.lisaApplication],t}();e.app.service("PopupService",i)}(i=t.Application||(t.Application={}))}(t=e.Services||(e.Services={}))}(Portefeuille||(Portefeuille={}));var Portefeuille;!function(e){var t;!function(t){var i;!function(i){"use strict";var n=MyWay.Services.Loggers.LoggerFactory.INSTANCE.getClass,r=function(){function i(e,t,i,n,r,o,l,a){this.serviceAgentExtended=e,this.$location=t,this.$window=i,this.$q=n,this.recherchePortefeuilleService=r,this.contexteService=o,this.eventService=l,this.preferencesService=a,this.listePortefeuilles=[],this.portefeuilleInitialise=!1}return i.prototype.setListePortfeuillesVisu=function(e){var t=this;return this.listePortefeuilles=e,this.contexteService.getContexte().then(function(i){return i.edsUser===i.edsVisu?t.preferencesService.ecrireChoixPortefeuilles(e):t.$q.when()})},i.prototype.getListePortefeuillesVisu=function(){return this.listePortefeuilles},i.prototype.getListeCodeSuiviParComplementairePortefeuillesExpertVisu=function(){return _.filter(this.listePortefeuilles,function(t){return t.id<e.Constantes.Application.ID_PORTEFEUILLE_MAX_SPC&&t.estAffiche}).map(function(e){return e.codeSuiviParComplementaire})},i.prototype.getListeLibelleSuiviParComplementairePortefeuillesExpertVisu=function(){return _.filter(this.listePortefeuilles,function(t){return t.id<e.Constantes.Application.ID_PORTEFEUILLE_MAX_SPC&&t.estAffiche}).map(function(e){return e.libelle})},i.prototype.aPortefeuillesAffiche=function(){return _.where(this.listePortefeuilles,{estAffiche:!0}).length>0},i.prototype.aPortefeuillesReelAffiche=function(){return _.filter(this.listePortefeuilles,function(t){return t.id>e.Constantes.Application.ID_PORTEFEUILLE_MAX_SPC-1&&t.estAffiche}).length>0},i.prototype.getListePortefeuilleAgentConnecte=function(){var e=this;return this.portefeuilleInitialise?this.$q.when(this.listePortefeuilles):(this.portefeuilleInitialise=!0,this.contexteService.getAuthentification().then(function(t){var i={};return i.codeEtablissement=t.codeEtablissement,i.IdentifianElementStructure=+t.agentConnecte.numeroInterneEds,i.typeRecherche="C",e.getListePortefeuilleQuery(i)}))},i.prototype.getCaracteristiquesAgentConnecte=function(){var e=this;return this.contexteService.getAuthentification().then(function(t){var i={};return i.codeEtablissement=t.codeEtablissement,i.designationAgent=t.agentConnecte.designationLongueAgent,i.identifiantElementStructure=+t.agentConnecte.numeroInterneEds,i.libelleFonction=t.agentConnecte.designationPosteFonctionnel,e.setCaracteristiquesAgent(i),e.caracteristiquesAgent})},i.prototype.getListePortefeuilleAgentChoisi=function(e){var t={};return t.codeEtablissement=e.codeEtablissement,t.IdentifianElementStructure=e.identifiantElementStructure,t.typeRecherche="C",this.getListePortefeuilleQuery(t)},i.prototype.getListePortefeuilleEDSChoisi=function(e,t){var i={};return i.codeEtablissement=e,i.IdentifianElementStructure=t,this.getListePortefeuilleParEdsQuery(i)},i.prototype.getListePortefeuilleQuery=function(e){var i=this,n=[];return n.push(this.preferencesService.lireChoixPortefeuilles().then(function(e){return e})),n.push(this.recherchePortefeuilleService.getPortefeuilles(e).then(function(e){return e})),this.$q.all(n).then(function(e){var n=e[0],r=e[1];return i.listePortefeuilles=[],r&&r.DonneeSignifiante&&_.forEach(r.DonneeSignifiante,function(e){var r=t.Utils.ApplicationUtils.getPortefeuilleDepuisDonneeSignifiante(e);n&&n.indexOf(r.id)>=0&&(r.estAffiche=!0),i.listePortefeuilles.push(r)}),1===i.listePortefeuilles.length&&(i.listePortefeuilles[0].estAffiche=!0),i.portefeuilleInitialise=!0,i.$q.when(i.listePortefeuilles)})},i.prototype.getListePortefeuilleParEdsQuery=function(e){var i=this;return this.recherchePortefeuilleService.getlistePortefeuillesParEds(e).then(function(e){return i.listePortefeuilles=[],e&&e.donneePortefeuille&&_.forEach(e.donneePortefeuille,function(e){if("C"===e.codeTypePortefeuille||"R"===e.codeTypePortefeuille||"N"===e.codeTypePortefeuille&&"N"===e.indicateurAffectation);else{e.libelleCourtEDS||(e.libelleCourtEDS="AGENT-"+e.identifiantEdsSuiviPortefeuille);var n=t.Utils.ApplicationUtils.getPortefeuilleDepuisListePortefeuille(e);i.listePortefeuilles.push(n)}}),1===i.listePortefeuilles.length&&(i.listePortefeuilles[0].estAffiche=!0),i.portefeuilleInitialise=!0,i.$q.when(i.listePortefeuilles)})},i.prototype.getCaracteristiquesAgent=function(){return this.caracteristiquesAgent},i.prototype.setCaracteristiquesAgent=function(e){this.caracteristiquesAgent=e},i.prototype.aPortefeuille=function(){return this.listePortefeuilles.length>0},i.prototype.aPortefeuilleReel=function(){return _.filter(this.listePortefeuilles,function(t){return t.id>e.Constantes.Application.ID_PORTEFEUILLE_MAX_SPC-1}).length>0},i.prototype.aPortefeuilleExpertAffiche=function(){return _.filter(this.listePortefeuilles,function(t){return t.id<e.Constantes.Application.ID_PORTEFEUILLE_MAX_SPC&&t.estAffiche}).length>0},i.prototype.aSuiviParComplementaire=function(){return _.filter(this.listePortefeuilles,function(t){return t.id<e.Constantes.Application.ID_PORTEFEUILLE_MAX_SPC}).length>0},i.prototype.nbPortefeuilleReel=function(){return _.filter(this.listePortefeuilles,function(t){return t.id>e.Constantes.Application.ID_PORTEFEUILLE_MAX_SPC-1}).length},i.prototype.getListePortefeuillesActifs=function(){return _.where(this.listePortefeuilles,{estAffiche:!0})},i.prototype.setListePortefeuillesActifs=function(e){var t=this;_.forEach(e,function(e){var i=_.where(t.listePortefeuilles,{id:e});i&&i.length>0&&(i[0].estAffiche=!0)})},i.prototype.setTypeForcage=function(e){this.typeForcage=e},i.prototype.getTypeForcage=function(){return this.typeForcage},i.prototype.regrouperPortfeuilleParAgent=function(e){_.forEach(e,function(e){e.idAgent||(e.idAgent=0,e.nomPrenonAgent=""),e.idAgentString=""+e.idAgent});var t;return e?(t=_.chain(e).groupBy("idAgentString").map(function(e){return{id:e[0].idAgent,nomPrenonAgent:e[0].nomPrenonAgent,listPortefeuilleParAgent:e,estAffiche:!0,isVisu:!0}}).value(),t=_.sortBy(t,function(e){return e.nomPrenonAgent.replace("MR ","").replace("ME ","")})):t=[],t},i.prototype.regrouperToutPortfeuille=function(e){var t;return e&&(t=_.reduce(e,function(e,t){return e.concat(t.listPortefeuilleParAgent)},[]),t=_.sortBy(t,function(e){return e.nomPrenonAgent})),t},i.CLASS_NAME="PortefeuilleService",i.logger=n(i.CLASS_NAME),i.$inject=[e.Constantes.Inject.MyWay.serviceAgentExtended,e.Constantes.Inject.Angular.$location,e.Constantes.Inject.Angular.$window,e.Constantes.Inject.Angular.$q,e.Constantes.Inject.Services.recherchePortefeuilleRestService,e.Constantes.Inject.Services.contexteService,e.Constantes.Inject.Services.eventService,e.Constantes.Inject.Services.preferencesService],i}();e.app.service(r.CLASS_NAME,r)}(i=t.Application||(t.Application={}))}(t=e.Services||(e.Services={}))}(Portefeuille||(Portefeuille={}));var Portefeuille;!function(e){var t;!function(t){var i;!function(t){"use strict";var i=MyWay.Services.Loggers.LoggerFactory.INSTANCE.getClass,n=function(){function t(e,t,i,n,r){this.serviceAgent=e,this.indicateurService=t,this.preferenceUtilisateurRestService=i,this.contexteService=n,this.$q=r}return t.prototype.completerCreationPaniers=function(){var t,i=this,n=this.indicateurService.getListeTotaleIndicateursType(),r=[];return this.lirePreference(e.Constantes.Preferences.CODE_PANIER).then(function(o){if(o){var l=o.split("|");if(l.length<e.Constantes.Application.LIMITE_NB_PANIERS){
_.forEach(l,function(o){t=i.convertirPanierPreferenceEnApplicatif(JSON.parse(o),n),t.nom=t.nom?t.nom:e.Constantes.Application.NOM_PANIER_DEFAUT,t.estDefaut=void 0!==t.estDefaut?t.estDefaut:!0,r.push(t)});for(var a=l.length;a<e.Constantes.Application.LIMITE_NB_PANIERS;a++){var s=e.Constantes.Application.NOM_PANIER_CREATION+" "+(a+1),u=i.convertirPanierApplicatifEnPreference([],a+1,s,!1);o=o+"|"+JSON.stringify(u),t=i.convertirPanierPreferenceEnApplicatif(u,n),r.push(t)}return i.ecrirePaniers(r)}return i.$q.when()}for(var c="",a=0;a<e.Constantes.Application.LIMITE_NB_PANIERS;a++){var s=e.Constantes.Application.NOM_PANIER_CREATION+" "+(a+1);c=(0===a?"":c+"|")+JSON.stringify(i.convertirPanierApplicatifEnPreference([],a+1,s,0===a))}return i.serviceAgent.Preferences.EcrirePreference(e.Constantes.Preferences.CODE_PANIER,c)})},t.prototype.ecrireChoixPortefeuilles=function(t){var i=JSON.stringify(this.convertirListePortefeuilleEnPreference(t));return this.serviceAgent.Preferences.EcrirePreference(e.Constantes.Preferences.CODE_PORTEFEUILLE,i)},t.prototype.lireChoixPortefeuilles=function(){return this.lirePreference(e.Constantes.Preferences.CODE_PORTEFEUILLE).then(function(e){return e?JSON.parse(e):null})},t.prototype.convertirListePortefeuilleEnPreference=function(e){return _.pluck(_.where(e,{estAffiche:!0}),"id").filter(function(e){return 0!==e})},t.prototype.ecrirePaniers=function(t){var i=this,n="",r=1;return _.forEach(t,function(e){var t=JSON.stringify(i.convertirPanierApplicatifEnPreference(e.listeChoixIndicateurs,r,e.nom,e.estDefaut));n=n?n+"|"+t:t,r++}),this.serviceAgent.Preferences.EcrirePreference(e.Constantes.Preferences.CODE_PANIER,n).then(function(){return i.listePaniersPreference=t,i.$q.when()})},t.prototype.lirePaniers=function(t,i){var n=this;return this.lirePreference(e.Constantes.Preferences.CODE_PANIER).then(function(r){if(r){var o=r.split("|"),l=[];return _.forEach(o,function(r){var a=n.convertirPanierPreferenceEnApplicatif(JSON.parse(r),t);(a.estDefaut||1===o.length)&&(i||n.indicateurService.setListeIndicateurChoix(a.listeChoixIndicateurs),a.estDefaut=!0),a.nom||(a.nom=e.Constantes.Application.NOM_PANIER_DEFAUT),l.push(a)}),l}return void 0})},t.prototype.lirePanierDefaut=function(t){var i=this;return this.lirePreference(e.Constantes.Preferences.CODE_PANIER).then(function(n){if(n){var r,o=n.split("|");return _.forEach(o,function(n){var l=i.convertirPanierPreferenceEnApplicatif(JSON.parse(n),t);(l.estDefaut||1===o.length)&&(l.estDefaut=!0,l.nom||(l.nom=e.Constantes.Application.NOM_PANIER_DEFAUT),r=l)}),r}return void 0})},t.prototype.convertirPanierApplicatifEnPreference=function(e,t,i,n){var r={};return r.listeCodesIndicateurs=[],r.numero=t,r.nom=i,r.estDefaut=n,_.forEach(e,function(e){e.choisi&&r.listeCodesIndicateurs.push(e.indicateur.codePreference)}),r},t.prototype.convertirPanierPreferenceEnApplicatif=function(e,t){var i,n=[];return e&&(_.forEach(e.listeCodesIndicateurs,function(e){var i={};i.choisi=!0,i.desactive=null,i.indicateur=_.find(t,function(t){return t.code===e||t.codePreference===e}),i.indicateur&&n.push(i)}),i={},i.listeChoixIndicateurs=n,i.nom=e.nom?e.nom:"",i.estDefaut=e.estDefaut,i.numero=e.numero),i},t.prototype.lirePreference=function(e){var t=this;return this.contexteService.getContexte().then(function(e){var i={};return i.codeAgent=e.identifiantUser,t.preferenceUtilisateurRestService.getListePreferences(i)}).then(function(t){var i=_.find(t,function(t){return t.cle===e});return i?i.valeur:null})},t.CLASS_NAME="PreferencesService",t.logger=i(t.CLASS_NAME),t.$inject=[e.Constantes.Inject.MyWay.serviceAgent,e.Constantes.Inject.Services.indicateurService,e.Constantes.Inject.Services.preferenceUtilisateurRestService,e.Constantes.Inject.Services.contexteService,e.Constantes.Inject.Angular.$q],t}();t.PreferencesService=n,e.app.service(n.CLASS_NAME,n)}(i=t.Application||(t.Application={}))}(t=e.Services||(e.Services={}))}(Portefeuille||(Portefeuille={}));var Portefeuille;!function(e){var t;!function(t){var i;!function(i){"use strict";var n=MyWay.Services.Loggers.LoggerFactory.INSTANCE.getClass,r=function(){function i(e,t,i,n,r,o,l,a,s){this.$q=e,this.contexteService=t,this.portefeuilleService=i,this.restStatRentabiliteService=n,this.restStatRevueService=r,this.rechercheRevueService=o,this.restStatPortefeuilleService=l,this.restStatFluxMouvementFinancierService=a,this.restStatPortefeuilleEdsService=s}return i.prototype.getStatsRentabilite=function(){var e=this;return this.contexteService.getContexte().then(function(i){var n={};return n.codeEtablissement=i.codeEtablissement,n.identifiantElementStructure=i.edsVisu,n.listeIdentifiantPortefeuille=_.pluck(e.portefeuilleService.getListePortefeuillesActifs(),"id"),!e.statsRentab||e.isQueryStatsRentabDifferent(n)?e.restStatRentabiliteService.getStatsRentab(n).then(function(i){return e.queryStatsRentab=n,e.statsRentab=i?t.Utils.ApplicationUtils.getStatsRentabiliteAppDepuisRest(i.infoPnb):e.statsRentab,!e.statsRentab||e.statsRentab.pnb12DerniersMoisGlissantN||e.statsRentab.pnb12DerniersMoisGlissNMoins1||e.statsRentab.pnb3112AnneeNMoins1||e.statsRentab.ratioPNBImportants||e.statsRentab.tauxEvolutionPnb||(e.statsRentab=void 0),e.statsRentab}):e.$q.when(e.statsRentab)})},i.prototype.getStatsRdvEtPortefeuille=function(){var e=this;return this.contexteService.getContexte().then(function(i){var n={};return n.codeEtablissement=i.codeEtablissement,n.identifiantEds=i.edsVisu,n.listeIdentifiantPortefeuille=_.pluck(e.portefeuilleService.getListePortefeuillesActifs(),"id"),!e.statsRdvPtf||e.isQueryStatsPortefeuilleDifferent(n)?e.restStatPortefeuilleService.getStats(n).then(function(i){return e.queryStatsPortefeuille=n,e.statsRdvPtf=t.Utils.ApplicationUtils.getStatsPortefeuilleAppDepuisRest(i),e.statsRdvPtf}):e.$q.when(e.statsRdvPtf)})},i.prototype.getStatsRevuePortefeuille=function(){var e=this;return this.contexteService.getContexte().then(function(i){var n={};return n.codeEtablissement=i.codeEtablissement,n.identifiantElementStructure=i.edsVisu,n.listeIdentifiantPortefeuille=_.pluck(e.portefeuilleService.getListePortefeuillesActifs(),"id"),e.restStatRevueService.getStats(n).then(function(i){return e.queryStatsRevue=n,e.statsRevuePtf=t.Utils.ApplicationUtils.getStatsRevueAppDepuisRest(i),e.statsRevuePtf})})},i.prototype.getStatsListeEds=function(){var i=this;return this.contexteService.getContexte().then(function(n){var r;return r={},r.parametres={},r.parametres.codeEtablissement=n.codeEtablissement,r.parametres.listePortefeuilleEds=_.map(i.portefeuilleService.getListePortefeuillesActifs(),function(e){return{identifiantEds:e.idAgent,identifiantPortefeuille:e.id}}),r.parametres.typeVue=e.Enum.Rest.TYPE_VUE_STAT_GLOBAL.VUE_GLOBAL_ET_DETAILLE.toString(),!i.statsRevuePtf||i.isQueryStatsPortefeuilleEdsDifferent(r)?i.restStatPortefeuilleEdsService.getStatPortefeuilleEds(r).then(function(e){return i.queryStatsPortefeuilleEds=r,i.statsRevuePtf=t.Utils.ApplicationUtils.getStatsRevueAppDepuisRestGlobal(e),i.statsRentab=t.Utils.ApplicationUtils.getStatsRentabiliteAppDepuisRestGlobal(e),i.statsRdvPtf=t.Utils.ApplicationUtils.getStatsPortefeuilleAppDepuisRestGlobal(e),i.statsFluxFinancier=t.Utils.ApplicationUtils.getStatsFluxFinancierPortefeuilleAppDepuisRestGlobal(e),i.statsDetail=t.Utils.ApplicationUtils.getStatsDetailPortefeuilleAppDepuisRestGlobal(e),!i.statsRentab||i.statsRentab.pnb12DerniersMoisGlissantN||i.statsRentab.pnb12DerniersMoisGlissNMoins1||i.statsRentab.pnb3112AnneeNMoins1||i.statsRentab.ratioPNBImportants||i.statsRentab.tauxEvolutionPnb||(i.statsRentab=void 0),i.$q.when()}):i.$q.when()})},i.prototype.getClientsAActiver=function(e,t,i){var n=this;return e&&t>0&&i&&i.length>0?this.getRevue(e,t,i).then(function(e){var t;return e&&(t=n.extraireClientsAActiverDepuisRevue(e)),t}):this.$q.reject(new MyWay.Services.Erreur("Paramètres insuffisamment renseignés => recherche de revue impossible"))},i.prototype.getClientsARenegocier=function(e,t,i){var n=this;return e&&t>0&&i&&i.length>0?this.getRevue(e,t,i).then(function(e){var t;return e&&(t=n.extraireClientsARenegocierDepuisRevue(e)),t}):this.$q.reject(new MyWay.Services.Erreur("Paramètres insuffisamment renseignés => recherche de revue impossible"))},i.prototype.extraireClientsARenegocierDepuisRevue=function(e){var t;return e&&e.listeBilanRevue&&(t=[],e.listeBilanRevue.length>0&&(t=_.where(e.listeBilanRevue,{indicateurTarifARenegocier:"O"}))),t},i.prototype.getStatsFluxMouvementFinancier=function(e,t){var i=this;return this.contexteService.getContexte().then(function(n){var r=n.codeEtablissement&&n.edsVisu>0&&(e&&e.length>0||t&&t.length>0);if(r){var o=void 0;return o={},o.codeEtablissement=n.codeEtablissement,o.identifiantElementStructure=n.edsVisu,o.listeIdentifiantPortefeuille=e&&e.length>0?e:null,o.listeIdentifiantRelationEco=t&&t.length>0?t:null,i.restStatFluxMouvementFinancierService.postStatFluxMvtFinancier(o).then(function(e){return e&&e.infoFluxMvtFinancier&&(i.statsFluxFinancier=i.definirFluxFinancier(e.infoFluxMvtFinancier)),i.statsFluxFinancier})}return i.$q.reject(new MyWay.Services.Erreur("Paramètres insuffisamment renseignés => recherche de stats mouvement financier impossible"))})},i.prototype.getRevue=function(e,t,i,n,r){if(e&&t>0&&(i&&i.length>0||n&&n.length>0||r&&r.length>0)){var o=void 0;return o={},o.codeEtablissement=e,o.identifiantElementStructure=t,o.codeActionEquipement="A",o.listeIdentifiantPersonne=this.alimenterListeNombre(r),o.listeIdentifiantPortefeuille=this.alimenterListeNombre(i),o.listeIdentifiantRelationEco=this.alimenterListeNombre(n),this.rechercheRevueService.postRechercheRevue(o).then(function(e){return e})}return this.$q.reject(new MyWay.Services.Erreur("Aucun paramètre renseigné => recherche de revue impossible"))},i.prototype.alimenterListeNombre=function(e){return e&&e.length>0?e:null},i.prototype.extraireClientsAActiverDepuisRevue=function(e){var t;return t=e&&e.listeBilanRevue?e.listeBilanRevue.length>0?_.where(e.listeBilanRevue,{indicateurClientAActiver:"O"}):[]:null},i.prototype.definirFluxFinancier=function(e){var i;if(e){var n=void 0;i=[],n={},n.dateDebFlux12DerMoisGlissN=t.Utils.DataUtils.formaterDateValide(e.dateDebFluxAnneeN),n.dateDebFlux12DerMoisGlissNMoins1=t.Utils.DataUtils.formaterDateValide(e.dateDebFluxAnneeNMoins1),n.dateFinFlux12DerMoisGlissN=t.Utils.DataUtils.formaterDateValide(e.dateFinFluxAnneeN),n.dateFinFlux12DerMoisGlissNMoins1=t.Utils.DataUtils.formaterDateValide(e.dateFinFluxAnneeNMoins1),n.flux12DerniersMoisGlissantN=e.fluxCrediteursAnneeN,n.flux12DerniersMoisGlissNMoins1=e.fluxCrediteursNMoins1,n.tauxEvolutionFlux=e.tauxEvolutionFluxCrediteurs,i.push(n),n={},n.dateDebFlux12DerMoisGlissN=t.Utils.DataUtils.formaterDateValide(e.dateDebFluxAnneeN),n.dateDebFlux12DerMoisGlissNMoins1=t.Utils.DataUtils.formaterDateValide(e.dateDebFluxAnneeNMoins1),n.dateFinFlux12DerMoisGlissN=t.Utils.DataUtils.formaterDateValide(e.dateFinFluxAnneeN),n.dateFinFlux12DerMoisGlissNMoins1=t.Utils.DataUtils.formaterDateValide(e.dateFinFluxAnneeNMoins1),n.flux12DerniersMoisGlissantN=e.fluxDebiteursAnneeN,n.flux12DerniersMoisGlissNMoins1=e.fluxDebiteursNMoins1,n.tauxEvolutionFlux=e.tauxEvolutionFluxDebiteurs,i.push(n)}return i},i.prototype.isQueryStatsRentabDifferent=function(e){return this.queryStatsPortefeuilleEds=null,this.queryStatsRentab&&e.identifiantElementStructure===this.queryStatsRentab.identifiantElementStructure&&_.isEqual(e.listeIdentifiantPortefeuille,this.queryStatsRentab.listeIdentifiantPortefeuille)?!1:!0},i.prototype.isQueryStatsPortefeuilleDifferent=function(e){return this.queryStatsPortefeuilleEds=null,this.queryStatsPortefeuille&&e.identifiantEds===this.queryStatsPortefeuille.identifiantEds&&_.isEqual(e.listeIdentifiantPortefeuille,this.queryStatsPortefeuille.listeIdentifiantPortefeuille)?!1:!0},i.prototype.isQueryStatsPortefeuilleEdsDifferent=function(e){return this.queryStatsPortefeuille=null,this.queryStatsPortefeuilleEds&&_.isEqual(e.parametres.listePortefeuilleEds,this.queryStatsPortefeuilleEds.parametres.listePortefeuilleEds)?!1:!0},i.prototype.getStatsRevuePortefeuilleEds=function(){return this.queryStatsRevue=void 0,this.$q.when(this.statsRevuePtf)},i.prototype.getStatsRentabiliteEds=function(){return this.queryStatsRentab=void 0,this.$q.when(this.statsRentab)},i.prototype.getStatsRdvEtPortefeuilleEds=function(){return this.queryStatsPortefeuille=void 0,this.$q.when(this.statsRdvPtf)},i.prototype.getStatsFluxMouvementFinancierEds=function(){return this.$q.when(this.statsFluxFinancier)},i.prototype.getStatsDetail=function(){return this.statsDetail},i.CLASS_NAME="StatsService",i.logger=n(i.CLASS_NAME),i.$inject=[e.Constantes.Inject.Angular.$q,e.Constantes.Inject.Services.contexteService,e.Constantes.Inject.Services.portefeuilleService,e.Constantes.Inject.Services.restStatRentabiliteService,e.Constantes.Inject.Services.restStatRevueService,e.Constantes.Inject.Services.rechercheRevueService,e.Constantes.Inject.Services.restStatPortefeuilleService,e.Constantes.Inject.Services.restStatFluxMouvementFinancierService,e.Constantes.Inject.Services.restStatPortefeuilleEdsService],i}();e.app.service(r.CLASS_NAME,r)}(i=t.Application||(t.Application={}))}(t=e.Services||(e.Services={}))}(Portefeuille||(Portefeuille={}));var Portefeuille;!function(e){var t;!function(t){var i;!function(t){"use strict";!function(e){e[e.BLEU="BLEU"]="BLEU",e[e.ROSE="ROSE"]="ROSE",e[e.GRIS="GRIS"]="GRIS"}(t.DEGRADE_DONUT||(t.DEGRADE_DONUT={}));var i=t.DEGRADE_DONUT,n=function(){function e(){e.logger.debug("----------- Constructeur  ------------"),this.margin={top:0,right:0,bottom:0,left:0}}return e.prototype.setWidthHeight=function(e){this.margin={top:10,right:10,bottom:10,left:10},d3.select("#"+e).node()&&(this.width=d3.select("#"+e).node().getBoundingClientRect().width),this.height=250,this.width>this.height?this.width=this.height:this.height=this.width},e.prototype.creerDonut=function(e,t){var i=this;d3.select("#"+t).empty()||(d3.select("#"+t).selectAll("svg").remove(),this.viderDonut()),this.setWidthHeight(t);var n=this.getCouleurDegrade(e.degrade),r=d3.layout.pie().value(function(e){return e.pourcentage}).sort(null),o=d3.svg.arc().innerRadius(60).padRadius(125);this.donut?(this.donut.selectAll("g.part").remove(),this.donut.selectAll("text.chiffre-central").remove()):this.donut=d3.select("#"+t).append("svg").attr("viewBox","0 0 "+this.width+" "+this.height).attr("height",this.height).classed("svg-content",!0).append("g").attr("transform",this.getTranslateText(0,0));var l=this.donut.selectAll("g.part").data(r(e.listeDonnees)).enter().append("g").attr("transform",this.getTranslateText(this.width/2,this.height/2)).each(function(e){e.outerRadius=100}).attr("class","part");l.append("path").attr({d:o,fill:function(e){return n(e.data.nom)}}).on("mouseover",this.arcTween(105,0,o)).on("mouseout",this.arcTween(100,75,o)),l.append("text").transition().duration(200).attr("transform",function(e){return i.getTranslateText(e.value<=4?o.centroid(e).map(function(e){return 3*e/2}):o.centroid(e))}).attr("class","donut-text").attr("dy",".4em").attr("text-anchor","middle").style("fill",function(e){return e.value<=4?"black":"white"}).style("display",function(e){return e.value===Number.MAX_VALUE?"none":void 0}).text(function(e){return e.data.pourcentage?e.data.pourcentage+"%":""}),this.donut.append("text").attr("transform",this.getTranslateText(this.width/2,this.height/2)).style("fill","#4F5563").attr("class","chiffre-central").style("text-anchor","middle").style("font-size","3rem").append("tspan").attr("dy","0.5ex").text(e.nombreClients)},e.prototype.getTranslateText=function(){for(var e=[],t=0;t<arguments.length;t++)e[t-0]=arguments[t];return"translate("+e.join(",")+")"},e.prototype.arcTween=function(e,t,i){return function(){d3.select(this).transition().delay(t).attrTween("d",function(t){var n=d3.interpolate(t.outerRadius,e);return function(e){return t.outerRadius=n(e),i(t)}})}},e.prototype.getCouleurDegrade=function(e){switch(e){case i.BLEU:return d3.scale.ordinal().range(["#3182bd","#6baed6","#9ecae1","#c6dbef","#007399","#00cccc","#545494"]);case i.ROSE:return d3.scale.ordinal().range(["#c34f73","#d4d110","#63ccc4","#e45fd2","#5870d2","#e6a016","#5fa262"]);case i.GRIS:return d3.scale.ordinal().range(["#cccccc"]);default:return d3.scale.category10()}},e.prototype.viderDonut=function(){this.donut=void 0},e.CLASS_NAME="CreationDonutService",e.logger=MyWay.Services.Loggers.LoggerFactory.INSTANCE.getClass(e.CLASS_NAME),e}();e.app.service(n.CLASS_NAME,n)}(i=t.LibrairieD3||(t.LibrairieD3={}))}(t=e.Services||(e.Services={}))}(Portefeuille||(Portefeuille={}));var Portefeuille;!function(e){var t;!function(t){var i;!function(t){"use strict";!function(e){e[e.ORANGE="ORANGE"]="ORANGE",e[e.VERT="VERT"]="VERT",e[e.VIOLET="VIOLET"]="VIOLET",e[e.BLEU="BLEU"]="BLEU"}(t.DEGRADE_POURCENTAGE||(t.DEGRADE_POURCENTAGE={}));var i=t.DEGRADE_POURCENTAGE,n=function(){function e(){}return e.prototype.setWidthHeight=function(e){var t=d3.select("#"+e);t.node()&&(this.width=t.node().getBoundingClientRect().width,this.height=this.width)},e.prototype.creerPourcentage=function(e,t){this.setWidthHeight(t);var i=this.getCouleurDegrade(e.degrade),n=360*e.nombreUn/100,r=e.nombreUn,o=this.creerArc((this.width-40)/2,(this.width-40)/10,0),l=this.initialiserSvg(t,this.width,this.height),a=this.CreerCheminPlein(l,0,"#e6f7ff",o),s=this.CreerCheminPlein(l,0,i[0],o),u=l.append("text").attr("dy","0.5ex").attr("text-anchor","middle").style("font-size","3rem").style("font-weight","bold").style("fill","#ffffff").text(r+"%");if(e.legende&&e.legende.length>0){var c=l.append("text").attr("dy","0.5ex").attr("y",this.height/2-10).attr("text-anchor","middle").style("font-size","1rem").style("font-weight","bold").style("fill","#ffffff").style("width","auto").style("white-space","nowrap").style("overflow","hidden").style("text-overflow","ellipsis").text(e.legende);this.tronquerText(c),this.genererTransitionCouleur(c,1750,"#ffffff","#000000")}this.AjouterMouvementArc(this.genererTransitionCouleur(a,1750,"#ffffff","#e6f7ff"),360,o),this.AjouterMouvementArc(this.genererTransitionCouleur(s,1750,"#ffffff",i[0]),n,o),this.genererTransitionCouleur(u,1750,"#ffffff","#000000")},e.convertirRadian=function(e){return e*(Math.PI/180)},e.prototype.creerArc=function(t,i,n){return d3.svg.arc().innerRadius(t).outerRadius(t-i).startAngle(e.convertirRadian(n))},e.prototype.initialiserSvg=function(e,t,i){return d3.select("#"+e).append("svg:svg").attr("viewBox","0 0 "+t+" "+i).classed("svg-content",!0).append("g").attr("transform","translate("+t/2+","+i/2+")")},e.prototype.CreerCheminPlein=function(t,i,n,r){return t.append("path").datum({endAngle:e.convertirRadian(i)}).style("fill",n).attr("d",r)},e.prototype.genererTransitionCouleur=function(e,t,i,n){return e.transition().duration(t).styleTween("fill",function(){return d3.interpolate(i,n)})},e.prototype.AjouterMouvementArc=function(t,i,n){return t.call(this.arcTween,n,e.convertirRadian(i))},e.prototype.arcTween=function(e,t,i){e.attrTween("d",function(e){var n=d3.interpolate(e.endAngle,i);return function(i){return e.endAngle=n(i),t(e)}})},e.prototype.addGradient=function(e,t,i){var n=e.append("linearGradient").attr("id","gradient"+i).attr("x1","0%").attr("y1","0%").attr("x2","100%").attr("y2","100%").attr("spreadMethod","pad");n.append("stop").attr("offset","0%").attr("stop-color",t[0]).attr("stop-opacity",1),n.append("stop").attr("offset","100%").attr("stop-color",t[1]).attr("stop-opacity",1)},e.prototype.tronquerText=function(e){var t=this;e.each(function(){for(var i=e.node(),n=i.getComputedTextLength(),r=e.text(),o=0;n>t.width-2*o&&r.length>0;)r=r.slice(0,-1),e.text(r+"..."),n=i.getComputedTextLength()})},e.prototype.getCouleurDegrade=function(e){switch(e){case i.BLEU:return["#0077b3","#0077b3"];case i.VERT:return["#4DDBDB","#5BEE81"];case i.VIOLET:return["#7670DB","#AE58B8"];default:return["#FF37BB","#FF9A23"]}},e.CLASS_NAME="CreationPourcentageService",e}();e.app.service(n.CLASS_NAME,n)}(i=t.LibrairieD3||(t.LibrairieD3={}))}(t=e.Services||(e.Services={}))}(Portefeuille||(Portefeuille={}));var Portefeuille;!function(e){var t;!function(t){"use strict";var i=MyWay.Services.Loggers.LoggerFactory.INSTANCE.getClass,n=function(){function t(t,i,n){var r=this;this.$scope=t,this.$element=i,this.modalePaniersService=n,this.dragStartBeforeEvent=function(){r.modalePaniersService.desactiverDropPanier(),(!r.tuilePanierSettings.estEnEdition||r.modalePaniersService.getEstEditionPanier())&&(r.modalePaniersService.afficherDropPoubelle(),r.modalePaniersService.activerDropTuilesPanier(r.listeTuilePanierSettings))},this.dragEndBeforeEvent=function(){r.modalePaniersService.cacherDropPoubelle(),r.modalePaniersService.desactiverDropTuilesPanier(r.listeTuilePanierSettings)},this.indicateurPanierDeposeEvent=function(t){if(r.modalePaniersService.desactiverDropTuilesPanier(r.listeTuilePanierSettings),t!==r.tuilePanierSettings){var i=_.findIndex(r.listeTuilePanierSettings,function(e){return e.indicateur.indicateur.code===r.tuilePanierSettings.indicateur.indicateur.code});if(t.dropSettings){var n=_.findIndex(r.listeTuilePanierSettings,function(e){return e.indicateur.indicateur.code===t.indicateur.indicateur.code});r.listeTuilePanierSettings[i]=t,r.listeTuilePanierSettings[n]=r.tuilePanierSettings,r.$scope.$apply()}else{t.indicateur.choisi=!0;var o={};o.id=r.modalePaniersService.genererIdentifiantAleatoire(),o.indicateur=t.indicateur,r.listeTuilePanierSettings.splice(i,0,o),r.modalePaniersService.desactiverDropPanier(),r.modalePaniersService.afficherMessageAvertissementFiltre(r.listeFiltresRelationEco,r.listeFiltresClients,_.pluck(r.listeTuilePanierSettings,"indicateur")),r.listeTuilePanierSettings.length===e.Constantes.ModalePaniers.NOMBRE_INDICATEUR_MAX&&_.forEach(r.listeTuileCatalogueSettings,function(e){e.dragSettings.desactiverDrag()}),r.modalePaniersService.rafraichirListeTuileCatalogueSettings()}}},this.initialiser()}return t.prototype.initialiser=function(){t.logger.info(">>> Appel de la méthode : PfTuilePanierControleur.initialiser <<<"),this.configTuile={},this.configTuile.taille=e.Constantes.ModalePaniers.TUILE_PANIER_TAILLE,this.configTuile.typeMarquage=e.Constantes.ModalePaniers.TUILE_TYPE_MARQUAGE_TEXTE,this.tuilePanierSettings.indicateur.indicateur.estUniquementVueClients||(this.configTuile.typeMarquage=e.Constantes.ModalePaniers.TUILE_CATALOGUE_TYPE_MARQUAGE_AUCUN),this.tuilePanierSettings.dragSettings=this.modalePaniersService.creerDragSettings(this.tuilePanierSettings),this.tuilePanierSettings.dropSettings=this.modalePaniersService.creerDropSettings(this.indicateurPanierDeposeEvent),this.tuilePanierSettings.dragSettings.dragStartBeforeEvent=this.dragStartBeforeEvent,this.tuilePanierSettings.dragSettings.dragEndBeforeEvent=this.dragEndBeforeEvent,this.$element.ready(this.modalePaniersService.rendreCompatibleTuilesAvecDragAndDrop)},t.prototype.afficherMarquage=function(){return this.tuilePanierSettings.indicateur.indicateur.estUniquementVueClients?!0:!0},t.prototype.nomMarquage=function(){return this.tuilePanierSettings.indicateur.indicateur.estUniquementVueClients?e.Constantes.ModalePaniers.TUILE_NOM_MARQUAGE_CLIENT_PROSPECT:e.Constantes.ModalePaniers.TUILE_NOM_MARQUAGE_VIDE},t.prototype.couleur=function(){return this.tuilePanierSettings.indicateur.indicateur.estUniquementVueClients?e.Constantes.ModalePaniers.TUILE_COULEUR_ROUGE:e.Constantes.ModalePaniers.TUILE_COULEUR_SOMBRE},t.prototype.supprimer=function(){this.modalePaniersService.supprimerIndicateurPanier(this.tuilePanierSettings,this.listeTuileCatalogueSettings,this.listeTuilePanierSettings,this.listeFiltresClients,this.listeFiltresRelationEco)},t.prototype.deplacerAGauche=function(){var e=this.listeTuilePanierSettings.indexOf(this.tuilePanierSettings),t=e-1;if(t>-1){var i=this.listeTuilePanierSettings.splice(e,1)[0];this.listeTuilePanierSettings.splice(t,0,i)}},t.prototype.deplacerADroite=function(){var e=this.listeTuilePanierSettings.indexOf(this.tuilePanierSettings),t=e+1;if(t<this.listeTuilePanierSettings.length){var i=this.listeTuilePanierSettings.splice(e,1)[0];this.listeTuilePanierSettings.splice(t,0,i)}},t.prototype.afficherFlecheGauche=function(){return this.tuilePanierSettings&&this.tuilePanierSettings.estEnEdition&&this.listeTuilePanierSettings?0===this.listeTuilePanierSettings.indexOf(this.tuilePanierSettings)?!1:!0:!1},t.prototype.afficherFlecheDroite=function(){if(this.tuilePanierSettings&&this.tuilePanierSettings.estEnEdition&&this.listeTuilePanierSettings){var e=this.listeTuilePanierSettings;return e.indexOf(this.tuilePanierSettings)===e.length-1?!1:!0}return!1},Object.defineProperty(t.prototype,"famille",{get:function(){return String.fromCharCode(160,160,160)+this.tuilePanierSettings.indicateur.indicateur.famille.toString()},enumerable:!0,configurable:!0}),t.CLASS_NAME="PfTuilePanierControleur",t.logger=i(t.CLASS_NAME),t.$inject=[e.Constantes.Inject.Angular.$scope,e.Constantes.Inject.Angular.$element,e.Constantes.Inject.Services.modalePaniersService],t}();t.PfTuilePanierControleur=n,e.app.controller("PfTuilePanierControleur",n)}(t=e.Controleurs||(e.Controleurs={}))}(Portefeuille||(Portefeuille={}));var Portefeuille;!function(e){var t;!function(t){"use strict";function i(){return{restrict:"E",templateUrl:"typescript/directives/pf-tuile-panier/pf-tuile-panier-vue.html",controller:"PfTuilePanierControleur",controllerAs:"pfTuilePanierCtrl",bindToController:!0,scope:{tuilePanierSettings:"=",listeTuileCatalogueSettings:"=",listeTuilePanierSettings:"=",listeFiltresClients:"=",listeFiltresRelationEco:"="}}}t.mwPfTuilePanier=i,e.app.directive("mwPfTuilePanier",i)}(t=e.Directives||(e.Directives={}))}(Portefeuille||(Portefeuille={}));var Portefeuille;!function(e){var t;!function(t){var i;!function(i){"use strict";var n=function(){function n(){}return n.recupererNouvelleSelection=function(){return{estDefaut:!1,nom:"",listeChoixIndicateurs:[]}},n.estOkNomSelection=function(t){for(var i=1;i<=e.Constantes.Application.LIMITE_NB_PANIERS;i++){var n=e.Constantes.Application.NOM_PANIER_CREATION+" "+i;if(0===t.indexOf(n))return!1}return!0},n.recupererPanierDefaut=function(e){var t;return 1===e.length?(t=e[0],t.estDefaut=!0):_.find(e,function(e){return e.estDefaut?void(t=e):void 0}),t},n.calculerHauteurRelativeColonne=function(e,t,i){var n,r=1;return n=e&&e>0&&t?100*t/e:r,r>n?r:n},n.calculerHauteurRelativeColonneSousValeur=function(e,t,i){var n=15,r=85,o=n;return t=i,e&&e>0&&t&&(o=100*t/e,n>o?o=n:o>r&&(o=r)),o},n.calculerHauteurRelativeColonneValeur=function(e,t,i){var n=1,r=85;t-=i;var o=n;return i||(i=0),e&&e>0&&t&&(o=100*t/e,n>o?o=n:o>r&&(o=r)),o},n.calculerHauteurRelativeColonneClient=function(e,t,i){var n=1,r=100,o=n;return e&&e>0&&t&&(o=100*t/e,i>=t&&o>n?o=n:o>r&&(o=r)),o},n.calculerHauteurRelativeColonneClientActif=function(e,t,i){var n=0,r=100,o=n;return e&&e>0&&t&&(o=100*t/e,o>r&&(o=r)),o},n.getPortefeuilleDepuisDonneeSignifiante=function(e){if(e){var t={};return e.identifiantPortefeuille?(t.id=e.identifiantPortefeuille,t.libelle=e.libellePortefeuille):(t.id=+e.codeSuiviComplementaire,t.libelle=e.libelleSuiviComplementaire?e.libelleSuiviComplementaire:e.codeSuiviComplementaire+" *pb lib*",t.codeSuiviParComplementaire=e.codeSuiviComplementaire),t.estAffiche=!1,t.listeRelations=[],t}return void 0},n.getPortefeuilleDepuisListePortefeuille=function(e){if(e){var t={};return t.id=e.identifiantPortefeuille,t.libelle=e.libellePortefeuille,t.estAffiche=!1,t.idAgent=e.identifiantEdsSuiviPortefeuille,t.fonctionAgent=e.libelleFonction,t.nomPrenonAgent=e.libelleCourtEDS,t.listeRelations=[],t}return void 0},n.getIndicateur=function(t){var r={};switch(r.code=t.code,r.dateMaj=moment(t.dateMaj,"DD/MM/YYYY").toDate(),r.tendance=t.tendance,r.code){case e.Enum.Indicateur.CODE.CLIENTPROSPECT.toString():case e.Enum.Indicateur.CODEREL.CLIENTPROSPECT.toString():r.intitule=e.Enum.Indicateur.INTITULE.CLIENTPROSPECT.toString(),r.valeur=i.DataUtils.setStrToClientProspectVide(t.valeur),r.typeIndicateur=e.Enum.Indicateur.TYPE.TEXTE;break;case e.Enum.Indicateur.CODE.ACTIF.toString():r.intitule=e.Enum.Indicateur.INTITULE.ACTIF.toString(),r.valeur=i.DataUtils.setStrToActifInactif(t.valeur),r.typeIndicateur=e.Enum.Indicateur.TYPE.TEXTE;break;case e.Enum.Indicateur.CODE.EQUIPE.toString():r.intitule=e.Enum.Indicateur.INTITULE.NON_EQUIPE.toString(),r.valeur=i.DataUtils.setStrToSansContrat(t.valeur),r.typeIndicateur=e.Enum.Indicateur.TYPE.TEXTE;break;case e.Enum.Indicateur.CODE.LEADER.toString():r.intitule=e.Enum.Indicateur.INTITULE.LEADER.toString(),r.valeur=i.DataUtils.setStrToLeader(t.valeur),r.typeIndicateur=e.Enum.Indicateur.TYPE.TEXTE;break;case e.Enum.Indicateur.CODE.CA_N.toString():r.intitule=e.Enum.Indicateur.INTITULE.CA_N.toString(),r.valeurNumber=t.valeur?+t.valeur:null,r.typeIndicateur=e.Enum.Indicateur.TYPE.MONTANT;break;case e.Enum.Indicateur.CODE.CA_N_MOINS_1.toString():r.intitule=e.Enum.Indicateur.INTITULE.CA_N_MOINS_1.toString(),r.valeurNumber=t.valeur?+t.valeur:null,r.typeIndicateur=e.Enum.Indicateur.TYPE.MONTANT;break;case e.Enum.Indicateur.CODE.MARCHE.toString():r.intitule=e.Enum.Indicateur.INTITULE.MARCHE.toString(),r.valeur=t.valeur?t.valeur:e.Constantes.Application.CHAINE_INDICATEUR_NON_CONNU,r.typeIndicateur=e.Enum.Indicateur.TYPE.TEXTE;break;case e.Enum.Indicateur.CODE.SEG_RELATIONNELLE.toString():r.intitule=e.Enum.Indicateur.INTITULE.SEG_RELATIONNELLE.toString(),r.valeur=t.valeur?t.valeur:e.Constantes.Application.CHAINE_INDICATEUR_NON_CONNU,r.typeIndicateur=e.Enum.Indicateur.TYPE.TEXTE;break;case e.Enum.Indicateur.CODE.DATE_DERNIER_ENTRETIEN.toString():case e.Enum.Indicateur.CODEREL.DATE_DERNIER_ENTRETIEN.toString():r.intitule=e.Enum.Indicateur.INTITULE.DATE_DERNIER_ENTRETIEN.toString(),r.valeur=t.valeur?t.valeur:e.Constantes.Application.CHAINE_INDICATEUR_NON_CONNU,r.valeurDate=t.valeur?moment(t.valeur,"DD/MM/YYYY").toDate():void 0,r.typeIndicateur=e.Enum.Indicateur.TYPE.DATE,r.icone=e.Enum.Indicateur.ICONE.DATE_DERNIER_ENTRETIEN.toString();break;case e.Enum.Indicateur.CODE.DATE_DERNIER_RDV.toString():case e.Enum.Indicateur.CODEREL.DATE_DERNIER_RDV.toString():r.intitule=e.Enum.Indicateur.INTITULE.DATE_DERNIER_RDV.toString(),r.valeur=t.valeur?t.valeur:e.Constantes.Application.CHAINE_INDICATEUR_NON_CONNU,r.valeurDate=t.valeur?moment(t.valeur,"DD/MM/YYYY").toDate():void 0,r.typeIndicateur=e.Enum.Indicateur.TYPE.DATE,r.icone=e.Enum.Indicateur.ICONE.DATE_DERNIER_RDV.toString();break;case e.Enum.Indicateur.CODE.DATE_PROCHAIN_RDV.toString():case e.Enum.Indicateur.CODEREL.DATE_PROCHAIN_RDV.toString():r.intitule=e.Enum.Indicateur.INTITULE.DATE_PROCHAIN_RDV.toString(),r.valeur=t.valeur?t.valeur:e.Constantes.Application.CHAINE_INDICATEUR_NON_CONNU,r.valeurDate=t.valeur?moment(t.valeur,"DD/MM/YYYY").toDate():void 0,r.typeIndicateur=e.Enum.Indicateur.TYPE.DATE,r.icone=e.Enum.Indicateur.ICONE.DATE_PROCHAIN_RDV.toString();break;case e.Enum.Indicateur.CODE.NB_RDV_ANNEE_EN_COURS.toString():case e.Enum.Indicateur.CODEREL.NB_RDV_ANNEE_EN_COURS.toString():r.intitule=e.Enum.Indicateur.INTITULE.NB_RDV_ANNEE_EN_COURS.toString()+moment().format("YYYY"),r.valeurNumber=t.valeur?+t.valeur:null,r.typeIndicateur=e.Enum.Indicateur.TYPE.NOMBRE,r.icone=e.Enum.Indicateur.ICONE.NB_RDV_ANNEE_EN_COURS.toString();break;case e.Enum.Indicateur.CODE.NB_RDV_12_MOIS_GLISSANTS.toString():case e.Enum.Indicateur.CODEREL.NB_RDV_12_MOIS_GLISSANTS.toString():r.intitule=e.Enum.Indicateur.INTITULE.NB_RDV_12_MOIS_GLISSANTS.toString(),r.valeurNumber=t.valeur?+t.valeur:null,r.typeIndicateur=e.Enum.Indicateur.TYPE.NOMBRE,r.icone=e.Enum.Indicateur.ICONE.NB_RDV_12_MOIS_GLISSANTS.toString();break;case e.Enum.Indicateur.CODE.PROCHAINE_REVISION.toString():r.intitule=e.Enum.Indicateur.INTITULE.PROCHAINE_REVISION.toString(),r.valeur=t.valeur?t.valeur:e.Constantes.Application.CHAINE_INDICATEUR_NON_CONNU,r.valeurDate=t.valeur?moment(t.valeur,"DD/MM/YYYY").toDate():void 0,r.typeIndicateur=e.Enum.Indicateur.TYPE.DATE;break;case e.Enum.Indicateur.CODE.NOTE_BALE2.toString():r.intitule=e.Enum.Indicateur.INTITULE.NOTE_BALE2.toString(),
r.valeur=t.valeur?t.valeur:e.Constantes.Application.CHAINE_INDICATEUR_NON_CONNU,r.typeIndicateur=e.Enum.Indicateur.TYPE.TEXTE;break;case e.Enum.Indicateur.CODE.PNB_3112.toString():case e.Enum.Indicateur.CODEREL.PNB_3112.toString():r.intitule=e.Enum.Indicateur.INTITULE.PNB_3112.toString()+moment().subtract(1,"year").format("YYYY"),r.valeurNumber=t.valeur?+t.valeur:null,r.typeIndicateur=e.Enum.Indicateur.TYPE.MONTANT;break;case e.Enum.Indicateur.CODE.PNB_N.toString():case e.Enum.Indicateur.CODEREL.PNB_N.toString():r.intitule=e.Enum.Indicateur.INTITULE.PNB_N.toString(),r.valeurNumber=t.valeur?+t.valeur:null,r.typeIndicateur=e.Enum.Indicateur.TYPE.MONTANT;break;case e.Enum.Indicateur.CODE.PNB_N_MOINS_1.toString():case e.Enum.Indicateur.CODEREL.PNB_N_MOINS_1.toString():r.intitule=e.Enum.Indicateur.INTITULE.PNB_N_MOINS_1.toString(),r.valeurNumber=t.valeur?+t.valeur:null,r.typeIndicateur=e.Enum.Indicateur.TYPE.MONTANT;break;case e.Enum.Indicateur.CODE.REV_DATE_DERNIERE_REVUE.toString():case e.Enum.Indicateur.CODEREL.REV_DATE_DERNIERE_REVUE.toString():r.intitule=e.Enum.Indicateur.INTITULE.REV_DATE_DERNIERE_REVUE.toString(),r.valeur=t.valeur?t.valeur:e.Constantes.Application.CHAINE_INDICATEUR_NON_CONNU,r.valeurDate=t.valeur?moment(t.valeur,"DD/MM/YYYY").toDate():void 0,r.typeIndicateur=e.Enum.Indicateur.TYPE.DATE;break;case e.Enum.Indicateur.CODE.REV_NB_SSFAMILLES_PROPOSE.toString():case e.Enum.Indicateur.CODEREL.REV_NB_SSFAMILLES_PROPOSE.toString():r.intitule=e.Enum.Indicateur.INTITULE.REV_NB_SSFAMILLES_PROPOSE.toString(),r.valeurNumber=t.valeur?+t.valeur:null,r.typeIndicateur=e.Enum.Indicateur.TYPE.NOMBRE;break;case e.Enum.Indicateur.CODE.REV_VALIDEE_PAR.toString():r.intitule=e.Enum.Indicateur.INTITULE.REV_VALIDEE_PAR.toString(),r.valeur=t.valeur?i.DataUtils.formatterPascaleCase(t.valeur):null,r.valeur=r.valeur?r.valeur:e.Constantes.Application.CHAINE_INDICATEUR_NON_CONNU,r.typeIndicateur=e.Enum.Indicateur.TYPE.TEXTE;break;case e.Enum.Indicateur.CODE.FLUX_CREDITEURS_N.toString():r.intitule=e.Enum.Indicateur.INTITULE.FLUX_CREDITEURS_N.toString(),r.valeurNumber=t.valeur?+t.valeur:null,r.typeIndicateur=e.Enum.Indicateur.TYPE.MONTANT;break;case e.Enum.Indicateur.CODE.FLUX_CREDITEURS_N_MOINS_1.toString():r.intitule=e.Enum.Indicateur.INTITULE.FLUX_CREDITEURS_N_MOINS_1.toString(),r.valeurNumber=t.valeur?+t.valeur:null,r.typeIndicateur=e.Enum.Indicateur.TYPE.MONTANT;break;case e.Enum.Indicateur.CODE.FLUX_DEBITEURS_N.toString():r.intitule=e.Enum.Indicateur.INTITULE.FLUX_DEBITEURS_N.toString(),r.valeurNumber=t.valeur?+t.valeur:null,r.typeIndicateur=e.Enum.Indicateur.TYPE.MONTANT;break;case e.Enum.Indicateur.CODE.FLUX_DEBITEURS_N_MOINS_1.toString():r.intitule=e.Enum.Indicateur.INTITULE.FLUX_DEBITEURS_N_MOINS_1.toString(),r.valeurNumber=t.valeur?+t.valeur:null,r.typeIndicateur=e.Enum.Indicateur.TYPE.MONTANT;break;case e.Enum.Indicateur.CODE.POTENTIEL_PROSPECT.toString():r.intitule=e.Enum.Indicateur.INTITULE.POTENTIEL_PROSPECT.toString(),r.valeur=n.formaterPotentielProspect(t.valeur),r.typeIndicateur=e.Enum.Indicateur.TYPE.TEXTE;break;case e.Enum.Indicateur.CODE.NB_AFFAIRES_EN_COURS.toString():case e.Enum.Indicateur.CODEREL.NB_AFFAIRES_EN_COURS.toString():r.intitule=e.Enum.Indicateur.INTITULE.NB_AFFAIRES_EN_COURS.toString(),r.valeurNumber=t.valeur?+t.valeur:null,r.typeIndicateur=e.Enum.Indicateur.TYPE.NOMBRE;break;case e.Enum.Indicateur.CODEREL.SEG_RELATIONNELLE_GROUPE.toString():r.intitule=e.Enum.Indicateur.INTITULE.SEG_RELATIONNELLE_GROUPE.toString(),r.valeur=t.valeur?this.getLibelleSegmentationRelationnelle(t.valeur):e.Constantes.Application.CHAINE_INDICATEUR_NON_CONNU,r.typeIndicateur=e.Enum.Indicateur.TYPE.TEXTE;break;case e.Enum.Indicateur.CODE.NB_APPETENCES.toString():case e.Enum.Indicateur.CODEREL.NB_APPETENCES.toString():r.intitule=e.Enum.Indicateur.INTITULE.NB_APPETENCES.toString(),r.valeurNumber=t.valeur?+t.valeur:null,r.typeIndicateur=e.Enum.Indicateur.TYPE.NOMBRE;break;case e.Enum.Indicateur.CODE.NB_PROPOSITIONS_EN_COURS.toString():case e.Enum.Indicateur.CODEREL.NB_PROPOSITIONS_EN_COURS.toString():r.intitule=e.Enum.Indicateur.INTITULE.NB_PROPOSITIONS_EN_COURS.toString(),r.valeurNumber=t.valeur?+t.valeur:null,r.typeIndicateur=e.Enum.Indicateur.TYPE.NOMBRE;break;case e.Enum.Indicateur.CODEREL.PART_ENGAG.toString():case e.Enum.Indicateur.CODE.PART_ENGAG.toString():r.intitule=e.Enum.Indicateur.INTITULE.PART_ENGAG.toString(),r.valeurNumber=t.valeur?+t.valeur:null,r.typeIndicateur=e.Enum.Indicateur.TYPE.POURCENT;break;case e.Enum.Indicateur.CODE.SCORE_ACTIVATION.toString():r.intitule=e.Enum.Indicateur.INTITULE.SCORE_ACTIVATION.toString(),r.valeurNumber=t.valeur?+t.valeur:null,r.typeIndicateur=e.Enum.Indicateur.TYPE.NOMBRE;break;case e.Enum.Indicateur.CODE.SCORE_APPETENCE.toString():r.intitule=e.Enum.Indicateur.INTITULE.SCORE_APPETENCE.toString(),r.valeurNumber=t.valeur?+t.valeur:null,r.typeIndicateur=e.Enum.Indicateur.TYPE.NOMBRE;break;case e.Enum.Indicateur.CODE.SCORE_DEFAILLANCE.toString():r.intitule=e.Enum.Indicateur.INTITULE.SCORE_DEFAILLANCE.toString(),r.valeurNumber=t.valeur?+t.valeur:null,r.typeIndicateur=e.Enum.Indicateur.TYPE.NOMBRE;break;case e.Enum.Indicateur.CODE.TOP_CC.toString():r.intitule=e.Enum.Indicateur.INTITULE.TOP_CC.toString(),r.valeurNumber=n.ValeurNumberTopCC(t.valeur),r.valeur=n.formaterTopCC(t.valeur),r.typeIndicateur=e.Enum.Indicateur.TYPE.TEXTE;break;case e.Enum.Indicateur.CODE.PART_FLUX_CONFIES_CRED.toString():r.intitule=e.Enum.Indicateur.INTITULE.PART_FLUX_CONFIES_CRED.toString(),r.valeurNumber=t.valeur?+t.valeur:null,r.typeIndicateur=e.Enum.Indicateur.TYPE.POURCENT;break;case e.Enum.Indicateur.CODE.PART_FLUX_CONFIES_DEB.toString():r.intitule=e.Enum.Indicateur.INTITULE.PART_FLUX_CONFIES_DEB.toString(),r.valeurNumber=t.valeur?+t.valeur:null,r.typeIndicateur=e.Enum.Indicateur.TYPE.POURCENT;break;case e.Enum.Indicateur.CODE.PREMIER_EQUIPEMENT.toString():r.intitule=e.Enum.Indicateur.INTITULE.PREMIER_EQUIPEMENT.toString(),r.valeur=t.valeur?t.valeur:e.Constantes.Application.CHAINE_INDICATEUR_NON_CONNU,r.valeurDate=t.valeur?moment(t.valeur,"DD/MM/YYYY").toDate():void 0,r.typeIndicateur=e.Enum.Indicateur.TYPE.DATE;break;case e.Enum.Indicateur.CODE.PREMIER_EQUIPEMENT_TAG.toString():r.intitule=e.Enum.Indicateur.INTITULE.PREMIER_EQUIPEMENT_TAG.toString(),r.valeur=t.valeur?t.valeur:e.Constantes.Application.CHAINE_INDICATEUR_NON_CONNU,r.valeurDate=t.valeur?moment(t.valeur,"DD/MM/YYYY").toDate():void 0,r.typeIndicateur=e.Enum.Indicateur.TYPE.DATE;break;case e.Enum.Indicateur.CODE.PREMIER_EQUIPEMENT_TEXTE.toString():r.intitule=e.Enum.Indicateur.INTITULE.PREMIER_EQUIPEMENT_TEXTE.toString(),r.valeur=t.valeur?t.valeur:e.Constantes.Application.CHAINE_INDICATEUR_NON_CONNU,r.typeIndicateur=e.Enum.Indicateur.TYPE.TEXTE;break;case e.Enum.Indicateur.CODE.OBJECTIF_FLUX.toString():r.intitule=e.Enum.Indicateur.INTITULE.OBJECTIF_FLUX.toString(),r.valeurNumber=t.valeur?+t.valeur:null,r.typeIndicateur=e.Enum.Indicateur.TYPE.POURCENT;break;case e.Enum.Indicateur.CODE.ENCOURS_BDF.toString():case e.Enum.Indicateur.CODEREL.ENCOURS_BDF.toString():r.intitule=e.Enum.Indicateur.INTITULE.ENCOURS_BDF.toString(),r.valeurNumber=t.valeur?+t.valeur:null,r.typeIndicateur=e.Enum.Indicateur.TYPE.MONTANT;break;case e.Enum.Indicateur.CODE.BEGACLI.toString():r.intitule=e.Enum.Indicateur.INTITULE.BEGACLI.toString(),r.valeur=t.valeur?t.valeur:e.Constantes.Application.CHAINE_INDICATEUR_NON_CONNU,r.typeIndicateur=e.Enum.Indicateur.TYPE.BEGACLI;break;default:r.intitule="",r.valeur=t.valeur?t.valeur:e.Constantes.Application.CHAINE_INDICATEUR_NON_CONNU,r.typeIndicateur=e.Enum.Indicateur.TYPE.TEXTE}return r},n.formaterPotentielProspect=function(t){var i;return i=void 0===t||null===t||"0"===t?e.Constantes.Application.CHAINE_INDICATEUR_NON_CONNU:t+" étoile"+("1"!==t?"s":"")},n.formaterTopCC=function(t){var i=e.Constantes.Application.LIBELLE_TOP_CC_BLANC;return _.forEach(e.Constantes.Tableau.VALEUR_POSSIBLE_TOP_CC,function(e){t[0]===e[0]&&(i=e)}),i},n.ValeurNumberTopCC=function(t){var i=e.Constantes.Tableau.VALEUR_POSSIBLE_TOP_CC.indexOf(e.Constantes.Application.LIBELLE_TOP_CC_BLANC);return _.forEach(e.Constantes.Tableau.VALEUR_POSSIBLE_TOP_CC,function(n){t[0]===n[0]&&(i=e.Constantes.Tableau.VALEUR_POSSIBLE_TOP_CC.indexOf(n))}),i},n.getLibelleSegmentationRelationnelle=function(e){return this.segmentationsBDR.forEach(function(t){"BM"===t.CODLTS&&t.CODLST===e&&(e=t.LIDLSG)}),e},n.getStatsPortefeuilleAppDepuisRest=function(e){var t={};return e?(e.portefeuilleRdv&&(t.nombreClients=e.portefeuilleRdv.nombreClients,t.nombreClientsActifs=e.portefeuilleRdv.nombreClientsActifs,t.nombreClientsPMEESI=e.portefeuilleRdv.nombreClientsTypePmeEsi,t.nombreClientsPEetPEES=e.portefeuilleRdv.nbClientsPePees,t.nombreClientsMEetMEES=e.portefeuilleRdv.nbClientsMeMees,t.nombreClientsGEetGEES=e.portefeuilleRdv.nbClientsGeGees,t.nombreClientsPro=e.portefeuilleRdv.nombreClientsTypeProEi,t.nombreClientsAutres=e.portefeuilleRdv.nombreClientsTypeAutre,t.nombreProspects=e.portefeuilleRdv.nombreProspects,t.nombreClientsAvecProduitService=e.portefeuilleRdv.nbClientsAvecProduitService,t.nombreClientsSansContratEtProspect=e.portefeuilleRdv.nbClientsSansContratEtProspect,t.nombreRelations=e.portefeuilleRdv.nombreRelationsEconomiques,t.nombreRdvProspectAnneeCivile=e.portefeuilleRdv.nbRdvProspectRealiseAnneeCivile,t.nombreRdvProspectAnneeEnCours=e.portefeuilleRdv.nbProspectsVusAnneeEncours,t.nombreRdvRelationEcoClient=e.portefeuilleRdv.nbRelEcoClientVuesAnneeEncours,t.rdvTauxVisite=e.portefeuilleRdv.tauxDeVisite,t.nombreRdvClientAnneeEnCours=e.portefeuilleRdv.nbRdvClient,t.nombreClientsNonEquipe=e.portefeuilleRdv.nbClientsNonEquipe),e.listeSegmentationRelationnellePmeEsi&&e.listeSegmentationRelationnellePmeEsi.length>0&&(t.listeSegmentationsPMEESI=[],_.forEach(e.listeSegmentationRelationnellePmeEsi,function(e){var i={};i.code=e.codeSegmentation,i.libelle=e.libelleSegmentation,i.pourcentage=e.pourcentageNombreDeClients,t.listeSegmentationsPMEESI.push(i)})),e.listeSegmentationRelationnellePro&&e.listeSegmentationRelationnellePro.length>0&&(t.listeSegmentationsPro=this.agglomererSegmentationPro(e.listeSegmentationRelationnellePro)),t):void 0},n.getStatsRentabiliteAppDepuisRest=function(e){var t;return e?(t={},t.dateDebPnb12DerMoisGlissN=i.DataUtils.strDateRestToDate(e.dateDebPnb12DerMoisGlissN),t.dateDebPnb12DerMoisGlissNMoins1=i.DataUtils.strDateRestToDate(e.dateDebPnb12DerMoisGlissNMoins1),t.dateDebPnb3112AnneeNMoins1=i.DataUtils.strDateRestToDate(e.dateDebPnb3112AnneeNMoins1),t.dateFinPnb12DerMoisGlissN=i.DataUtils.strDateRestToDate(e.dateFinPnb12DerMoisGlissN),t.dateFinPnb12DerMoisGlissNMoins1=i.DataUtils.strDateRestToDate(e.dateFinPnb12DerMoisGlissNMoins1),t.dateFinPnb3112AnneeNMoins1=i.DataUtils.strDateRestToDate(e.dateFinPnb3112AnneeNMoins1),t.pnb12DerniersMoisGlissantN=e.pnb12DerniersMoisGlissantN,t.pnb12DerniersMoisGlissNMoins1=e.pnb12DerniersMoisGlissNMoins1,t.pnb3112AnneeNMoins1=e.pnb3112AnneeNMoins1,t.ratioPNBImportants=e.ratioPnbClient,t.tauxEvolutionPnb=e.tauxEvolutionPnb):t=void 0,t},n.getStatsRevueAppDepuisRest=function(e){var t;return e?(t={},t.nombreDeClientsAActiver=e.nombreDeClientsAActiver,t.nombreDeProduitsAProposer=e.nombreDeProduitsAProposer,t.nombreDeClientsAAppetence=e.nombreDeClientsAAppetence,t.pourcentageRevuePtfRealisee=e.pourcentageRevuePtfRealisee,t.nombreDeClientsARenegocier=e.nombreDeClientsARenegocier,t.nombreDePropositionsEnCours=e.cumulPropositionCommerciale,t.nombreDeAffairesEnCours=e.cumulNombreAffaires,t.nombreDePropositionsEnCours=e.cumulPropositionCommerciale,t.nombreDeAffairesEnCours=e.cumulNombreAffaires):t=void 0,t},n.getStatsRevueAppDepuisRestGlobal=function(e){var t;return e&&e.vueGlobaleStatPtfEds?(t={},t.nombreDeClientsAActiver=e.vueGlobaleStatPtfEds.nombreDeClientsAActiver,t.nombreDeProduitsAProposer=e.vueGlobaleStatPtfEds.nombreDeProduitsAProposer,t.nombreDeClientsAAppetence=e.vueGlobaleStatPtfEds.nombreDeClientsAAppetence,t.pourcentageRevuePtfRealisee=e.vueGlobaleStatPtfEds.pourcentageRevuePtfRealisee,t.nombreDeClientsARenegocier=e.vueGlobaleStatPtfEds.nombreDeClientsTarifARenegocier,t.nombreDePropositionsEnCours=e.vueGlobaleStatPtfEds.cumulPropositionCommerciale,t.nombreDeAffairesEnCours=e.vueGlobaleStatPtfEds.cumulNombreAffaires):t=void 0,t},n.getStatsRentabiliteAppDepuisRestGlobal=function(e){var t={};return e&&e.vueGlobaleStatPtfEds?(t.dateDebPnb12DerMoisGlissN=i.DataUtils.strDateRestToDate(e.vueGlobaleStatPtfEds.dateDebPnb12DerMoisGlissN),t.dateDebPnb12DerMoisGlissNMoins1=i.DataUtils.strDateRestToDate(e.vueGlobaleStatPtfEds.dateDebPnb12DerMoisGlissNMoins1),t.dateDebPnb3112AnneeNMoins1=i.DataUtils.strDateRestToDate(e.vueGlobaleStatPtfEds.dateDebPnb3112AnneeNMoins1),t.dateFinPnb12DerMoisGlissN=i.DataUtils.strDateRestToDate(e.vueGlobaleStatPtfEds.dateFinPnb12DerMoisGlissN),t.dateFinPnb12DerMoisGlissNMoins1=i.DataUtils.strDateRestToDate(e.vueGlobaleStatPtfEds.dateFinPnb12DerMoisGlissNMoins1),t.dateFinPnb3112AnneeNMoins1=i.DataUtils.strDateRestToDate(e.vueGlobaleStatPtfEds.dateFinPnb3112AnneeNMoins1),t.pnb12DerniersMoisGlissantN=e.vueGlobaleStatPtfEds.pnb12DerniersMoisGlissantN,t.pnb12DerniersMoisGlissNMoins1=e.vueGlobaleStatPtfEds.pnb12DerniersMoisGlissNMoins1,t.pnb3112AnneeNMoins1=e.vueGlobaleStatPtfEds.pnb3112AnneeNMoins1,t.tauxEvolutionPnb=e.vueGlobaleStatPtfEds.tauxEvolutionPnb,t):void 0},n.getStatsPortefeuilleAppDepuisRestGlobal=function(e){var t={};return e&&e.vueGlobaleStatPtfEds?(e.vueGlobaleStatPtfEds&&(t.nombreClients=e.vueGlobaleStatPtfEds.nombreClients,t.nombreClientsActifs=e.vueGlobaleStatPtfEds.nombreClientsActifs,t.nombreClientsPMEESI=e.vueGlobaleStatPtfEds.nombreClientsTypePmeEsi,t.nombreClientsPEetPEES=e.vueGlobaleStatPtfEds.nbClientsPePees,t.nombreClientsMEetMEES=e.vueGlobaleStatPtfEds.nbClientsMeMees,t.nombreClientsGEetGEES=e.vueGlobaleStatPtfEds.nbClientsGeGees,t.nombreClientsPro=e.vueGlobaleStatPtfEds.nombreClientsTypeProEi,t.nombreClientsAutres=e.vueGlobaleStatPtfEds.nombreClientsTypeAutre,t.nombreProspects=e.vueGlobaleStatPtfEds.nombreProspects,t.nombreClientsAvecProduitService=e.vueGlobaleStatPtfEds.nbClientsAvecProduitService,t.nombreClientsSansContratEtProspect=e.vueGlobaleStatPtfEds.nbClientsSansContratEtProspect,t.nombreRelations=e.vueGlobaleStatPtfEds.nombreRelationsEconomiques,t.nombreRdvProspectAnneeCivile=e.vueGlobaleStatPtfEds.nbRdvProspectRealiseAnneeCivile,t.nombreRdvProspectAnneeEnCours=e.vueGlobaleStatPtfEds.nbProspectsVusAnneeEncours,t.nombreRdvRelationEcoClient=e.vueGlobaleStatPtfEds.nbRelEcoClientVuesAnneeEncours,t.rdvTauxVisite=e.vueGlobaleStatPtfEds.tauxDeVisite,t.nombreRdvClientAnneeEnCours=e.vueGlobaleStatPtfEds.nbRdvClient,t.nombreClientsNonEquipe=e.vueGlobaleStatPtfEds.nbClientsNonEquipe),t):void 0},n.getStatsFluxFinancierPortefeuilleAppDepuisRestGlobal=function(e){var t,n=[];return t={},t.dateDebFlux12DerMoisGlissN=i.DataUtils.formaterDateValide(e.vueGlobaleStatPtfEds.dateDebFluxAnneeN),t.dateDebFlux12DerMoisGlissNMoins1=i.DataUtils.formaterDateValide(e.vueGlobaleStatPtfEds.dateDebFluxAnneeNMoins1),t.dateFinFlux12DerMoisGlissN=i.DataUtils.formaterDateValide(e.vueGlobaleStatPtfEds.dateFinFluxAnneeN),t.dateFinFlux12DerMoisGlissNMoins1=i.DataUtils.formaterDateValide(e.vueGlobaleStatPtfEds.dateFinFluxAnneeNMoins1),t.flux12DerniersMoisGlissantN=e.vueGlobaleStatPtfEds.fluxCrediteursAnneeN,t.flux12DerniersMoisGlissNMoins1=e.vueGlobaleStatPtfEds.fluxCrediteursNMoins1,t.tauxEvolutionFlux=e.vueGlobaleStatPtfEds.tauxEvolutionFluxCrediteurs,n.push(t),t={},t.dateDebFlux12DerMoisGlissN=i.DataUtils.formaterDateValide(e.vueGlobaleStatPtfEds.dateDebFluxAnneeN),t.dateDebFlux12DerMoisGlissNMoins1=i.DataUtils.formaterDateValide(e.vueGlobaleStatPtfEds.dateDebFluxAnneeNMoins1),t.dateFinFlux12DerMoisGlissN=i.DataUtils.formaterDateValide(e.vueGlobaleStatPtfEds.dateFinFluxAnneeN),t.dateFinFlux12DerMoisGlissNMoins1=i.DataUtils.formaterDateValide(e.vueGlobaleStatPtfEds.dateFinFluxAnneeNMoins1),t.flux12DerniersMoisGlissantN=e.vueGlobaleStatPtfEds.fluxDebiteursAnneeN,t.flux12DerniersMoisGlissNMoins1=e.vueGlobaleStatPtfEds.fluxDebiteursNMoins1,t.tauxEvolutionFlux=e.vueGlobaleStatPtfEds.tauxEvolutionFluxDebiteurs,n.push(t),n},n.getStatsDetailPortefeuilleAppDepuisRestGlobal=function(e){var t={};return t.detailParSuviPar=[],e&&e.vueDetailleeStatPtfEds&&e.vueDetailleeStatPtfEds.length>0&&(_.forEach(e.vueDetailleeStatPtfEds,function(e){var n={};n.codeCiviliteSuiviPar=i.DataUtils.determinerLibelleCivilite(e.codeCiviliteChargeAffaire),e.nomFamilleChargeAffaire?(n.nomSuiviPar=e.nomUsageChargeAffaire&&""!==e.nomUsageChargeAffaire?e.nomUsageChargeAffaire:e.nomFamilleChargeAffaire,n.prenomSuiviPar=e.prenomChargeAffaire):(n.nomSuiviPar="AGENT-"+e.identifiantEds,n.prenomSuiviPar=""),n.nbClientsAvecProduitService=e.nbClientsAvecProduitService,n.nombreClientsActifs=e.nombreClientsActifs,n.nombreClients=e.nombreClients,n.tauxDeVisite=e.tauxDeVisite,n.pnb12DerniersMoisGlissNMoins1=e.pnb12DerniersMoisGlissNMoins1,n.pnb12DerniersMoisGlissantN=e.pnb12DerniersMoisGlissantN,n.tauxEvolutionPnb=e.tauxEvolutionPnb,n.tauxDeRevue=e.pourcentageRevuePtfRealisee,n.fluxCrediteursNMoins1=e.fluxCrediteursNMoins1,n.fluxCrediteursAnneeN=e.fluxCrediteursAnneeN,n.tauxEvolutionFluxCrediteurs=e.tauxEvolutionFluxCrediteurs,n.fluxDebiteursNMoins1=e.fluxDebiteursNMoins1,n.fluxDebiteursAnneeN=e.fluxDebiteursAnneeN,n.tauxEvolutionFluxDebiteurs=e.tauxEvolutionFluxDebiteurs,t.detailParSuviPar.push(n)}),t.detailParSuviPar=_.sortBy(t.detailParSuviPar,function(e){return e.nomSuiviPar})),e&&e.vueGlobaleStatPtfEds&&(t.tauxDeVisiteTotal=e.vueGlobaleStatPtfEds.tauxDeVisite,t.tauxDeRevueTotal=e.vueGlobaleStatPtfEds.pourcentageRevuePtfRealisee,t.dateDebPnb12DerMoisGlissNMoins1=i.DataUtils.strDateRestToDate(e.vueGlobaleStatPtfEds.dateDebPnb12DerMoisGlissNMoins1),t.dateFinPnb12DerMoisGlissNMoins1=i.DataUtils.strDateRestToDate(e.vueGlobaleStatPtfEds.dateFinPnb12DerMoisGlissNMoins1),t.dateDebPnb12DerMoisGlissN=i.DataUtils.strDateRestToDate(e.vueGlobaleStatPtfEds.dateDebPnb12DerMoisGlissN),t.dateFinPnb12DerMoisGlissN=i.DataUtils.strDateRestToDate(e.vueGlobaleStatPtfEds.dateFinPnb12DerMoisGlissN),t.pnb12DerniersMoisGlissNMoins1=e.vueGlobaleStatPtfEds.pnb12DerniersMoisGlissNMoins1,t.pnb12DerniersMoisGlissantN=e.vueGlobaleStatPtfEds.pnb12DerniersMoisGlissantN,t.tauxEvolutionPnb=e.vueGlobaleStatPtfEds.tauxEvolutionPnb,t.dateDebFluxAnneeNMoins1=i.DataUtils.formaterDateValide(e.vueGlobaleStatPtfEds.dateDebFluxAnneeNMoins1),t.dateFinFluxAnneeNMoins1=i.DataUtils.formaterDateValide(e.vueGlobaleStatPtfEds.dateFinFluxAnneeNMoins1),t.dateDebFluxAnneeN=i.DataUtils.formaterDateValide(e.vueGlobaleStatPtfEds.dateDebFluxAnneeN),t.dateFinFluxAnneeN=i.DataUtils.formaterDateValide(e.vueGlobaleStatPtfEds.dateFinFluxAnneeN),t.fluxCrediteursNMoins1=e.vueGlobaleStatPtfEds.fluxCrediteursNMoins1,t.fluxCrediteursAnneeN=e.vueGlobaleStatPtfEds.fluxCrediteursAnneeN,t.tauxEvolutionFluxCrediteurs=e.vueGlobaleStatPtfEds.tauxEvolutionFluxCrediteurs,t.fluxDebiteursNMoins1=e.vueGlobaleStatPtfEds.fluxDebiteursNMoins1,t.fluxDebiteursAnneeN=e.vueGlobaleStatPtfEds.fluxDebiteursAnneeN,t.tauxEvolutionFluxDebiteurs=e.vueGlobaleStatPtfEds.tauxEvolutionFluxDebiteurs),t},n.genererIdentifiantAleatoire=function(){return Math.floor((new Date).valueOf()*Math.random())},n.agglomererSegmentationPro=function(t){var i;if(t){i=[];var n=/\*/;_.forEach(t,function(t){if(t){var r={},o=0,l=void 0;switch(t.codeSegmentation&&(l=t.codeSegmentation.split(n),l&&(o=l.length-1)),o){case 0:-1!==t.codeSegmentation.indexOf(e.Constantes.Rest.ENTREE_EN_RELATION)?(r.code=e.Constantes.Rest.CODE_ENTREE_EN_RELATION,r.libelle=e.Constantes.Application.LIBELLE_AGGLOMERAT_ENTREE_RELATION,r.pourcentage=t.pourcentageNombreDeClients):-1!==t.codeSegmentation.indexOf(e.Constantes.Rest.PRO_RISQUE)?(r.code=e.Constantes.Rest.CODE_RISQUE,r.libelle=e.Constantes.Application.LIBELLE_AGGLOMERAT_RISQUE,r.pourcentage=t.pourcentageNombreDeClients):t.codeSegmentation.toUpperCase().substr(0,3)===e.Constantes.Rest.NON_CALCULE_NON_CONCERNE?(r.code=e.Constantes.Rest.CODE_AUTRES,r.libelle=e.Constantes.Application.LIBELLE_AGGLOMERAT_AUTRES,r.pourcentage=t.pourcentageNombreDeClients):r=null;break;case 1:r.code=e.Constantes.Rest.CODE_PRO_NON_CAPTE,r.libelle=e.Constantes.Application.LIBELLE_AGGLOMERAT_PRO_NON_CAPTE,r.pourcentage=t.pourcentageNombreDeClients;break;case 2:r.code=e.Constantes.Rest.CODE_PRO_PARTIELLEMENT_CAPTE,r.libelle=e.Constantes.Application.LIBELLE_AGGLOMERAT_PRO_PARTIELLEMENT_CAPTE,r.pourcentage=t.pourcentageNombreDeClients;break;case 3:r.code=e.Constantes.Rest.CODE_PRO_LARGEMENT_CAPTE,r.libelle=e.Constantes.Application.LIBELLE_AGGLOMERAT_PRO_LARGEMENT_CAPTE,r.pourcentage=t.pourcentageNombreDeClients;break;default:r=null}if(r){var a=-1;a=_.findIndex(i,function(e){return e.code===r.code?!0:void 0}),-1===a?i.push(r):i[a].pourcentage=i[a].pourcentage+r.pourcentage}}})}return i},n.getConfigDonutSelonType=function(t,i){var r;if(t&&i)switch(t){case e.Constantes.Application.DONUT_PME_ESI:r=n.getConfigDonutD3(t),r.titre=e.Constantes.Application.GRAPHE_SEGMENTATION_TITRE_GROUPE,r.nombreClients=i.nombreClientsPMEESI.toString(),r.listeDonnees=this.alimenterListeDonneesConfigDonut(i.listeSegmentationsPMEESI);break;case e.Constantes.Application.DONUT_PRO:r=n.getConfigDonutD3(t),r.titre=e.Constantes.Application.GRAPHE_SEGMENTATION_TITRE_CLIENT,r.nombreClients=i.nombreClientsPro.toString(),r.listeDonnees=this.alimenterListeDonneesConfigDonut(i.listeSegmentationsPro)}return r},n.getConfigDonutD3=function(e){var i;return i={},i.donutChoisi=e,i.degrade=t.LibrairieD3.DEGRADE_DONUT.ROSE,i},n.alimenterListeDonneesConfigDonut=function(e){var t;return e&&(t=[],_.forEach(e,function(e){var i={};i.nom=e.libelle,i.pourcentage=e.pourcentage,t.push(i)})),t},n.isIE=function(){return-1!==navigator.userAgent.indexOf("Trident")},n.segmentationsBDR=[],n}();i.ApplicationUtils=n}(i=t.Utils||(t.Utils={}))}(t=e.Services||(e.Services={}))}(Portefeuille||(Portefeuille={}));var Portefeuille;!function(e){var t;!function(t){var i;!function(t){"use strict";var i=function(){function t(){}return t.formatterPascaleCase=function(e){return e.replace(/\w+/g,function(e){return e[0].toUpperCase()+e.slice(1).toLowerCase()})},t.setONToBoolean=function(t){return t===e.Constantes.Rest.CODE_O_TRUE},t.getEstLeaderDepuisCodeLeader=function(t){return t===e.Constantes.Application.CODE_LEADER_RELATION},t.getEstClientDepuisIndicateur=function(t){return t?t.valeur===e.Constantes.Application.CHAINE_INDICATEUR_CLIENT:void 0},t.getEstActifDepuisIndicateur=function(t){return t.valeur===e.Constantes.Application.CHAINE_INDICATEUR_ACTIF},t.setStrToActifInactif=function(t){return t&&" "!==t?t===e.Constantes.Rest.CODE_STRING_ACTIF?e.Constantes.Application.CHAINE_INDICATEUR_ACTIF:e.Constantes.Application.CHAINE_INDICATEUR_INACTIF:e.Constantes.Application.CHAINE_INDICATEUR_NON_CONNU},t.setStrToSansContrat=function(t){return t&&" "!==t?t===e.Constantes.Rest.CODE_O_TRUE?e.Constantes.Application.CHAINE_OUI:e.Constantes.Application.CHAINE_NON:e.Constantes.Application.CHAINE_INDICATEUR_NON_CONNU},t.setStrToLeader=function(t){return t&&" "!==t?t===e.Constantes.Rest.CODE_O_TRUE?e.Constantes.Application.CHAINE_OUI:e.Constantes.Application.CHAINE_NON:e.Constantes.Application.CHAINE_INDICATEUR_NON_CONNU},t.setStrToClientProspectVide=function(t){switch(t){case e.Constantes.Rest.CODE_TYPE_PERSONNE_CLIENT:return e.Constantes.Application.CHAINE_INDICATEUR_CLIENT;case e.Constantes.Rest.CODE_TYPE_PERSONNE_TIERS:return e.Constantes.Application.CHAINE_INDICATEUR_TIERS;case e.Constantes.Rest.CODE_TYPE_PERSONNE_PROPECT_RESTREINT:case e.Constantes.Rest.CODE_TYPE_PERSONNE_PROPECT_ENRICHI:return e.Constantes.Application.CHAINE_INDICATEUR_PROSPECT;default:return e.Constantes.Application.CHAINE_INDICATEUR_NON_CONNU}},t.lPad=function(e,t){return _.padLeft(""+e,t,"0")},t.booleanToOuiNon=function(t){return t?e.Constantes.Application.CHAINE_OUI:e.Constantes.Application.CHAINE_NON},t.formatDateIhm=function(t){return moment(t,e.Constantes.Application.FORMAT_DATE_REST).format(e.Constantes.Application.FORMAT_DATE_IHM)},t.formatMontant=function(e){return e.toLocaleString().replace(/\B(?=(\d{3})+(?!\d))/g,String.fromCharCode(160))},t.formatPourcent=function(e){var t;t=e.toFixed(2),t=t.replace(/\B(?=(\d{3})+(?!\d))/g,String.fromCharCode(160));var i;return(i=t.indexOf(".00"))>-1&&(t=t.substring(0,i)),t=t.replace(".",",")},t.formatNombre=function(e){return e.toLocaleString()},t.strDateRestToDate=function(e){var t,i;return i=null,e&&e.length>0&&(t=e.length>15?moment(e.substr(0,16),"YYYY-MM-DD-HH.mm"):moment(e,"YYYY-MM-DD"),t.isValid()&&(i=t.toDate())),i},t.determinerLibelleCivilite=function(e){return"1"===e||"2"===e?"ME":"3"===e?"MR":""},t.formaterDateValide=function(e){return moment(e,"MM/YYYY").isValid()?moment(e,"MM/YYYY").toDate():null},t.getTexteCA=function(t,i){var n="",r=_.where(t.listeIndicateurs,{code:i});if(r&&r.length>0){var o=r[0];n=void 0!==o.valeurNumber&&null!==o.valeurNumber&&o.valeurNumber!==Number.POSITIVE_INFINITY&&o.valeurNumber!==Number.NEGATIVE_INFINITY?o.valeurNumber.toString().replace(/\B(?=(\d{3})+(?!\d))/g," ")+" k€":e.Constantes.Application.CHAINE_INDICATEUR_NON_CONNU}return n},t.getTexteDate=function(e,t){var i="",n=_.where(e.listeIndicateurs,{code:t});if(n&&n.length>0){var r=n[0];void 0!==r.valeurNumber&&null!==r.valeurNumber&&null!==r.dateMaj&&(i=moment(r.dateMaj).format("MM/YYYY"))}return i},t.formaterMontantkiloText=function(e){return e.toString().replace(/\B(?=(\d{3})+(?!\d))/g,String.fromCharCode(160))+" k€"},t}();t.DataUtils=i}(i=t.Utils||(t.Utils={}))}(t=e.Services||(e.Services={}))}(Portefeuille||(Portefeuille={}));var Portefeuille;!function(e){var t;!function(e){var t;!function(e){var t;!function(e){var t=function(){function e(e,t){this.$filter=e,this.$parse=t}return e.prototype.comparatorFn=function(e,t,i){var n=e;if(n){var r="";return r+=n.nom,-1!==r.toString().toLowerCase().indexOf(t.toLowerCase())}return!1},e}();e.ClientComparator=t}(t=e.Comparator||(e.Comparator={}))}(t=e.Tableaux||(e.Tableaux={}))}(t=e.Modeles||(e.Modeles={}))}(Portefeuille||(Portefeuille={}));var Portefeuille;!function(e){var t;!function(e){var t;!function(e){var t;!function(e){var t=function(){function e(e,t){this.$filter=e,this.$parse=t}return e.prototype.comparatorFn=function(e,t,i){var n=this.$parse(i.bind),r=n(e);if(!angular.isDate(r))return!1;var o=this.$filter("date")(r,"dd/MM/yyyy");return-1!==o.toString().toLowerCase().indexOf(t)},e}();e.DateComparator=t}(t=e.Comparator||(e.Comparator={}))}(t=e.Tableaux||(e.Tableaux={}))}(t=e.Modeles||(e.Modeles={}))}(Portefeuille||(Portefeuille={}));var Portefeuille;!function(e){var t;!function(e){var t;!function(e){var t;!function(e){var t=function(){function e(e,t){this.$filter=e,this.$parse=t}return e.prototype.comparatorFn=function(e,t,i){var n=e;if(n){var r="";return r+=n.nom,r+=n.id,r+=n.relationEconomique,-1!==r.toString().toLowerCase().indexOf(t.toLowerCase())}return!1},e}();e.RelationComparator=t}(t=e.Comparator||(e.Comparator={}))}(t=e.Tableaux||(e.Tableaux={}))}(t=e.Modeles||(e.Modeles={}))}(Portefeuille||(Portefeuille={}));var Portefeuille;!function(e){var t;!function(t){var i;!function(t){var i;!function(t){"use strict";var i=MyWay.Services.Loggers.LoggerFactory.INSTANCE.getClass,n=function(){function t(e){this.serviceAgentExtended=e}return t.prototype.postRechercheRevue=function(i){t.logger.info(">>> Appel de la méthode : RechercheRevueService.getRevue <<<");var n={url:e.Constantes.urlsRest.URL_REST_PROPOSITIONCORPORATEV1_RECHERCHE_REVUE,method:MyWay.Services.MethodEnum.POST,withHeaders:!0,data:i,responseType:MyWay.Services.ResponseTypeEnum.JSON};return this.serviceAgentExtended.sendRequest(n)},t.CLASS_NAME="RechercheRevueService",t.logger=i(t.CLASS_NAME),t.$inject=[e.Constantes.Inject.MyWay.serviceAgentExtended],t}();e.app.service(n.CLASS_NAME,n)}(i=t.RechercheRevue||(t.RechercheRevue={}))}(i=t.Rest||(t.Rest={}))}(t=e.Services||(e.Services={}))}(Portefeuille||(Portefeuille={}));var Portefeuille;!function(e){var t;!function(t){var i;!function(t){var i;!function(t){"use strict";var i=MyWay.Services.Loggers.LoggerFactory.INSTANCE.getClass,n=function(){function t(e){this.serviceAgentExtended=e}return t.prototype.postStatFluxMvtFinancier=function(i){t.logger.info(">>> Appel de la méthode : StatFluxMouvementFinancierService.postStatFluxMvtFinancier <<<");var n={url:e.Constantes.urlsRest.URL_REST_PORTEFEUILLECORPORATEV1_STATFLUXMOUVEMENTFINANCIER,method:MyWay.Services.MethodEnum.POST,withHeaders:!0,data:i,responseType:MyWay.Services.ResponseTypeEnum.JSON};return this.serviceAgentExtended.sendRequest(n)},t.CLASS_NAME="StatFluxMouvementFinancierService",t.logger=i(t.CLASS_NAME),t.$inject=[e.Constantes.Inject.MyWay.serviceAgentExtended],t}();e.app.service(n.CLASS_NAME,n)}(i=t.StatFluxMouvementFinancier||(t.StatFluxMouvementFinancier={}))}(i=t.Rest||(t.Rest={}))}(t=e.Services||(e.Services={}))}(Portefeuille||(Portefeuille={}));var Portefeuille;!function(e){var t;!function(t){var i;!function(t){var i;!function(t){"use strict";var i=MyWay.Services.Loggers.LoggerFactory.INSTANCE.getClass,n=function(){function t(e){this.serviceAgentExtended=e}return t.prototype.getStats=function(i){t.logger.info(">>> Appel de la méthode : StatRevueService.getStats <<<");var n={url:e.Constantes.urlsRest.URL_REST_PORTEFEUILLECORPORATEV1_STATPTF,method:MyWay.Services.MethodEnum.POST,withHeaders:!0,data:i,responseType:MyWay.Services.ResponseTypeEnum.JSON};return this.serviceAgentExtended.sendRequest(n)},t.CLASS_NAME="StatPortefeuilleService",t.logger=i(t.CLASS_NAME),t.$inject=[e.Constantes.Inject.MyWay.serviceAgentExtended],t}();e.app.service(n.CLASS_NAME,n)}(i=t.StatPortefeuille||(t.StatPortefeuille={}))}(i=t.Rest||(t.Rest={}))}(t=e.Services||(e.Services={}))}(Portefeuille||(Portefeuille={}));var Portefeuille;!function(e){var t;!function(t){var i;!function(t){var i;!function(t){"use strict";var i=MyWay.Services.Loggers.LoggerFactory.INSTANCE.getClass,n=function(){function t(e){this.serviceAgentExtended=e}return t.prototype.getStatsRentab=function(i){t.logger.info(">>> Appel de la méthode : StatRentabiliteService.getStatsRentab <<<");var n={url:e.Constantes.urlsRest.URL_REST_PORTEFEUILLECORPORATEV1_STATRENTABILITE,method:MyWay.Services.MethodEnum.POST,withHeaders:!0,data:i,responseType:MyWay.Services.ResponseTypeEnum.JSON};return this.serviceAgentExtended.sendRequest(n)},t.CLASS_NAME="StatRentabiliteService",t.logger=i(t.CLASS_NAME),t.$inject=[e.Constantes.Inject.MyWay.serviceAgentExtended],t}();e.app.service(n.CLASS_NAME,n)}(i=t.StatRentabilite||(t.StatRentabilite={}))}(i=t.Rest||(t.Rest={}))}(t=e.Services||(e.Services={}))}(Portefeuille||(Portefeuille={}));var Portefeuille;!function(e){var t;!function(t){var i;!function(t){var i;!function(t){"use strict";var i=MyWay.Services.Loggers.LoggerFactory.INSTANCE.getClass,n=function(){function t(e){this.serviceAgentExtended=e}return t.prototype.getStats=function(i){t.logger.info(">>> Appel de la méthode : StatRevueService.getStats <<<");var n={url:e.Constantes.urlsRest.URL_REST_PROPOSITIONCORPORATEV1_STATREVUE,method:MyWay.Services.MethodEnum.POST,withHeaders:!0,data:i,responseType:MyWay.Services.ResponseTypeEnum.JSON};return this.serviceAgentExtended.sendRequest(n)},t.CLASS_NAME="StatRevueService",t.logger=i(t.CLASS_NAME),t.$inject=[e.Constantes.Inject.MyWay.serviceAgentExtended],t}();e.app.service(n.CLASS_NAME,n)}(i=t.StatRevue||(t.StatRevue={}))}(i=t.Rest||(t.Rest={}))}(t=e.Services||(e.Services={}))}(Portefeuille||(Portefeuille={}));var Portefeuille;!function(e){var t;!function(t){var i;!function(t){var i;!function(t){var i;!function(t){"use strict";var i=MyWay.Services.Loggers.LoggerFactory.INSTANCE.getClass,n=function(){function t(e){this.serviceAgentExtended=e}return t.prototype.getGestionAffectation=function(i){t.logger.info(">>> Appel de la méthode : GestionAffectationService.getGestionAffectation <<<");var n={url:e.Constantes.urlsRest.URL_REST_AGENTV2_GESTION_AFFECTATION,method:MyWay.Services.MethodEnum.GET,withHeaders:!0,params:i,responseType:MyWay.Services.ResponseTypeEnum.JSON
};return this.serviceAgentExtended.sendRequest(n)},t.CLASS_NAME="GestionAffectationService",t.logger=i(t.CLASS_NAME),t.$inject=[e.Constantes.Inject.MyWay.serviceAgentExtended],t}();e.app.service("GestionAffectationService",n)}(i=t.gestionAffectation||(t.gestionAffectation={}))}(i=t.AgentV2||(t.AgentV2={}))}(i=t.Rest||(t.Rest={}))}(t=e.Services||(e.Services={}))}(Portefeuille||(Portefeuille={}));var Portefeuille;!function(e){var t;!function(t){var i;!function(t){var i;!function(t){var i;!function(t){"use strict";var i=MyWay.Services.Loggers.LoggerFactory.INSTANCE.getClass,n=function(){function t(e){this.serviceAgentExtended=e}return t.prototype.getListeCaracteristiquesAgent=function(i){t.logger.info(">>> Appel de la méthode : RechercheAgentService.getListeCaracteristiquesAgent <<<");var n={url:e.Constantes.urlsRest.URL_REST_AGENTV2_RECHERCHE,method:MyWay.Services.MethodEnum.GET,withHeaders:!0,params:i,responseType:MyWay.Services.ResponseTypeEnum.JSON};return this.serviceAgentExtended.sendRequest(n)},t.CLASS_NAME="RechercheAgentService",t.logger=i(t.CLASS_NAME),t.$inject=[e.Constantes.Inject.MyWay.serviceAgentExtended],t}();e.app.service("RechercheAgentService",n)}(i=t.recherche||(t.recherche={}))}(i=t.AgentV2||(t.AgentV2={}))}(i=t.Rest||(t.Rest={}))}(t=e.Services||(e.Services={}))}(Portefeuille||(Portefeuille={}));var Portefeuille;!function(e){var t;!function(t){var i;!function(t){var i;!function(t){"use strict";var i=MyWay.Services.Loggers.LoggerFactory.INSTANCE.getClass,n=function(){function t(e){this.serviceAgentExtended=e}return t.prototype.getListePreferences=function(i){t.logger.info(">>> Appel de la méthode : PreferenceUtilisateurService.getListeCaracteristiquesAgent <<<");var n={url:e.Constantes.urlsRest.URL_REST_PREFERENCE_UTILISATEUR,method:MyWay.Services.MethodEnum.GET,withHeaders:!0,params:i,responseType:MyWay.Services.ResponseTypeEnum.JSON};return this.serviceAgentExtended.sendRequest(n)},t.CLASS_NAME="RechercheAgentService",t.logger=i(t.CLASS_NAME),t.$inject=[e.Constantes.Inject.MyWay.serviceAgentExtended],t}();e.app.service("PreferenceUtilisateurService",n)}(i=t.PreferenceUtilisateur||(t.PreferenceUtilisateur={}))}(i=t.Rest||(t.Rest={}))}(t=e.Services||(e.Services={}))}(Portefeuille||(Portefeuille={}));var Portefeuille;!function(e){var t;!function(t){var i;!function(t){var i;!function(t){"use strict";var i=MyWay.Services.Loggers.LoggerFactory.INSTANCE.getClass,n=function(){function t(e,t){this.serviceAgentExtended=e,this.$q=t}return t.prototype.getClientsIndicateurs=function(i){t.logger.info(">>> Appel de la méthode : ClientService.getClientsIndicateurs <<<");var n={url:e.Constantes.urlsRest.URL_REST_PORTEFEUILLEV1_CLIENT,method:MyWay.Services.MethodEnum.POST,withHeaders:!0,data:i,responseType:MyWay.Services.ResponseTypeEnum.JSON};return this.serviceAgentExtended.sendRequest(n)},t.CLASS_NAME="ClientService",t.logger=i(t.CLASS_NAME),t.$inject=[e.Constantes.Inject.MyWay.serviceAgentExtended,e.Constantes.Inject.Angular.$q],t}();e.app.service(n.CLASS_NAME,n)}(i=t.Client||(t.Client={}))}(i=t.Rest||(t.Rest={}))}(t=e.Services||(e.Services={}))}(Portefeuille||(Portefeuille={}));var Portefeuille;!function(e){var t;!function(t){var i;!function(t){var i;!function(t){"use strict";var i=MyWay.Services.Loggers.LoggerFactory.INSTANCE.getClass,n=function(){function t(e){this.serviceAgentExtended=e}return t.prototype.getPortefeuilles=function(i){t.logger.info(">>> Appel de la méthode : RecherchePortefeuilleService.getPortefeuilles <<<");var n={url:e.Constantes.urlsRest.URL_REST_PORTEFEUILLEV1_RECHERCHE,method:MyWay.Services.MethodEnum.GET,withHeaders:!0,params:i,responseType:MyWay.Services.ResponseTypeEnum.JSON};return this.serviceAgentExtended.sendRequest(n)},t.prototype.getlistePortefeuillesParEds=function(i){t.logger.info(">>> Appel de la méthode : RecherchePortefeuilleService.getPortefeuilles <<<");var n={url:e.Constantes.urlsRest.URL_REST_PORTEFEUILLEV1_RECHERCHE_LISTE,method:MyWay.Services.MethodEnum.GET,withHeaders:!0,params:i,responseType:MyWay.Services.ResponseTypeEnum.JSON};return this.serviceAgentExtended.sendRequest(n)},t.CLASS_NAME="RecherchePortefeuilleService",t.logger=i(t.CLASS_NAME),t.$inject=[e.Constantes.Inject.MyWay.serviceAgentExtended],t}();e.app.service("RecherchePortefeuilleService",n)}(i=t.RecherchePortefeuille||(t.RecherchePortefeuille={}))}(i=t.Rest||(t.Rest={}))}(t=e.Services||(e.Services={}))}(Portefeuille||(Portefeuille={}));var Portefeuille;!function(e){var t;!function(t){var i;!function(t){var i;!function(t){"use strict";var i=MyWay.Services.Loggers.LoggerFactory.INSTANCE.getClass,n=function(){function t(e){this.serviceAgentExtended=e}return t.prototype.getRelationCommerciale=function(i){t.logger.info(">>> Appel de la méthode : RelationCommercialeService.getRelationCommerciale <<<");var n={url:e.Constantes.urlsRest.URL_REST_PORTEFEUILLEV1_RELATION_COMMERCIALE,method:MyWay.Services.MethodEnum.POST,withHeaders:!0,data:i,responseType:MyWay.Services.ResponseTypeEnum.JSON};return this.serviceAgentExtended.sendRequest(n)},t.CLASS_NAME="RelationCommercialeService",t.logger=i(t.CLASS_NAME),t.$inject=[e.Constantes.Inject.MyWay.serviceAgentExtended],t}();e.app.service(n.CLASS_NAME,n)}(i=t.RelationCommerciale||(t.RelationCommerciale={}))}(i=t.Rest||(t.Rest={}))}(t=e.Services||(e.Services={}))}(Portefeuille||(Portefeuille={}));var Portefeuille;!function(e){var t;!function(t){var i;!function(t){var i;!function(t){"use strict";var i=MyWay.Services.Loggers.LoggerFactory.INSTANCE.getClass,n=function(){function t(e){this.serviceAgentExtended=e}return t.prototype.getClientsSuiviComplementaire=function(i){t.logger.info(">>> Appel de la méthode : SuiviComplementaireService.getClientsSuiviComplementaire <<<");var n={url:e.Constantes.urlsRest.URL_REST_PORTEFEUILLEV1_SUIVI_COMPLEMENTAIRE,method:MyWay.Services.MethodEnum.POST,withHeaders:!0,data:i,responseType:MyWay.Services.ResponseTypeEnum.JSON};return this.serviceAgentExtended.sendRequest(n)},t.CLASS_NAME="SuiviComplementaireService",t.logger=i(t.CLASS_NAME),t.$inject=[e.Constantes.Inject.MyWay.serviceAgentExtended],t}();e.app.service(n.CLASS_NAME,n)}(i=t.SuiviComplementaire||(t.SuiviComplementaire={}))}(i=t.Rest||(t.Rest={}))}(t=e.Services||(e.Services={}))}(Portefeuille||(Portefeuille={}));var Portefeuille;!function(e){var t;!function(t){var i;!function(t){var i;!function(t){var i;!function(t){"use strict";var i=MyWay.Services.Loggers.LoggerFactory.INSTANCE.getClass,n=function(){function t(e){this.serviceAgentExtended=e}return t.prototype.getStatPortefeuilleEds=function(i){t.logger.info(">>> Appel de la méthode : StatPortefeuilleEdsService.getStatPortefeuilleEds <<<");var n={url:e.Constantes.urlsRest.URL_REST_PROPOSITIONCORPORATEV1_STAT_PORTEFEUILLE_EDS,method:MyWay.Services.MethodEnum.POST,withHeaders:!0,data:i,responseType:MyWay.Services.ResponseTypeEnum.JSON};return this.serviceAgentExtended.sendRequest(n)},t.CLASS_NAME="StatPortefeuilleEdsService",t.logger=i(t.CLASS_NAME),t.$inject=[e.Constantes.Inject.MyWay.serviceAgentExtended],t}();e.app.service("StatPortefeuilleEdsService",n)}(i=t.StatPortefeuilleEds||(t.StatPortefeuilleEds={}))}(i=t.PropositioncorporateV1||(t.PropositioncorporateV1={}))}(i=t.Rest||(t.Rest={}))}(t=e.Services||(e.Services={}))}(Portefeuille||(Portefeuille={}));var Portefeuille;!function(e){var t;!function(t){var i;!function(t){var i;!function(t){"use strict";var i=MyWay.Services.Loggers.LoggerFactory.INSTANCE.getClass,n=function(){function t(e,t){this.serviceAgentExtended=e,this.$q=t}return t.prototype.getFlux=function(i){t.logger.info(">>> Appel de la méthode : FluxService.getFlux <<<");var n={url:e.Constantes.urlsRest.URL_REST_PORTEFEUILLEV1_CLIENT,method:MyWay.Services.MethodEnum.POST,withHeaders:!0,data:i,responseType:MyWay.Services.ResponseTypeEnum.JSON};return this.serviceAgentExtended.sendRequest(n)},t.CLASS_NAME="FluxService",t.logger=i(t.CLASS_NAME),t.$inject=[e.Constantes.Inject.MyWay.serviceAgentExtended,e.Constantes.Inject.Angular.$q],t}();e.app.service(n.CLASS_NAME,n)}(i=t.Flux||(t.Flux={}))}(i=t.Rest||(t.Rest={}))}(t=e.Services||(e.Services={}))}(Portefeuille||(Portefeuille={}));var Portefeuille;!function(e){var t;!function(t){var i;!function(t){var i;!function(t){var i;!function(t){"use strict";var i=MyWay.Services.Loggers.LoggerFactory.INSTANCE.getClass,n=function(){function t(e){this.serviceAgentExtended=e}return t.prototype.getEdsNiveauInferieur=function(i){t.logger.info(">>> Appel de la méthode : EdsNiveauInferieurService.getEdsNiveauInferieur <<<");var n={url:e.Constantes.urlsRest.URL_REST_STRUCTUREV2_EDS_NIVEAU_INFERIEURE,method:MyWay.Services.MethodEnum.GET,withHeaders:!0,params:i,responseType:MyWay.Services.ResponseTypeEnum.JSON};return this.serviceAgentExtended.sendRequest(n)},t.CLASS_NAME="EdsNiveauInferieurService",t.logger=i(t.CLASS_NAME),t.$inject=[e.Constantes.Inject.MyWay.serviceAgentExtended],t}();e.app.service("EdsNiveauInferieurService",n)}(i=t.edsNiveauInferieur||(t.edsNiveauInferieur={}))}(i=t.StructureV2||(t.StructureV2={}))}(i=t.Rest||(t.Rest={}))}(t=e.Services||(e.Services={}))}(Portefeuille||(Portefeuille={})),angular.module("portefeuille").run(["$templateCache",function(e){e.put("vues/bilan-revue-vue.html","<p>Vue Bilan Revue</p>"),e.put("vues/bilan-revues-portefeuille-vue.html","<p>Vue Bilan Revues Portefeuille</p>"),e.put("vues/clients-vue.html",'<!-- Contenu de la page -->\r\n<section class="container-fluid" id="contenu">\r\n    <br>\r\n    <div class="col-lg-12 col-md-12 mw-bloc-contenu" id="bloc-contenu-message-choix-ptf" ng-if="!clientsCtrl.portefeuilleService.aPortefeuillesAffiche() && clientsCtrl.portefeuilleService.aPortefeuille()">\r\n        <span id="sp-message-choix-ptf" ng-bind="clientsCtrl.messageChoixPtf"></span>\r\n    </div>\r\n    <div class="col-lg-12 col-md-12 mw-bloc-contenu" id="bloc-contenu-message-aucun-ptf" ng-if="!clientsCtrl.portefeuilleService.aPortefeuille()">\r\n        <span id="sp-message-aucun-ptf" ng-bind="clientsCtrl.messageAucunPtf"></span>\r\n    </div>\r\n\r\n    <div ng-if="clientsCtrl.portefeuilleService.aPortefeuillesAffiche()">\r\n        <div class="col-md-12">\r\n            <div class="col-md-6">\r\n                <div class="alert alert-warning" ng-show="clientsCtrl.isAfficherMessageLimiteClientAtteinte">\r\n                    <span class="icon itce-information-circle alert-warning" aria-hidden="true"></span>\r\n                    <span aria-hidden="false" ng-bind="clientsCtrl.messageLimiteClientsAtteinte"></span>\r\n                    <a id="ancre-ouvrir-forcage" href="javascript:;" ng-click="clientsCtrl.ouvrirChoixForcage()" ng-show="clientsCtrl.afficherModifierChoix()">Modifier mon choix.</a>\r\n                </div>\r\n            </div>\r\n            <div class="col-md-6">\r\n                <ul class="list-inline pull-right">\r\n                    <li class="mw-radio-btn">\r\n                        <input type="radio" id="radio-btn-vue-relation-eco" name="radio-btn-vue-relation-eco" value="VRE" ng-model="clientsCtrl.radioBoutonEstVueClient" ng-change="clientsCtrl.affichageVueRelationEco()" ng-disabled="clientsCtrl.estEnForcageTypeClientsOuProspects()">\r\n                        <label for="radio-btn-vue-relation-eco" title="Accéder à la vue relations économiques">Relations économiques</label>\r\n                    </li>\r\n                    <li class="mw-radio-btn no-padding-right">\r\n                        <input type="radio" id="radio-btn-vue-clients" name="radio-btn-vue-clients" value="VC" ng-model="clientsCtrl.radioBoutonEstVueClient" ng-change="clientsCtrl.affichageVueClient()">\r\n                        <label for="radio-btn-vue-clients" title="Accéder à la vue clients">Clients / Prospects</label>\r\n                    </li>\r\n                </ul>\r\n            </div>\r\n        </div>\r\n        <div class="col-md-12">\r\n            <!-- BLOC DE CONTENU -->\r\n            <div class="bloc col-sm-12">\r\n                <div class="titre-bloc">\r\n                    <span class="col-sm-6 mw-troncature">\r\n                        <span ng-hide="clientsCtrl.isAccesDepuisBlocRevue" ng-bind="clientsCtrl.getNomPanier()"></span>\r\n                        <span ng-show="clientsCtrl.isAccesDepuisBlocRevue">Ma sélection d\'indicateurs: "Revue"</span>\r\n                    </span>\r\n                    <div ng-hide="clientsCtrl.isAccesDepuisBlocRevue" class="col-md-3 pull-right">\r\n                        <button class="btn btn-block btn-contextuel mw-troncature" id="bouton-indicateurs-v2" ng-click="clientsCtrl.accederAuxIndicateursV2()" ng-disabled="clientsCtrl.estEnForcageTypeTout()">\r\n                            Personnaliser les indicateurs\r\n                        </button>\r\n                    </div>\r\n                </div>\r\n\r\n                <div class="clearfix contenu">\r\n                    <mw-chargement-long id="id-chargement-long" etat="clientsCtrl.etatChargementLong" visible="clientsCtrl.chargementEnCours">\r\n                        <div class="panel-body">\r\n                            <div class="col-md-12 form-group">\r\n                                <form class="form-horizontal" name="form">\r\n                                    <div class="col-md-2">\r\n                                        <button class="btn btn-block btn-default mw-troncature no-padding-left" id="bouton-filtrer" ng-click="clientsCtrl.accederAuxFiltres()" ng-show="clientsCtrl.listeRelationEco.length !== 0">\r\n                                            <span ng-show="clientsCtrl.afficherFiltreActif()" class="icon itce-fa-check icon-avec-filtre-bouton" aria-hidden="true"></span>\r\n                                            <span class="icon itce-filter" aria-hidden="true"></span>\r\n                                            Filtrer\r\n                                        </button>\r\n                                    </div>\r\n                                    <div class="col-md-10">\r\n                                        <mw-pf-detail-filtre liste-filtres="clientsCtrl.listeFiltres" ng-if="clientsCtrl.afficherFiltreActif()" id="id-detail-filtre"></mw-pf-detail-filtre>\r\n                                    </div>\r\n                                </form>\r\n                            </div>\r\n                            <mw-pf-ligne-relation-eco relation-economique="clientsCtrl.choixRelationEco" liste-indicateurs-tableau="clientsCtrl.listeIndicateursTableau" ng-attr-id="pf-ligne-relation-eco" ng-if="clientsCtrl.afficherLigneRelationEco()"></mw-pf-ligne-relation-eco>\r\n                            <div class="col-md-12 form-group" ng-show="clientsCtrl.afficherLigneStatsEtTableau()">\r\n                                <div class="col-md-7">\r\n                                    <span class="lbl-nb-clients" ng-bind="clientsCtrl.getTxtRatioFiltrage()"></span>\r\n                                </div>\r\n                                <div class="col-md-4 pull-right">\r\n                                    <span class="lbl-pagination" ng-bind="clientsCtrl.getTxtEtatPagination()"></span>\r\n                                </div>\r\n                            </div>\r\n                            <div class="col-md-12 form-group" ng-show="!clientsCtrl.afficherLigneStatsEtTableau()">&nbsp;</div>\r\n                            <mw-table-opefi id="tab-relation" class="tab-relations" options="clientsCtrl.tableauRelations" ng-if="clientsCtrl.afficherTableauRelation()"></mw-table-opefi>\r\n                            <mw-table-opefi id="tab-client" class="tab-clients" options="clientsCtrl.tableauClients" ng-if="clientsCtrl.afficherTableauClients()"></mw-table-opefi>\r\n                        </div>\r\n                    </mw-chargement-long>\r\n                </div>\r\n            </div>\r\n\r\n        </div>\r\n    </div>\r\n\r\n</section>\r\n\r\n<footer class="row mw-footer-fixed-bottom">\r\n    <div class="overlay-footer" ng-class="{\'display-block\':(indexCtrl.ouvertureVoletChoixPortefeuille)}"></div>\r\n    <div class="col-md-12">\r\n        <div class="col-md-2 col-sm-3" ng-show="!clientsCtrl.afficherLigneRelationEco()">\r\n            <button class="btn btn-block btn-zone mw-troncature" aria-label="Retour Accueil" ng-click="clientsCtrl.retourAccueil()" id="bouton-retour-accueil">\r\n                <span class="icon itce-chevron-left" aria-hidden="true"></span>\r\n                <span>Retour Accueil</span>\r\n            </button>\r\n        </div>\r\n        <div class="col-md-2" ng-show="clientsCtrl.estAfficheBtnRetour()">\r\n            <button class="btn btn-block btn-zone mw-troncature" aria-label="Retour" ng-click="clientsCtrl.retourVueRelEco()" id="bouton-retour">\r\n                <span class="icon itce-chevron-left" aria-hidden="true"></span>\r\n                <span>Retour</span>\r\n            </button>\r\n        </div>\r\n        <div class="col-md-2 pull-right" ng-show="clientsCtrl.estAfficherBoutonSynthese()">\r\n            <button class="btn btn-block btn-zone mw-troncature" aria-label="Synthèse client" ng-click="clientsCtrl.accederSyntheseClient()" id="bouton-acces-synthese-cli" ng-disabled="clientsCtrl.estDisabledBtnEffectuerRevue()">\r\n                <span class="icon itce-share-square" aria-hidden="true"></span>\r\n                <span>Synthèse client</span>\r\n            </button>\r\n        </div>\r\n        <div class="col-md-2 pull-right" ng-show="clientsCtrl.estAfficheBtnEffectuerRevue()">\r\n            <button class="btn btn-block btn-zone mw-troncature" aria-label="Effectuer la revue" ng-click="clientsCtrl.effectuerRevue()" id="bouton-effectuer-revue" ng-disabled="clientsCtrl.estDisabledBtnEffectuerRevue()">\r\n                <span>Effectuer la revue</span>\r\n            </button>\r\n        </div>\r\n        <div class="col-md-2 pull-right" ng-show="clientsCtrl.estAfficheBtnVoirProduits()">\r\n            <button class="btn btn-block btn-zone mw-troncature" aria-label="Voir les produits" ng-click="clientsCtrl.consulterProduits()" id="bouton-consulter-produits" ng-disabled="clientsCtrl.estDisabledBoutonVoirProduits()">\r\n                <span>Voir les produits</span>\r\n            </button>\r\n        </div>\r\n        <div class="col-md-2 pull-right" ng-show="clientsCtrl.estAfficheBtnExporter()">\r\n            <button class="btn btn-block btn-zone mw-troncature" aria-label="Exporter la sélection" ng-click="clientsCtrl.exporter()" id="exporter-produits">\r\n                <span>Exporter la sélection</span>\r\n            </button>\r\n        </div>\r\n    </div>\r\n</footer>'),e.put("vues/detail-client-vue.html","<p>Vue détail client</p>"),e.put("vues/page-non-trouvee.html","<h1>Cette application n'est pas encore accessible, elle sera disponible dans une prochaine version.</h1>"),e.put("vues/portefeuille-vue.html",'<!-- Contenu de la page -->\r\n<section class="container-fluid portefeuille-vue" id="contenu">\r\n    <br>\r\n    <div ng-show="!portefeuilleCtrl.portefeuilleService.aPortefeuille() || !portefeuilleCtrl.portefeuilleService.aPortefeuillesAffiche()">\r\n        <div class="overlay-info"></div>\r\n        <div class="overlay-message">\r\n            <div ng-if="!portefeuilleCtrl.portefeuilleService.aPortefeuillesAffiche() && portefeuilleCtrl.portefeuilleService.aPortefeuille()">\r\n                <span id="sp-message-choix-ptf" ng-bind="portefeuilleCtrl.messageChoixPtf"></span>\r\n            </div>\r\n            <div ng-if="!portefeuilleCtrl.portefeuilleService.aPortefeuille()">\r\n                <span class="icon itce-warning" aria-hidden="true">\r\n                </span>\r\n                &nbsp;\r\n                <span id="sp-message-aucun-ptf" ng-bind="portefeuilleCtrl.messageAucunPtf">\r\n                </span>\r\n            </div>\r\n        </div>\r\n    </div>\r\n    <div class="ligne-panel-2" ng-show="portefeuilleCtrl.portefeuilleService.aPortefeuilleExpertAffiche()">\r\n        <mw-pf-panel-niveau-2 id="panel-portefeuille" class="panel-portefeuille col-md-12 col-sm-12 content-mw-pf-panel-niveau-2" titre="Portefeuille - Domaine d\'expertise" icone="itce-folder" config-bouton="portefeuilleCtrl.configBoutonDetailsPortefeuilleExpert">\r\n            <div class="col-sm-12">\r\n                <div class="col-sm-12 mw-bloc-contenu">\r\n                    <span ng-bind="portefeuilleCtrl.messageChoixPtfExpert"></span><br>\r\n                    <ul class="liste-ptf-expert">\r\n                        <li ng-repeat="lib in portefeuilleCtrl.portefeuilleService.getListeLibelleSuiviParComplementairePortefeuillesExpertVisu() track by $index" ng-bind="lib"></li>\r\n                    </ul>\r\n                </div>\r\n            </div>\r\n        </mw-pf-panel-niveau-2>\r\n    </div>\r\n    <div class="ligne-panel-2" ng-show="!portefeuilleCtrl.portefeuilleService.aPortefeuilleExpertAffiche()">\r\n        <!-- Panel Portefeuille -->\r\n        <mw-pf-panel-niveau-2 id="panel-portefeuille-expert" class="panel-portefeuille col-md-8 col-sm-12 content-mw-pf-panel-niveau-2" titre="Portefeuille(s)" icone="itce-folder" config-bouton="portefeuilleCtrl.configBoutonDetailsPortefeuille">\r\n            <div class="col-sm-12" mw-chargement="portefeuilleCtrl.chargementPtfEnCours">\r\n                <div class="col-sm-12 mw-bloc-contenu" ng-if="!portefeuilleCtrl.isInitPtf">\r\n                    <span ng-bind="portefeuilleCtrl.messageInitPtf"></span>\r\n                </div>\r\n                <div ng-if="portefeuilleCtrl.isInitPtf">\r\n                    <div class="col-sm-12 container-badge" ng-class="{\'col-md-12\': portefeuilleCtrl.estVueMultiSuiviPar, \'col-md-6\': !portefeuilleCtrl.estVueMultiSuiviPar}">\r\n                        <div class="bloc-graphique bas-du-bloc">\r\n                            <mw-pf-diagramme-colonne id="colonne-rel" svg-id="\'svg-colonne-rel\'" config="portefeuilleCtrl.configDiagrammeColonnePortefeuille"></mw-pf-diagramme-colonne>\r\n                            <div class="bloc-legende bloc-portefeuille">\r\n                                <mw-pf-puce-legende ng-repeat="config in portefeuilleCtrl.configDiagrammeColonnePortefeuille track by $index" class="legende legende-portefeuille" ng-attr-id="puce-diagramme-bar-{{$index}}" intitule="{{config.intitule}}" couleur="{{config.couleur}}" sous-couleur="{{config.couleurSousValeur}}" sous-intitule="{{config.sousIntitule}}">\r\n                                </mw-pf-puce-legende>\r\n                            </div>\r\n                            <div class="text-align-right">\r\n                                <span class="margin-right-1-rem">\r\n                                    <a role="button" id="action-details-portfeuille" href="javascript:;" ng-click="portefeuilleCtrl.debrancherVersDetailsPorteuille()" ng-show="portefeuilleCtrl.estVueMultiSuiviPar">\r\n                                        Voir détails\r\n                                    </a>\r\n                                </span>\r\n                            </div>\r\n                        </div>\r\n                        <mw-pf-indicateur-badge id="indicateur-colonne-nb-prospects" intitule="portefeuilleCtrl.dataIndicateurClientsPmeEsi.intitule" valeur="portefeuilleCtrl.dataIndicateurClientsPmeEsi.valeur | number"></mw-pf-indicateur-badge>\r\n                        <mw-pf-indicateur-badge id="indicateur-colonne-nb-clients-pe-et-pees" intitule="portefeuilleCtrl.dataIndicateurClientsPEetPEES.intitule" is-sous-intitule="portefeuilleCtrl.dataIndicateurClientsPEetPEES.isSousIntitule" valeur="portefeuilleCtrl.dataIndicateurClientsPEetPEES.valeur | number"></mw-pf-indicateur-badge>\r\n                        <mw-pf-indicateur-badge id="indicateur-colonne-nb-clients-me-et-mees" intitule="portefeuilleCtrl.dataIndicateurClientsMEetMEES.intitule" is-sous-intitule="portefeuilleCtrl.dataIndicateurClientsMEetMEES.isSousIntitule" valeur="portefeuilleCtrl.dataIndicateurClientsMEetMEES.valeur | number"></mw-pf-indicateur-badge>\r\n                        <mw-pf-indicateur-badge id="indicateur-colonne-nb-clients-ge-et-gees" intitule="portefeuilleCtrl.dataIndicateurClientsGEetGEES.intitule" is-sous-intitule="portefeuilleCtrl.dataIndicateurClientsGEetGEES.isSousIntitule" valeur="portefeuilleCtrl.dataIndicateurClientsGEetGEES.valeur | number"></mw-pf-indicateur-badge>\r\n                        <mw-pf-indicateur-badge id="indicateur-badge-nb-entrees-rel-annee" intitule="portefeuilleCtrl.dataIndicateurClientsPro.intitule" valeur="portefeuilleCtrl.dataIndicateurClientsPro.valeur | number"></mw-pf-indicateur-badge>\r\n                        <mw-pf-indicateur-badge id="indicateur-badge-nb-relations" intitule="portefeuilleCtrl.dataIndicateurAutres.intitule" valeur="portefeuilleCtrl.dataIndicateurAutres.valeur | number"></mw-pf-indicateur-badge>\r\n                    </div>\r\n                    <div class="col-md-6 col-sm-12 container-badge" ng-if="!portefeuilleCtrl.estVueMultiSuiviPar">\r\n                        <div class="bloc-graphique height-100-pourcent">\r\n                            <mw-pf-diagramme-donut id="donut-seg-rel" svg-id="\'svg-donut-seg-rel\'" config="portefeuilleCtrl.configDonutSegRel"></mw-pf-diagramme-donut>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </mw-pf-panel-niveau-2>\r\n        <!-- Panel Rendez-vous -->\r\n        <mw-pf-panel-niveau-2 id="panel-rendez-vous" class="panel-rendez-vous col-md-4 col-sm-12 content-mw-pf-panel-niveau-2" titre="{{::portefeuilleCtrl.titrePanelRdv}}" titre2="{{::portefeuilleCtrl.titrePanelRdv2}}" icone="itce-calendar pull-left">\r\n            <div class="col-sm-12" mw-chargement="portefeuilleCtrl.chargementRdvEnCours">\r\n                <div class="col-sm-12 mw-bloc-contenu" ng-show="!portefeuilleCtrl.isInitRdv">\r\n                    <span ng-bind="portefeuilleCtrl.messageInitRdv"></span>\r\n                </div>\r\n                <div ng-if="portefeuilleCtrl.isInitRdv">\r\n                    <div class="col-md-12 col-sm-12 container-badge">\r\n                        <mw-pf-indicateur-badge id="indicateur-badge-nb-rdv-annee-en-cours" intitule="portefeuilleCtrl.dataIndicateurNbRdvRealisesAnneeEnCours.intitule" valeur="portefeuilleCtrl.dataIndicateurNbRdvRealisesAnneeEnCours.valeur | number"></mw-pf-indicateur-badge>\r\n                        <mw-pf-indicateur-badge id="indicateur-badge-nb-clients-annee-en-cours" intitule="portefeuilleCtrl.dataIndicateurNbRdvClientsRealisesAnneeEnCours.intitule" is-sous-intitule="portefeuilleCtrl.dataIndicateurNbRdvClientsRealisesAnneeEnCours.isSousIntitule" valeur="portefeuilleCtrl.dataIndicateurNbRdvClientsRealisesAnneeEnCours.valeur | number"></mw-pf-indicateur-badge>\r\n                        <mw-pf-indicateur-badge id="indicateur-badge-nb-prospects-realises-annee-en-cours" intitule="portefeuilleCtrl.dataIndicateurNbRdvProspectsRealisesAnneeEnCours.intitule" is-sous-intitule="portefeuilleCtrl.dataIndicateurNbRdvProspectsRealisesAnneeEnCours.isSousIntitule" valeur="portefeuilleCtrl.dataIndicateurNbRdvProspectsRealisesAnneeEnCours.valeur | number"></mw-pf-indicateur-badge>\r\n                        <mw-pf-indicateur-badge id="indicateur-badge-nb-relations-economiques-annee-en-cours" intitule="portefeuilleCtrl.dataIndicateurNbRelationsEconomiquesAnneeEnCours.intitule" valeur="portefeuilleCtrl.dataIndicateurNbRelationsEconomiquesAnneeEnCours.valeur | number"></mw-pf-indicateur-badge>\r\n                        <mw-pf-indicateur-badge id="indicateur-badge-nb-prospects-vus-annee-en-cours" intitule="portefeuilleCtrl.dataIndicateurNbRdvProspectsVusAnneeEnCours.intitule" valeur="portefeuilleCtrl.dataIndicateurNbRdvProspectsVusAnneeEnCours.valeur | number"></mw-pf-indicateur-badge>\r\n                    </div>\r\n                    <div class="col-md-12 col-sm-12 container-badge">\r\n                        <div class="bloc-graphique height-100-pourcent text-align-right">\r\n                            <div class="bloc-en-tete">\r\n                                <p class="titre" id="titre-taux-visite" ng-bind="portefeuilleCtrl.configPourcentageVisites.titre"></p>\r\n                            </div>\r\n                            <div class="conteneur-pourcentage">\r\n                                <mw-percent-display id="pourcent-revue-ptf" percent="{{portefeuilleCtrl.configPourcentageVisites.pourcentageUn}}" font-size-percent="70">\r\n                                </mw-percent-display>\r\n                            </div>\r\n                            <span class="margin-right-1-rem">\r\n                                <a role="button" id="action-details-taux-visite" href="javascript:;" ng-click="portefeuilleCtrl.debrancherVersDetailsTauxVisite()" ng-show="portefeuilleCtrl.estVueMultiSuiviPar">\r\n                                    Voir détails\r\n                                </a>\r\n                            </span>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </mw-pf-panel-niveau-2>\r\n    </div>\r\n\r\n    <div class="ligne-panel-2" ng-class="{\'ordre-bloc-inverse\': !portefeuilleCtrl.estHabiliteBlocRentabilite && portefeuilleCtrl.estHabiliteBlocRevue}" ng-show="!portefeuilleCtrl.portefeuilleService.aPortefeuilleExpertAffiche()">\r\n        <!-- Panel Rentabilité -->\r\n        <mw-pf-panel-niveau-2 id="panel-rentabilite" class="panel-rentabilite col-md-8 col-sm-12 content-mw-pf-panel-niveau-2" titre="Rentabilité" icone="itce-eur" ng-show="portefeuilleCtrl.estHabiliteBlocRentabilite">\r\n            <div class="col-md-12" mw-chargement="portefeuilleCtrl.chargementRentabEnCours">\r\n                <div class="col-md-12 mw-bloc-contenu" ng-if="!portefeuilleCtrl.isInitRentab">\r\n                    <span ng-bind="portefeuilleCtrl.messageInitRentab"></span>\r\n                </div>\r\n                <div class="bloc-wrap-stretch" ng-if="portefeuilleCtrl.isInitRentab">\r\n                    <div class="container-badge" ng-class="{\'col-md-12\': portefeuilleCtrl.estVueMultiSuiviPar, \'col-md-6\': !portefeuilleCtrl.estVueMultiSuiviPar}">\r\n                        <div class="bloc-graphique height-100-pourcent bas-du-bloc">\r\n                            <div class="bloc-en-tete">\r\n                                <p class="titre">PNB (IPADE)</p>\r\n                                <mw-pf-indicateur-fleche id="indicateur-fleche-pnb" class="margin-left-auto" config="portefeuilleCtrl.configFlecheRentabilite"></mw-pf-indicateur-fleche>\r\n                            </div>\r\n                            <mw-pf-diagramme-colonne id="colonne-rent" svg-id="\'svg-colonne-rent\'" config="portefeuilleCtrl.configDiagrammeColonneRentabilite"></mw-pf-diagramme-colonne>\r\n                            <div class="bloc-legende bloc-pnb">\r\n                                <mw-pf-puce-legende ng-repeat="config in portefeuilleCtrl.configDiagrammeColonneRentabilite track by $index" class="legende legende-pnb" ng-attr-id="puce-{{$index}}" intitule="{{config.intitule}}" couleur="{{config.couleur}}" affichage-puce-legende-actif="true"></mw-pf-puce-legende>\r\n                            </div>\r\n                            <div class="text-align-right align-bas-droite">\r\n                                <span class="margin-right-1-rem">\r\n                                    <a role="button" id="action-details-rentabilite-pnb" href="javascript:;" ng-click="portefeuilleCtrl.debrancherVersDetailsRentabilitePNB()" ng-show="portefeuilleCtrl.estVueMultiSuiviPar">\r\n                                        Voir détails\r\n                                    </a>\r\n                                </span>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                    <div class="col-md-6 container-badge" ng-if="!portefeuilleCtrl.estVueMultiSuiviPar">\r\n                        <div class="bloc-graphique height-100-pourcent">\r\n                            <div class="bloc-en-tete">\r\n                                <p class="titre" ng-bind="portefeuilleCtrl.configPourcentageRentabilite.titre"></p>\r\n                            </div>\r\n                            <div class="conteneur-pourcentage" ng-if="!portefeuilleCtrl.afficheErreurPoidsPNB">\r\n                                <mw-percent-display id="pourcentage-rentabilite" percent="{{::portefeuilleCtrl.configPourcentageRentabilite.pourcentageUn}}" font-size-percent="70">\r\n                                </mw-percent-display>\r\n                            </div>\r\n                            <div class="text-center" ng-if="portefeuilleCtrl.afficheErreurPoidsPNB">\r\n                                <p>\r\n                                    <span class="icon itce-warning" aria-hidden="true">\r\n                                    </span> Calcul non pertinent, PNB total négatif\r\n                                </p>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </mw-pf-panel-niveau-2>\r\n        <!-- Panel Revue Portefeuille -->\r\n        <mw-pf-panel-niveau-2 id="panel-revue-portefeuille" class="panel-revue-portefeuille col-md-4 col-sm-12 content-mw-pf-panel-niveau-2" titre="Revue Portefeuille" icone="itce-pencil" ng-show="portefeuilleCtrl.estHabiliteBlocRevue" config-bouton="portefeuilleCtrl.configBoutonAccederRevuePortefeuille">\r\n            <div class="col-md-12" mw-chargement="portefeuilleCtrl.chargementRevuePtfEnCours">\r\n                <div class="col-md-12 mw-bloc-contenu" ng-if="!portefeuilleCtrl.isInitRevuePtf">\r\n                    <span ng-bind="portefeuilleCtrl.messageInitRevuePtf"></span>\r\n                </div>\r\n                <div ng-if="portefeuilleCtrl.isInitRevuePtf">\r\n                    <div class="col-md-12 container-badge">\r\n                        <mw-pf-indicateur-badge id="indicateur-badge-nb-produits-a-equiper" intitule="portefeuilleCtrl.dataIndicateurNbProduitsAEquiper.intitule" debranchement-lisa="portefeuilleCtrl.dataIndicateurNbProduitsAEquiper.debranchementLisa" debranchement-local="portefeuilleCtrl.dataIndicateurNbProduitsAEquiper.debranchementLocal" show-zero="false" valeur="portefeuilleCtrl.dataIndicateurNbProduitsAEquiper.valeur | number"></mw-pf-indicateur-badge>\r\n                        <mw-pf-indicateur-badge id="indicateur-badge-nb-produits-appetences" ng-show="portefeuilleCtrl.afficheAppetencesProduits" intitule="portefeuilleCtrl.dataIndicateurNbProduitsAppetence.intitule" show-zero="false" debranchement-lisa="portefeuilleCtrl.dataIndicateurNbProduitsAppetence.debranchementLisa" debranchement-local="portefeuilleCtrl.dataIndicateurNbProduitsAppetence.debranchementLocal" valeur="portefeuilleCtrl.dataIndicateurNbProduitsAppetence.valeur | number"></mw-pf-indicateur-badge>\r\n                        <mw-pf-indicateur-badge id="indicateur-badge-nb-affaires-en-cours" ng-show="portefeuilleCtrl.estHabiliteConsultAffaires" intitule="portefeuilleCtrl.dataIndicateurNbAffairesEnCours.intitule" debranchement-lisa="portefeuilleCtrl.dataIndicateurNbAffairesEnCours.debranchementLisa" debranchement-local="portefeuilleCtrl.dataIndicateurNbAffairesEnCours.debranchementLocal" show-zero="true" valeur="portefeuilleCtrl.dataIndicateurNbAffairesEnCours.valeur | number"></mw-pf-indicateur-badge>\r\n                        <mw-pf-indicateur-badge id="indicateur-badge-nb-proposition-en-cours" ng-show="portefeuilleCtrl.estHabiliteConsultPropositions" intitule="portefeuilleCtrl.dataIndicateurNbPropositionsEnCours.intitule" debranchement-lisa="portefeuilleCtrl.dataIndicateurNbPropositionsEnCours.debranchementLisa" debranchement-local="portefeuilleCtrl.dataIndicateurNbPropositionsEnCours.debranchementLocal" show-zero="true" valeur="portefeuilleCtrl.dataIndicateurNbPropositionsEnCours.valeur | number"></mw-pf-indicateur-badge>\r\n                        <mw-pf-indicateur-badge id="indicateur-badge-nb-clients-a-activer" intitule="portefeuilleCtrl.dataIndicateurNbClientsAActiver.intitule" debranchement-lisa="portefeuilleCtrl.dataIndicateurNbClientsAActiver.debranchementLisa" show-zero="false" valeur="portefeuilleCtrl.dataIndicateurNbClientsAActiver.valeur | number"></mw-pf-indicateur-badge>\r\n                        <mw-pf-indicateur-badge id="indicateur-badge-nb-clients-a-renegocier" intitule="portefeuilleCtrl.dataIndicateurNbClientsARenegocier.intitule" debranchement-lisa="portefeuilleCtrl.dataIndicateurNbClientsARenegocier.debranchementLisa" show-zero="false" valeur="portefeuilleCtrl.dataIndicateurNbClientsARenegocier.valeur | number"></mw-pf-indicateur-badge>\r\n\r\n\r\n\r\n\r\n                    </div>\r\n                    <div class="col-md-12 container-badge">\r\n                        <div class="bloc-graphique height-100-pourcent text-align-right">\r\n                            <div class="bloc-en-tete">\r\n                                <p class="titre" ng-bind="portefeuilleCtrl.configPourcentagePortefeuilleRealise.titre"></p>\r\n                            </div>\r\n                            <div class="conteneur-pourcentage">\r\n                                <mw-percent-display id="pourcentage-portefeuille-realise" percent="{{portefeuilleCtrl.configPourcentagePortefeuilleRealise.pourcentageUn}}" font-size-percent="70">\r\n                                </mw-percent-display>\r\n                            </div>\r\n                            <span class="margin-right-1-rem">\r\n                                <a role="button" id="action-details-revue-portefeuille" href="javascript:;" ng-click="portefeuilleCtrl.debrancherVersDetailsRevuePortfeuille()" ng-show="portefeuilleCtrl.estVueMultiSuiviPar">\r\n                                    Voir détails\r\n                                </a>\r\n                            </span>\r\n                        </div>\r\n                    </div>\r\n\r\n                </div>\r\n            </div>\r\n        </mw-pf-panel-niveau-2>\r\n        <!-- Panel Flux -->\r\n        <mw-pf-panel-niveau-2 id="panel-flux" class="panel-flux col-md-8 col-sm-12 content-mw-pf-panel-niveau-2" titre="Flux commerciaux" icone="itce-eur" ng-show="portefeuilleCtrl.estActifBlocFlux">\r\n            <div class="col-md-12" mw-chargement="portefeuilleCtrl.chargementFluxEnCours">\r\n\r\n                <div class="col-md-12 mw-bloc-contenu" ng-if="!portefeuilleCtrl.isInitFlux">\r\n                    <span ng-bind="portefeuilleCtrl.messageInitFlux"></span>\r\n                </div>\r\n\r\n                <div class="bloc-wrap-stretch" ng-if="portefeuilleCtrl.isInitFlux">\r\n                    <div class="col-md-6 container-badge">\r\n                        <div class="bloc-graphique height-100-pourcent bas-du-bloc text-align-right">\r\n                            <div class="bloc-en-tete">\r\n                                <p class="titre">Flux commerciaux créditeurs</p>\r\n                                <mw-pf-indicateur-fleche id="indicateur-fleche-flux-crediteurs" class="margin-left-auto" config="portefeuilleCtrl.configFlecheFluxCrediteurs"></mw-pf-indicateur-fleche>\r\n                            </div>\r\n\r\n                            <mw-pf-diagramme-colonne id="colonne-flux-crediteurs" svg-id="\'svg-colonne-flux-crediteurs\'" config="portefeuilleCtrl.configDiagrammeColonneFluxCrediteurs"></mw-pf-diagramme-colonne>\r\n                            <div class="bloc-legende bloc-flux">\r\n                                <mw-pf-puce-legende ng-repeat="configFluxCrediteurs in portefeuilleCtrl.configDiagrammeColonneFluxCrediteurs track by $index" class="legende legende-flux" ng-attr-id="puce-{{$index}}-crediteurs" intitule="{{configFluxCrediteurs.intitule}}" couleur="{{configFluxCrediteurs.couleur}}" affichage-puce-legende-actif="true"></mw-pf-puce-legende>\r\n                            </div>\r\n                            <span class="margin-right-1-rem">\r\n                                <a role="button" id="action-details-flux-crediteur" href="javascript:;" ng-click="portefeuilleCtrl.debrancherVersDetailsFluxCrediteur()" ng-show="portefeuilleCtrl.estVueMultiSuiviPar">\r\n                                    Voir détails\r\n                                </a>\r\n                            </span>\r\n\r\n                        </div>\r\n                    </div>\r\n\r\n                    <div class="col-md-6 container-badge">\r\n                        <div class="bloc-graphique height-100-pourcent bas-du-bloc text-align-right">\r\n                            <div class="bloc-en-tete">\r\n                                <p class="titre">Flux commerciaux débiteurs</p>\r\n                                <mw-pf-indicateur-fleche id="indicateur-fleche-flux-debiteurs" class="margin-left-auto" config="portefeuilleCtrl.configFlecheFluxDebiteurs"></mw-pf-indicateur-fleche>\r\n                            </div>\r\n\r\n                            <mw-pf-diagramme-colonne id="colonne-flux-debiteurs" svg-id="\'svg-colonne-flux-debiteurs\'" config="portefeuilleCtrl.configDiagrammeColonneFluxDebiteurs"></mw-pf-diagramme-colonne>\r\n                            <div class="bloc-legende bloc-flux">\r\n                                <mw-pf-puce-legende ng-repeat="configFluxDebiteurs in portefeuilleCtrl.configDiagrammeColonneFluxDebiteurs track by $index" class="legende legende-flux" ng-attr-id="puce-{{$index}}-debiteurs" intitule="{{configFluxDebiteurs.intitule}}" couleur="{{configFluxDebiteurs.couleur}}" affichage-puce-legende-actif="true"></mw-pf-puce-legende>\r\n                            </div>\r\n                            <span class="margin-right-1-rem">\r\n                                <a role="button" id="action-details-flux-debiteur" href="javascript:;" ng-click="portefeuilleCtrl.debrancherVersDetailsFluxDebiteur()" ng-show="portefeuilleCtrl.estVueMultiSuiviPar">\r\n                                    Voir détails\r\n                                </a>\r\n                            </span>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </mw-pf-panel-niveau-2>\r\n    </div>\r\n</section>\r\n<footer class="row mw-footer-fixed-bottom">\r\n    <div class="overlay-footer" ng-class="{\'display-block\':(indexCtrl.ouvertureVoletChoixPortefeuille)}">\r\n    </div>\r\n    <div class="col-md-12">\r\n        <div class="col-md-2" ng-show="indexCtrl.estHabiliteChoixAgent">\r\n            <button class="btn btn-block btn-default mw-troncature" aria-label="Changer d\'agent" ng-click="indexCtrl.afficherPopupChoixAgent()" id="bouton-changer-agent">\r\n                Changer d\'agent\r\n            </button>\r\n        </div>\r\n        <div class="col-md-2" ng-show="indexCtrl.estHabiliteChoixEDS">\r\n            <button class="btn btn-block btn-default mw-troncature" aria-label="Choisir EDS" ng-click="indexCtrl.afficherPopupChoixEds()" id="bouton-choix-eds">\r\n                Choisir l\'EDS\r\n            </button>\r\n        </div>\r\n    </div>\r\n</footer>'),
e.put("vues/saisie-revue-vue.html","<p>Vue Saisie Revue</p>"),e.put("vues/selection-indicateurs-vue.html",'<!-- Contenu de la page -->\r\n<section class="container-fluid" id="contenu">\r\n    <div id="modale-panier-body" class="modale-panier-body modal-body">\r\n        <div class="col-md-12">\r\n            <div class="col-md-12 selection-indicateurs">\r\n                <form class="form-horizontal" role="form" name="selectionIndicateursCtrl.myForm" novalidate>\r\n                    <div ng-if="!selectionIndicateursCtrl.estEnEditionPanier">\r\n                        <div class="col-md-8 form-group">\r\n                            <label class="col-md-4 control-label" for="choix-selection">Liste des sélections d\'indicateurs</label>\r\n                            <div class="form-group has-feedback">\r\n                                <div class="col-md-7" ng-class="{\'has-error\': selectionIndicateursCtrl.erreurSelection}">\r\n                                    <input type="text" mw-clear-button id="choix-selection" class="form-control" name="choix-panier" ng-model="selectionIndicateursCtrl.panierEnCours" placeholder="Séléctionner un panier" mw-combobox="panier as panier.nom for panier in selectionIndicateursCtrl.listePaniers" mw-combobox-on-select="selectionIndicateursCtrl.changePanier($item)">\r\n                                    <span class="error-msg col-md-12" ng-class="{\'hide-a11y\' : !selectionIndicateursCtrl.erreurSelection }" aria-hidden="{{!selectionIndicateursCtrl.erreurSelection}}" ng-attr-role="selectionIndicateursCtrl.getRoleIndicateurNom()">Veuillez sélectionner une sélection</span>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                        <div class="col-md-3">\r\n                            <button class="btn btn-block btn-default mw-troncature" aria-label="Gérer la sélection" ng-click="selectionIndicateursCtrl.gererSelection()" id="bouton-gerer" tooltip-id="tooltip-bouton-gerer-selection" aria-describedby="tooltip-bouton-gerer-selection" tooltip-trigger="focus blur mouseenter mouseleave" tooltip-placement="bottom" tooltip="Ce bouton permet d\'ajouter, supprimer, ordonner les indicateurs et de modifier le nom de la sélection.">\r\n                                Gérer la sélection\r\n                            </button>\r\n                        </div>\r\n                    </div>\r\n                    <div ng-if="selectionIndicateursCtrl.estEnEditionPanier">\r\n                        <div class="form-group has-feedback col-md-8">\r\n                            <label class="col-md-4 control-label" for="id-nom">Nom de la sélection</label>\r\n                            <div class="col-md-7" ng-class="{\'has-error\': !selectionIndicateursCtrl.estFormulaireValide() || selectionIndicateursCtrl.estNomAChanger()}">\r\n                                <input type="text" mw-clear-button required placeholder="" id="id-nom" class="form-control" name="nom" ng-model="selectionIndicateursCtrl.panierEnCours.nom" maxlength="32">\r\n                                <span class="error-msg col-md-12" ng-if="!selectionIndicateursCtrl.estFormulaireValide()" ng-bind="selectionIndicateursCtrl.messageErreurNomSelection"></span>\r\n                            </div>\r\n                        </div>\r\n                        <div class="col-md-2 pull-right">\r\n                            <button class="btn btn-block btn-primary mw-troncature" aria-label="Enregistrer la sélection" ng-click="selectionIndicateursCtrl.enregistrerSelection()" id="bouton-enregistrer" ng-disabled="!selectionIndicateursCtrl.estFormulaireValide()">\r\n                                <span>Enregistrer la sélection</span>\r\n                            </button>\r\n                        </div>\r\n                        <div class="col-md-2 pull-right">\r\n                            <button class="btn btn-block btn-default mw-troncature" aria-label="Annuler la modification de la sélection" ng-click="selectionIndicateursCtrl.annulerModifSelection()" id="bouton-annuler">\r\n                                <span>Annuler</span>\r\n                            </button>\r\n                        </div>\r\n                    </div>\r\n                </form>\r\n                <div class="col-md-12 no-padding-left">\r\n                    <p class="col-md-3 label-nb-indicateur"><span class="label-nb-indicateur" ng-bind="selectionIndicateursCtrl.getEtatNbIndicateurs()"></span></p>\r\n                </div>\r\n                <div class="row drop-content-panier-global pf-drop-target-element" mw-pf-core-drop-target drop-settings="selectionIndicateursCtrl.panierDropSettings" ng-show="selectionIndicateursCtrl.panierEnCours" mw-chargement="selectionIndicateursCtrl.chargementEnCours" ng-if="selectionIndicateursCtrl.panierDropSettings">\r\n                    <ul class="nav col-md-12 no-padding-left no-padding-right">\r\n                        <mw-pf-tuile-panier ng-repeat="tuilePanierSettings in selectionIndicateursCtrl.listeTuilePanierSettings track by tuilePanierSettings.id" tuile-panier-settings="tuilePanierSettings" liste-tuile-catalogue-settings="selectionIndicateursCtrl.listeTuileCatalogueSettings" liste-tuile-panier-settings="selectionIndicateursCtrl.listeTuilePanierSettings" liste-filtres-clients="selectionIndicateursCtrl.listeFiltresClients" liste-filtres-relation-eco="selectionIndicateursCtrl.listeFiltresRelationEco" ng-attr-id="pf-tuile-panier-{{$index}}"></mw-pf-tuile-panier>\r\n                        <li class="bloc-content-panier" ng-if="selectionIndicateursCtrl.afficherTuileEmplacementVide()">\r\n                            <div class="drop-content-panier pf-drop-target-element"></div>\r\n                        </li>\r\n                    </ul>\r\n                </div>\r\n            </div>\r\n        </div>\r\n        <div mw-chargement="selectionIndicateursCtrl.chargementEnCours">\r\n            <mw-panel niveau="2" titre="Liste des indicateurs" id="panel-catalogue-indicateur" ng-show="selectionIndicateursCtrl.panierEnCours">\r\n                <div class="row drop-content-poubelle pf-drop-target-element" mw-pf-core-drop-target drop-settings="selectionIndicateursCtrl.poubelleDropSettings" ng-if="selectionIndicateursCtrl.poubelleDropSettings">\r\n                    <ul class="nav col-md-12">\r\n                        <mw-pf-tuile-catalogue ng-hide="tuileCatalogueSettings.indicateur.choisi" ng-repeat="tuileCatalogueSettings in selectionIndicateursCtrl.listeTuileCatalogueSettings track by tuileCatalogueSettings.id" mw-combobox-select-on-exact="true" tuile-catalogue-settings="tuileCatalogueSettings" liste-tuile-catalogue-settings="selectionIndicateursCtrl.listeTuileCatalogueSettings" liste-tuile-panier-settings="selectionIndicateursCtrl.listeTuilePanierSettings" liste-filtres-clients="selectionIndicateursCtrl.listeFiltresClients" liste-filtres-relation-eco="selectionIndicateursCtrl.listeFiltresRelationEco" ng-attr-id="pf-tuile-catalogue-{{$index}}"></mw-pf-tuile-catalogue>\r\n                    </ul>\r\n                </div>\r\n            </mw-panel>\r\n        </div>\r\n    </div>\r\n</section>\r\n<footer class="row mw-footer-fixed-bottom">\r\n    <div class="overlay-footer" ng-class="{\'display-block\':(indexCtrl.ouvertureVoletChoixPortefeuille)}"></div>\r\n    <div class="col-md-12">\r\n        <div class="col-md-2 pull-right">\r\n            <button class="btn btn-block btn-primary mw-troncature" aria-label="Appliquer" ng-click="selectionIndicateursCtrl.appliquer()" id="bouton-appliquer" ng-disabled="selectionIndicateursCtrl.estEnEditionPanier">\r\n                <span>Appliquer la sélection</span>\r\n            </button>\r\n        </div>\r\n        <div class="col-md-2">\r\n            <button class="btn btn-block btn-default mw-troncature" aria-label="Annuler" ng-click="selectionIndicateursCtrl.retour()" id="bouton-retour" ng-disabled="selectionIndicateursCtrl.estEnEditionPanier">\r\n                <span class="icon itce-chevron-left" aria-hidden="true"></span>\r\n                <span>Retour</span>\r\n            </button>\r\n        </div>\r\n    </div>\r\n</footer>'),e.put("vues/template-modale/modale-avertissement-choix-portefeuille-vue.html",'<div class="modal-header">\r\n    <button type="button" id="bouton-modale-fermer" ng-click="popupCtrl.fermer()" class="close">\r\n        <span class="icon itce-times" aria-hidden="true"></span>\r\n        <span class="adobe-blank">Fermer la modale</span>\r\n    </button>\r\n    <h1 class="modal-title">\r\n        <span>Total clients / prospects de votre choix &gt; <span ng-bind="popupCtrl.nbMaxPortefeuilles"></span></span>\r\n    </h1>\r\n</div>\r\n<div class="modal-body row" id="mw-modal-corps" role="document">\r\n    <div class="col-md-12 message-modale-gros-volume">\r\n        <strong>Détail de votre sélection :</strong>\r\n        <div class="col-md-12">\r\n            <article ng-repeat="ptf in popupCtrl.listePortefeuilles track by $index">\r\n                <span ng-bind="ptf.libelle + \' - \' + ptf.id + \' : \'"></span>\r\n                <strong><span ng-bind="ptf.nombreTotalClients"></span></strong>\r\n                <span> clients (y compris sans contrat) / </span>\r\n                <strong><span ng-bind="ptf.nombreTotalProspectsTiers"></span></strong>\r\n                <span> prospects</span>\r\n                <br>\r\n            </article>\r\n        </div>\r\n    </div>\r\n    <!--<div class="col-md-12 message-modale-gros-volume" ng-show="popupCtrl.listeMessageAction.length > 0">\r\n        <strong>Vous pouvez :</strong>\r\n        <div class="col-md-12">\r\n            <article ng-repeat="mess in popupCtrl.listeMessageAction track by $index">\r\n                <span ng-bind="mess"></span>\r\n            </article>\r\n        </div>\r\n    </div>-->\r\n</div>\r\n\r\n<div class="modal-footer modal-footer-custom">\r\n    <div class="col-md-4 pull-right" ng-show="popupCtrl.estEnMultiPortefeuille">\r\n        <button type="button" id="bouton-modale-nouvelle-selection" class="btn btn-primary" ng-click="popupCtrl.nouvelleSelection()">Nouvelle SELECTION</button>\r\n    </div>\r\n    <div class="col-md-4 pull-right" ng-hide="popupCtrl.estEnMultiPortefeuille">\r\n        <button type="button" id="bouton-modale-afficher" class="btn btn-primary" ng-click="popupCtrl.afficherTout()">Afficher TOUT</button>\r\n    </div>\r\n    <div class="col-md-4 pull-right" ng-show="popupCtrl.estAfficherBtnClients">\r\n        <button type="button" id="bouton-modale-afficher-clients" class="btn btn-zone" ng-click="popupCtrl.afficherClients()">Afficher CLIENTS</button>\r\n    </div>\r\n    <div class="col-md-4 pull-right" ng-show="popupCtrl.estAfficherBtnProspects">\r\n        <button type="button" id="bouton-modale-afficher-prospects" class="btn btn-zone" ng-click="popupCtrl.afficherProspects()">Afficher PROSPECTS</button>\r\n    </div>\r\n</div>'),e.put("vues/template-modale/modale-choix-eds-vue.html",'<div class="modal-header">\r\n    <button type="button" id="bouton-modale-fermer" ng-click="popupCtrl.fermer()" class="close">\r\n        <span class="icon itce-times" aria-hidden="true"></span>\r\n        <span class="adobe-blank">Fermer la modale</span>\r\n    </button>\r\n    <h1 class="modal-title" ng-bind="popupCtrl.titre">Changer d\'agent</h1>\r\n</div>\r\n\r\n<div class="modal-body texte-gros row" role="document">\r\n    <form class="form-horizontal" role="form">\r\n        <div class="form-group">\r\n            <label class="col-md-3 control-label" for="recherche-agent">Rechercher agent</label>\r\n            <div class="col-sm-12 col-md-8">\r\n                <mwsf-saisie-agent id="recherche-agent" ng-model="popupCtrl.agentChoisi" on-select="popupCtrl.changeAgent(selectedItem)" required="false" code-action="1">\r\n                </mwsf-saisie-agent>\r\n            </div>\r\n        </div>\r\n        <div class="form-group" ng-if="popupCtrl.estVueEDS">\r\n            <label class="col-md-3 control-label" for="choix-agence">EDS de rattachement</label>\r\n            <div class="col-sm-12 col-md-8" mw-chargement="popupCtrl.chargementAgences" ng-show="popupCtrl.afficheListeEdsRattachement">\r\n                <input type="text" mw-clear-button required id="choix-agence" class="form-control" name="choix-agence" ng-model="popupCtrl.agenceChoisi" placeholder="Sélectionner EDS de rattachement" mw-combobox="agence as agence.nomEds for agence in popupCtrl.listeAgences" mw-combobox-on-select="popupCtrl.changementAgence(popupCtrl.agenceChoisi, null)">\r\n            </div>\r\n            <div class="col-sm-12 col-md-8 libelle-eds" mw-chargement="popupCtrl.chargementAgences" ng-show="popupCtrl.afficheLibelleEdsRattachement">\r\n                <span>\r\n                    <strong ng-bind="popupCtrl.nomEdsRattachement"></strong>\r\n                </span>\r\n            </div>\r\n        </div>\r\n\r\n        <div class="form-group" ng-if="popupCtrl.estVueEDS">\r\n            <label class="col-md-3 control-label" for="agence-selection">EDS sélectionné</label>\r\n            <input id="agence-selection" required hidden>\r\n            <div class="col-sm-12 col-md-8 libelle-eds">\r\n                <span>\r\n                    <strong ng-bind="popupCtrl.nomEdsSelectionne"></strong>\r\n                </span>\r\n            </div>\r\n        </div>\r\n        <mw-panel niveau="1" titre="" id="groupe" header-sticky="body" css-panel="" ng-if="popupCtrl.estVueEDS">\r\n            <div class="col-md-12 mw-bloc-contenu bloc-eds">\r\n                <section ng-style="{\'margin-bottom\':\'2em\', \'margin-left\':\'2em\'}">\r\n                    <span class="icon itce-information-circle" aria-hidden="true">\r\n                    </span>\r\n                    <span>Choisir l\'EDS auquel sont rattachés les portefeuilles à agréger.</span>\r\n                </section>\r\n                <div class="form-group" ng-if="popupCtrl.afficheBlocEds">\r\n                    <mw-pf-element-eds id="root" eds="popupCtrl.agenceChoisi">\r\n                        <div class="entree-eds">\r\n                            <a class="lien-eds" ng-class="{\'eds-est-vide\': popupCtrl.estVide}" ng-attr-id="\'liens-\'+popupCtrl.eds.id" ng-click="popupCtrl.ouvrir()" href="javascript:;">\r\n                                <span class="icon chevron-eds" aria-hidden="true" ng-class="{\'itce-chevron-right\': popupCtrl.estfermer, \'itce-chevron-down\': popupCtrl.estOuvert}">\r\n                                </span>\r\n                            </a>\r\n                            <a class="lien-eds" ng-attr-id="\'liens-select-\'+popupCtrl.eds.id" ng-click="popupCtrl.selectionnerEDS()" href="javascript:;">\r\n                                <div class="entree-eds">\r\n                                    <div ng-class="{\'check-eds\': popupCtrl.estCoche, \'no-check-eds\': !popupCtrl.estCoche}"></div>\r\n                                    <span ng-style="{\'color\':\'black\'}" ng-bind="popupCtrl.nomEds"></span>\r\n                                </div>\r\n                            </a>\r\n                        </div>\r\n                    </mw-pf-element-eds>\r\n                </div>\r\n            </div>\r\n        </mw-panel>\r\n    </form>\r\n</div>\r\n\r\n<div class="modal-footer modal-footer-custom col-md-12 col-lg-12">\r\n    <div ng-class="{\'col-md-2\': popupCtrl.estVueEDS, \'col-lg-2\': popupCtrl.estVueEDS, \'col-md-6\': !popupCtrl.estVueEDS, \'col-lg-6\': !popupCtrl.estVueEDS}">\r\n        <button type="button" id="bouton-modale-annuler-eds" class="btn btn-default" ng-click="popupCtrl.fermer()">\r\n            Annuler\r\n        </button>\r\n    </div>\r\n    <div ng-class="{\'col-md-2\': popupCtrl.estVueEDS, \'col-lg-2\': popupCtrl.estVueEDS, \'col-md-6\': !popupCtrl.estVueEDS, \'col-lg-6\': !popupCtrl.estVueEDS}">\r\n        <button type="button" id="bouton-modale-valider-eds" class="btn btn-primary" ng-click="popupCtrl.valider()" ng-disabled="!popupCtrl.estChoisiEDSvalide">\r\n            Valider\r\n        </button>\r\n    </div>\r\n</div>'),e.put("vues/template-modale/modale-clients-activer-vue.html",'<div class="modal-header">\r\n    <button type="button" id="bouton-modale-fermer" ng-click="popupCtrl.fermer()" class="close">\r\n        <span class="icon itce-times" aria-hidden="true"></span>\r\n        <span class="adobe-blank">Fermer la modale</span>\r\n    </button>\r\n    <h1 class="modal-title" ng-bind="popupCtrl.titreModale"></h1>\r\n</div>\r\n\r\n<div id="modale-panier-body" class="modale-panier-body modal-body texte-gros row" role="document" mw-chargement="popupCtrl.chargementEnCours">\r\n    <div class="panel panel-primary col-md-12">\r\n        <mw-table options="popupCtrl.tableauRaisonsSociales" id="tableau-raisons-sociales"></mw-table>\r\n    </div>\r\n</div>'),e.put("vues/template-modale/modale-details-flux-crediteur-vue.html",'<!-- Header -->\r\n<div class="modal-header">\r\n    <button type="button" id="bouton-modale-fermer" ng-click="popupCtrl.fermer()" class="close">\r\n        <span class="icon itce-times" aria-hidden="true"></span>\r\n        <span class="adobe-blank">Fermer la modale</span>\r\n    </button>\r\n    <h1 class="modal-title" ng-bind="popupCtrl.titreModale"></h1>\r\n</div>\r\n\r\n<!-- Body -->\r\n<div id="modale-panier-body" class="modale-panier-body modal-body texte-gros row" ng-style="{\'padding\': \'0\'}" role="document" mw-chargement="popupCtrl.chargementEnCours">\r\n    <div class="panel panel-primary panel-detail col-md-12" ng-style="{\'padding\': \'0\', \'margin\' : \'0\'}">\r\n        <div class="bloc-graphique bas-du-bloc" ng-style="{\'text-align\':\'right\', \'overflow\': \'auto\'}">\r\n            <mw-pf-diagramme-multi-colonne id="colonne-detail-flux-crediteur" config="popupCtrl.configDiagrammeColonneFluxCrediteur">\r\n            </mw-pf-diagramme-multi-colonne>\r\n        </div>\r\n    </div>\r\n</div>\r\n\r\n<!-- footer -->\r\n<div class="modal-footer modal-footer-custom">\r\n    <div class="bloc-legende">\r\n\r\n        <div class="bloc-legende" ng-style="{\'width\': \'33%\'}">\r\n            <mw-pf-puce-legende class="legende" ng-style="{\'width\': \'100%\', \'margin\': \'0\'}" ng-attr-id="puce-diagramme-bar1" intitule="{{popupCtrl.legendeColonne1}}" couleur="{{popupCtrl.couleurColonne1}}">\r\n            </mw-pf-puce-legende>\r\n            <mw-pf-puce-legende class="legende" ng-style="{\'width\': \'100%\', \'margin\': \'0\'}" ng-attr-id="puce-diagramme-bar2" intitule="{{popupCtrl.legendeColonne2}}" couleur="{{popupCtrl.couleurColonne2}}">\r\n            </mw-pf-puce-legende>\r\n        </div>\r\n        <div class="bloc-legende" ng-style="{\'width\': \'33%\'}">\r\n            <div class="pf-puce-legende" ng-style="{\'width\': \'100%\', \'margin\': \'0\'}">\r\n                &nbsp;\r\n                <span class="intitule" ng-bind="popupCtrl.libelle1Total"></span>\r\n            </div>\r\n            <div class="pf-puce-legende" ng-style="{\'width\': \'100%\', \'margin\': \'0\'}">\r\n                &nbsp;\r\n                <span class="intitule" ng-bind="popupCtrl.libelle2Total"></span>\r\n            </div>\r\n        </div>\r\n        <div class="bloc-legende" ng-style="{\'width\': \'33%\'}">\r\n            <div class="pf-puce-legende">\r\n                &nbsp;\r\n                <mw-pf-indicateur-fleche id="indicateur-fleche-pnb" class="margin-left-auto" ng-style="{\'margin-top\': \'20%\'}" config="popupCtrl.configTendenceFluxCrediteurTotal">\r\n                </mw-pf-indicateur-fleche>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</div>\r\n'),e.put("vues/template-modale/modale-details-flux-debiteur-vue.html",'<!-- Header -->\r\n<div class="modal-header">\r\n    <button type="button" id="bouton-modale-fermer" ng-click="popupCtrl.fermer()" class="close">\r\n        <span class="icon itce-times" aria-hidden="true"></span>\r\n        <span class="adobe-blank">Fermer la modale</span>\r\n    </button>\r\n    <h1 class="modal-title" ng-bind="popupCtrl.titreModale"></h1>\r\n</div>\r\n\r\n<!-- Body -->\r\n<div id="modale-panier-body" class="modale-panier-body modal-body texte-gros row" ng-style="{\'padding\': \'0\'}" role="document" mw-chargement="popupCtrl.chargementEnCours">\r\n    <div class="panel panel-primary panel-detail col-md-12" ng-style="{\'padding\': \'0\', \'margin\' : \'0\'}">\r\n        <div class="bloc-graphique bas-du-bloc" ng-style="{\'text-align\':\'right\', \'overflow\': \'auto\'}">\r\n            <mw-pf-diagramme-multi-colonne id="colonne-detail-flux-debiteur" config="popupCtrl.configDiagrammeColonneFluxDebiteur">\r\n            </mw-pf-diagramme-multi-colonne>\r\n        </div>\r\n    </div>\r\n</div>\r\n\r\n<!-- footer -->\r\n<div class="modal-footer modal-footer-custom">\r\n    <div class="bloc-legende">\r\n\r\n        <div class="bloc-legende" ng-style="{\'width\': \'33%\'}">\r\n            <mw-pf-puce-legende class="legende" ng-style="{\'width\': \'100%\', \'margin\': \'0\'}" ng-attr-id="puce-diagramme-bar1" intitule="{{popupCtrl.legendeColonne1}}" couleur="{{popupCtrl.couleurColonne1}}">\r\n            </mw-pf-puce-legende>\r\n            <mw-pf-puce-legende class="legende" ng-style="{\'width\': \'100%\', \'margin\': \'0\'}" ng-attr-id="puce-diagramme-bar2" intitule="{{popupCtrl.legendeColonne2}}" couleur="{{popupCtrl.couleurColonne2}}">\r\n            </mw-pf-puce-legende>\r\n        </div>\r\n        <div class="bloc-legende" ng-style="{\'width\': \'33%\'}">\r\n            <div class="pf-puce-legende" ng-style="{\'width\': \'100%\', \'margin\': \'0\'}">\r\n                &nbsp;\r\n                <span class="intitule" ng-bind="popupCtrl.libelle1Total"></span>\r\n            </div>\r\n            <div class="pf-puce-legende" ng-style="{\'width\': \'100%\', \'margin\': \'0\'}">\r\n                &nbsp;\r\n                <span class="intitule" ng-bind="popupCtrl.libelle2Total"></span>\r\n            </div>\r\n        </div>\r\n        <div class="bloc-legende" ng-style="{\'width\': \'33%\'}">\r\n            <div class="pf-puce-legende">\r\n                &nbsp;\r\n                <mw-pf-indicateur-fleche id="indicateur-fleche-pnb" class="margin-left-auto" ng-style="{\'margin-top\': \'20%\'}" config="popupCtrl.configTendenceFluxDebiteurTotal">\r\n                </mw-pf-indicateur-fleche>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</div>\r\n'),e.put("vues/template-modale/modale-details-portefeuille-vue.html",'<!-- Header -->\r\n<div class="modal-header">\r\n    <button type="button" id="bouton-modale-fermer" ng-click="popupCtrl.fermer()" class="close">\r\n        <span class="icon itce-times" aria-hidden="true"></span>\r\n        <span class="adobe-blank">Fermer la modale</span>\r\n    </button>\r\n    <h1 class="modal-title" ng-bind="popupCtrl.titreModale"></h1>\r\n</div>\r\n\r\n<!-- Body -->\r\n<div id="modale-panier-body" class="modale-panier-body modal-body texte-gros row" ng-style="{\'padding\': \'0\'}" role="document" mw-chargement="popupCtrl.chargementEnCours">\r\n    <div class="panel panel-primary panel-detail col-md-12" ng-style="{\'padding\': \'0\', \'margin\' : \'0\'}">\r\n        <div class="bloc-graphique bas-du-bloc text-align-right">\r\n            <mw-pf-diagramme-colonne id="colonne-detail-ptf" svg-id="\'svg-colonne-detail-ptf\'" config="popupCtrl.configDiagrammeColonnePortefeuille" type-diagramme="popupCtrl.typeDiagramme">\r\n            </mw-pf-diagramme-colonne>\r\n        </div>\r\n    </div>\r\n</div>\r\n\r\n<!-- footer -->\r\n<div class="modal-footer modal-footer-custom">\r\n    <div class="bloc-legende">\r\n        <mw-pf-puce-legende class="legende" ng-style="{\'width\': \'30%\'}" ng-attr-id="puce-diagramme-bar1" intitule="{{popupCtrl.configDiagrammeColonnePortefeuille[0].intitule}}" couleur="{{popupCtrl.configDiagrammeColonnePortefeuille[0].couleur}}">\r\n        </mw-pf-puce-legende>\r\n        <mw-pf-puce-legende class="legende" ng-style="{\'width\': \'30%\'}" ng-attr-id="puce-diagramme-bar2" intitule="{{popupCtrl.configDiagrammeColonnePortefeuille[0].sousIntitule}}" couleur="{{popupCtrl.configDiagrammeColonnePortefeuille[0].couleurSousValeur}}">\r\n        </mw-pf-puce-legende>\r\n        <mw-pf-puce-legende class="legende" ng-style="{\'width\': \'30%\'}" ng-attr-id="puce-diagramme-bar3" intitule="{{popupCtrl.libelleTotal}}" couleur="\'#FFFFFF\'">\r\n        </mw-pf-puce-legende>\r\n    </div>\r\n</div>'),e.put("vues/template-modale/modale-details-rentabilite-pnb-vue.html",'<!-- Header -->\r\n<div class="modal-header">\r\n    <button type="button" id="bouton-modale-fermer" ng-click="popupCtrl.fermer()" class="close">\r\n        <span class="icon itce-times" aria-hidden="true"></span>\r\n        <span class="adobe-blank">Fermer la modale</span>\r\n    </button>\r\n    <h1 class="modal-title" ng-bind="popupCtrl.titreModale"></h1>\r\n</div>\r\n\r\n<!-- Body -->\r\n<div id="modale-panier-body" class="modale-panier-body modal-body texte-gros row" ng-style="{\'padding\': \'0\'}" role="document" mw-chargement="popupCtrl.chargementEnCours">\r\n    <div class="panel panel-primary panel-detail col-md-12" ng-style="{\'padding\': \'0\', \'margin\' : \'0\'}">\r\n         <div class="bloc-graphique bas-du-bloc" ng-style="{\'text-align\':\'right\', \'overflow\': \'auto\'}">\r\n             <mw-pf-diagramme-multi-colonne id="colonne-detail-pnb" config="popupCtrl.configDiagrammeColonnePnb">\r\n             </mw-pf-diagramme-multi-colonne>\r\n         </div>\r\n    </div>\r\n</div>\r\n\r\n<!-- footer -->\r\n<div class="modal-footer modal-footer-custom">\r\n    <div class="bloc-legende">\r\n\r\n        <div class="bloc-legende" ng-style="{\'width\': \'33%\'}">\r\n            <mw-pf-puce-legende class="legende" ng-style="{\'width\': \'100%\', \'margin\': \'0\'}" ng-attr-id="puce-diagramme-bar1" intitule="{{popupCtrl.legendeColonne1}}" couleur="{{popupCtrl.couleurColonne1}}">\r\n            </mw-pf-puce-legende>\r\n            <mw-pf-puce-legende class="legende" ng-style="{\'width\': \'100%\', \'margin\': \'0\'}" ng-attr-id="puce-diagramme-bar2" intitule="{{popupCtrl.legendeColonne2}}" couleur="{{popupCtrl.couleurColonne2}}">\r\n            </mw-pf-puce-legende>\r\n        </div>\r\n        <div class="bloc-legende" ng-style="{\'width\': \'33%\'}">\r\n            <div class="pf-puce-legende" ng-style="{\'width\': \'100%\', \'margin\': \'0\'}">\r\n                &nbsp;\r\n                <span class="intitule" ng-bind="popupCtrl.libelle1Total"></span>\r\n            </div>\r\n            <div class="pf-puce-legende" ng-style="{\'width\': \'100%\', \'margin\': \'0\'}">\r\n                &nbsp;\r\n                <span class="intitule" ng-bind="popupCtrl.libelle2Total"></span>\r\n            </div>\r\n        </div>\r\n        <div class="bloc-legende" ng-style="{\'width\': \'33%\'}">\r\n            <div class="pf-puce-legende">\r\n                &nbsp;\r\n                <mw-pf-indicateur-fleche id="indicateur-fleche-pnb" class="margin-left-auto" ng-style="{\'margin-top\': \'20%\'}" config="popupCtrl.configTendencePNBTotal">\r\n                </mw-pf-indicateur-fleche>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</div>\r\n'),e.put("vues/template-modale/modale-details-revue-portefeuille-vue.html",'<!-- Header -->\r\n<div class="modal-header">\r\n    <button type="button" id="bouton-modale-fermer" ng-click="popupCtrl.fermer()" class="close">\r\n        <span class="icon itce-times" aria-hidden="true"></span>\r\n        <span class="adobe-blank">Fermer la modale</span>\r\n    </button>\r\n    <h1 class="modal-title" ng-bind="popupCtrl.titreModale"></h1>\r\n</div>\r\n\r\n<!-- Body -->\r\n<div id="modale-detail-taux-visite-body" class="modale-panier-body modal-body texte-gros row" ng-style="{\'padding\': \'0\'}" role="document" mw-chargement="popupCtrl.chargementEnCours">\r\n    <div class="panel panel-primary panel-detail col-md-12" ng-style="{\'padding\': \'0\', \'margin\' : \'0\'}">\r\n        <div class="bloc-graphique height-100-pourcent">\r\n            <mw-pf-diagramme-pourcentage id="pourcentage-detail-taux-revue" config="popupCtrl.configDiagrammePourcentageTauxRevue">\r\n            </mw-pf-diagramme-pourcentage>\r\n        </div>\r\n    </div>\r\n</div>\r\n\r\n<!-- footer -->\r\n<div class="modal-footer modal-footer-custom">\r\n    <div class="bloc-legende">\r\n        <div class="pf-puce-legende">\r\n            &nbsp;\r\n            <span class="intitule">Total taux de revues :&nbsp;</span>\r\n            <span class="intitule" ng-bind="popupCtrl.pourcentageTauxTotal"></span>\r\n            <span class="intitule">%</span>\r\n        </div>\r\n    </div>\r\n</div>'),e.put("vues/template-modale/modale-details-taux-visite-vue.html",'<!-- Header -->\r\n<div class="modal-header">\r\n    <button type="button" id="bouton-modale-fermer" ng-click="popupCtrl.fermer()" class="close">\r\n        <span class="icon itce-times" aria-hidden="true"></span>\r\n        <span class="adobe-blank">Fermer la modale</span>\r\n    </button>\r\n    <h1 class="modal-title" ng-bind="popupCtrl.titreModale"></h1>\r\n</div>\r\n\r\n<!-- Body -->\r\n<div id="modale-detail-taux-visite-body" class="modale-panier-body modal-body texte-gros row" ng-style="{\'padding\': \'0\'}" role="document" mw-chargement="popupCtrl.chargementEnCours">\r\n    <div class="panel panel-primary panel-detail col-md-12" ng-style="{\'padding\': \'0\', \'margin\' : \'0\'}">\r\n        <div class="bloc-graphique height-100-pourcent">\r\n            <mw-pf-diagramme-pourcentage id="pourcentage-detail-taux-visite" config="popupCtrl.configDiagrammePourcentageTauxVisite">\r\n            </mw-pf-diagramme-pourcentage>\r\n        </div>\r\n    </div>\r\n</div>\r\n\r\n<!-- footer -->\r\n<div class="modal-footer modal-footer-custom">\r\n    <div class="bloc-legende">\r\n        <div class="pf-puce-legende">\r\n            &nbsp;\r\n            <span class="intitule">Total taux de visites :&nbsp;</span>\r\n            <span class="intitule" ng-bind="popupCtrl.pourcentageTauxTotal"></span>\r\n            <span class="intitule">%</span>\r\n        </div>\r\n    </div>\r\n</div>'),e.put("vues/template-modale/modale-filtre-vue.html",'<div class="modal-header">\r\n    <button type="button" id="bouton-modale-fermer" ng-click="popupCtrl.fermer()" class="close">\r\n        <span class="icon itce-times" aria-hidden="true"></span>\r\n        <span class="adobe-blank">Fermer la modale</span>\r\n    </button>\r\n    <h1 class="modal-title">Filtres</h1>\r\n</div>\r\n\r\n<div class="modal-body texte-gros row modal-body-select-produits" role="document" ng-keypress="popupCtrl.appuiToucheEntrer($event)">\r\n\r\n    <mw-pf-bloc-condition-filtre ng-repeat="filtre in popupCtrl.listeFiltres track by filtre.id" ng-attr-id="mw-bloc-condition-filtre-{{$index}}" liste-indicateurs="popupCtrl.listeIndicateursFiltreDisponible" liste-filtres="popupCtrl.listeFiltres" no-index="$index" filtre="filtre" afficher-operateur="$index !== 0" est-vue-client="popupCtrl.estVueClient"></mw-pf-bloc-condition-filtre>\r\n\r\n    <!-- Bouton Ajouter condition -->\r\n    <div ng-show="popupCtrl.afficherBoutonAjouter()" class="col-md-3">\r\n        <br>\r\n        <button class="btn btn-block btn-zone" id="bouton-ajouter-condition-interne" ng-click="popupCtrl.ajouterCondition(true)" ng-disabled="popupCtrl.pasDeFiltreDisponible">+ Ajouter</button>\r\n    </div>\r\n\r\n    <div class="col-md-9" ng-show="popupCtrl.pasDeFiltreDisponible">\r\n        <br>\r\n        <br>\r\n        <p>Pas de filtre disponible pour les indicateurs sélectionnés</p>\r\n    </div>\r\n\r\n</div>\r\n\r\n<div class="modal-footer modal-footer-custom">\r\n    <div class="col-lg-offset-6 col-lg-3 col-md-offset-6 col-md-3 col-sm-offset-6 col-sm-3">\r\n    </div>\r\n    <div class="col-lg-3 col-md-3 col-sm-3">\r\n        <button type="button" id="bouton-modale-valider" class="btn btn-primary" ng-click="popupCtrl.appliquer()" ng-disabled="popupCtrl.desactiverBoutonAppliquer()">Appliquer</button>\r\n    </div>\r\n</div>\r\n'),
e.put("vues/template-modale/modale-paniers-vue.html",'<div class="modal-header">\r\n    <button type="button" id="bouton-modale-fermer" ng-click="popupCtrl.fermer()" class="close">\r\n        <span class="icon itce-times" aria-hidden="true"></span>\r\n        <span class="adobe-blank">Fermer la modale</span>\r\n    </button>\r\n    <h1 class="modal-title">Personnaliser les indicateurs</h1>\r\n</div>\r\n\r\n<div id="modale-panier-body" class="modale-panier-body modal-body texte-gros row" role="document" mw-chargement="popupCtrl.chargementEnCours">\r\n    <mw-synthese-erreurs id="id-erreur-form">\r\n        <ul>\r\n            <li ng-repeat="e in popupCtrl.listeErreurs track by e.champs">\r\n                <span ng-if="e.message == \'\'">\r\n                    <a href="javascript:void(0)" ng-click="popupCtrl.goToAnchor(e.ancre)" ng-bind="e.champs" id="id-erreur" title="Libellé de l\'erreur"></a> est incorrect\r\n                </span>\r\n                <a ng-if="e.message != \'\'" href="javascript:void(0)" ng-click="popupCtrl.goToAnchor(e.ancre)" ng-bind="e.message" id="id-erreur-lien" title="Libellé de l\'erreur"></a>\r\n            </li>\r\n        </ul>\r\n    </mw-synthese-erreurs>\r\n    <div class="panel panel-primary col-md-12">\r\n        <div class="panel-body no-padding-bottom">\r\n            <div class="row">\r\n                <form class="form-horizontal" role="form" name="popupCtrl.myForm" novalidate>\r\n                    <div class="form-group">\r\n                        <div class="col-md-4">\r\n                            <input type="text" mw-clear-button id="choix-panier" class="form-control" name="choix-panier" ng-model="popupCtrl.panierEnCours" placeholder="Séléctionner un panier" mw-combobox="panier as panier.nom for panier in popupCtrl.listePaniers" mw-combobox-on-select="popupCtrl.changePanier($item)" ng-disabled="popupCtrl.estEnEditionCatalogue || !popupCtrl.estChangementPanierDisponible()">\r\n                        </div>\r\n                        <div class="col-md-8">\r\n                            <div class="form-group has-feedback">\r\n                                <label class="col-md-3 control-label" for="id-nom">Nom</label>\r\n                                <div class="col-md-9" ng-class="{\'has-error\': popupCtrl.myForm.nom.$invalid}">\r\n                                    <input type="text" mw-clear-button id="id-nom" name="nom" class="form-control" required placeholder="" ng-model="popupCtrl.panierEnCours.nom" maxlength="32">\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </form>\r\n            </div>\r\n            <div class="row" ng-show="popupCtrl.panierEnCours">\r\n                <div class="col-md-3 no-padding-left">\r\n                    <p class="col-md-12 no-padding-left label-nb-indicateur">Nombre d\'indicateurs: <span class="label-nb-indicateur" ng-bind="popupCtrl.getNombreIndicateurPanier()"></span>/6</p>\r\n                </div>\r\n                <div class="col-md-2 pull-right" ng-show="popupCtrl.estEnEditionPanier">\r\n                    <button id="bouton-mode-edition-panier-enregistrer" class="btn btn-block btn-primary" ng-click="popupCtrl.enregistrerEditionPanier()">\r\n                        Valider\r\n                    </button>\r\n                </div>\r\n                <div class="col-md-2 pull-right" ng-show="popupCtrl.estEnEditionPanier">\r\n                    <button id="bouton-mode-edition-panier-annuler" class="btn btn-block btn-zone" ng-click="popupCtrl.annulerEditionPanier()">\r\n                        Annuler\r\n                    </button>\r\n                </div>\r\n                <div class="col-md-3 pull-right" ng-show="popupCtrl.estAfficheBtnGererLaSelection()">\r\n                    <button id="bouton-mode-edition-panier" class="btn btn-block btn-contextuel" ng-click="popupCtrl.activerModeEditionPanier()">\r\n                        Gérer la sélection\r\n                    </button>\r\n                </div>\r\n                <div class="col-md-3 pull-right" ng-show="popupCtrl.estAfficheBtnSupprimerLaSelection()">\r\n                    <button id="bouton-supprimer-selection" class="btn btn-block btn-contextuel" ng-click="popupCtrl.supprimerTousLesIndicateurs()">\r\n                        Supprimer la sélection\r\n                    </button>\r\n                </div>\r\n            </div>\r\n            <div class="row drop-content-panier-global pf-drop-target-element" mw-pf-core-drop-target drop-settings="popupCtrl.panierDropSettings" ng-show="popupCtrl.panierEnCours">\r\n                <ul class="nav col-md-12 no-padding-left no-padding-right">\r\n                    <mw-pf-tuile-panier ng-repeat="tuilePanierSettings in popupCtrl.listeTuilePanierSettings track by tuilePanierSettings.id" tuile-panier-settings="tuilePanierSettings" liste-tuile-catalogue-settings="popupCtrl.listeTuileCatalogueSettings" liste-tuile-panier-settings="popupCtrl.listeTuilePanierSettings" liste-filtres-clients="popupCtrl.listeFiltresClients" liste-filtres-relation-eco="popupCtrl.listeFiltresRelationEco" ng-attr-id="pf-tuile-panier-{{$index}}"></mw-pf-tuile-panier>\r\n                    <li class="bloc-content-panier" ng-show="popupCtrl.estAfficherDropPanier">\r\n                        <div class="drop-content-panier pf-drop-target-element"></div>\r\n                    </li>\r\n                </ul>\r\n            </div>\r\n            <div class="row">\r\n                <p class="col-md-12 text-color-rouge no-padding-left">\r\n                    <span ng-show="popupCtrl.nomFiltre1 || popupCtrl.nomFiltre3">Attention ! Cette nouvelle configuration supprimera :</span>\r\n\r\n                    <span ng-show="popupCtrl.nomFiltre1"><br>- le filtre <span class="texte-gras">"<span ng-bind="popupCtrl.nomFiltre1"></span>"</span></span>\r\n                    <span ng-show="popupCtrl.nomFiltre2"> et le filtre <span class="texte-gras">"<span ng-bind="popupCtrl.nomFiltre2"></span>"</span></span>\r\n                    <span ng-show="popupCtrl.nomFiltre1"> de la vue relation économique</span>\r\n\r\n                    <span ng-show="popupCtrl.nomFiltre3"><br>- le filtre <span class="texte-gras">"<span ng-bind="popupCtrl.nomFiltre3"></span>"</span></span>\r\n                    <span ng-show="popupCtrl.nomFiltre4"> et le filtre <span class="texte-gras">"<span ng-bind="popupCtrl.nomFiltre4"></span>"</span></span>\r\n                    <span ng-show="popupCtrl.nomFiltre3"> de la vue clients</span>\r\n                </p>\r\n            </div>\r\n        </div>\r\n    </div>\r\n\r\n    <mw-panel niveau="2" titre="Les indicateurs" id="panel-catalogue-indicateur" ng-show="popupCtrl.panierEnCours">\r\n        <div class="row drop-content-poubelle pf-drop-target-element" mw-pf-core-drop-target drop-settings="popupCtrl.poubelleDropSettings">\r\n            <ul class="nav col-md-12">\r\n                <mw-pf-tuile-catalogue ng-repeat="tuileCatalogueSettings in popupCtrl.listeTuileCatalogueSettings track by tuileCatalogueSettings.id" mw-combobox-select-on-exact="true" tuile-catalogue-settings="tuileCatalogueSettings" liste-tuile-catalogue-settings="popupCtrl.listeTuileCatalogueSettings" liste-tuile-panier-settings="popupCtrl.listeTuilePanierSettings" liste-filtres-clients="popupCtrl.listeFiltresClients" liste-filtres-relation-eco="popupCtrl.listeFiltresRelationEco" ng-attr-id="pf-tuile-catalogue-{{$index}}">\r\n                </mw-pf-tuile-catalogue>\r\n            </ul>\r\n        </div>\r\n    </mw-panel>\r\n\r\n</div>\r\n\r\n<div class="modal-footer modal-footer-custom">\r\n    <div class="col-md-offset-6 col-md-3">\r\n        <button type="button" id="bouton-modale-annuler" class="btn btn-default" ng-click="popupCtrl.fermer()">Annuler</button>\r\n    </div>\r\n    <div class="col-md-3">\r\n        <button type="button" id="bouton-modale-valider" class="btn btn-primary" ng-click="popupCtrl.valider()" ng-disabled="popupCtrl.estValidable()">\r\n            Enregistrer la sélection\r\n        </button>\r\n    </div>\r\n</div>\r\n'),e.put("vues/templates-tableau/colonne-date-derniere-revue-rel.html",'<div class="col-md-12 colonne-tableau-data-client" ng-controller="ColonneDataDerniereRevueRelControleur as templateControleur">\r\n    <span ng-class="{\'ancienne-revue texte-gras\' : templateControleur.ancienneRevue(mwTableRow)}" ng-bind="templateControleur.valoriserDateRevue(mwTableRow)"></span>\r\n</div>'),e.put("vues/templates-tableau/colonne-date-derniere-revue.html",'<div class="col-md-12 colonne-tableau-data-client" ng-controller="ColonneDataDerniereRevueControleur as templateControleur">\r\n    <span ng-class="{\'ancienne-revue texte-gras\' : templateControleur.ancienneRevue(mwTableRow)}" ng-bind="templateControleur.valoriserDateRevue(mwTableRow)"></span>\r\n</div>'),e.put("vues/templates-tableau/colonne-objectif-flux.html",'<span>\r\n    <span ng-bind="mwTableRow.tauxObjectifFlux"></span>%\r\n</span>'),e.put("vues/templates-tableau/colonne-potentiel-prospect.html",'<div class="col-md-12 colonne-tableau-data-client" ng-controller="ColonnePotentielProspectControleur as templateControleur">\r\n    <div class="row vertical-align-top">\r\n            <span class="pull-right" ng-bind="templateControleur.valoriserPotentielProspect(mwTableRow)"></span>\r\n    </div>\r\n</div>'),e.put("vues/templates-tableau/colonne-tableau-data-ca-n-1.html",'<div class="colonne-tableau-data-client" ng-controller="ColonneDataCAN1Controleur as templateControleur">\r\n    <!--<div class="row template-colonne">-->\r\n    <div class="row">\r\n        <span ng-bind="templateControleur.getTexteCA(mwTableRow)"></span><br>\r\n        <span ng-bind="templateControleur.getTexteDate(mwTableRow)" ng-if="templateControleur.afficherDate"></span>\r\n    </div>\r\n</div>'),e.put("vues/templates-tableau/colonne-tableau-data-ca-n.html",'<div class="colonne-tableau-data-client" ng-controller="ColonneDataCANControleur as templateControleur">\r\n    <!--<div class="row template-colonne">-->\r\n    <div class="row">\r\n        <span ng-bind="templateControleur.getTexteCA(mwTableRow)"></span>&nbsp;\r\n        <!--  /* A supprimer quand les images seront intégrées au framework  */ -->\r\n        <img id="fleche-montante" alt="tendance positive" ng-show="templateControleur.getTendance(mwTableRow) > 0 " src="images/fleche-montante.png">\r\n        <img id="fleche-descendante" alt="tendance négative" ng-show="templateControleur.getTendance(mwTableRow) < 0" src="images/fleche-descendante.png">\r\n        <img id="fleche-neutre" alt="tendance neutre" ng-show="templateControleur.getTendance(mwTableRow) == 0" src="images/fleche-neutre.png">\r\n        <br>\r\n        <span ng-bind="templateControleur.getTexteDate(mwTableRow)" ng-if="templateControleur.afficherDate"></span>\r\n\r\n    </div>\r\n</div>'),e.put("vues/templates-tableau/colonne-tableau-data-client.html",'<div class="col-md-12 colonne-tableau-data-client" ng-controller="ColonneDataClientControleur as templateControleur">\r\n    <!--<div class="row template-colonne">-->\r\n    <div class="row">\r\n        <span class="vertical-align-top">\r\n            <span class="label label-success" aria-hidden="true" ng-if="templateControleur.isActif(mwTableRow)" ng-bind="templateControleur.indicateurActif">\r\n            </span>\r\n            <span class="label label-primary" aria-hidden="true" ng-if="templateControleur.isInactif(mwTableRow)" ng-bind="templateControleur.indicateurInactif">\r\n            </span>\r\n            <span class="label label-warning label-sans-contrat" aria-hidden="true" ng-show="templateControleur.isPremierEquipement(mwTableRow)">\r\n                <span aria-hidden="true" class="icon itce-contact"></span>\r\n                <span ng-bind="templateControleur.indicateurPremierEquipement"></span>\r\n            </span>\r\n\r\n            <span class="label label-warning label-prospet" aria-hidden="true" ng-if="templateControleur.isProspect(mwTableRow)">\r\n                Prospect\r\n                <span aria-hidden="true" class="icon itce-star" ng-if="templateControleur.afficherEtoile(mwTableRow, 1)">\r\n                </span>\r\n                <span aria-hidden="true" class="icon itce-star" ng-if="templateControleur.afficherEtoile(mwTableRow, 2)">\r\n                </span>\r\n                <span aria-hidden="true" class="icon itce-star" ng-if="templateControleur.afficherEtoile(mwTableRow, 3)">\r\n                </span>\r\n            </span>\r\n            <span class="label label-warning label-sans-contrat" aria-hidden="true" ng-show="templateControleur.isSansContrat(mwTableRow)">Sans contrat</span>\r\n            <span ng-bind="mwTableRow.nom"></span> (<span ng-bind="mwTableRow.id"></span>)<br>\r\n            <span class="label label-default" aria-hidden="true" ng-if="mwTableRow.estLeader" ng-bind="templateControleur.indicateurLeader">\r\n            </span>\r\n            <span ng-bind="mwTableRow.nomRelationEconomique" class="texte-relation-eco">\r\n            </span><br>\r\n        </span>\r\n    </div>\r\n</div>'),e.put("vues/templates-tableau/colonne-tableau-data-number.html",'<div class="pf-tuile-indicateur">\r\n    <div ng-attr-class="cadre color-bleu">\r\n        <div class="pf-corps">\r\n            <p class="valeur" ng-bind="mwTableRow.listeIndicateurs[4].valeurNumber"></p>\r\n        </div>\r\n    </div>\r\n</div>'),e.put("vues/templates-tableau/colonne-tableau-data-relation.html",'<div class="col-md-12" ng-controller="ColonneDataRelationControleur as templateControleur">\r\n    <div class="row">\r\n        <span class="vertical-align-top">\r\n            <span class="label label-warning" aria-hidden="true" ng-if="templateControleur.isProspect(mwTableRow)" ng-bind="templateControleur.indicateurProspect"></span>\r\n            <span ng-bind="mwTableRow.nom"></span>\r\n        </span>\r\n    </div>\r\n</div>'),e.put("vues/templates-tableau/colonne-tableau-flux-crediteur.html",'<div class="colonne-tableau-data-client" ng-controller="ColonneFluxCrediteurControleur as templateControleur">\r\n    <!--<div class="row template-colonne">-->\r\n    <div class="row">\r\n        <span ng-bind="templateControleur.getMontant(mwTableRow)"></span>&nbsp;\r\n        <!--  /* A supprimer quand les images seront intégrées au framework  */ -->\r\n        <img id="fleche-montante" alt="tendance positive" ng-show="templateControleur.getTendance(mwTableRow) > 0 " src="images/fleche-montante.png">\r\n        <img id="fleche-descendante" alt="tendance négative" ng-show="templateControleur.getTendance(mwTableRow) < 0" src="images/fleche-descendante.png">\r\n        <img id="fleche-neutre" alt="tendance neutre" ng-show="templateControleur.getTendance(mwTableRow) == 0" src="images/fleche-neutre.png">\r\n    </div>\r\n</div>'),e.put("vues/templates-tableau/colonne-tableau-flux-debiteur.html",'<div class="colonne-tableau-data-client" ng-controller="ColonneFluxDebiteurControleur as templateControleur">\r\n    <!--<div class="row template-colonne">-->\r\n    <div class="row">\r\n        <span ng-bind="templateControleur.getMontant(mwTableRow)"></span>&nbsp;\r\n        <!--  /* A supprimer quand les images seront intégrées au framework  */ -->\r\n        <img id="fleche-montante" alt="tendance positive" ng-show="templateControleur.getTendance(mwTableRow) > 0 " src="images/fleche-montante.png">\r\n        <img id="fleche-descendante" alt="tendance négative" ng-show="templateControleur.getTendance(mwTableRow) < 0" src="images/fleche-descendante.png">\r\n        <img id="fleche-neutre" alt="tendance neutre" ng-show="templateControleur.getTendance(mwTableRow) == 0" src="images/fleche-neutre.png">\r\n    </div>\r\n</div>'),e.put("vues/templates-tableau/colonne-tableau-indicateurs.html",'<div class="col-md-12">\r\n    <div class="row">\r\n        <mw-pf-tuile-indicateur ng-repeat="indicateur in mwTableRow.listeIndicateurs track by $index" couleur="indicateur.couleur" intitule="indicateur.intitule" icone="indicateur.icone" valeur="indicateur.valeur" ng-attr-id="pf-tuile-indicateur-{{$index}}"></mw-pf-tuile-indicateur>\r\n    </div>\r\n</div>'),e.put("vues/templates-tableau/colonne-tableau-pnb-n.html",'<div class="colonne-tableau-data-client" ng-controller="ColonnePnbAnneeNControleur as templateControleur">\r\n    <!--<div class="row template-colonne">-->\r\n    <div class="row">\r\n        <span ng-bind="templateControleur.getMontant(mwTableRow) | montantFiltre: true"></span>&nbsp;\r\n        <!--  /* A supprimer quand les images seront intégrées au framework  */ -->\r\n        <img id="fleche-montante" alt="tendance positive" ng-show="templateControleur.getTendance(mwTableRow) > 0 " src="images/fleche-montante.png">\r\n        <img id="fleche-descendante" alt="tendance négative" ng-show="templateControleur.getTendance(mwTableRow) < 0" src="images/fleche-descendante.png">\r\n        <img id="fleche-neutre" alt="tendance neutre" ng-show="templateControleur.getTendance(mwTableRow) == 0" src="images/fleche-neutre.png">\r\n    </div>\r\n</div>'),e.put("vues/templates-tableau/colonne-tableau-statut.html",'<span ng-show="mwTableRow.listeIndicateurs" ng-controller="ColonneStatutControleur as ctrl">\r\n    <span ng-show="ctrl.isActif(mwTableRow)" class="label label-success" ng-bind="ctrl.indicateurActif"></span>\r\n    <span ng-show="ctrl.isInactif(mwTableRow)" class="label label-primary" ng-bind="ctrl.indicateurInactif"></span>\r\n    <span ng-show="ctrl.isProspect(mwTableRow)" class="label label-default" ng-bind="ctrl.indicateurProspect"></span>\r\n</span>'),e.put("vues/templates-tableau/colonne-tableau-top-cc.html","<div class=\"col-md-12 colonne-tableau-data-client\" ng-controller=\"ColonneTopCCControleur as templateControleur\">\r\n    <div class=\"row\">\r\n        <span ng-class=\"{'Vert':'pastille-verte-md', 'Rouge':'pastille-rouge-md', Orange:'pastille-orange-md', 'Blanc':'pastille-blanche-md'}[templateControleur.valoriserTopCC(mwTableRow)]\"></span>\r\n    </div>\r\n</div>"),e.put("typescript/directives/pf-bloc-condition-filtre/pf-bloc-condition-filtre-vue.html",'<form class="form-horizontal col-md-12 pf-bloc-condition-filtre" name="form">\r\n    <div class="col-md-12" ng-show="pfBlocConditionFiltreCtrl.afficherOperateur">\r\n        <!-- Opérateur booléen -->\r\n        <br>\r\n        <div class="col-md-4">\r\n            <input type="text" mw-clear-button id="choix-operateur" class="form-control" name="choix-operateur" ng-model="pfBlocConditionFiltreCtrl.filtre.operateur" placeholder="ET / OU" mw-combobox="operateur for operateur in pfBlocConditionFiltreCtrl.listeOperateurs">\r\n            <br>\r\n        </div>\r\n    </div>\r\n    <div class="col-md-12 mw-bloc-contenu" id="bloc-contenu-condition">\r\n        <div class="row">\r\n            <div class="col-md-4">\r\n                <input type="text" mw-clear-button id="choix-indicateur" class="form-control" name="choix-indicateur" ng-model="pfBlocConditionFiltreCtrl.filtre.indicateur" placeholder="Sélectionner un indicateur" mw-combobox="indicateur as indicateur.indicateur.intitule for indicateur in pfBlocConditionFiltreCtrl.getListeIndicateurs(pfBlocConditionFiltreCtrl.noIndex)" mw-combobox-on-select="pfBlocConditionFiltreCtrl.selectionIndicateur()" mw-combobox-open="pfBlocConditionFiltreCtrl.isOpen" mw-combobox-focus-first="true" ng-change="pfBlocConditionFiltreCtrl.selectionIndicateur()">\r\n            </div>\r\n            <!--| sansIndicateurDateFiltre"-->\r\n            <div class="col-md-offset-5 col-md-3">\r\n                <button class="btn btn-block btn-default" id="bouton-supprimer-condition" ng-click="pfBlocConditionFiltreCtrl.supprimerCondition()" type="button">Supprimer</button>\r\n            </div>\r\n        </div>\r\n        <br>\r\n        <div class="row">\r\n            <!-- Label -->\r\n            <label ng-show="pfBlocConditionFiltreCtrl.filtre.indicateur" class="control-label col-md-2 label-valeurs" for="choix-comparateur">Afficher</label>\r\n\r\n            <!-- Type Nombre ou Montant ou Pourcent -->\r\n            <div ng-show="pfBlocConditionFiltreCtrl.estIndicateurNumerique">\r\n                <!-- Choix du comparateur -->\r\n                <div class="col-md-4">\r\n                    <input type="text" mw-clear-button id="choix-comparateur" class="form-control" name="choix-comparateur" required ng-model="pfBlocConditionFiltreCtrl.filtre.comparateur" placeholder="Sens de comparaison" mw-combobox="comparateur for comparateur in pfBlocConditionFiltreCtrl.listeComparateurs">\r\n                </div>\r\n                <div ng-hide="pfBlocConditionFiltreCtrl.estComparateurDeTypeNC">\r\n                    <!-- Comparaison simple -->\r\n                    <div ng-hide="pfBlocConditionFiltreCtrl.comparateurUniqueInactif" class="col-md-5 form-group">\r\n                        <div class="col-md-5">\r\n                            <input type="number" mw-clear-button class="form-control" id="valeur-unique" ng-model="pfBlocConditionFiltreCtrl.filtre.valeurUnique">\r\n                        </div>\r\n                        <span class="col-md-2 control-label label-valeurs" ng-bind="pfBlocConditionFiltreCtrl.uniteMax">\r\n                        </span>\r\n                    </div>\r\n                    <!-- Comparaison multiple -->\r\n                    <div ng-show="pfBlocConditionFiltreCtrl.estComparateurDeTypeEntre" class="col-md-5 form-group">\r\n                        <div class="col-md-4">\r\n                            <input type="number" mw-clear-button class="form-control" id="valeur-multiple-1" ng-model="pfBlocConditionFiltreCtrl.filtre.valeurMultiple1">\r\n                        </div>\r\n                        <span class="col-md-1 control-label" ng-show="pfBlocConditionFiltreCtrl.estUniteMin" ng-bind="pfBlocConditionFiltreCtrl.uniteMin">\r\n                        </span>\r\n                        <div class="col-md-2">\r\n                            <p class="centrer-aligner-text">et</p>\r\n                        </div>\r\n                        <div class="col-md-4">\r\n                            <input type="number" mw-clear-button class="form-control" id="valeur-multiple-2" ng-model="pfBlocConditionFiltreCtrl.filtre.valeurMultiple2">\r\n                        </div>\r\n                        <span class="col-md-1 control-label" ng-bind="pfBlocConditionFiltreCtrl.uniteMax">\r\n                        </span>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n            <!-- Type Texte -->\r\n            <div ng-show="pfBlocConditionFiltreCtrl.estIndicateurTexte">\r\n                <div class="form-group col-md-8">\r\n                    <section ng-repeat="valeur in pfBlocConditionFiltreCtrl.listeValeurs track by $index" class="mw-input-check vertical-alignement col-md-12">\r\n                        <label ng-attr-for="id-check-{{pfBlocConditionFiltreCtrl.codeIndicateur}}-{{valeur.libelle}}" ng-attr-id="id-label-check-{{pfBlocConditionFiltreCtrl.codeIndicateur}}-{{valeur.libelle}}" class="col-md-5">\r\n                            <input ng-attr-id="id-check-{{pfBlocConditionFiltreCtrl.codeIndicateur}}-{{valeur.libelle}}" type="checkbox" ng-model="valeur.actif" ng-attr-aria-checked="valeur.actif" ng-attr-aria-labelledby="id-check-{{pfBlocConditionFiltreCtrl.codeIndicateur}}-{{valeur.libelle}}">\r\n                            <span aria-hidden="true" class="icon" ng-class="{\'itce-fa-check\':valeur.actif}"></span>\r\n                            <span ng-bind="valeur.libelle"></span>\r\n                        </label>\r\n                    </section>\r\n                </div>\r\n            </div>\r\n\r\n                <!-- Type Begacli -->\r\n                <div ng-show="pfBlocConditionFiltreCtrl.estIndicateurBegacli" class="col-md-12">\r\n\r\n                    <div class="form-group col-md-12 cadre-begacli">\r\n                        <div class="col-md-12 vertical-alignement">\r\n                            <span class="col-md-6 a-gauche-titre">Univers</span>\r\n                            <span class="col-md-2">Equipé</span>\r\n                            <span class="col-md-2">Non Equipé</span>\r\n\r\n                        </div>\r\n\r\n                        <section ng-repeat="lettreBegacli in pfBlocConditionFiltreCtrl.filtreBegacli.listeLettres track by $index" class="mw-input-check vertical-alignement col-md-12">\r\n\r\n                            <span class="col-md-6 control-label a-gauche-text" ng-bind="lettreBegacli.univers">\r\n                            </span>\r\n                            <label ng-attr-for="id-check-begacli-maj-{{$index}}" ng-attr-id="id-label-begacli-maj-{{$index}}" class="col-md-2 cadrer-coche">\r\n                                <input ng-attr-id="id-check-begacli-maj-{{$index}}" type="checkbox" ng-model="lettreBegacli.choisiMaj" ng-change="pfBlocConditionFiltreCtrl.begacliChangeMaj(lettreBegacli)" ng-attr-aria-checked="lettreBegacli.choisiMaj" ng-attr-aria-labelledby="id-check-begacli-maj-{{$index}}">\r\n                                <span aria-hidden="true" class="icon" ng-class="{\'itce-fa-check\':lettreBegacli.choisiMaj}"></span>\r\n                                <span ng-bind="lettreBegacli.lettreMaj"></span>\r\n                            </label>\r\n\r\n                            <label ng-attr-for="id-check-begacli-min-{{$index}}" ng-attr-id="id-label-begacli-min-{{$index}}" class="col-md-2 cadrer-coche">\r\n                                <input ng-attr-id="id-check-begacli-min-{{$index}}" type="checkbox" ng-model="lettreBegacli.choisiMin" ng-change="pfBlocConditionFiltreCtrl.begacliChangeMin(lettreBegacli)" ng-attr-aria-checked="lettreBegacli.choisiMin" ng-attr-aria-labelledby="id-check-begacli-min-{{$index}}">\r\n                                <span aria-hidden="true" class="icon" ng-class="{\'itce-fa-check\':lettreBegacli.choisiMin}"></span>\r\n                                <span ng-bind="lettreBegacli.lettreMin"></span>\r\n                            </label>\r\n\r\n                        </section>\r\n                    </div>\r\n\r\n\r\n                    <div class="form-group col-md-offset-2 col-md-9 cadre-begacli">\r\n                        <div class="col-md-12">\r\n                            <span class="col-md-6 a-gauche-titre">Nombre d\'univers équipés</span>\r\n                        </div>\r\n                        <section ng-repeat="nombreBegacli in pfBlocConditionFiltreCtrl.filtreBegacli.listeNombres track by $index" class="mw-input-check col-md-2">\r\n\r\n                            <label ng-attr-for="id-check-begacli-nombre-{{$index}}" ng-attr-id="id-label-begacli-nombre-{{$index}}" class="col-md-2">\r\n                                <input ng-attr-id="id-check-begacli-nombre-{{$index}}" type="checkbox" ng-model="nombreBegacli.choisi" ng-attr-aria-checked="nombreBegacli.choisi" ng-attr-aria-labelledby="id-check-begacli-nombre-{{$index}}">\r\n                                <span aria-hidden="true" class="icon" ng-class="{\'itce-fa-check\':nombreBegacli.choisi}"></span>\r\n                                <span ng-bind="nombreBegacli.nombre"></span>\r\n                            </label>\r\n                        </section>\r\n                    </div>\r\n\r\n\r\n                    <!--<div class="form-group col-md-12">     \r\n                        <span class="col-md-2 control-label a-gauche-text">\r\n                            Afficher les valeurs NC\r\n                        </span>\r\n\r\n                        <section class="mw-input-check  col-md-2  ">\r\n                            <label ng-attr-for="id-check-begacli-nc"\r\n                                   ng-attr-id="id-label-begacli-nc"\r\n                                   class="col-md-12 cadrer-coche-nc">\r\n                                <input ng-attr-id="id-check-begacli-nc"\r\n                                       type="checkbox"\r\n                                       ng-model="pfBlocConditionFiltreCtrl.filtreBegacli.choisiNC"\r\n                                       ng-attr-aria-checked="pfBlocConditionFiltreCtrl.filtreBegacli.choisiNC"\r\n                                       ng-attr-aria-labelledby="id-check-begacli-nc" />\r\n                                <span aria-hidden="true" class="icon "\r\n                                      ng-class="{\'itce-fa-check\':pfBlocConditionFiltreCtrl.filtreBegacli.choisiNC}"></span>\r\n                            </label>\r\n                            </section>\r\n\r\n                    </div>-->\r\n\r\n                </div>\r\n\r\n                <!-- Type Date -->\r\n                <div ng-show="pfBlocConditionFiltreCtrl.estIndicateurDeTypeDate">\r\n                    <!-- Choix du comparateur -->\r\n                    <div class="col-md-4">\r\n                        <input type="text" mw-clear-button id="choix-comparateur-date" class="form-control" name="choix-comparateur" required ng-model="pfBlocConditionFiltreCtrl.filtre.comparateur" placeholder="Sens de comparaison" mw-combobox="comparateur for comparateur in pfBlocConditionFiltreCtrl.listeComparateurs">\r\n                    </div>\r\n                    <div ng-hide="pfBlocConditionFiltreCtrl.cacheChampsSaisieDate">\r\n                        <!-- Comparaison simple -->\r\n                        <div ng-hide="pfBlocConditionFiltreCtrl.cacheChampSaisieDateSimple" class="col-md-5 form-group">\r\n                            <div class="col-sm-6 has-feedback">\r\n                                <input type="text" class="form-control ng-pristine ng-valid ng-isolate-scope ng-valid-date ng-valid-required ng-touched" id="date-comparaison-simple" name="dateRelance" ng-model="pfBlocConditionFiltreCtrl.filtre.valeurUnique" mw-date-legere uib-datepicker-popup="dd/MM/yyyy" datepicker-options="{ showWeeks: false, startingDay:1}" is-open="champsLibres.valeurUnique" show-button-bar="true" date-disabled="champsLibres.dateDisabled(date,mode)">\r\n                            </div>\r\n                        </div>\r\n\r\n                        <!-- Comparaison multiple -->\r\n                        <div ng-show="pfBlocConditionFiltreCtrl.estComparateurDeTypeEntre" class="col-md-6 form-group">\r\n                            <div class="col-sm-5 has-feedback">\r\n                                <input type="text" class="form-control ng-pristine ng-valid ng-isolate-scope ng-valid-date ng-valid-required ng-touched" id="date-comparaison-multiple-1" name="dateComparaisonMultiple1" ng-model="pfBlocConditionFiltreCtrl.filtre.valeurMultiple1" mw-date-legere="" uib-datepicker-popup="dd/MM/yyyy" datepicker-options="{ showWeeks: false, startingDay:1}" is-open="champsLibres.valeurMultiple1" show-button-bar="true" date-disabled="champsLibres.dateDisabled(date,mode)">\r\n                            </div>\r\n                            <div class="col-md-1">\r\n                                <p class="centrer-aligner-text">et</p>\r\n                            </div>\r\n                            <div class="col-sm-5 has-feedback">\r\n                                <input type="text" class="form-control ng-pristine ng-valid ng-isolate-scope ng-valid-date ng-valid-required ng-touched" id="date-comparaison-multiple-2" name="dateComparaisonMultiple2" ng-model="pfBlocConditionFiltreCtrl.filtre.valeurMultiple2" mw-date-legere="" uib-datepicker-popup="dd/MM/yyyy" datepicker-options="{ showWeeks: false, startingDay:1}" show-button-bar="true" is-open="champsLibres.valeurMultiple2" date-disabled="champsLibres.dateDisabled(date,mode)">\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n    </div>\r\n</form>'),e.put("typescript/directives/pf-diagramme-grande-barre/pf-diagramme-grande-barre-vue.html",'<div class="pf-diagramme-grande-barre">\r\n    <p class="intitule" ng-bind="pfDiagrammeGrandeBarreCtrl.config.intitule"></p>\r\n    <div class="barre" ng-style="{\'background-color\': pfDiagrammeGrandeBarreCtrl.config.couleur, \'width\': pfDiagrammeGrandeBarreCtrl.pourcentage + \'%\'}">\r\n        <span class="valeur" ng-bind="(pfDiagrammeGrandeBarreCtrl.config.valeur | number) + \' k€\'"></span>\r\n    </div>\r\n</div>'),
e.put("typescript/directives/pf-diagramme-colonne/pf-diagramme-colonne-vue.html",'<div>\r\n    <div ng-class="{0:\'pf-diagramme-colonne\', 1:\'pf-diagramme-colonne-detail\'}[pfDiagrammeColonneCtrl.typeDiagramme]" ng-style="{\'max-height\': \'30em\'}">\r\n        <mw-pf-indicateur-colonne class="colonne-indicateur" ng-repeat="config in pfDiagrammeColonneCtrl.config track by $index" ng-attr-id="config.id" data="config">\r\n        </mw-pf-indicateur-colonne>\r\n    </div>\r\n</div>'),e.put("typescript/directives/pf-diagramme-donut/pf-diagramme-donut-vue.html",'<div class="form-horizontal pf-diagramme-donut">\r\n    <div class="bloc-en-tete form-group">\r\n        <p class="titre col-lg-8 col-md-6" ng-bind="pfDiagrammeDonutCtrl.config.titre"></p>\r\n        <div class="col-lg-5 col-md-6">\r\n            <input type="text" mw-clear-button id="id-donut" class="form-control" name="idMedia" ng-change="pfDiagrammeDonutCtrl.echangerDonuts()" ng-model="pfDiagrammeDonutCtrl.config.donutChoisi" mw-combobox="nomDonut as nomDonut for nomDonut in pfDiagrammeDonutCtrl.listeDonuts" mw-combobox-on-select="pfDiagrammeDonutCtrl.echangerDonuts($item, $model, $label, $event)">\r\n        </div>\r\n    </div>\r\n    <div ng-attr-id="{{::pfDiagrammeDonutCtrl.svgId}}" class="svg-container"></div>\r\n    <div class="bloc-legende">\r\n        <mw-pf-puce-legende ng-repeat="config in pfDiagrammeDonutCtrl.listeConfigPuceLegende track by $index" ng-show="config.affichagePuceLegendeActif" class="legende" ng-attr-id="puce-donut-{{$index}}" intitule="{{config.intitule}}" couleur="{{config.couleur}}"></mw-pf-puce-legende>\r\n    </div>\r\n</div>'),e.put("typescript/directives/pf-detail-filtre/pf-detail-filtre-vue.html",'<section class="pf-detail-filtre">\r\n    <span class="btn-supprimer icon itce-times" aria-hidden="true" ng-click="pfDetailFiltreCtrl.supprimerFiltres()" role="button" title="Supprimer tous les filtres"></span>\r\n    <article class="filtre" ng-repeat="filtre in pfDetailFiltreCtrl.listeFiltres track by $index">\r\n        <span ng-if="filtre.operateur" ng-bind="filtre.operateur"></span>\r\n        <span ng-bind="pfDetailFiltreCtrl.getTxtFiltre(filtre)"></span>\r\n    </article>\r\n</section>'),e.put("typescript/directives/pf-diagramme-pourcentage/pf-diagramme-pourcentage-vue.html",'<div>\r\n    <div class="pf-diagramme-colonne-detail ie-test">\r\n        <mw-pf-indicateur-pourcentage class="colonne-indicateur" ng-repeat="config in pfDiagrammePourcentageCtrl.config track by $index" ng-attr-id="config.id" config="config">\r\n        </mw-pf-indicateur-pourcentage>\r\n    </div>\r\n</div>'),e.put("typescript/directives/pf-choix-portefeuille/pf-choix-portefeuille-vue.html",'<div class="col-md-4 col-lg-4 pull-right content-choix-portefeuille" ng-if="PfChoixPortefeuilleCtrl.aPortefeuille()">\r\n    <mw-bouton-volet id="btn-volet-portefeuille" modele="zone" texte="{{PfChoixPortefeuilleCtrl.getTxtChoixPortefeuille()}}" fermeture-auto="non" ng-show="PfChoixPortefeuilleCtrl.estDesignation()" ng-click="PfChoixPortefeuilleCtrl.ouvrirFermerChoixPortefeuille()" ouvert="PfChoixPortefeuilleCtrl.ouvertureVoletChoixPortefeuille" role="button" class="col-md-12 col-lg-10 pull-right no-padding-right">\r\n        <div class="form-group dv-choix-portefeuille" ng-click="PfChoixPortefeuilleCtrl.stopPropagation($event)" role="button" ng-class="{\'display-block\':(PfChoixPortefeuilleCtrl.finInit)}">\r\n            <div>\r\n                <ul class="list-group">\r\n                    <li class="list-group-item" ng-show="PfChoixPortefeuilleCtrl.estVueGlobalConsolide">\r\n                        <div class="mw-input-check vertical-alignement">\r\n                            <label for="id-checkbox-multi" id="id-label-multi" ng-click="PfChoixPortefeuilleCtrl.forceMultiSelection($event)" ng-keydown="PfChoixPortefeuilleCtrl.keyDownTroisEtat($event)" role="button">\r\n                                <input type="checkbox" id="id-checkbox-multi" ng-model="PfChoixPortefeuilleCtrl.tousPortfeuillesSelectionnes" indeterminate="{{PfChoixPortefeuilleCtrl.setIndetermine()}}" aria-checked="{{PfChoixPortefeuilleCtrl.aTousPortefeuillesCoches()}}" aria-labelledby="id-label-multi" mw-indeterminate-trois-etats>\r\n                                <span aria-hidden="true" class="icon" ng-class="{\'itce-fa-check\':(PfChoixPortefeuilleCtrl.isCheckedGlobal()), \'itce-minus\':(PfChoixPortefeuilleCtrl.setIndetermine())}">\r\n                                </span>\r\n                                <span ng-bind="PfChoixPortefeuilleCtrl.getLabelTroisEtats()"></span>\r\n                            </label>\r\n                        </div>\r\n                    </li>\r\n                    <li ng-repeat="ptf in PfChoixPortefeuilleCtrl.listePortefeuillesDropDown track by $index" ng-init="indexAgent = $index" class="list-group-item">\r\n                        <div class="mw-input-check vertical-alignement">\r\n                            <label ng-attr-for="id-agent-portefeuille-{{indexAgent}}" ng-attr-id="id-agent-label-portefeuille-{{indexAgent}}" ng-click="PfChoixPortefeuilleCtrl.forceMultiSelection($event, indexAgent)" ng-keydown="PfChoixPortefeuilleCtrl.keyDownTroisEtat($event, indexAgent)" ng-show="PfChoixPortefeuilleCtrl.estVueGlobalConsolide" role="button">\r\n                                <input type="checkbox" ng-attr-id="id-agent-portefeuille-{{indexAgent}}" ng-model="PfChoixPortefeuilleCtrl.listePortefeuillesDropDown[indexAgent].estAffiche" indeterminate="{{PfChoixPortefeuilleCtrl.setIndetermine(indexAgent)}}" aria-checked="{{PfChoixPortefeuilleCtrl.aTousPortefeuillesCoches(indexAgent)}}" ng-attr-aria-labelledby="id-agent-label-portefeuille-{{indexAgent}}" mw-indeterminate-trois-etats>\r\n                                <span aria-hidden="true" class="icon" ng-class="{\'itce-fa-check\':(PfChoixPortefeuilleCtrl.isCheckedGlobal(indexAgent)), \'itce-minus\':(PfChoixPortefeuilleCtrl.setIndetermine(indexAgent))}">\r\n                                </span>\r\n                                <span ng-bind="PfChoixPortefeuilleCtrl.getLibelleAgent(indexAgent)"></span><br><br>\r\n                            </label>\r\n                            <div ng-class="{\'bloc-choix-ptf\': PfChoixPortefeuilleCtrl.aPortefeuilleReel() && PfChoixPortefeuilleCtrl.aSuiviParComplementaire() }" ng-show="PfChoixPortefeuilleCtrl.aPortefeuilleReel()">\r\n                                <span ng-show="PfChoixPortefeuilleCtrl.aPortefeuilleReel() && !PfChoixPortefeuilleCtrl.estVueGlobalConsolide">Choisir un ou plusieurs portefeuilles</span>\r\n                                <ul class="bloc-liste-portefeuille">\r\n                                    <li class="list-group-item" ng-show="PfChoixPortefeuilleCtrl.aPortefeuilleReel() && PfChoixPortefeuilleCtrl.nbPortefeuilleReel() > 1 && !PfChoixPortefeuilleCtrl.estVueGlobalConsolide">\r\n                                        <div class="mw-input-check vertical-alignement">\r\n                                            <label for="id-checkbox-multi" id="id-label-multi-portefeuille" ng-click="PfChoixPortefeuilleCtrl.forceMultiSelection($event, indexAgent, false)" ng-keydown="PfChoixPortefeuilleCtrl.keyDownTroisEtat($event, indexAgent)" role="button">\r\n                                                <input type="checkbox" id="id-checkbox-multi" ng-model="PfChoixPortefeuilleCtrl.listePortefeuillesDropDown[indexAgent].estAffiche" indeterminate="{{PfChoixPortefeuilleCtrl.setIndetermine(indexAgent, false)}}" aria-checked="{{PfChoixPortefeuilleCtrl.aTousPortefeuillesCoches(indexAgent, false)}}" aria-labelledby="id-label-multi-portefeuille" mw-indeterminate-trois-etats>\r\n                                                <span aria-hidden="true" class="icon" ng-class="{\'itce-fa-check\':(PfChoixPortefeuilleCtrl.aTousPortefeuillesCoches(indexAgent, false)), \'itce-minus\':(PfChoixPortefeuilleCtrl.setIndetermine(indexAgent, false))}">\r\n                                                </span>\r\n                                                <span ng-bind="PfChoixPortefeuilleCtrl.getLabelTroisEtats(indexAgent, false)"></span>\r\n                                            </label>\r\n                                        </div>\r\n                                    </li>\r\n                                    <li ng-repeat="ptf in PfChoixPortefeuilleCtrl.listePortefeuillesDropDown[indexAgent].listPortefeuilleParAgent track by $index" ng-init="indexPortfeuille = $index" class="list-group-item" ng-show="PfChoixPortefeuilleCtrl.getEstPortefeuille(indexPortfeuille, indexAgent)">\r\n                                        <div class="mw-input-check vertical-alignement">\r\n                                            <label ng-attr-for="id-portefeuille-{{indexAgent}}-{{indexPortfeuille}}" ng-attr-id="id-label-portefeuille-{{indexAgent}}-{{indexPortfeuille}}">\r\n                                                <input type="checkbox" ng-attr-id="id-portefeuille-{{indexAgent}}-{{indexPortfeuille}}" ng-model="PfChoixPortefeuilleCtrl.listePortefeuillesDropDown[indexAgent].listPortefeuilleParAgent[indexPortfeuille].estAffiche" ng-attr-aria-checked="PfChoixPortefeuilleCtrl.listePortefeuillesDropDown[indexAgent].listPortefeuilleParAgent[indexPortfeuille].isVisu" ng-attr-aria-labelledby="id-label-portefeuille-{{indexAgent}}-{{indexPortfeuille}}" ng-change="PfChoixPortefeuilleCtrl.majSelection(indexPortfeuille, indexAgent)">\r\n                                                <span aria-hidden="true" class="icon" ng-class="{\'itce-fa-check\':PfChoixPortefeuilleCtrl.listePortefeuillesDropDown[indexAgent].listPortefeuilleParAgent[indexPortfeuille].estAffiche}">\r\n                                                </span>\r\n                                                <span ng-bind="PfChoixPortefeuilleCtrl.getLibelleEtIdPortefeuille(indexPortfeuille, indexAgent)"></span><br>\r\n                                            </label>\r\n                                        </div>\r\n                                    </li>\r\n                                </ul>\r\n                            </div>\r\n                            <div ng-if="PfChoixPortefeuilleCtrl.aPortefeuilleReel() && PfChoixPortefeuilleCtrl.aSuiviParComplementaire()" class="separateur">Ou</div>\r\n                            <div ng-class="{\'bloc-choix-ptf\': PfChoixPortefeuilleCtrl.aPortefeuilleReel() && PfChoixPortefeuilleCtrl.aSuiviParComplementaire() }" ng-show="PfChoixPortefeuilleCtrl.aSuiviParComplementaire()">\r\n                                <span ng-if="PfChoixPortefeuilleCtrl.aSuiviParComplementaire()">Choisir un portefeuille complémentaire</span>\r\n                                <ul class="bloc-liste-portefeuille" ng-show="PfChoixPortefeuilleCtrl.aSuiviParComplementaire()">\r\n                                    <li ng-repeat="ptf in PfChoixPortefeuilleCtrl.listePortefeuillesDropDown[indexAgent].listPortefeuilleParAgent track by $index" ng-init="indexPortfeuille = $index" class="list-group-item" ng-show="PfChoixPortefeuilleCtrl.getEstSuiviParComplementaire(indexPortfeuille, indexAgent)">\r\n                                        <div class="mw-input-check vertical-alignement">\r\n                                            <label ng-attr-for="id-portefeuille-{{indexAgent}}-{{indexPortfeuille}}" ng-attr-id="id-label-portefeuille-{{indexAgent}}-{{indexPortfeuille}}">\r\n                                                <input type="checkbox" ng-attr-id="id-portefeuille-{{indexAgent}}-{{indexPortfeuille}}" ng-model="PfChoixPortefeuilleCtrl.listePortefeuillesDropDown[indexAgent].listPortefeuilleParAgent[indexPortfeuille].estAffiche" ng-attr-aria-checked="PfChoixPortefeuilleCtrl.listePortefeuillesDropDown[indexAgent].listPortefeuilleParAgent[indexPortfeuille].isVisu" ng-attr-aria-labelledby="id-label-portefeuille-{{indexAgent}}-{{indexPortfeuille}}" ng-change="PfChoixPortefeuilleCtrl.majSelection(indexPortfeuille, indexAgent)">\r\n                                                <span aria-hidden="true" class="icon" ng-class="{\'itce-fa-check\':PfChoixPortefeuilleCtrl.listePortefeuillesDropDown[indexAgent].listPortefeuilleParAgent[indexPortfeuille].estAffiche}">\r\n                                                </span>\r\n                                                <span ng-bind="PfChoixPortefeuilleCtrl.getLibelleEtIdPortefeuille(indexPortfeuille, indexAgent)"></span><br>\r\n                                            </label>\r\n                                        </div>\r\n                                    </li>\r\n                                </ul>\r\n                            </div>\r\n\r\n                        </div>\r\n                    </li>\r\n                </ul>\r\n            </div>\r\n            <div>\r\n                <div class="col-md-6">\r\n                    <button class="btn btn-block btn-default margin-bottom-1-rem" aria-label="Annuler" ng-click="PfChoixPortefeuilleCtrl.annulerChoixPortefeuille()" id="bouton-annuler">\r\n                        <span>Annuler</span>\r\n                    </button>\r\n                </div>\r\n                <div class="col-md-6">\r\n                    <button class="btn btn-block btn-primary margin-bottom-1-rem" aria-label="Valider" ng-click="PfChoixPortefeuilleCtrl.validerChoixPortefeuille()" id="bouton-valider" ng-disabled="!PfChoixPortefeuilleCtrl.aPortefeuilleCoche()">\r\n                        <span>Valider</span>\r\n                    </button>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </mw-bouton-volet>\r\n</div>\r\n'),e.put("typescript/directives/pf-diagramme-petite-barre/pf-diagramme-petite-barre-vue.html",'<div class="pf-diagramme-petite-barre">\r\n    <p class="intitule" ng-bind="pfDiagrammePetiteBarreCtrl.config.intitule"></p>\r\n    <div class="barre" ng-style="{\'background-color\': pfDiagrammePetiteBarreCtrl.config.couleur, \'width\': pfDiagrammePetiteBarreCtrl.pourcentage + \'%\'}">\r\n        <span class="valeur" ng-bind="pfDiagrammePetiteBarreCtrl.config.valeur"></span>\r\n    </div>\r\n    <hr class="separateur">\r\n</div>'),e.put("typescript/directives/pf-diagramme-multi-colonne/pf-diagramme-multi-colonne-vue.html","<div class=\"pf-diagramme-multi-colonne-detail\" ng-style=\"{'max-height': '30em'}\">\r\n        <section ng-repeat=\"config in pfDiagrammeMultiColonneCtrl.config track by $index\" class=\"colonne-indicateur\" ng-class=\"{'padding': '0.5rem 0.6rem', 'margin': '0.5rem', 'border-style': 'outset', 'border-color': 'gray', 'max-height': '17em'}\">\r\n            <mw-pf-indicateur-fleche ng-attr-id=\"'indicateur-fleche-pnb'+config.id\" class=\"margin-left-auto\" ng-style=\"{'margin-top': '20%', 'text-align': 'center', 'justify-content': 'center'}\" config=\"config.tendence\">\r\n            </mw-pf-indicateur-fleche>\r\n            <mw-pf-diagramme-colonne ng-attr-id=\"config.id\" config=\"config.dataIndicateurMutliColonne\" typediagramme=\"0\">\r\n            </mw-pf-diagramme-colonne>\r\n            <span ng-bind=\"config.intitule\" mw-truncate ng-style=\"{'text-align': 'center', 'font-weight': 'bold', 'display': 'flex', 'justify-content': 'center'}\"></span>\r\n        </section>\r\n</div>"),e.put("typescript/directives/pf-indicateur-badge/pf-indicateur-badge-vue.html",'<div class="pf-indicateur-badge" mw-chargement="pfIndicateurBadgeCtrl.chargementIndicateurBadgeEnCours">\r\n    <p class="intitule" ng-class="{\'sous-intitule\': pfIndicateurBadgeCtrl.isSousIntitule}">\r\n        <span ng-bind="::pfIndicateurBadgeCtrl.intitule"></span>\r\n        <span class="detail-line">\r\n            <a class="debranchement" role="button" id="action-details" href="javascript:;" ng-click="pfIndicateurBadgeCtrl.debrancherVers()" ng-show="pfIndicateurBadgeCtrl.show()">\r\n                Voir détails\r\n            </a>\r\n        </span>\r\n    </p>\r\n\r\n    <span class="badge badge-primary pull-right" ng-style="{\'width\': \'5vw\'}" ng-bind="pfIndicateurBadgeCtrl.valeur"></span> \r\n</div> '),e.put("typescript/directives/pf-indicateur-colonne/pf-indicateur-colonne-vue.html","<div class=\"pf-indicateur-colonne\">\r\n    <span ng-hide=\"pfIndicateurColonneCtrl.data.estMontant\" ng-bind=\"pfIndicateurColonneCtrl.data.valeur | number\"></span>\r\n    <span ng-style=\"{'color': (pfIndicateurColonneCtrl.data.valeur < 0) ? 'red' : 'none'}\" ng-show=\"pfIndicateurColonneCtrl.data.estMontant\" ng-bind=\"pfIndicateurColonneCtrl.data.valeur | montantFiltre\"></span>\r\n    <span class=\"colonne\" ng-style=\"{'background-color': GREY, 'height': (100 - (pfIndicateurColonneCtrl.data.hauteur + pfIndicateurColonneCtrl.data.sousHauteur)) + '%'}\">\r\n        <span></span>\r\n    </span>\r\n    <span class=\"colonne\" ng-style=\"{'background-color': pfIndicateurColonneCtrl.data.couleur, 'height': pfIndicateurColonneCtrl.data.hauteur + '%', 'align-items' : (pfIndicateurColonneCtrl.data.sousHauteur >  pfIndicateurColonneCtrl.data.hauteur) ? 'center' : 'flex-end' }\">\r\n    </span>\r\n    <span class=\"colonne\" ng-show=\"pfIndicateurColonneCtrl.estVisibleSousValeur()\" ng-style=\"{'background-color': pfIndicateurColonneCtrl.data.couleurSousValeur, 'height': pfIndicateurColonneCtrl.data.sousHauteur + '%', 'position': 'relative'}\">\r\n        <span class=\"sous-valeur-colonne shadow\" ng-show=\"pfIndicateurColonneCtrl.estSousValeurEnNombre\" ng-bind=\"pfIndicateurColonneCtrl.data.sousValeur | number\"></span>\r\n    </span>\r\n    <span class=\"intitule mw-troncature\" ng-style=\"{'width':'10rem', 'text-align': 'center'}\" ng-hide=\"!pfIndicateurColonneCtrl.estVisibleSuiviPar\" ng-bind=\"pfIndicateurColonneCtrl.data.nomSuiviPar\">\r\n    </span>\r\n</div>\r\n\r\n"),e.put("typescript/directives/pf-indicateur-fleche/pf-indicateur-fleche-vue.html",'<span class="pf-indicateur-fleche">\r\n\r\n    <!--  A réactiver quand les images seront intégrées au framework via les icone -->\r\n    <!--<span aria-hidden="true" class="icon" ng-class="[pfIndicateurFlecheCtrl.config.icone, pfIndicateurFlecheCtrl.config.couleur]"></span>-->\r\n\r\n    <!--  /* A supprimer quand les images seront intégrées au framework  */ -->\r\n    <img id="fleche-montante" alt="évolution des flux positive" ng-show="pfIndicateurFlecheCtrl.isPositif" src="images/fleche-montante.png">\r\n    <img id="fleche-descendante" alt="évolution des flux négative" ng-show="pfIndicateurFlecheCtrl.isNegatif" src="images/fleche-descendante.png">\r\n    <img id="fleche-neutre" alt="évolution des flux neutre" ng-show="pfIndicateurFlecheCtrl.isNeutre" src="images/fleche-neutre.png">\r\n\r\n    <span class="valeur" ng-bind="pfIndicateurFlecheCtrl.config.valeurFormate"></span>\r\n</span>'),e.put("typescript/directives/pf-element-eds/pf-element-eds-vue.html",'<ul class="bloc-lien-eds">\r\n    <li class="list-group-item-eds" ng-transclude></li>\r\n    <li class="list-group-item-eds" ng-if="popupCtrl.eds.affiche" ng-repeat="child in popupCtrl.eds.agencesInferieur track by $index">\r\n        <mw-pf-element-eds ng-attr-id="child.id" eds="child">\r\n            <div ng-transclude></div>\r\n        </mw-pf-element-eds>\r\n    </li>\r\n</ul>'),e.put("typescript/directives/pf-ligne-relation-eco/pf-ligne-relation-eco-vue.html",'<div class="col-md-12 pf-ligne-relation-eco">\r\n    <div class="col-md-12 relation-info">\r\n        <span class="icon itce-business font-size-2-rem" aria-hidden="true"></span>\r\n        <span class="nom" ng-bind="pfLigneRelationEcoCtrl.relationEconomique.nom"></span>\r\n    </div>\r\n    <div class="col-md-12 relation-indicateurs">\r\n        <mw-pf-tuile-indicateur ng-repeat="indicateur in pfLigneRelationEcoCtrl.listeIndicateursAAfficher track by $index" type="indicateur.typeIndicateur" intitule="indicateur.intitule" icone="indicateur.icone" valeur="indicateur.valeur" valeur-number="indicateur.valeurNumber" ng-attr-id="pf-tuile-indicateur-{{$index}}"></mw-pf-tuile-indicateur>\r\n    </div>\r\n</div>'),e.put("typescript/directives/pf-panel-niveau-2/pf-panel-niveau-2-vue.html",'<div class="mw-pf-panel-niveau-2">\r\n    <div class="titre-bloc">\r\n        <span class="mw-troncature" ng-class="{\'col-sm-8\':pfPanelNiveau2Ctrl.configBouton, \'col-sm-12\':!pfPanelNiveau2Ctrl.configBouton}">\r\n            <span class="icon" ng-class="pfPanelNiveau2Ctrl.icone" ng-show="pfPanelNiveau2Ctrl.icone" aria-hidden="true"></span>\r\n            <span ng-bind="pfPanelNiveau2Ctrl.titre" title="{{::pfPanelNiveau2Ctrl.titre}}"></span>\r\n            <br>\r\n            <span ng-bind="pfPanelNiveau2Ctrl.titre2" title2="{{::pfPanelNiveau2Ctrl.titre2}}"></span>\r\n        </span>\r\n        <span class="col-sm-4" ng-show="pfPanelNiveau2Ctrl.configBouton">\r\n            <button class="btn btn-block btn-zone mw-troncature" ng-click="pfPanelNiveau2Ctrl.configBouton.action()" id="bouton-details">\r\n                <span ng-bind="pfPanelNiveau2Ctrl.configBouton.label"></span>\r\n            </button>\r\n        </span>\r\n    </div>\r\n    <div class="clearfix contenu">\r\n        <ng-transclude></ng-transclude>\r\n    </div>\r\n</div>'),e.put("typescript/directives/pf-indicateur-pourcentage/pf-indicateur-pourcentage-vue.html",'<!-- Code spécifique pour Chromium -->\r\n<div class="conteneur-petit-pourcentage" ng-if="!pfIndicateurPourcentageCtrl.isIE">\r\n    <div ng-attr-id="{{pfIndicateurPourcentageCtrl.id}}" class="svg-container"></div>\r\n</div>\r\n<!-- Code spécifique pour IE11 -->\r\n<div class="scaling-svg-container" ng-if="pfIndicateurPourcentageCtrl.isIE">\r\n    <div ng-attr-id="{{pfIndicateurPourcentageCtrl.id}}" class="scaling-svg"></div>\r\n</div>\r\n'),e.put("typescript/directives/pf-tuile-panier/pf-tuile-panier-vue.html",'<li class="pf-tuile-panier" ng-class="{\'tuile-mode-edition\':pfTuilePanierCtrl.tuilePanierSettings.estEnEdition}">\r\n    <div class="drop-content-tuile-panier pf-drop-target-element" mw-pf-core-drop-target drop-settings="pfTuilePanierCtrl.tuilePanierSettings.dropSettings">\r\n        <div class="container-pf-tuile-panier" mw-pf-core-draggable drag-settings="pfTuilePanierCtrl.tuilePanierSettings.dragSettings">\r\n            <mw-tuile-standard ng-attr-id="indicateur-{{pfTuilePanierCtrl.tuilePanierSettings.indicateur.indicateur.code}}" avec-marquage="pfTuilePanierCtrl.afficherMarquage()" texte-marquage="pfTuilePanierCtrl.nomMarquage()" titre="pfTuilePanierCtrl.tuilePanierSettings.indicateur.indicateur.intitule" ligne1="pfTuilePanierCtrl.famille" object="pfTuilePanierCtrl.tuilePanierSettings.indicateur" couleur="{{pfTuilePanierCtrl.couleur()}}" config="pfTuilePanierCtrl.configTuile">\r\n            </mw-tuile-standard>\r\n            <button ng-show="pfTuilePanierCtrl.tuilePanierSettings.estEnEdition" class="mw-tuile-action bouton-poubelle" id="bouton-poubelle" ng-click="pfTuilePanierCtrl.supprimer()">\r\n                <span class="icon itce-trash" aria-hidden="true">\r\n                </span>\r\n            </button>\r\n            <button ng-show="pfTuilePanierCtrl.afficherFlecheDroite()" class="mw-tuile-action bouton-droit" id="bouton-droit" ng-click="pfTuilePanierCtrl.deplacerADroite()">\r\n                <span class="icon itce-arrow-right" aria-hidden="true">\r\n                </span>\r\n            </button>\r\n            <button ng-show="pfTuilePanierCtrl.afficherFlecheGauche()" class="mw-tuile-action bouton-gauche" id="bouton-gauche" ng-click="pfTuilePanierCtrl.deplacerAGauche()">\r\n                <span class="icon itce-arrow-left" aria-hidden="true">\r\n                </span>\r\n            </button>\r\n        </div>\r\n    </div>\r\n</li>'),e.put("typescript/directives/pf-tuile-indicateur/pf-tuile-indicateur-vue.html",'<div class="pf-tuile-indicateur">\r\n    <div class="cadre" ng-class="{green:(pfTuileIndicateurCtrl.isGreen()), orange:(pfTuileIndicateurCtrl.isOrange())}">\r\n        <div class="pf-corps">\r\n            <div class="en-tete">\r\n                <p class="text intitule" ng-bind="pfTuileIndicateurCtrl.intitule"></p>\r\n            </div>\r\n            <div>\r\n                <p class="valeur" ng-show="pfTuileIndicateurCtrl.isTypeDate()" ng-bind="pfTuileIndicateurCtrl.valeur | date: \'dd/MM/yyyy\'">\r\n                </p>\r\n                <p class="valeur" ng-show="pfTuileIndicateurCtrl.isTypeNombre()">\r\n                    <span ng-bind="pfTuileIndicateurCtrl.valeurNumber | nombreFiltre"></span>\r\n                </p>\r\n                <p class="valeur" ng-show="pfTuileIndicateurCtrl.isTypeMontant()">\r\n                    <span ng-bind="pfTuileIndicateurCtrl.valeurNumber | montantFiltre: pfTuileIndicateurCtrl.isEuro"></span>\r\n                </p>\r\n                <p class="valeur" ng-show="pfTuileIndicateurCtrl.isTypePourcent()">\r\n                    <span ng-bind="pfTuileIndicateurCtrl.valeurNumber | pourcentFiltre"></span>\r\n                </p>\r\n                <p class="valeur" ng-show="pfTuileIndicateurCtrl.isTypeTexte()">\r\n                    <span ng-bind="pfTuileIndicateurCtrl.valeur"></span>\r\n                </p>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</div>'),e.put("typescript/directives/pf-tuile-catalogue/pf-tuile-catalogue-vue.html",'<li class="pf-tuile-catalogue"> \r\n    <!--<div class="container-pf-tuile-catalogue" mw-pf-core-draggable drag-settings="pfTuileCatalogueCtrl.tuileCatalogueSettings.dragSettings">-->\r\n    <div class="container-pf-tuile-catalogue" mw-pf-core-draggable drag-settings="pfTuileCatalogueCtrl.tuileCatalogueSettings.dragSettings">\r\n            <mw-tuile-standard ng-attr-id="indicateur-{{pfTuileCatalogueCtrl.tuileCatalogueSettings.indicateur.indicateur.code}}" avec-marquage="pfTuileCatalogueCtrl.afficherMarquage()" texte-marquage="pfTuileCatalogueCtrl.nomMarquage()" titre="pfTuileCatalogueCtrl.tuileCatalogueSettings.indicateur.indicateur.intitule" ligne1="pfTuileCatalogueCtrl.tuileCatalogueSettings.indicateur.indicateur.famille" object="pfTuileCatalogueCtrl.tuileCatalogueSettings.indicateur" couleur="{{pfTuileCatalogueCtrl.couleur()}}" config="pfTuileCatalogueCtrl.configTuile">\r\n            </mw-tuile-standard>\r\n            <button ng-show="pfTuileCatalogueCtrl.tuileCatalogueSettings.estEnEdition" class="mw-tuile-action bouton-ajout" id="bouton-ajout" ng-click="pfTuileCatalogueCtrl.ajouter()">\r\n                <span class="icon itce-plus" aria-hidden="true"></span>\r\n            </button>\r\n        </div>\r\n</li>'),e.put("typescript/directives/pf-puce-legende/pf-puce-legende-vue.html",' <div class="pf-puce-legende">\r\n    <span class="circle" ng-style="{\'background-color\': pfPuceLegendeCtrl.couleur}"></span>\r\n    <span class="intitule" ng-bind-html="pfPuceLegendeCtrl.intitule"></span>\r\n</div>\r\n<div class="pf-puce-legende" ng-show="pfPuceLegendeCtrl.sousIntitule">\r\n    <br>\r\n    <span class="circle" ng-style="{\'background-color\': pfPuceLegendeCtrl.sousCouleur}"></span>\r\n    <span class="intitule" ng-bind="pfPuceLegendeCtrl.sousIntitule"></span>\r\n</div>\r\n')}]);