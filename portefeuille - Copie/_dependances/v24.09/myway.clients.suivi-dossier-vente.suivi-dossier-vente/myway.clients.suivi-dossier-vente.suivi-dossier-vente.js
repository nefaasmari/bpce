/**
 * Généré par : SIGCESIE\ct-tfsbuild
 * Changeset TFS : undefined
 * Etiquette TFS : undefined
 * Déclenchement : undefined
 */
var myway;!function(e){var i;!function(e){var i;!function(e){"use strict";e.app=angular.module("myway.clients.suiviDossierVente",["ngRoute","myway.ui","ui.bootstrap","ngAnimate","moduleAgent"])}(i=e.suiviDossierVente||(e.suiviDossierVente={}))}(i=e.clients||(e.clients={}))}(myway||(myway={}));var myway;!function(e){var i;!function(e){var i;!function(e){"use strict"}(i=e.suiviDossierVente||(e.suiviDossierVente={}))}(i=e.clients||(e.clients={}))}(myway||(myway={}));var myway;!function(e){var i;!function(e){var i;!function(e){var i=function(){function e(){}return e}();e.ContexteMEGPSO=i}(i=e.suiviDossierVente||(e.suiviDossierVente={}))}(i=e.clients||(e.clients={}))}(myway||(myway={}));var myway;!function(e){var i;!function(e){var i;!function(e){"use strict";var i=function(){function e(e,i){this.$q=e,this.serviceAgentExtended=i,this.restUrlDossierNumeriqueV3="http://myway-ressources-dua.sigcesie.caisse-epargne.fr:6083/dossiernumerique/v3/dossierNumerique",this.restUrlDossierNumeriqueV3Signature="http://myway-ressources-dua.sigcesie.caisse-epargne.fr:6083/dossiernumerique/v3/signature"}return e.prototype.annulerSignatureElectronique=function(e){return this.serviceAgentExtended.sendRequest({url:this.restUrlDossierNumeriqueV3,params:e,withHeaders:!0,method:MyWay.Services.MethodEnum.DELETE}).then(function(e){return e})["catch"](function(){return null})},e.prototype.signature=function(e){return this.serviceAgentExtended.sendRequest({url:this.restUrlDossierNumeriqueV3Signature,params:e,withHeaders:!0,method:MyWay.Services.MethodEnum.POST}).then(function(e){return e})["catch"](function(){return null})},e.$inject=["$q","serviceAgentExtended"],e}();e.DossierNumeriqueService=i,e.app.service("dossierNumeriqueService",i)}(i=e.suiviDossierVente||(e.suiviDossierVente={}))}(i=e.clients||(e.clients={}))}(myway||(myway={}));var myway;!function(e){var i;!function(e){var i;!function(e){"use strict";var i=function(){function e(e,i){this.serviceAgentExtended=e,this.qService=i}return e.prototype.sendPutRequest=function(e,i){var t=this;this.serviceAgentExtended.Trace.debug("Appel des données de la ressource "+this.url(),"sendPutRequest");var n=this.qService.defer();return this.serviceAgentExtended.sendRequest({url:this.url(),withHeaders:!0,method:MyWay.Services.MethodEnum.PUT,responseType:MyWay.Services.ResponseTypeEnum.JSON,contentType:MyWay.Services.ContentTypeEnum.JSON,params:e,data:i}).then(function(e){n.resolve(e)})["catch"](function(e){var i="\nErreur lors de la réception des données de la ressource "+t.url()+".";t.serviceAgentExtended.Trace.error(i),n.reject(i)}),n.promise},e.prototype.url=function(){return"http://myway-ressources-dua.sigcesie.caisse-epargne.fr:6083/dossiervente/v1/gestionDossierVente"},e.$inject=["serviceAgentExtended","$q"],e}();e.GestionDossierVenteService=i,e.app.service("GestionDossierVenteService",i);var t=function(){function e(e,i,t){this.serviceAgent=e,this.qService=i,this.$http=t}return e.prototype.sendGetRequest=function(){var e=this;this.serviceAgent.Trace.debug("Appel des données de la ressource "+this.url(),"sendGetRequest");var i=this.qService.defer();return this.$http({method:"GET",url:this.url()}).then(function(e){i.resolve(e.data)})["catch"](function(t){var n="\nImpossible de chager le mock du fichier "+e.url()+".";e.serviceAgent.Trace.error(n),i.reject(n)}),i.promise},e.prototype.url=function(){return"http://myway-dua.sigcesie.caisse-epargne.fr:6080/version2/myway.clients.suivi-dossier-vente/mocks/gestionDossierVente.json"},e.$inject=["serviceAgent","$q","$http"],e}();e.GestionDossierVenteMockService=t,e.app.service("GestionDossierVenteMockService",t)}(i=e.suiviDossierVente||(e.suiviDossierVente={}))}(i=e.clients||(e.clients={}))}(myway||(myway={}));var myway;!function(e){var i;!function(e){var i;!function(e){"use strict";var i=function(){function e(e,i,t){this.serviceAgentExtended=e,this.qService=i,this.traceService=t}return e.prototype.sendGetRequest=function(e){var i=this;this.serviceAgentExtended.Trace.debug("Appel des données de la ressource "+this.url(),"sendGetRequest"),this.traceService.info("*** DIRECTIVE -> Appel des données de la ressource "+this.url(),"sendGetRequest");var t=this.qService.defer(),n={codeEtablissement:e.codeEtablissement,identifiantDossierVente:e.identifiantDossierVente,identifiantExterneDossierVente:e.identifiantExterneDossierVente?e.identifiantExterneDossierVente:"",codeExterneApplication:e.codeExterneApplication?e.codeExterneApplication:""};return this.serviceAgentExtended.sendRequest({url:this.url(),withHeaders:!0,method:MyWay.Services.MethodEnum.GET,params:n}).then(function(e){i.traceService.info("XXXX HistoriqueInterventionService -> sendGetRequest : result ",e);var n=angular.isDefined(e[0])?e[0]:e;t.resolve(n)})["catch"](function(e){var n="\nErreur lors de la réception des données de la ressource "+i.url()+".";console.warn("erreur : ",n),i.serviceAgentExtended.Trace.error(n),t.reject(n)}),t.promise},e.prototype.url=function(){return"http://myway-ressources-dua.sigcesie.caisse-epargne.fr:6083/dossiervente/v1/historiqueIntervention"},e.$inject=["serviceAgentExtended","$q","traceService"],e}();e.HistoriqueInterventionService=i,e.app.service("HistoriqueInterventionService",i);var t=function(){function e(e,i,t){this.serviceAgent=e,this.qService=i,this.$http=t}return e.prototype.sendGetRequest=function(e){var i=this;this.serviceAgent.Trace.debug("Appel des données de la ressource "+this.url(),"sendGetRequest");var t=this.qService.defer();return this.$http({method:"GET",url:this.url()}).then(function(e){t.resolve(e.data[0])})["catch"](function(e){var n="\nImpossible de chager le mock du fichier "+i.url()+".";i.serviceAgent.Trace.error(n),t.reject(n)}),t.promise},e.prototype.url=function(){return"http://myway-dua.sigcesie.caisse-epargne.fr:6080/version2/myway.clients.suivi-dossier-vente/mocks/historiqueIntervention.json"},e.$inject=["serviceAgent","$q","$http"],e}();e.HistoriqueInterventionMockService=t,e.app.service("HistoriqueInterventionMockService",t)}(i=e.suiviDossierVente||(e.suiviDossierVente={}))}(i=e.clients||(e.clients={}))}(myway||(myway={}));var myway;!function(e){var i;!function(e){var i;!function(e){"use strict";var i=function(){function e(e,i){this.$q=e,this.$timeout=i,this.historiqueLog="",this.colors={debug:"#283B82",error:"#C74F0C",info:"#336924",warning:"#9E0808"}}return e.prototype.log=function(e,i){if(void 0===e&&(e=""),window.console&&console.log){var t=-1!==navigator.userAgent.indexOf("Trident"),n="\n",r=" *** ",s="padding:2px 10px; background-color:"+this.colors[this.logType]+"; color: white;";console.log(n),t?console.log(r+"**"+e+"** "+r+"("+this.getTime()+")"):console.log("%c "+e+" ("+this.getTime()+")",s),angular.isDefined(i)&&console.log(i)}},e.prototype.debug=function(e,i,t){void 0===t&&(t=!1),this.traceServiceLogger("debug",e,i,t)},e.prototype.error=function(e,i,t){void 0===t&&(t=!1),this.traceServiceLogger("error",e,i,t)},e.prototype.info=function(e,i,t){void 0===t&&(t=!1),this.traceServiceLogger("info",e,i,t)},e.prototype.warning=function(e,i,t){void 0===t&&(t=!1),this.traceServiceLogger("warning",e,i,t)},e.prototype.warn=function(e,i,t){void 0===t&&(t=!1),this.warning(e,i,t)},e.prototype.traceServiceLogger=function(i,t,n,r){void 0===r&&(r=!1);var s,o=null;if(this.logType=i,this.log(t,n),r&&angular.isDefined(n))try{this.historiqueLog+="<span style='padding:2px 10px; background-color:"+this.colors[this.logType]+"; color: white;'><strong>"+this.getTime()+"</strong> : "+t+"</span><pre>"+JSON.stringify(n)+"</pre > <br>"}catch(a){console.log("\n\n\n*************************************************************************\n"),console.log("Trace Service ERROR in this.historiqueLog JSON.stringify(object)\n"),console.log(n),console.log(a),console.log("*************************************************************************\n\n\n")}switch(this.logType){case"debug":try{e.logger.debug(t+" : %1",n)}catch(a){o="debug",s=a}break;case"info":try{e.logger.info(t+" : %1",n)}catch(a){o="info",s=a}break;case"error":try{e.logger.error(t+" : %1",n)}catch(a){o="error",s=a}break;case"warn":try{e.logger.warn(t+" : %1",n)}catch(a){o="warn",s=a}}null!==o&&(this.logType="error",this.log("TraceService Error : ServiceTrace.logger."+o,s))},e.prototype.getTime=function(){var e=new Date;return e.getHours()+":"+e.getMinutes()+":"+e.getSeconds()+":"+e.getMilliseconds()},e.prototype.clearHistoriqueLog=function(){this.historiqueLog=""},Object.defineProperty(e.prototype,"logType",{get:function(){return this._logType},set:function(e){this._logType=e},enumerable:!0,configurable:!0}),e.CLASS_NAME="myway.clients.suiviDossierVente.TraceService",e.logger=MyWay.Services.Loggers.LoggerFactory.INSTANCE.getClass(e.CLASS_NAME),e.$inject=["$q","$timeout"],e}();e.TraceService=i,e.app.service("traceService",i)}(i=e.suiviDossierVente||(e.suiviDossierVente={}))}(i=e.clients||(e.clients={}))}(myway||(myway={}));var myway;!function(e){var i;!function(i){var t;!function(i){"use strict";var t=function(){function e(){}return e.CODE_AIDN="AIDN",e.CODE_APSO="APSO",e.CODE_APPLICATION_CONTELEC="CONTELEC",e.CLICK_APERCU_DOCUMENT="CLICK_APERCU_DOCUMENT#",e.CODE_ABANDON_CONSEILLER="ANNU",e.CODE_ABANDON_CLIENT="ABAN",e.CODE_ACTION_ABANDON_CLIENT="ENRG",e.CODE_POSI="POSI",e}();i.SuiviDossierVenteConstante=t;var n=function(){function i(e,i,t,n,r,s,o,a,c,u,l){var d=this;this.serviceAgentExtended=e,this.$q=i,this.$scope=t,this.$rootScope=n,this.modalService=r,this.gestionDossierVenteService=s,this.gestionDossierVenteMockService=o,this.historiqueInterventionService=a,this.historiqueInterventionMockService=c,this.dossierNumeriqueService=u,this.traceService=l,this.abandonDossierBoutonActions=[],this.abandonDossierBoutonVisible=!1,this.abandonDossierBoutonDisable=!1,this.previsualiserLesDocumentsVisible=!1,this.numeroContratVisible=!1,this.traceService.info("*** LANCEMENT DIRECTIVE suivi dossier"),this.abandonDossierVente=null,this.parametresCopiePourAbandon=null,this.$scope.$watchCollection(function(){return d.parametres},function(e,i){angular.equals(JSON.stringify(e),JSON.stringify(i))&&(d.traceService.info("*** DIRECTIVE suivi dossier -> $watchCollection IParametresSuiviDossier"),d.afficherHistoriqueIntervention())}),this.$rootScope.$on("suividossier_majhisto",function(e){d.traceService.info("*** DIRECTIVE suivi dossier -> EVENT RECEIVED MAJ afficherHistoriqueIntervention"),d.afficherHistoriqueIntervention()}),this.$rootScope.$emit("suividossier_ready"),this.$rootScope.$on("abandonDossierBoutonDisableTrue",function(e){d.traceService.info("*** DIRECTIVE suivi dossier -> EVENT RECEIVED MAJ abandonDossierBoutonDisable True"),d.abandonDossierBoutonDisable=!0}),this.$rootScope.$on("abandonDossierBoutonDisableFalse",function(e){d.traceService.info("*** DIRECTIVE suivi dossier -> EVENT RECEIVED MAJ abandonDossierBoutonDisable False"),d.abandonDossierBoutonDisable=!1})}return i.prototype.afficherHistoriqueIntervention=function(){var e=this;this.traceService.info("*** DIRECTIVE suivi dossier -> afficherHistoriqueIntervention"),null===this.parametresCopiePourAbandon&&(this.parametresCopiePourAbandon=angular.copy(this.parametres)),this.parametres&&this.parametres.gestionDossierVente&&this.parametres.gestionDossierVente.dossierVente&&(this.$scope.$evalAsync(function(){e.identifiantDossierVente=e.parametres.gestionDossierVente.dossierVente.identifiantDossierVente.toString()}),this.construireBoutonAbandon(),this.parametres.gestionDossierVente.listeCheminAvancement=_.sortBy(this.parametres.gestionDossierVente.listeCheminAvancement,"rangJalon"),this.chargerHistoriqueIntervention(),this.abandonDossierBoutonVisible=this.chercherCodeActionPossible(["ABAN","ANNU","ANSO"]),this.previsualiserLesDocumentsVisible=this.chercherCodeActionPossible(["APER"]))},i.prototype.construireBoutonAbandon=function(){var e=this;this.abandonDossierBoutonActions=[],this.traceService.info("*** DIRECTIVE suivi dossier / construireBoutonAbandon -> listeActionPossible",this.parametres.gestionDossierVente.listeActionPossible);var i=1144===this.parametres.gestionDossierVente.donneePrincipale.numeroOffre&&"PM"===this.parametres.gestionDossierVente.donneePrincipale.typeProfessionnel;this.traceService.info("*** DIRECTIVE suivi dossier / construireBoutonAbandon -> affichage msg PSO Pro",i),_.forEach(this.parametres.gestionDossierVente.listeActionPossible,function(t,n){"S"===t.codeTypeActionPossible&&e.abandonDossierBoutonActions.push({titreAction:t.libelleActionPossibleAgent,clicAction:function(){return e.confirmAbandonDossier(n,t.codeOperationFonctionnelle,i)}})})},i.prototype.chargerHistoriqueIntervention=function(){var e=this;this.traceService.info("*** DIRECTIVE -> chargerHistoriqueIntervention : this.parametres",this.parametres),this.parametres&&this.parametres.gestionDossierVente&&this.parametres.gestionDossierVente.dossierVente&&(this.identifiantDossierVente=this.parametres.gestionDossierVente.dossierVente.identifiantDossierVente.toString(),this.historiqueInterventionService.sendGetRequest(this.parametres.gestionDossierVente.dossierVente).then(function(i){e.traceService.info("*** DIRECTIVE suivi dossier / chargerHistoriqueIntervention -> result ",i),angular.isDefined(i.dossierVente)&&null!==i.dossierVente&&(i.dossierVente.identifiantExterneDossierVente||i.dossierVente.codeExterneApplication)&&(e.numeroContratVisible=!0),e.historiqueIntervention=i})["catch"](function(i){e.traceService.info("*** DIRECTIVE suivi dossier / chargerHistoriqueIntervention -> error",i.libelle)}))},i.prototype.formattageDate=function(e){var i=e.substr(0,4),t=e.substr(5,2),n=e.substr(8,2),r=e.substr(11,5).replace(".","h");return n+"/"+t+"/"+i+" "+r},i.prototype.chercherCodeActionPossible=function(e){var i=this,t=!1;return _.forEach(this.parametres.gestionDossierVente.listeActionPossible,function(n){t||_.forEach(e,function(e){t||n.codeActionPossible!==e||(t=!0),"APER"===n.codeActionPossible&&(i.actionPrevisualiserDocs=n)})}),t},i.prototype.abandonDossierPutRequest=function(e){this.traceService.info("*** abandonDossierPutRequest -> actionPossible",e),this.traceService.info("*** abandonDossierPutRequest -> listeActionPossible",this.parametres.gestionDossierVente.listeActionPossible);var i={dossierVente:this.parametres.gestionDossierVente.dossierVente,acteurContexte:this.parametres.gestionDossierVente.acteurContexte,donneePrincipale:this.parametres.gestionDossierVente.donneePrincipale},t={codeActionContexte:this.parametres.gestionDossierVente.listeActionPossible[e].codeActionPossible,typeAppelant:"B",codeCanalContexte:this.parametres.codeCanal,codeSensCommunicationContexte:this.parametres.codeSensCommunication,indicMajCommentaire:"N",indicMajPersonne:"N",indicMajPartenaire:"N",indicMajCompositionDetail:"N",indicMajContractSignature:"N"};return this.gestionDossierVenteService.sendPutRequest(t,i)},i.prototype.confirmAbandonDossier=function(i,n,r){var s=this;void 0===r&&(r=!1);var o="L'abandon du dossier de vente entraîne l'annulation de la souscription des Parts Sociales.",a="<br>",c="Confirmez-vous l'abandon du dossier de vente ?";r&&(c=o+a+a+c);var u={actionButtonText:"Oui",closeButtonText:"Non",headerText:"Abandonner le dossier",bodyText:c,iconName:"itce-question",size:"md"};this.modalService.showConfirm(u).then(function(r){s.traceService.info("*** confirmAbandonDossier -> actionPossible",i),s.$rootScope.$emit("abandonDossierDepuisDirective"),s.abandonDossierPutRequest(i).then(function(r){if(s.parametres.gestionDossierVente=r,s.abandonDossierVente=r,s.afficherHistoriqueIntervention(),r.listeActionPossible&&r.listeActionPossible.length>0&&r.listeActionPossible[0].codeActionPossible===t.CODE_APSO){var o=new e.clients.suiviDossierVente.ContexteMEGPSO;return o.codeCaisse=s.parametres.codeEtablissementConnexion,o.codeGuichet=s.parametres.codeGuichetConnexion,o.codeEntite=s.parametres.codeEntite,o.codeSensCommunication=s.parametres.codeSensCommunication,o.identifiantDossierVente=parseInt(s.parametres.identifiantDossierVente,10),o.codeCanal=s.parametres.codeCanal,void s.serviceAgentExtended.Context.AddToMainProcessContext("CONTEXTE_MEGPSO",JSON.stringify(o)).then(function(){s.traceService.info("*** DV OperationFonctionnelleService OperationFonctionnelleService -> debranchementLisa : AddToContext CONTEXTE_MEGPSO : ",o),s.serviceAgentExtended.Lisa.Next(28).then(function(){s.traceService.info("*** DV OperationFonctionnelleService OperationFonctionnelleService -> debranchementLisa OK vers 28")})["catch"](function(e){s.traceService.error("*** DV OperationFonctionnelleService OperationFonctionnelleService -> debranchementLisa KO vers 28 / error :",e)})})}if(n===t.CODE_AIDN||n===t.CODE_POSI){var a={listeDossiersNumeriques:[s.parametres.gestionDossierVente.contractualisationSignature.identifiantDocumentNumerise],modeSignature:{codeImpression:"Signe"},referenceExterne:null,codeApplication:"DOSSVENT",isDeployeMySign:s.isMySign(s.parametres.gestionDossierVente)};s.dossierNumeriqueService.signature(a).then(function(){s.serviceAgentExtended.Trace.debug("Dossier de signature électronique annulé avec succès.")})["catch"](function(e){s.serviceAgentExtended.Trace.error("Impossible d'annuler la signature électronique pour les raisons suivantes : "+e)})}var c=s.parametresCopiePourAbandon.gestionDossierVente.listeActionPossible[i].codeActionPossible;if(c===t.CODE_ABANDON_CLIENT||c===t.CODE_ABANDON_CONSEILLER){var u=s.parametresCopiePourAbandon.gestionDossierVente.listeActionPossible[i].codeOperationFonctionnelle;"ABDN"===u&&(s.serviceAgentExtended.Trace.debug("Code ABDN présent"),s.cancelTransaction(c).then(function(e){s.serviceAgentExtended.Trace.debug("annulationDossierNumerique : "+e),e.isDossierNumeriqueAnnule?s.serviceAgentExtended.Trace.debug("Cancel transaction effectué : "+c):s.serviceAgentExtended.Trace.warning("Cancel transaction échoué : "+c)})["catch"](function(e){s.serviceAgentExtended.Trace.error("Impossible de résoudre la promesse cancelTransaction : "+e)}))}})["catch"](function(e){throw new Error("Erreur lors de l'abandon du dossier de vente. Cause : \n"+e)})})["catch"](function(e){})},i.prototype.cancelTransaction=function(e){var i=this,n=this.parametres.gestionDossierVente.listePersonneLiee,r="";if(n.forEach(function(e){"O"===e.indicateurSignataire&&""===r&&(r=_.padLeft(e.identifiantPersonne.toString(),9,"0"))}),e===t.CODE_ABANDON_CLIENT&&""===r)throw new Error("Pas de personne liée signataire du dossier de vente");var s={idDossierNumerique:this.parametres.gestionDossierVente.contractualisationSignature.identifiantDocumentNumerise,codeApplication:"DOSSVENT",referenceActe:this.isMySign(this.parametres.gestionDossierVente)?"":this.parametres.gestionDossierVente.contractualisationSignature.identifiantDocumentNumerise,typeReferenceActe:"",isDeployMySign:this.isMySign(this.parametres.gestionDossierVente)};return this.traceService.info("======= suivi-dossier-vente-controleur > cancelTransaction : donneesAnnulation",s),this.dossierNumeriqueService.annulerSignatureElectronique(s).then(function(e){return i.traceService.info("======= suivi-dossier-vente-controleur > cancelTransaction > Dossier de signature électronique annulé avec succès"),e})["catch"](function(e){return i.traceService.error("======= suivi-dossier-vente-controleur > cancelTransaction > Impossible d'annuler la signature électronique pour les raisons suivantes : "+e),e})},i.prototype.previsualiserDocuments=function(){this.$scope.$emit(t.CLICK_APERCU_DOCUMENT),this.traceService.info("Emission du message: "+t.CLICK_APERCU_DOCUMENT)},i.prototype.getPrescripteur=function(){return this.parametres.gestionDossierVente.partenaire&&this.parametres.gestionDossierVente.partenaire.identifiantPartenaire?"- prescripteur : "+this.parametres.gestionDossierVente.partenaire.identifiantPartenaire:""},i.prototype.isMySign=function(e){return"MS"===e.contractualisationSignature.identifiantDocumentNumerise.substr(-2)?!0:!1},i.prototype.testToString=function(e){return e&&"undefined"!=typeof e&&null!==e?e.toString():""},i.$inject=["serviceAgentExtended","$q","$scope","$rootScope","modalService","GestionDossierVenteService","GestionDossierVenteMockService","HistoriqueInterventionService","HistoriqueInterventionMockService","dossierNumeriqueService","traceService"],i}();i.SuiviDossierVenteController=n,i.app.controller("SuiviDossierVenteController",n)}(t=i.suiviDossierVente||(i.suiviDossierVente={}))}(i=e.clients||(e.clients={}))}(myway||(myway={}));var myway;!function(e){var i;!function(e){var i;!function(e){"use strict";function i(){return{restrict:"E",priority:0,templateUrl:"typescript/directives/suivi-dossier-vente/suivi-dossier-vente.html",controller:"SuiviDossierVenteController",controllerAs:"suiviDossierVenteCtrl",bindToController:!0,scope:{parametres:"=",ouvert:"=",abandonDossierVente:"="},link:function(e,i,t){if(!("parametres"in t))throw new Error("Directive mwSuiviDossierVente : l'attribut parametres est obligatoire !")}}}e.app.directive("mwSuiviDossierVente",i)}(i=e.suiviDossierVente||(e.suiviDossierVente={}))}(i=e.clients||(e.clients={}))}(myway||(myway={})),angular.module("myway.clients.suiviDossierVente").run(["$templateCache",function(e){e.put("typescript/directives/suivi-dossier-vente/suivi-dossier-vente.html",'<div class="col-md-12 com-dossvente">\r\n\r\n    <div class="col-md-12 panel panel-primary">\r\n        <div class="panel-heading panel-actif panel-bar">\r\n            <h2 class="panel-title col-md-9">Suivi de dossier <span ng-bind="suiviDossierVenteCtrl.getPrescripteur()"></span></h2>\r\n            <div class="col-md-3">\r\n                <mw-bouton-liste-actions ng-show="suiviDossierVenteCtrl.abandonDossierBoutonVisible" ng-click="" titre="Abandonner le dossier" id="com-dossvente-abandon" modele="secondaire" data="suiviDossierVenteCtrl.abandonDossierBoutonActions" is-disabled="suiviDossierVenteCtrl.abandonDossierBoutonDisable"></mw-bouton-liste-actions>\r\n            </div>\r\n        </div>\r\n        <div class="panel-body">\r\n            <div class="row col-md-12 mw-bloc-contenu">\r\n                <div class="row col-md-12 com-dossvente-avancement">\r\n                    <ul class="list-unstyled">\r\n                        <li class="row col-md-12 com-dossvente-avancement-libelle avancement-libelle-box" ng-repeat="cheminAvancement in suiviDossierVenteCtrl.parametres.gestionDossierVente.listeCheminAvancement track by $index">\r\n                            <div class="com-dossvente-avancement-libelle avancement-libelle-label" ng-bind="cheminAvancement.libelleJalon"></div>\r\n                        </li>\r\n                    </ul>\r\n                    <div class="row col-md-12">\r\n                        <ul class="list-unstyled">\r\n                            <li class="com-dossvente-avancement-code avancement-code-box" ng-repeat="cheminAvancement in suiviDossierVenteCtrl.parametres.gestionDossierVente.listeCheminAvancement track by $index">\r\n                                <div class="com-dossvente-avancement-code avancement-code-pastille" ng-class="{\'pastille-franchi\': cheminAvancement.codeFranchissement == \'02\', \'pastille-jamais-franchi\': cheminAvancement.codeFranchissement == \'03\'}"></div>\r\n                                <div ng-if="suiviDossierVenteCtrl.parametres.gestionDossierVente.listeCheminAvancement[$index + 1]" class="com-dossvente-avancement-code avancement-code-separateur"></div>\r\n                            </li>\r\n                        </ul>\r\n                    </div>\r\n                </div>\r\n                <div class="row col-md-12 com-dossvente-libelle-action-mener" ng-bind="suiviDossierVenteCtrl.parametres.gestionDossierVente.etapeEnCours.libelleStatutActionAMener"></div>\r\n                <div class="row col-md-12 com-dossvente-libelle-action-reservee" ng-bind="suiviDossierVenteCtrl.parametres.gestionDossierVente.etapeEnCours.libelleActionReservee"></div>\r\n                <div class="row col-md-12 com-dossvente-libelle-mode-signature">\r\n                    <strong>Mode de signature choisi :</strong>\r\n                    <span ng-bind="suiviDossierVenteCtrl.parametres.gestionDossierVente.contractualisationSignature.libelleModeSignature | uppercase"></span>\r\n\r\n                    <span class="pull-right" ng-if="suiviDossierVenteCtrl.previsualiserLesDocumentsVisible">\r\n                        <button class="btn-link" type="button" id="link-pull-right-suivi-dv" ng-click="suiviDossierVenteCtrl.previsualiserDocuments()">Prévisualiser les documents</button>\r\n                    </span>\r\n                </div>\r\n            </div>\r\n            <div class="row col-md-12 com-dossvente-caracteristiques">\r\n                <mw-accordeon id-panneau-defaut="com-dossvente-caracteristiques" open="false" id="mw-accordeon-com-dossvente-caracteristiques">\r\n                    <mw-hretractable class="com-dossvente-caracteristiques-accordeon" id="com-dossvente-caracteristiques-accordeon">\r\n                        <mw-hretractable-titre id="caracteristiques-dossvente-titre">\r\n                            Historique du dossier n° <span ng-bind="suiviDossierVenteCtrl.identifiantDossierVente"></span>\r\n                            affecté à\r\n                            <span ng-bind="suiviDossierVenteCtrl.parametres.gestionDossierVente.donneePrincipale.prenomAgentAffecte"></span>\r\n                            <span ng-bind="suiviDossierVenteCtrl.parametres.gestionDossierVente.donneePrincipale.nomAgentAffecte"></span>\r\n                        </mw-hretractable-titre>\r\n                        <div class="col-md-12 com-dossvente-caracteristiques-header" ng-if="suiviDossierVenteCtrl.numeroContratVisible">\r\n                            <!-- JDA/FBE - Correction pb affichage INC005734602 -->\r\n                            <span for="com-dossvente-reference-externe" class="col col-md-3 control-label">Numéro de contrat</span>\r\n                            <span class="col-auto col-md com-dossvente-numero-contrat" ng-bind="suiviDossierVenteCtrl.historiqueIntervention.dossierVente.identifiantExterneDossierVente"></span>\r\n                            <span class="col col-md" ng-bind="suiviDossierVenteCtrl.historiqueIntervention.dossierVente.codeExterneApplication"></span>\r\n                            <!-- </div>-->\r\n                        </div>\r\n                        <table class="table table-bordered">\r\n                            <caption class="adobe-blank">Historique des interventions</caption>\r\n                            <thead>\r\n                                <tr>\r\n                                    <th scope="col">Date</th>\r\n                                    <th scope="col">Traité par</th>\r\n                                    <th scope="col">Nature opération</th>\r\n                                    <th scope="col">Entité</th>\r\n                                    <th scope="col">Canal</th>\r\n                                    <th scope="col">Statut</th>\r\n                                    <th scope="col">Affecté à</th>\r\n                                    <th scope="col">Commentaire</th>\r\n                                </tr>\r\n                            </thead>\r\n                            <tbody ng-repeat="intervention in suiviDossierVenteCtrl.historiqueIntervention.listeInterventionDossier track by $index">\r\n                                <tr>\r\n                                    <td ng-bind="suiviDossierVenteCtrl.formattageDate(intervention.dateHeureIntervention)"></td>\r\n                                    <td ng-bind="intervention.designationAgentTraitement  | lowercase"></td>\r\n                                    <td ng-bind="intervention.libelleNatureIntervention"></td>\r\n                                    <td ng-bind="intervention.libelleEntiteVente"></td>\r\n                                    <td ng-bind="intervention.libelleCanal"></td>\r\n                                    <td ng-bind="intervention.libelleStatutEtape"></td>\r\n                                    <td ng-bind="intervention.designationAgentAffectation"></td>\r\n                                    <td ng-bind="intervention.libelleErreurApplicative"></td>\r\n                                </tr>\r\n                            </tbody>\r\n                        </table>\r\n                    </mw-hretractable>\r\n                </mw-accordeon>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</div>')}]);