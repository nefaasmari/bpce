/**
 * Généré par : SIGCESIE\ct-tfsbuild
 * Changeset TFS : C673730
 * Etiquette TFS : c05-10-v23.05-commun_20230313.1
 * Déclenchement : IndividualCI
 */
var myway;!function(e){var r;!function(e){var r;!function(e){"use strict";e.communModule=angular.module("myway.gestionEpargne.commun",["ngRoute","myway.ui","ui.bootstrap","ngAnimate","moduleAgent","myway.comInterdomaine","myway.comOpesFinancieres","myway.comEcheancier","myway.transProduitEngage"])}(r=e.commun||(e.commun={}))}(r=e.gestionEpargne||(e.gestionEpargne={}))}(myway||(myway={}));var myway;!function(e){var r;!function(e){var r;!function(e){"use strict";var r=function(){function e(){}return e.OUVERTURE="OU",e.CLOTURE="CL",e.AVENANT="AV",e.MODE_PRECEDENT="1",e.EMIT_REFERENCE_PRODUIT="CSPR_DEFINIR_REFERENCE_PRODUIT_PRINCIPAL#",e.CSPR_DEFINIR_ROUTAGE_EDITIQUE="CSPR_DEFINIR_ROUTAGE_EDITIQUE#",e.CSPR_CHARGEMENT_EFFECTUE="CSPR_CHARGEMENT_EFFECTUE#",e.CSPR_QUITTER="CSPR_QUITTER#",e.CONTEXTE_APPELANT_BDR=3,e.CODE_RETOUR_MISE_EN_GESTION_EST_OK=0,e.ERREUR_MONTANT_OPERATION_FINANCIERE="Le montant de l'opération financière doit être différent de zéro",e.CODE_LIBELLE_FORCAGE="MSG.RECRA00",e.CODE_BADGE_FORCAGE="3999",e.CODE_LIBELLE_ERREUR_AUTRE="ECH. ",e}();e.ConstantesCommunes=r;var n=function(){function e(){}return e.COMPTE_ATTENTE="compte d'attente",e.COMPTE_EPARGNE_LOGEMENT="compte epargne logement",e.LIVRET_A="livret a",e.LIVRET_B="livret b",e.LIVRET_DEVELOPPEMENT_DURABLE="livret developpement durable",e.LIVRET_EPARGNE_POPULAIRE="livret epargne populaire",e.LIVRET_GRAND_PRIX="livret grand prix",e.LIVRET_JEUNE="livret jeune",e.PLAN_EPARGNE_LOGEMENT="plan epargne logement",e.RELEVE_LIVRET="releve livret",e}();e.ProduitsServiceEpargne=n;var t=function(){function e(){}return e.PARAMETRES_SERVEUR_POSTE="ParametresServeurPoste",e}();e.Contexte=t}(r=e.commun||(e.commun={}))}(r=e.gestionEpargne||(e.gestionEpargne={}))}(myway||(myway={}));var myway;!function(e){var r;!function(e){var r;!function(e){var r=function(){function r(e,r,n,t){this.serviceAgentExtended=e,this.ecureuilService=r,this.existenceLSEService=n,this.modalService=t}return r.prototype.ajouterLSE=function(e,r,n,t,i){var o=this;return this.existenceLSEService.getExistenceLSE(e,r,n,t,i).then(function(r){if(r.existence){var a="Voulez-vous intégrer le compte dans le LSE",s={actionButtonText:"Oui",closeButtonText:"Non",headerText:"Confirmation",bodyText:a,iconName:"itce-question",size:"md"};return o.modalService.showConfirm(s).then(function(r){return o.ecureuilService.getLibreServiceEcureuil(e,n,i).then(function(e){var r=o.creerBodyPutLibreServiceEcureuil(e,t);return o.ecureuilService.putLibreServiceEcureuil(r,i).then(function(e){o.serviceAgentExtended.Trace.info("Le compte est ajouté dans LSE")})["catch"](function(e){o.serviceAgentExtended.Trace.error("Erreur Lors de l'ajout du nouveau dans LSE");var r="Compte non enregistré dans LSE",n=e.libelle,t={closeButtonText:"Fermer",headerText:r,bodyText:n,iconName:"",size:"md"};return o.modalService.showPopup(t)})})["catch"](function(e){var r="Compte non enregistré dans LSE",n=e.libelle,t={closeButtonText:"Fermer",headerText:r,bodyText:n,iconName:"",size:"md"};return o.modalService.showPopup(t)})})}})},r.prototype.creerBodyPutLibreServiceEcureuil=function(r,n){var t=new e.ContratLibreServiceEcureuil,i=[];return t.codeEtablissementBanque=r.codeEtablissementBanque,t.identifiantPersonne=r.identifiantPersonne,_.forEach(r.contratCarte,function(e){var r=_.remove(e.compteHorsAbonnement,function(e){return e.referenceProduitService===n});r.length>0&&e.compteDansAbonnement.push({referenceProduitService:r[0].referenceProduitService,numeroRangDuCompte:null,codeQualitePersonne:r[0].codeQualitePersonne,codeEtablissementBanque:r[0].codeEtablissementBanque,codeGuichetInterbancaire:r[0].codeGuichetInterbancaire}),i.push(e)}),t.contratCarte=i,t},r.$inject=["serviceAgentExtended","ecureuilService","existenceLSEService","modalService"],r}();e.AjoutLSEService=r,e.communModule.service("ajoutLSEService",r)}(r=e.commun||(e.commun={}))}(r=e.gestionEpargne||(e.gestionEpargne={}))}(myway||(myway={}));var myway;!function(e){var r;!function(e){var r;!function(e){var r=function(){function e(){}return e}();e.CompteDansAbonnement=r;var n=function(){function e(){}return e}();e.ContratLibreServiceEcureuil=n;var t=function(){function e(){}return e}();e.ContratCarte=t;var i=function(){function e(){}return e}();e.CompteHorsAbonnement=i}(r=e.commun||(e.commun={}))}(r=e.gestionEpargne||(e.gestionEpargne={}))}(myway||(myway={}));var myway;!function(e){var r;!function(e){var r;!function(e){var r=function(){function e(e){this.serviceAgent=e}return e.prototype.getLibreServiceEcureuil=function(e,r,n){var t={};return null!=e&&(t.codeEtablissementBanque=e),null!=r&&(t.personneEnRelation=r),null!=n&&(t.dateNaissancePersonne=n.toISOString()),this.serviceAgent.sendRequest({url:"http://myway-ressources-dua.sigcesie.caisse-epargne.fr:6083/contratcarte-v1/libreServiceEcureuil",withHeaders:!0,method:MyWay.Services.MethodEnum.GET,params:t})},e.prototype.putLibreServiceEcureuil=function(e,r){var n={};return null!=r&&(n.dateNaissancePersonne=r.toISOString()),this.serviceAgent.sendRequest({url:"http://myway-ressources-dua.sigcesie.caisse-epargne.fr:6083/contratcarte-v1/libreServiceEcureuil",withHeaders:!0,method:MyWay.Services.MethodEnum.PUT,params:n,data:e})},e.$inject=["serviceAgent"],e}();e.EcureuilService=r,e.communModule.service("ecureuilService",r)}(r=e.commun||(e.commun={}))}(r=e.gestionEpargne||(e.gestionEpargne={}))}(myway||(myway={}));var myway;!function(e){var r;!function(e){var r;!function(e){var r=function(){function e(){}return e}();e.ExistenceLSE=r}(r=e.commun||(e.commun={}))}(r=e.gestionEpargne||(e.gestionEpargne={}))}(myway||(myway={}));var myway;!function(e){var r;!function(e){var r;!function(e){var r=function(){function e(e){this.serviceAgent=e}return e.prototype.getExistenceLSE=function(e,r,n,t,i){var o={};return null!=e&&(o.codeEtablissement=e),null!=r&&(o.codeGuichet=r),null!=n&&(o.numeroPersonne=n),null!=t&&(o.numeroCompte=t),null!=i&&(o.dateNaissancePersonne=i.toISOString()),this.serviceAgent.sendRequest({url:"http://myway-ressources-dua.sigcesie.caisse-epargne.fr:6083/contratcarteservice-v1/existenceLSE",withHeaders:!0,method:MyWay.Services.MethodEnum.GET,params:o})},e.$inject=["serviceAgent"],e}();e.ExistenceLSEService=r,e.communModule.service("existenceLSEService",r)}(r=e.commun||(e.commun={}))}(r=e.gestionEpargne||(e.gestionEpargne={}))}(myway||(myway={}));var myway;!function(e){var r;!function(e){var r;!function(e){"use strict";var r=function(){function r(e,r,n,t,i,o,a,s,c,l){var u=this;this.$q=e,this.$scope=r,this.serviceAgentExtended=n,this.creerDossierDeVenteService=t,this.epargneCommunService=i,this.ggoService=o,this.offreUtilService=a,this.psEpargne=s,this.psService=c,this.serviceTrace=l,this.bordereau=0,this.afficherBATOPEFI=!1,this.codeModeFinancierParDefaut="06",this.tabErreursMiseEnGestion=[],this.tabErreurs=[],this.pointEntreeFonctionSauvegarde=function(){return u.sauvegarderDossierDeVente()},this.constructorTimer=c.initTimer("constructeur"),this.idegps=this.getIdegps(),this.psName=this.contexte.donneesProduit.produit.produitCaracteristique.libelleProduitService,this.serviceTrace.logPrefixe="["+this.idegps+"] "+this.psName+" => ",this.offreUtilService.determinerMode(this,this.codeActeGestion.substring(0,2)),this.ggoService.determinerCodeCanal(this,this.contexte),this.ggoService.determinerRestitutionDV(this,this.contexte),this.numeroPersonne=this.epargneCommunService.identifierNumeroPersonne(this.contexte),this.serviceTrace.debug("constructor() : contexte  ",this.contexte),this.enRestitutionDV?(this.donneesSauvegarde=this.contexte.donneesGeneriques[0].donneesDeSauvegardeProduitService,this.serviceTrace.debug("constructor() : donneesSauvegarde ",this.donneesSauvegarde)):this.serviceTrace.debug("constructor() : PAS DE DONNEES GENERIQUES"),this.emitRoutageEditique()}return r.prototype.getIdegps=function(){return this.contexte.donneesProduit.produit.produitCaracteristique.identifiantProduitService},r.prototype.initialiserComposant=function(){var e=this,r=this.$q.defer();return this.initialiser().then(function(){e.notifieChargementTermine(),r.resolve()})["catch"](function(r){e.serviceTrace.error(r),e.serviceAgentExtended.Trace.error(r?r&&r.stack:"Une erreur est survenue à l'initialisation du composant")}),r.promise},r.prototype.initialiser=function(){return this.enOuverture?(this.serviceTrace.debug("initialiserEnOuverture"),this.initialiserEnOuverture()):this.enModification?(this.serviceTrace.debug("initialiserEnAvenant"),this.initialiserEnAvenant()):this.enCloture?(this.serviceTrace.debug("initialiserEnCloture"),this.$q.when(!1)):(this.serviceTrace.debug("initialiser"),this.$q.when(!1))},r.prototype.initPointEntree=function(){this.contexte.donneesProduit.pointsEntree.getTimers=this.psService.getTimers,this.enOuverture?(this.contexte.donneesProduit.pointsEntree.validerFormulaire=this.validerDonneesOuverture,this.contexte.donneesProduit.pointsEntree.mettreEnGestion=this.miseEnGestionOuverture,this.contexte.donneesProduit.pointsEntree.sauvegarderDossierDeVente=this.pointEntreeFonctionSauvegarde):this.enModification&&(this.contexte.donneesProduit.pointsEntree.validerFormulaire=this.validerDonneesAvenant,this.contexte.donneesProduit.pointsEntree.mettreEnGestion=this.miseEnGestionAvenant)},r.prototype.notifieChargementTermine=function(){this.psService.updateTimer(this.constructorTimer),this.serviceTrace.info("chargement terminé"),this.chargementTermine=!0,this.$scope.$emit("CSPR_CHARGEMENT_EFFECTUE#"+this.idBloc)},r.prototype.sauvegarderDossierDeVente=function(){var e=this;return this.creerDossierDeVenteService.creerDossierDeVente(this.getVueMDEC(),this.getDonneesSauvegardeProduitService(),this.operationFinanciere,this.estModifie,this.isForcageVPC()).then(function(r){return e.serviceTrace.debug("sauvegarderDossierDeVente() :  dossierDeVente ",JSON.stringify(r)),r})},r.prototype.isForcageVPC=function(){return this.enVAD&&this.operationFinanciere&&this.operationFinanciere.modeFinancier&&"02"===this.operationFinanciere.modeFinancier.CTGXM1},r.prototype.getCodeActeGestionComplet=function(){var e=this,r=_.find(this.contexte.donneesProduit.reference.listeActesGestion,function(r){return-1!==r.indexOf(e.codeActeGestion)});return r},r.prototype.emitReferenceProduit=function(r){(r||angular.isDefined(this.offreUtilService.referenceProduitService)&&null!==this.offreUtilService.referenceProduitService)&&this.$scope.$emit(e.ConstantesCommunes.EMIT_REFERENCE_PRODUIT+this.idBloc,this.offreUtilService.getReferenceProduitPrincipalOffre())},r.prototype.emitRoutageEditique=function(){var e=new GestionGeneriqueOffres.Types.RoutageEditique(GestionGeneriqueOffres.Types.SpaEditiques.Epargne);this.$scope.$emit("CSPR_DEFINIR_ROUTAGE_EDITIQUE#"+this.idBloc,e)},r.prototype.emitErreur=function(e){this.$scope.$emit("CSPR_EMISSION_ERREUR#"+this.idBloc,e)},r}();e.ProduitServiceControleur=r}(r=e.commun||(e.commun={}))}(r=e.gestionEpargne||(e.gestionEpargne={}))}(myway||(myway={}));var myway;!function(e){var r;!function(e){var r;!function(e){"use strict"}(r=e.commun||(e.commun={}))}(r=e.gestionEpargne||(e.gestionEpargne={}))}(myway||(myway={}));var myway;!function(e){var r;!function(e){var r;!function(e){"use strict"}(r=e.commun||(e.commun={}))}(r=e.gestionEpargne||(e.gestionEpargne={}))}(myway||(myway={}));var myway;!function(e){var r;!function(e){var r;!function(e){"use strict";var r=function(){function e(e,r,n){this.$q=e,this.produitService=r,this.serviceAgentExtended=n,this.restServiceUrl="http://myway-ressources-dua.sigcesie.caisse-epargne.fr:6083/contratlvaservice/v1/demandeFicoba",this.demandeFicobaModeConsultation="C",this.demandeFicobaModeModification="M"}return e.prototype.obtenirDemandeFicoba=function(e){return e?this.demandeFicoba?this.$q.when(this.demandeFicoba):this.getDemandeFicoba(e):this.$q.when(this.demandeFicoba)},e.prototype.getDemandeFicoba=function(e){var r=this,n={url:this.restServiceUrl,params:e,withHeaders:!0,method:MyWay.Services.MethodEnum.GET,responseType:MyWay.Services.ResponseTypeEnum.JSON,contentType:MyWay.Services.ContentTypeEnum.JSON},t=this.produitService.initTimer("getDemandeFicoba",MyWay.Services.MethodEnum[n.method],n.url);return this.serviceAgentExtended.sendRequest(n).then(function(e){return r.produitService.updateTimer(t),r.demandeFicoba=e,e})["catch"](function(e){return r.$q.reject(e)})},e.prototype.creerDemandeFicoba=function(e,r){var n=this,t={url:this.restServiceUrl,params:r,data:e,withHeaders:!0,method:MyWay.Services.MethodEnum.POST,responseType:MyWay.Services.ResponseTypeEnum.JSON,contentType:MyWay.Services.ContentTypeEnum.JSON};return this.serviceAgentExtended.sendRequest(t).then(function(e){return e})["catch"](function(e){return n.$q.reject(e)})},e.$inject=["$q","produitService","serviceAgentExtended"],e}();e.DemandeFicobaService=r,e.communModule.service("demandeFicobaService",r)}(r=e.commun||(e.commun={}))}(r=e.gestionEpargne||(e.gestionEpargne={}))}(myway||(myway={}));var __extends=this&&this.__extends||function(e,r){function n(){this.constructor=e}for(var t in r)r.hasOwnProperty(t)&&(e[t]=r[t]);e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)},myway;!function(e){var r;!function(e){var r;!function(e){"use strict";var r=function(){function e(e,r,n,t,i,o){this.codeEtablissement=e,this.codeGuichet=r,this.numeroCompte=o,this.codeProduit=n,this.codeDevise=t,this.identifiantProduitService=i}return e}();e.DonneesCommunes=r;var n=function(e){function r(r,n,t,i,o,a){e.call(this,r,n,t,i,o,a)}return __extends(r,e),r}(r);e.DonneesCommunesExtended=n;var t=function(){function e(){}return e}();e.OperationFinanciere=t;var i=function(){function e(){}return e}();e.InfosCheque=i;var o=function(){function e(){}return e}();e.InfosOperationDiverse=o;var a=function(){function e(){}return e}();e.InfosVirementInterne=a;var s=function(){function e(){}return e}();e.InfosCompte=s}(r=e.commun||(e.commun={}))}(r=e.gestionEpargne||(e.gestionEpargne={}))}(myway||(myway={}));var myway;!function(e){var r;!function(e){var r;!function(e){"use strict";var r=function(){function e(){}return e}();e.AuthentificationInfo=r;var n=function(){function e(){}return e}();e.AgentConnecte=n;var t=function(){function e(){}return e}();e.ParametresComptables=t;var i=function(){function e(){}return e}();e.JustifLepContexte=i;var o=function(){function e(){}return e}();e.Habilitations=o}(r=e.commun||(e.commun={}))}(r=e.gestionEpargne||(e.gestionEpargne={}))}(myway||(myway={}));var myway;!function(e){var r;!function(e){var r;!function(e){"use strict";var r=function(){function e(){this.enModification=!1,this.enCloture=!1}return e}();e.IndicateursOffre=r}(r=e.commun||(e.commun={}))}(r=e.gestionEpargne||(e.gestionEpargne={}))}(myway||(myway={}));var myway;!function(e){var r;!function(e){var r;!function(e){"use strict";var r=function(){function e(){}return e}();e.Devise=r}(r=e.commun||(e.commun={}))}(r=e.gestionEpargne||(e.gestionEpargne={}))}(myway||(myway={}));var myway;!function(e){var r;!function(e){var r;!function(e){"use strict"}(r=e.commun||(e.commun={}))}(r=e.gestionEpargne||(e.gestionEpargne={}))}(myway||(myway={}));var myway;!function(e){var r;!function(e){var r;!function(e){"use strict";var r=function(){function e(){}return e}();e.Personne=r;var n=function(){function e(){}return e}();e.InformationPersonneMoral=n;var t=function(){function e(){}return e}();e.InformationPersonnePhysique=t}(r=e.commun||(e.commun={}))}(r=e.gestionEpargne||(e.gestionEpargne={}))}(myway||(myway={}));var myway;!function(e){var r;!function(e){var r;!function(e){"use strict";var r=function(){function e(){}return e}();e.ObjetGeneriqueC0510=r}(r=e.commun||(e.commun={}))}(r=e.gestionEpargne||(e.gestionEpargne={}))}(myway||(myway={}));var myway;!function(e){var r;!function(e){var r;!function(e){"use strict";var r=function(){function e(){}return e}();e.IndicateursPartageTracabilite=r;var n=function(){function e(){}return e}();e.ParametresRequetePartageTracabilite=n}(r=e.commun||(e.commun={}))}(r=e.gestionEpargne||(e.gestionEpargne={}))}(myway||(myway={}));var myway;!function(e){var r;!function(e){var r;!function(e){var r;!function(e){"use strict"}(r=e.DossierDeVente||(e.DossierDeVente={}))}(r=e.commun||(e.commun={}))}(r=e.gestionEpargne||(e.gestionEpargne={}))}(myway||(myway={}));var myway;!function(e){var r;!function(e){var r;!function(e){"use strict";var r=function(){function e(e){this._identifiantPersonne=e.identifiantPersonne,this._codeTypeFamilleResultat=e.codeTypeFamilleResultat,this._identifiantProduitService=e.identifiantProduitService,this._codeNatureResultatCommercial=e.codeNatureResultatCommercial,this._codeTypeResultatCommercial=e.codeTypeResultatCommercial,this._codeTypeProduitService=e.codeTypeProduitService,this._indicRattachableCRE=e.indicRattachableCRE,this._codeTypeProduitServiceGCP=e.codeTypeProduitServiceGCP,this._codeOrigineFonds=e.codeOrigineFonds,this._montantResultatCommercial=e.montantResultatCommercial,this._codeModeGestionLivret=e.codeModeGestionLivret,this._sousCodeProduitService=e.sousCodeProduitService,this._codeProduitCarte=e.codeProduitCarte,this._codeModeFinancier=e.codeModeFinancier,this._codeCaractereForfaitaireOffre=e.codeCaractereForfaitaireOffre,this._indicProduitServiceObligatoire=e.indicProduitServiceObligatoire,this._dateCreationResultatCommercial=e.dateCreationResultatCommercial}return Object.defineProperty(e.prototype,"identifiantPersonne",{get:function(){return this._identifiantPersonne},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"codeTypeFamilleResultat",{get:function(){return this._codeTypeFamilleResultat},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"identifiantProduitService",{get:function(){return this._identifiantProduitService},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"codeNatureResultatCommercial",{get:function(){return this._codeNatureResultatCommercial},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"codeTypeResultatCommercial",{get:function(){return this._codeTypeResultatCommercial},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"codeTypeProduitService",{get:function(){return this._codeTypeProduitService},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"indicRattachableCRE",{get:function(){return this._indicRattachableCRE},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"codeTypeProduitServiceGCP",{get:function(){return this._codeTypeProduitServiceGCP},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"codeOrigineFonds",{get:function(){return this._codeOrigineFonds},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"montantResultatCommercial",{get:function(){return this._montantResultatCommercial},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"codeModeGestionLivret",{get:function(){return this._codeModeGestionLivret},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"sousCodeProduitService",{get:function(){return this._sousCodeProduitService},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"codeProduitCarte",{get:function(){return this._codeProduitCarte},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"codeModeFinancier",{get:function(){return this._codeModeFinancier},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"codeCaractereForfaitaireOffre",{get:function(){return this._codeCaractereForfaitaireOffre},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"indicProduitServiceObligatoire",{get:function(){return this._indicProduitServiceObligatoire},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"dateCreationResultatCommercial",{get:function(){return this._dateCreationResultatCommercial},enumerable:!0,configurable:!0}),e}();e.ResultatCommercial=r}(r=e.commun||(e.commun={}))}(r=e.gestionEpargne||(e.gestionEpargne={}))}(myway||(myway={}));var myway;!function(e){var r;!function(e){var r;!function(e){"use strict"}(r=e.commun||(e.commun={}))}(r=e.gestionEpargne||(e.gestionEpargne={}))}(myway||(myway={}));var myway;!function(e){var r;!function(e){var r;!function(e){"use strict"}(r=e.commun||(e.commun={}))}(r=e.gestionEpargne||(e.gestionEpargne={}))}(myway||(myway={}));var myway;!function(e){var r;!function(r){var n;!function(r){"use strict";var n=function(){function r(e,r,n,t,i,o){this.$parse=e,this.$q=r,this.serviceAgentExtended=n,this.deviseService=t,this.filtreCodeProduitService=i,this.operationFinanciereService=o,this.forcageBadge=!1}return r.prototype.notifierChargementTermine=function(e,r){e.$emit("CSPR_CHARGEMENT_EFFECTUE#"+r)},r.prototype.initialiserOperationFinanciere=function(r,n,t,i,o,a,s){var c=new e.comOpesFinancieres.Model.OperationFinanciere;"VAD"===i?(c.fonctionnalite=MyWay.Model.Fonctionnalite.GENERIQUE_VAD,c.canal=n.offreSouscrite.codeCanal,c.modeDeVente=n.offreSouscrite.codeModeDeVentePossible):c.fonctionnalite=o?o:MyWay.Model.Fonctionnalite.OUVERTURE_EPARGNE,c.compte=new MyWay.Model.Compte,c.signataire=new MyWay.Model.ParticipantInformationClient("","","","","","","","Titulaire"),c.contexteSaisieOperationFinanciere=new e.comOpesFinancieres.Model.ContexteSaisieOperationFinanciere,c.compte.rice=new MyWay.Model.Rice,c.compte.rice.codeActiviteCompte=r,c.compte.rice.codeEtablissement=n.etablissement.codeEtablissement,c.compte.rice.codeGuichet=n.etablissement.codeGuichetInterbancaire,c.compte.produit=new MyWay.Model.Produit,c.compte.produit.CODIPR=t,c.compte.produit.LNEGCO=n.donneesProduit.produit.produitCaracteristique.libelleProduitService,c.client=new MyWay.Model.Client;var l=n.donneesProduit.detenteur;return c.client.numeroPersonne=l.listeCompositionEntiteTitulaire[0].identifiantTiers.toString(),("2"===n.entitesTitulaires[0].caracteristiqueEntiteTitulaire.modeCompositionEntiteTitulaire||"3"===n.entitesTitulaires[0].caracteristiqueEntiteTitulaire.modeCompositionEntiteTitulaire)&&(c.listeNumerosPersonnesPourVirementInterne=[],c.listeNumerosPersonnesPourVirementInterne.length=0,_.forEach(l.listeCompositionEntiteTitulaire,function(e){c.listeNumerosPersonnesPourVirementInterne.push(e.identifiantTiers.toString())})),angular.isDefined(c.listeNumerosPersonnesPourVirementInterne)||(c.listeNumerosPersonnesPourVirementInterne=[],c.listeNumerosPersonnesPourVirementInterne.length=0),c.compte.listeParticipant=[],c.typeRechercheListeCompteVirementInterne="B",c.codeEtatRechercheListeCompteVirementInterne="A",this.filtreCodeProduitService.setEstVersementPeriodique(!1),c.listeTypesProduitsPourVirementInterne=this.filtreCodeProduitService.getFiltreProduit(t,s),c.titrePanelPrincipal="Versement initial",c.compte.devise=new MyWay.Model.Devise,c.compte.devise.code=n.donneesProduit.produit.produitCatalogue.codeDeviseMontantOperation,this.deviseService.getDeviseCaracteristique(n.donneesProduit.produit.produitCatalogue.codeDeviseMontantOperation).then(function(e){var r=new MyWay.Model.Devise({code:e.codeDevise,sigle:e.symboleDevise,libelle:e.libelleDevise,nombreDecimalesGerees:e.nombreDecimalesGerees,nombreDecimalesReelles:e.nombreDecimalesReelles,symboleDevise:e.symboleDevise});c.compte.devise=r})["catch"](function(e){}),angular.isDefined(a)&&null!==a&&""!==a&&(c.libelleOperation=new e.comOpesFinancieres.Model.LibelleOperation(a,a)),c},r.prototype.setOperationFinanciere=function(e){this.operationFinanciere=e},r.prototype.getOperationFinanciere=function(){return this.operationFinanciere},r.prototype.setTrueForcageBadge=function(){this.forcageBadge=!0},r.prototype.setFalseForcageBadge=function(){this.forcageBadge=!1},r.prototype.getForcageBadge=function(){return this.forcageBadge},r.prototype.initialiserContexteSaisieOperationFinanciere=function(){return this.operationFinanciereService.creationContexteSaisieOperationFinanciere()},r.prototype.getSignataireOpeFiPourBordereau=function(e,r){var n;if(r&&angular.isDefined(e)&&null!==e||e.length>0){var t=e[0];n=isNaN(t.rang)&&4===t.role&&"Autre Signataire"===t.designataire?new MyWay.Model.ParticipantInformationClient("4","","",t.nomFamille,t.prenom,"",t.nom,t.designataire):new MyWay.Model.ParticipantInformationClient(t.codeRoleDossierVente.toString(),t.numeroPersonne.toString(),t.dateNaissance.toDateString(),t.nomFamille,t.prenom,t.codePersonnaliteJuridique,t.nom,t.designataire)}return n},r.prototype.GetCurrentProcessId=function(){var e=this.$q.defer();return this.serviceAgentExtended.Context.GetCurrentProcessId().then(function(r){e.resolve(r)})["catch"](function(r){e.reject(r)}),e.promise},r.prototype.getSegmentprvrio=function(e,r){var n=this,t=this.$q.defer();return angular.isDefined(e.segmentPrvRio)&&null!==e.segmentPrvRio?(this.serviceAgentExtended.Trace.debug(r+" => getSegmentprvrio() => operationFinanciere.segmentPrvRio déjà INITIALISE: ",JSON.stringify(e.segmentPrvRio)),t.resolve(e.segmentPrvRio)):(this.serviceAgentExtended.Trace.debug(r+" => getSegmentprvrio() => operationFinanciere.segmentPrvRio NON INITIALISE: ",JSON.stringify(e)),this.GetCurrentProcessId().then(function(t){var i=t+"_SEGMENTPRVRIO_"+e.client.numeroPersonne;return n.serviceAgentExtended.Trace.debug(r+" => getSegmentprvrio() => cleSegmentPrvRio = ",i),i}).then(function(e){n.serviceAgentExtended.getFromContext(e).then(function(e){n.serviceAgentExtended.Trace.debug(r+" => getSegmentprvrio() => Récupération du segment prvrio :",JSON.stringify(e)),t.resolve(e)})["catch"](function(e){n.serviceAgentExtended.Trace.error(r+" => getSegmentprvrio() => Récupération du segment prvrio IMPOSSIBLE",""),t.reject(e)})})["catch"](function(e){t.reject(e)})),t.promise},r.prototype.getModeFinancier=function(e,r){var n=this,t=this.$q.defer();return angular.isDefined(e.modeFinancier)&&null!==e.modeFinancier?(this.serviceAgentExtended.Trace.debug(r+" => getModeFinancier() => operationFinanciere.modeFinancier déjà INITIALISE: ",JSON.stringify(e.modeFinancier)),t.resolve(e.modeFinancier)):(this.serviceAgentExtended.Trace.debug(r+" => getModeFinancier() => operationFinanciere.modeFinancier NON INITIALISE: ",JSON.stringify(e)),this.GetCurrentProcessId().then(function(t){var i=t+"_MODE_FINANCIER_"+e.client.numeroPersonne;return n.serviceAgentExtended.Trace.debug(r+" => getModeFinancier() => cleModeFinancier = ",i),i}).then(function(e){n.serviceAgentExtended.getFromContext(e).then(function(e){n.serviceAgentExtended.Trace.debug(r+" => getModeFinancier() => Récupération du mode financier :",JSON.stringify(e)),t.resolve(e)})["catch"](function(e){t.reject(e)})})["catch"](function(e){t.reject(e)})),t.promise},r.$inject=["$parse","$q","serviceAgentExtended","deviseService","filtreCodeProduitService","operationFinanciereService"],r}();r.BatOpeFiService=n,r.communModule.service("batOpeFiService",n)}(n=r.commun||(r.commun={}))}(r=e.gestionEpargne||(e.gestionEpargne={}))}(myway||(myway={}));var myway;!function(e){var r;!function(r){var n;!function(r){"use strict";var n=function(){function n(e,r,n){this.espaceGlobalService=e,this.controlePersonneProtegeService=r,this.serviceAgentExtended=n}return n.prototype.extraireDonneesPersonne=function(e){var r=e.donneesProduit.detenteur,n=e.personnes,t=_.findWhere(n,{identifiantPersonne:r.listeCompositionEntiteTitulaire[0].identifiantTiers});return t},n.prototype.identifierNumeroPersonne=function(e){var r=e.donneesProduit.detenteur;return r.listeCompositionEntiteTitulaire[0].identifiantTiers},n.prototype.identifierEntiteTitulaire=function(e){var r=e.donneesProduit.detenteur;return r.caracteristiqueEntiteTitulaire.identifiantEntiteTitulaire},n.prototype.toLocalString=function(e){return e?e.toISOString():null},n.prototype.enregistrerObjetgenerique=function(r,n,t){var i=new e.c0410.commun.DonneesCompte(n);return i.codeEtablissement=r.etablissement.codeEtablissement,i.codeGuichet=r.etablissement.codeGuichetInterbancaire,angular.isDefined(r.donneesProduit.reference.codeGuichetContrat)&&null!==r.donneesProduit.reference.codeGuichetContrat&&(i.codeGuichet=r.donneesProduit.reference.codeGuichetContrat),i.identifiantBordereau=t,this.espaceGlobalService.enregistrerObjetGenerique(i),i},n.prototype.creerObjetGeneriqueC0510=function(e,n){var t=new r.ObjetGeneriqueC0510;return t.codeEtablissement=e.codeEtablissement,t.codeGuichet=e.codeGuichet,t.identifiantBordereau=e.identifiantBordereau,t.numeroDeCompte=e.numeroDeCompte,t.identifiantDossierVirementSepa=n.identifiantDossierVirementSepa,t},n.prototype.calculateAge=function(e){var r=Date.now()-e.getTime(),n=new Date(r);return Math.abs(n.getUTCFullYear()-1970)},n.prototype.estMineur=function(){var e=this.calculateAge(new Date(this.extraireDonneesPersonne(this.contexte).particulierInformation.dateNaissance)),r=this.extraireDonneesPersonne(this.contexte).particulierInformation.codeCapaciteJuridique,n=this.controlePersonneProtegeService.estMineurProtege(r);return angular.isDefined(e)&&null!==e&&18>e&&angular.isDefined(n)&&null!==n},n.prototype.filtrerReferencesProduit=function(e){var r=e.donneesProduit.detenteur,n=e.donneesProduit.produit.produitCaracteristique.identifiantProduitService;return _.find(e.referencesProduits,function(e){return e.identifiantProduitService===n&&e.detenteur===r})},n.prototype.lancerAvenantSimple=function(r){var n=this.filtrerReferencesProduit(r).referenceProduitServiceContrat,t=this.filtrerReferencesProduit(r).codeEtablissementContrat,i=this.filtrerReferencesProduit(r).codeGuichetContrat,o=new e.c0410.commun.DonneesCompte(n);o.codeEtablissement=t,o.codeGuichet=i,this.espaceGlobalService.enregistrerObjetGenerique(o)},n.prototype.formatCompte=function(e,r){if(void 0===e)return"";for(var n="",t=0;t<e.length;t++)(5===t||10===t)&&(n+=" "),21===t&&r&&(n+=" "),n+=e[t];return n},n.prototype.objetRiceToString=function(e){return e instanceof MyWay.Model.Rice?e.codeEtablissement+e.codeGuichet.value+e.codeActiviteCompte+e.radical+e.cleCompte+(angular.isDefined(e.cleRice)&&null!==e.cleRice?e.cleRice:""):null},n.prototype.stringToObjetRice=function(e,r,n){var t;return null===e||void 0===e?new MyWay.Model.Rice:t=e.length<19?new MyWay.Model.Rice(r,n):e.length<23?new MyWay.Model.Rice(e.substr(0,5),e.substr(5,5),e.substr(10,2),e.substr(12,7),e.substr(19,2)):new MyWay.Model.Rice(e.substr(0,5),e.substr(5,5),e.substr(10,2),e.substr(12,7),e.substr(19,2),e.substr(21,2))},n.prototype.getModeFinancierByCTGXM1=function(e){switch(e){case"01":return"ESP";case"02":return"CHQ";case"06":return"VIR";default:return""}},n.prototype.getModeFinancierByCTGXML=function(e){switch(e){case"ESP":return"01";case"CHQ":return"02";case"VIR":return"06";default:return""}},n.prototype.getValuePeriodiciteByKey=function(e){switch(void 0===e&&(e=""),e){case"M":return"Mensuelle";case"T":return"Trimestrielle";case"S":return"Semestrielle";case"A":return"Annuelle";case"D":return"A Déterminer";default:return""}},n.prototype.estDefiniEtPasNull=function(e){return angular.isDefined(e)&&null!==e},n.prototype.estDefiniEtPasNullEtPositif=function(e){return this.estDefiniEtPasNull(e)&&parseInt(e)>0},n.formaterEnChaine=function(e,r){return"number"==typeof e?_.padLeft(e.toString(),r,"0"):_.padLeft(e,r,"0")},n.prototype.isRiceEpargne=function(e,n){return[r.CodeTypeProduitsEnum.LIVRET_A,r.CodeTypeProduitsEnum.LIVRET_B,r.CodeTypeProduitsEnum.LIVRET_EPARGNE_POPULAIRE,r.CodeTypeProduitsEnum.LIVRET_DEVELOPPEMENT_DURABLE,r.CodeTypeProduitsEnum.LIVRET_JEUNE,r.CodeTypeProduitsEnum.COMPTE_EPARGNE_LOGEMENT,r.CodeTypeProduitsEnum.DEPOT_A_TERME,r.CodeTypeProduitsEnum.SOLUTION_LIBRE_REVENU,r.CodeTypeProduitsEnum.ANCIEN_PEL,r.CodeTypeProduitsEnum.ANCIEN_PEL2,r.CodeTypeProduitsEnum.ANCIEN_PEL3,r.CodeTypeProduitsEnum.ANCIEN_PEL4,r.CodeTypeProduitsEnum.PLAN_EPARGNE_LOGEMENT,n?r.CodeTypeProduitsEnum.COMPTE_ATTENTE:""].indexOf("00"+e.codeActiviteCompte)>-1},n.prototype.initErreurBloquanteGGO=function(e){this.serviceAgentExtended.Trace.error(e);var r=[];return r.push(new GestionGeneriqueOffres.Types.ErreurGestionGeneriqueOffre(GestionGeneriqueOffres.Types.NiveauErreur.ErreurFatale,1,e)),r},n.$inject=["espaceGlobalService","controlePersonneProtegeService","serviceAgentExtended"],n}();r.EpargneCommunService=n,r.communModule.service("epargneCommunService",n)}(n=r.commun||(r.commun={}))}(r=e.gestionEpargne||(e.gestionEpargne={}))}(myway||(myway={}));var myway;!function(e){var r;!function(e){var r;!function(e){"use strict";var r=function(){
function e(e){this.$q=e}return e.prototype.setOperationFinanciere=function(e){this.operationFinanciere=angular.copy(e)},e.prototype.getOperationFinanciere=function(){return this.operationFinanciere},e.prototype.setCaracteristiqueGenerale=function(e){this.caracteristiqueGenerale=angular.copy(e)},e.prototype.getCaracteristiqueGenerale=function(){return this.caracteristiqueGenerale},e.prototype.setConfigurationComposant=function(e){this.configurationComposant=angular.copy(e)},e.prototype.getConfigurationComposant=function(){return this.configurationComposant},e.prototype.setVersementPeriodique=function(e){this.versementPeriodique=e},e.prototype.getVersementPeriodique=function(){return this.versementPeriodique},e.prototype.setParametreVersementPeriodique=function(e){this.parametreVersementPeriodique=e},e.prototype.getParametreVersementPeriodique=function(){return this.parametreVersementPeriodique},e.prototype.setDateObtentionPJ=function(e){this.dateObtentionPJ=e},e.prototype.getDateObtentionPJ=function(){return this.dateObtentionPJ},e.prototype.setPassages=function(e){return 0},e.$inject=["$q"],e}();e.CommunicationComposantService=r,e.communModule.service("communicationComposantService",r)}(r=e.commun||(e.commun={}))}(r=e.gestionEpargne||(e.gestionEpargne={}))}(myway||(myway={}));var myway;!function(e){var r;!function(e){var r;!function(e){"use strict";var r=function(){function e(){}return e.MINEUR_SS_MESURE_AIDE_GESTION_BUDGET_FAMILIAL="00",e.MINEUR_EMANCIPE="01",e.MINEUR_SS_ADMIN_PURE="02",e.MINEUR_SS_ADMIN_JUDICIAIRE="03",e.MINEUR_SS_TUTELLE_COMPLETE="04",e.MINEUR_SS_TUTELLE_D_ETAT="05",e.MINEUR_SS_ADMIN_AD_HOC="06",e.MAJEUR_CAPABLE="07",e.MAJEUR_SS_SAUV_DE_JUSTICE="08",e.MAJEUR_SS_SAUV_DE_JUSTICE_MANDAT_DONNE="09",e.MAJEUR_SS_SAUV_DE_JUSTICE_MANDAT_SPECIAL="10",e.MAJEUR_SS_CURATELLE_SIMPLE="11",e.MAJEUR_SS_CURATELLE_RENFORCEE="12",e.MAJEUR_SS_TUTELLE_COMPLETE="13",e.MAJEUR_SS_ADMIN_JUDICIAIRE="14",e.MAJEUR_SS_TUTELLE="15",e.MAJEUR_SS_MESURE_ACCOMP_SOCIAL_PERSONNALISE="16",e.MAJEUR_SS_MESURE_ACCOMP_JUDICIAIRE="17",e.MAJEUR_SS_MESURE_AIDE_GESTION_BUDGET_FAMILIAL="18",e.MAJEUR_SS_MANDAT_DE_PROTECTION_FUTURE_SIMPLE="19",e.MAJEUR_SS_MANDAT_DE_PROTECTION_FUTURE_ETENDU="20",e}();e.CapaciteJuridiqueEnum=r;var n=function(){function e(){}return e.REPRESENTANT_PERSONNE_PHYSIQUE="RPP",e.REPRESENTANT_PERSONNE_MORALE="RPM",e}();e.CodeFamilleLiensInterPersonnesEnum=n;var t=function(){function e(e){this.$q=e,this._estMineurProtege=!1}return e.prototype.estMineurProtege=function(e){switch(e){case r.MINEUR_SS_MESURE_AIDE_GESTION_BUDGET_FAMILIAL:case r.MINEUR_SS_ADMIN_PURE:case r.MINEUR_SS_ADMIN_JUDICIAIRE:case r.MINEUR_SS_TUTELLE_COMPLETE:case r.MINEUR_SS_TUTELLE_D_ETAT:case r.MINEUR_SS_ADMIN_AD_HOC:this._estMineurProtege=!0}return this._estMineurProtege},e.prototype.estMajeurProtege=function(e){switch(e){case r.MAJEUR_SS_SAUV_DE_JUSTICE:case r.MAJEUR_SS_SAUV_DE_JUSTICE_MANDAT_DONNE:case r.MAJEUR_SS_SAUV_DE_JUSTICE_MANDAT_SPECIAL:case r.MAJEUR_SS_CURATELLE_SIMPLE:case r.MAJEUR_SS_CURATELLE_RENFORCEE:case r.MAJEUR_SS_TUTELLE_COMPLETE:case r.MAJEUR_SS_ADMIN_JUDICIAIRE:case r.MAJEUR_SS_TUTELLE:case r.MAJEUR_SS_MESURE_ACCOMP_SOCIAL_PERSONNALISE:case r.MAJEUR_SS_MESURE_ACCOMP_JUDICIAIRE:case r.MAJEUR_SS_MESURE_AIDE_GESTION_BUDGET_FAMILIAL:case r.MAJEUR_SS_MANDAT_DE_PROTECTION_FUTURE_SIMPLE:case r.MAJEUR_SS_MANDAT_DE_PROTECTION_FUTURE_ETENDU:return!0}return!1},e.$inject=["$q"],e}();e.ControlePersonneProtegeService=t,e.communModule.service("controlePersonneProtegeService",t)}(r=e.commun||(e.commun={}))}(r=e.gestionEpargne||(e.gestionEpargne={}))}(myway||(myway={}));var myway;!function(e){var r;!function(r){var n;!function(r){"use strict";var n=function(){function n(e,r,n,t,i,o,a,s,c,l){this.$q=e,this.modalService=r,this.ggoService=n,this.batOpeFiService=t,this.communicationComposantService=i,this.offreUtilService=o,this.libelleProduitEpargneService=a,this.epargneCommunService=s,this.compteSurLivretService=c,this.serviceTrace=l}return n.prototype.creerCompte=function(e,n){var t=this,i=[];return this.compteSurLivretService.creerContratCompteSurLivret(e,n).then(function(e){return i=t.ggoService.formulaireOk(i),t.communicationComposantService.setCaracteristiqueGenerale(e),i})["catch"](function(o){if(t.erreurs=o,o.codeLibelle===r.ConstantesCommunes.CODE_LIBELLE_FORCAGE){var a,s=t.ggoService.messagesInformationsPopine(o),c={actionButtonText:"Forcer",closeButtonText:"Annuler",headerText:"Autorisation requise",bodyText:s,iconName:"itce-warning",size:"md"};return a=t.modalService.showConfirm(c).then(function(o){return n.numeroBadge=r.ConstantesCommunes.CODE_BADGE_FORCAGE,t.batOpeFiService.setTrueForcageBadge(),t.compteSurLivretService.creerContratCompteSurLivret(e,n).then(function(e){return i=t.ggoService.formulaireOk(i),t.communicationComposantService.setCaracteristiqueGenerale(e),i})["catch"](function(e){return i=t.ggoService.formulaireKoApresForcage(e,i)})})["catch"](function(){return i=t.ggoService.formulaireKoAnnulationForcage(i)})}return i=o.codeLibelle===r.ConstantesCommunes.CODE_LIBELLE_ERREUR_AUTRE?t.ggoService.formulaireKoDiversRaisons(o,i):t.ggoService.formulaireKoDiversRaisons(o,i)})},n.prototype.estEnVpcEtNecessiteForcage=function(r,n,t,i,o){return console.log("C05.10 => commun => creer-compte-service.ts => getNiveauEstBloquantCompteRendu() => compteRenduMiseEnGestion = ",i),r&&n&&"VPC"===t&&i&&i.erreurs&&i.erreurs.length>0&&i.erreurs[0]&&i.erreurs[0].niveau&&i.erreurs[0].niveau>1&&o===e.gestionEpargne.commun.ConstantesCommunes.CODE_LIBELLE_FORCAGE},n.prototype.setNumeroCompte=function(e,r){if(angular.isUndefined(e)||null===e||11!==e.length){var n=this.epargneCommunService.stringToObjetRice(r.dossierVente.donneePrincipale.identifiantContratSupport,r.etablissement.codeEtablissement,r.etablissement.codeGuichetInterbancaire);return n.codeActiviteCompte+n.radical+n.cleCompte}return e},n.prototype.mettreEnGestionApresForcage=function(e,r,n){var t=this;return this.creerCompte(e,r).then(function(e){var r=e[0],i=new GestionGeneriqueOffres.Types.CompteRenduMiseEnGestion(e);if(1===e.length&&0===r.niveau)return t.offreUtilService.versementPeriodiqueMiseEnGestion(n,i)["catch"](function(r){var n=new GestionGeneriqueOffres.Types.CompteRenduMiseEnGestion(e);return console.warn("ERROR compte rendu meg",r,n),n});var o=new GestionGeneriqueOffres.Types.CompteRenduMiseEnGestion(e);return console.warn("ERROR sans meg",r,o),o})},n.$inject=["$q","modalService","ggoService","batOpeFiService","communicationComposantService","offreUtilService","libelleProduitEpargneService","epargneCommunService","compteSurLivretService","serviceTrace"],n}();r.CreerCompteService=n,r.communModule.service("creerCompteService",n)}(n=r.commun||(r.commun={}))}(r=e.gestionEpargne||(e.gestionEpargne={}))}(myway||(myway={}));var myway;!function(e){var r;!function(e){var r;!function(e){var r=function(){function r(r,n){this.$q=r,this.serviceAgentExtended=n,this.restServiceUrl="http://myway-ressources-dua.sigcesie.caisse-epargne.fr:6083/devise/v1/caracteristique",this.data=new e.Devise}return r.prototype.getDeviseCaracteristique=function(e){var r=this;return this.serviceAgentExtended.sendRequest({url:this.restServiceUrl,params:{codeDevise:e},withHeaders:!0,method:MyWay.Services.MethodEnum.GET}).then(function(e){return r.data=e,r.data})},r.$inject=["$q","serviceAgentExtended"],r}();e.DeviseService=r,e.communModule.service("deviseService",r)}(r=e.commun||(e.commun={}))}(r=e.gestionEpargne||(e.gestionEpargne={}))}(myway||(myway={}));var myway;!function(e){var r;!function(e){var r;!function(e){"use strict";var r=function(){function e(){}return e.LIVRET_A="0000",e.LIVRET_B="0001",e.LIVRET_GRAND_PRIX="0001",e.COMPTE_ATTENTE="0002",e.COMPTE_DEPOTS="0004",e.LIVRET_EPARGNE_POPULAIRE="0005",e.LIVRET_DEVELOPPEMENT_DURABLE="0006",e.COMPTE_COURANT_ENTREPRISE="0008",e.LIVRET_JEUNE="0010",e.COMPTE_EPARGNE_LOGEMENT="0011",e.ANCIEN_PEL="0012",e.ANCIEN_PEL2="0013",e.ANCIEN_PEL3="0014",e.ANCIEN_PEL4="0015",e.PLAN_EPARGNE_LOGEMENT="0016",e.CSL_DEVISE_CAD="5855",e.CSL_DEVISE_USD="5856",e.DEPOT_A_TERME="0009",e.SOLUTION_LIBRE_REVENU="0017",e.COMPTE_COURANT_INTERET="0088",e}();e.CodeTypeProduitsEnum=r;var n=function(){function e(){this.setEstVersementPeriodique()}return e.prototype.setEstVersementPeriodique=function(e){angular.isDefined(e)&&null!==e?this.estVersementPeriodique=e:this.estVersementPeriodique=!1},e.prototype.getFiltreProduit=function(e,n){switch(e){case r.LIVRET_A:return this.filtreLivretA();case r.SOLUTION_LIBRE_REVENU:case r.LIVRET_B:return n?this.filtreBDR():this.filtreBDD();case r.LIVRET_DEVELOPPEMENT_DURABLE:case r.LIVRET_JEUNE:return this.filtreBDD();case r.COMPTE_EPARGNE_LOGEMENT:case r.LIVRET_EPARGNE_POPULAIRE:case r.COMPTE_DEPOTS:case r.COMPTE_ATTENTE:case r.PLAN_EPARGNE_LOGEMENT:return this.filtreBDDHorsCompteAttente();case r.CSL_DEVISE_CAD:case r.CSL_DEVISE_USD:return this.filtreCSLDevise();default:return this.filtreBDD()}},e.prototype.filtreBDDHorsCompteAttente=function(){var e=[];return e.push(r.COMPTE_DEPOTS),console.log("filtreBDDHorsCompteAttente",e),e},e.prototype.filtreBDD=function(){var e=[];return this.estVersementPeriodique||e.push(r.COMPTE_ATTENTE),e.push(r.COMPTE_DEPOTS),e},e.prototype.filtreBDR=function(){var e=[];return e.push(r.COMPTE_DEPOTS),e.push(r.COMPTE_COURANT_ENTREPRISE),e},e.prototype.filtreCSLDevise=function(){return this.filtreBDR()},e.prototype.filtreLivretA=function(){var e=[];return this.estVersementPeriodique||e.push(r.COMPTE_ATTENTE),e.push(r.COMPTE_DEPOTS),e.push(r.COMPTE_COURANT_ENTREPRISE),e.push(r.COMPTE_COURANT_INTERET),e},e.prototype.getFiltreFicoba=function(){var e=[];return this.estVersementPeriodique||e.push(r.COMPTE_ATTENTE),e.push(r.COMPTE_DEPOTS),e.push(r.COMPTE_COURANT_ENTREPRISE),e},e.prototype.getFiltreVersementPeriodiqueVAD=function(e){return this.filtreBDDHorsCompteAttente()},e}();e.FiltreCodeProduitService=n,e.communModule.service("filtreCodeProduitService",n)}(r=e.commun||(e.commun={}))}(r=e.gestionEpargne||(e.gestionEpargne={}))}(myway||(myway={}));var myway;!function(e){var r;!function(e){var r;!function(e){"use strict";var r=function(){function e(){}return e.FF="FF",e.VAD="VAD",e}();e.CodeCanalEnum=r;var n=function(){function e(){}return e.prototype.formulaireOk=function(e){return e.push(new GestionGeneriqueOffres.Types.ErreurGestionGeneriqueOffre(GestionGeneriqueOffres.Types.NiveauErreur.Ok,0,"étape suivante")),e},e.prototype.formulaireKoAnnulationForcage=function(e){var r=new MyWay.Services.Erreur("Forçage",["Forçage requis"]),n=this.messagesErreursGGO(r);return e.push(new GestionGeneriqueOffres.Types.ErreurGestionGeneriqueOffre(GestionGeneriqueOffres.Types.NiveauErreur.Erreur,2,n)),e},e.prototype.formulaireKoApresForcage=function(e,r){var n=this.messagesErreursGGO(e);return r.push(new GestionGeneriqueOffres.Types.ErreurGestionGeneriqueOffre(GestionGeneriqueOffres.Types.NiveauErreur.Erreur,2,n)),r},e.prototype.formulaireKoDiversRaisons=function(e,r){var n=this.messagesErreursGGO(e);return r.push(new GestionGeneriqueOffres.Types.ErreurGestionGeneriqueOffre(GestionGeneriqueOffres.Types.NiveauErreur.Erreur,2,n)),r},e.prototype.formulaireKoValidation=function(e,r,n){var t=e;return r.push(new GestionGeneriqueOffres.Types.ErreurGestionGeneriqueOffre(n?GestionGeneriqueOffres.Types.NiveauErreur.ErreurFatale:GestionGeneriqueOffres.Types.NiveauErreur.Erreur,2,t)),r},e.prototype.miseEnGestionOk=function(e,r){return e.push(new GestionGeneriqueOffres.Types.ErreurGestionGeneriqueOffre(GestionGeneriqueOffres.Types.NiveauErreur.Ok,0,"Le produit "+r+" a bien été ouvert")),e},e.prototype.miseEnGestionKo=function(e,r,n,t){var i=t?1:2,o=t?GestionGeneriqueOffres.Types.NiveauErreur.Warning:GestionGeneriqueOffres.Types.NiveauErreur.Erreur;return r.push(new GestionGeneriqueOffres.Types.ErreurGestionGeneriqueOffre(o,i,"Erreur lors de la souscription du "+n+" pour les raisons suivantes: "+e.valeurs+".")),r},e.prototype.creationErreurGgoTab=function(e,r){var n=[];return _.forEach(e.valeurs,function(e){n.push(new GestionGeneriqueOffres.Types.ErreurGestionGeneriqueOffre(r?GestionGeneriqueOffres.Types.NiveauErreur.ErreurFatale:GestionGeneriqueOffres.Types.NiveauErreur.Erreur,2,e))}),n},e.prototype.messagesErreursGGO=function(e){var r="";return _.forEach(e.valeurs,function(e){r=r=r+"\r\n"+e}),r},e.prototype.messagesInformationsPopine=function(e){var r="";return _.forEach(e.valeurs,function(e){r=r+"<br>"+e+"</br>"}),r},e.prototype.determinerCodeCanal=function(e,n){n.offreSouscrite.codeCanal===r.FF?(e.codeCanal=r.FF,e.enVAD=!1):(e.codeCanal=r.VAD,e.enVAD=!0)},e.prototype.determinerRestitutionDV=function(e,r){r.indicateurDossierVenteAutorise&&r.donneesGeneriques&&r.donneesGeneriques[0]?e.enRestitutionDV=!0:e.enRestitutionDV=!1},e}();e.GgoService=n,e.communModule.service("ggoService",n)}(r=e.commun||(e.commun={}))}(r=e.gestionEpargne||(e.gestionEpargne={}))}(myway||(myway={}));var myway;!function(e){var r;!function(e){var r;!function(e){"use strict";var r=function(){function e(e,r){this.$q=e,this.serviceAgentExtended=r,this.restServiceUrl="http://myway-ressources-dua.sigcesie.caisse-epargne.fr:6083/entitetitulaireservice/v1/intervenantEntiteTit",this.data=[]}return e.prototype.getIntervenantEntiteTitulaire=function(e,r,n){var t=this,i={codeEtablissement:e,identifiantPersonne:r,identifiantEntiteTitulaire:n};return this.serviceAgentExtended.sendRequest({url:this.restServiceUrl,params:i,withHeaders:!0,method:MyWay.Services.MethodEnum.GET}).then(function(e){return t.data=e.listPersonne,t.data})},e.$inject=["$q","serviceAgentExtended"],e}();e.IntervenantEntiteTitulaireService=r,e.communModule.service("intervenantEntiteTitulaireService",r)}(r=e.commun||(e.commun={}))}(r=e.gestionEpargne||(e.gestionEpargne={}))}(myway||(myway={}));var myway;!function(e){var r;!function(e){var r;!function(e){"use strict";var r=function(){function r(){}return r.prototype.creerlibelleProduit=function(r,n){switch(n){case e.ProduitsServiceEpargne.COMPTE_ATTENTE:this.libelleCompteAttente=r.donneesProduit.produit.produitCaracteristique.libelleProduitService;break;case e.ProduitsServiceEpargne.COMPTE_EPARGNE_LOGEMENT:this.libelleCompteEpargneLogement=r.donneesProduit.produit.produitCaracteristique.libelleProduitService;break;case e.ProduitsServiceEpargne.LIVRET_A:this.libelleLivretA=r.donneesProduit.produit.produitCaracteristique.libelleProduitService;break;case e.ProduitsServiceEpargne.LIVRET_B:this.libelleLivretB=r.donneesProduit.produit.produitCaracteristique.libelleProduitService;break;case e.ProduitsServiceEpargne.LIVRET_DEVELOPPEMENT_DURABLE:this.libelleLivretDeveloppementDurable=r.donneesProduit.produit.produitCaracteristique.libelleProduitService;break;case e.ProduitsServiceEpargne.LIVRET_EPARGNE_POPULAIRE:this.libelleLivretEpargnePopulaire=r.donneesProduit.produit.produitCaracteristique.libelleProduitService;break;case e.ProduitsServiceEpargne.LIVRET_GRAND_PRIX:this.libelleLivretGrandPrix=r.donneesProduit.produit.produitCaracteristique.libelleProduitService;break;case e.ProduitsServiceEpargne.LIVRET_JEUNE:this.libelleLivretJeune=r.donneesProduit.produit.produitCaracteristique.libelleProduitService;break;case e.ProduitsServiceEpargne.PLAN_EPARGNE_LOGEMENT:this.libellePlanEpargneLogement=r.donneesProduit.produit.produitCaracteristique.libelleProduitService;break;case e.ProduitsServiceEpargne.RELEVE_LIVRET:this.libelleReleveLivret=r.donneesProduit.produit.produitCaracteristique.libelleProduitService}},r}();e.LibelleProduitEpargneService=r,e.communModule.service("libelleProduitEpargneService",r)}(r=e.commun||(e.commun={}))}(r=e.gestionEpargne||(e.gestionEpargne={}))}(myway||(myway={}));var myway;!function(e){var r;!function(e){var r;!function(e){"use strict";var r=function(){function e(){}return e.prototype.formatAffichageNumber=function(e){for(var r="",n=0,t=e.length-1;t>=0;t--)r=0!==n&&n%3===0?e[t]+" "+r:e[t]+r,n++;return r},e.prototype.formatMoney=function(e){var r=parseFloat(e.toString());isNaN(r)&&(r=0);var n="";0>r&&(n="-"),r=Math.abs(r),r=parseInt((100*(r+.005)).toString()),r/=100;var t=r.toString();t.indexOf(".")<0&&(t+=",00"),t.indexOf(".")===t.length-2&&(t+="0"),t=t.replace(".",","),t=n+t;var i=t.split(",");return t=this.formatAffichageNumber(i[0]),t=t+","+i[1]},e.prototype.dateToString=function(e){var r,n=new Date(e.toString()),t=n.getDate(),i=n.getMonth()+1,o=n.getFullYear(),a=t.toString(),s=i.toString();return 10>t&&(a="0"+t),10>i&&(s="0"+i),r=a+"/"+s+"/"+o.toString()},e.prototype.formatTaux=function(e){var r=/\d+[,]{1}\d{1}$/.test(e),n=/\d+[.]{1}\d{1}$/.test(e),t=/\d+[.]{1}\d{2}$/.test(e),i=/^\d?[^,]+\d?$/.test(e);return r?e+="0":n?(e=e.replace(".",","),e+="0"):t?e=e.replace(".",","):i&&(e+=",00"),e},e}();e.CommunNumberService=r,e.communModule.service("communNumberService",r)}(r=e.commun||(e.commun={}))}(r=e.gestionEpargne||(e.gestionEpargne={}))}(myway||(myway={}));var myway;!function(e){var r;!function(r){var n;!function(r){"use strict";var n=function(){function n(e,r,n,t,i,o,a,s,c,l,u,m,d,p,v,f,g,E,h,b,y){this.$q=e,this.epargneCommunService=r,this.affectationRadicalService=n,this.saisieRiceService=t,this.signatureElectroniqueService=i,this.identifiantBordereauService=o,this.postOperationFinanciere=a,this.espaceGlobalService=s,this.ggoService=c,this.communicationComposantService=l,this.versementRegulierService=u,this.modalService=m,this.controlePersonneProtegeService=d,this.intervenantEntiteTitulaireService=p,this.resultatCommercialService=v,this.ajoutLSEService=f,this.produitEngageService=g,this.serviceAgentExtended=E,this.operationFinanciereService=h,this.serviceTrace=b,this.eligibiliteLivretService=y,this.enRestitutionDVenVadVpc=!1,this.vadVpcOpeFiChargee=!1,this.codeTypeProduitServiceGcp="",this.estEnVad=!1,this.idBloc=""}return n.prototype.determinerMode=function(e,n){e.modeRevenir=e.contexteAppel===r.ConstantesCommunes.MODE_PRECEDENT,e.enRecapitulatif=e.contexte.modeAffichage===GestionGeneriqueOffres.Types.ModeAffichage.Recapitulatif,e.enPerso=e.contexte.modeAffichage===GestionGeneriqueOffres.Types.ModeAffichage.Personnalisation,e.enModification=n===r.ConstantesCommunes.AVENANT,e.enOuverture=n===r.ConstantesCommunes.OUVERTURE,e.enCloture=n===r.ConstantesCommunes.CLOTURE},n.prototype.initOperationFinanciereRessource=function(r,n){var t=new e.gestionEpargne.commun.OperationFinanciere;return t.codeDeviseOperation=r.codeDeviseMontantOperation,t.codeEvenementAtome=r.codeEvenementAtome,t.dateValeurOperation=r.dateDeValeur,t.infosCheque=new e.gestionEpargne.commun.InfosCheque,t.infosCheque.riceCompteVirement="",t.infosCheque.typeCheque=r.typeCheque,t.infosCheque.nombreJourReserveEncaissement=r.nombreJourReserveEncaissement,n&&(t.infosOperationDiverse=new e.gestionEpargne.commun.InfosOperationDiverse,t.infosOperationDiverse.codeReference=n.codeReferenceOD,t.infosOperationDiverse.libelleType=n.libelleTypeOD,t.infosOperationDiverse.codeFamille=n.codeFamilleOD,t.infosOperationDiverse.libelle1Saisi=n.libelle1SaisiOD,t.infosOperationDiverse.libelle2Saisi=n.libelle2SaisiOD),t.infosVirementInterne=new e.gestionEpargne.commun.InfosVirementInterne,t.infosVirementInterne.riceCompteVirement=r.S_PRVRIOUGR[0].numeroCompte,t.infosVirementInterne.libelleVirement=r.S_PRVRIOUGR[0].libelleVirement,angular.isDefined(r.libelleOperation1)&&r.libelleOperation1.length>24?t.libelleOperation1=r.libelleOperation1.substring(0,24):t.libelleOperation1=r.libelleOperation1,t.libelleOperation2=r.libelleOperation2,t.modeFinancierNumerique=r.modeFinancierNumerique,t.modeFinancierChoisi=r.modeFinancierChoisi,t.montantOperation=r.montantGlobalOperation,this.serviceTrace.debug("offre-util-service.ts => initOperationFinanciereRessource() => FIN: montantOperation = 0 est normal => operationFinanciereRessource = ",JSON.stringify(t)),t},n.prototype.validerDonneeOffreOuverture=function(e,r){var n=this,t=this.$q.defer();return this.serviceTrace.debug("offre-util-service.ts => validerDonneeOffreOuverture(1) =>  libelleProduit === ",r),e.tabErreurs=[],e.enOuverture?(this.serviceTrace.debug("offre-util-service.ts => validerDonneeOffreOuverture(2) =>  controleur.operationFinanciere = ",e.operationFinanciere),this.controlerVersements(e.versementPeriodique,e.operationFinanciere,e.contexte,r).then(function(r){r.length>0?t.resolve(r):(n.communicationComposantService.setOperationFinanciere(e.operationFinanciere),n.communicationComposantService.setVersementPeriodique(e.versementPeriodique),n.communicationComposantService.setParametreVersementPeriodique(e.parametreVersementPeriodique),n.serviceTrace.debug("offre-util-service.ts => validerDonneeOffreOuverture(3) => controleur.initQueryAndBodyCaracteristiqueGeneral(C) => controleur.operationFinanciere.modeFinancier = ",JSON.stringify(e.operationFinanciere.modeFinancier)),e.initQueryAndBodyCaracteristiqueGeneral("C"),n.serviceTrace.debug("offre-util-service.ts => validerDonneeOffreOuverture(4) => controleur.operationFinanciere.segmentPrvRio = ",JSON.stringify(e.operationFinanciere.segmentPrvRio)),e.validerOffreOuverture?e.validerOffreOuverture().then(function(e){n.serviceTrace.debug("offre-util-service.ts => validerDonneeOffreOuverture(5) => controleur.validerOffreOuverture(14) => retourMessages ="+JSON.stringify(e)),t.resolve(e)}):t.resolve([]))})):t.resolve(this.ggoService.formulaireOk(e.tabErreurs)),t.promise},n.prototype.controlerVersements=function(e,r,n,t){var i=[this.isVersementPeriodiqueOK(t,e,n),this.isOperationFinanciereOK(r,n)],o=[];return this.$q.all(i).then(function(){return o})["catch"](function(e){return o.push(new GestionGeneriqueOffres.Types.ErreurGestionGeneriqueOffre(GestionGeneriqueOffres.Types.NiveauErreur.ErreurFatale,1,"Erreur lors de la souscription du "+t+" pour les raisons suivantes : "+e)),o})},n.prototype.isVersementPeriodiqueOK=function(e,r,n){var t=this,i=this.$q.defer();if(r&&angular.isDefined(r)&&!this.isBDR(n.appelant)&&this.versementRegulierService.testActivationVersementRegulier(r)){var o=this.versementRegulierService.checkVersementRegulier(r,e);this.serviceTrace.debug("offre-util-service.ts => isVersementPeriodiqueOK(1) =>  erreurValiditeVersementPer === ",JSON.stringify(o)),0!==o.length?i.reject(o[0].message):this.eligibiliteLivretService.isCompteEligible(n.etablissement.codeEtablissement,n.donneesProduit.detenteur.getId.toString(),n.donneesProduit.codeTypeProduitServicePrincipalOffre.valeur,r.comptePrelevement,r.ricePrelevement).then(function(){i.resolve(!0)})["catch"](function(e){t.serviceTrace.debug("offre-util-service.ts => isVersementPeriodiqueOK(2) => ALERTE : compte pour le versement périodique non retenu => ",e),i.reject(e+" (Versement périodique)")})}else i.resolve(!1);return i.promise},n.prototype.isOperationFinanciereOK=function(r,n){var t=this,i=this.$q.defer();if(r.estValide)if(this.serviceTrace.debug("offre-util-service.ts => isOperationFinanciereOK(0) => operationFinanciere.estValide === YES"),[e.comOpesFinancieres.Constantes.CodeModeFinancier.MODE_FINANCIER_OPERATIONS_DIVERSES,e.comOpesFinancieres.Constantes.CodeModeFinancier.MODE_FINANCIER_VIREMENT_INTERNE].indexOf(r.segmentPrvRio.modeFinancierNumerique)>-1)if(0===r.montant){r.segmentPrvRio.montantGlobalOperation=null,r.montant=null;var o="Les opérations à 0 sont interdites en mode financier virement. modeFinancierNumerique = "+r.segmentPrvRio.modeFinancierNumerique.toString()+" modeFinancierChoisi = "+r.segmentPrvRio.modeFinancierChoisi;this.serviceTrace.debug("offre-util-service.ts => isOperationFinanciereOK(1) => ALERTE : ",o),r.estValide=!1,i.reject("Les opérations à 0 sont interdites en mode financier virement")}else if(r.segmentPrvRio.modeFinancierNumerique===e.comOpesFinancieres.Constantes.CodeModeFinancier.MODE_FINANCIER_VIREMENT_INTERNE)if(this.serviceTrace.debug("offre-util-service.ts => isOperationFinanciereOK(2) => controleur.operationFinanciere.compteVirementInterneSelectionne = ",r.compteVirementInterneSelectionne),r.compteVirementInterneSelectionne||r.riceVirementInterneSaisie&&r.riceVirementInterneSaisie.isComplete())this.eligibiliteLivretService.isCompteEligible(n.etablissement.codeEtablissement,n.donneesProduit.detenteur.getId.toString(),n.donneesProduit.codeTypeProduitServicePrincipalOffre.valeur,r.compteVirementInterneSelectionne,r.riceVirementInterneSaisie).then(function(){i.resolve(!0)})["catch"](function(e){t.serviceTrace.debug("offre-util-service.ts => isOperationFinanciereOK(4) => ALERTE : le compte "+r.segmentPrvRio.S_PRVRIOUGR[0].numeroCompte+" non retenu => ",e),r.estValide=!1,i.reject(e+" (Versement initial)")});else{var o="Le compte de virement interne n'est pas sélectionné";this.serviceTrace.debug("offre-util-service.ts => isOperationFinanciereOK(3) => ALERTE : le compte "+r.segmentPrvRio.S_PRVRIOUGR[0].numeroCompte+" non retenu => ",o),r.segmentPrvRio.S_PRVRIOUGR[0].numeroCompte=null,r.estValide=!1,i.reject(o)}else i.resolve(!0);else i.resolve(!0);else this.serviceTrace.debug("offre-util-service.ts => isOperationFinanciereOK(5) => operationFinanciere.estValide === NO"),i.reject("Données saisies incorrectes");return i.promise},n.prototype.miseEnGestionOffreOuverture=function(e,n,t,i,o){var a=this;if(e.enOuverture){var s=!1,c="";e.codeCanal!==r.CodeCanalEnum.FF?s=!0:angular.isDefined(o)&&null!==o&&(s=!o.indicateurPapier),this.serviceAgentExtended.getAuthentificationInfo().then(function(e){c=e.numeroStationTravail}),e.operationFinanciere.client.numeroPersonne=e.numeroPersonne.toString();var l;return this.reserverNumeroRadical(e,t).then(function(r){return a.numeroRadical=r,a.calculeCleCompte(e,n),a.creerNumeroCompte(e,n),a.identifiantBordereauService.getNumeroBordereau(e.numeroPersonne.toString(),s)}).then(function(r){return e.bordereau=+r,e.operationFinanciere.contexteSaisieOperationFinanciere.identifiantBordereau=c+"-"+r,e.initQueryAndBodyCaracteristiqueGeneral("M"),l=a.epargneCommunService.enregistrerObjetgenerique(e.contexte,e.numeroCompte,r),l.numeroCompte=l.numeroDeCompte,e.miseEnGestionOffreOuverture()}).then(function(r){var n=[];e.compteRenduMiseEnGestion=new GestionGeneriqueOffres.Types.CompteRenduMiseEnGestion(r,a.espaceGlobalService.getObjetGenerique("DONNEES_COMPTE")),e.compteRenduMiseEnGestion.erreurs=r;var t=0!==_.filter(r,function(e){return 0!==e.niveau}).length;if(t)return e.compteRenduMiseEnGestion;if(!a.isBDR(e.contexte.appelant)||a.isBDR(e.contexte.appelant)&&!a.isPersonneMorale(e.contexte)){var i=a.ajoutLSEService.ajouterLSE(e.contexte.etablissement.codeEtablissement,e.contexte.etablissement.codeGuichetInterbancaire,e.numeroPersonne,e.numeroCompte,new Date(a.epargneCommunService.extraireDonneesPersonne(e.contexte).particulierInformation.dateNaissance))["catch"](function(){return null});n.push(i)}var o=a.traitementPostMiseEnGestion(e,s).then(function(){return e.compteRenduMiseEnGestion})["catch"](function(r){var n=angular.isDefined(r.libelle)||null!==r.libelle?r.libelle:"",t=new GestionGeneriqueOffres.Types.ErreurGestionGeneriqueOffre(GestionGeneriqueOffres.Types.NiveauErreur.Warning,1,"ERREUR : Résultat commercial non enregistré.("+n+")");e.compteRenduMiseEnGestion.erreurs=[t]});return n.push(o),a.$q.all(n).then(function(){return e.compteRenduMiseEnGestion})["catch"](function(){return e.compteRenduMiseEnGestion})})["catch"](function(r){return e.compteRenduMiseEnGestion=new GestionGeneriqueOffres.Types.CompteRenduMiseEnGestion(a.ggoService.creationErreurGgoTab(r)),e.compteRenduMiseEnGestion.erreurs=a.ggoService.creationErreurGgoTab(r),e.compteRenduMiseEnGestion})}if(e.enModification){var u=this.ggoService.miseEnGestionOk(e.tabErreursMiseEnGestion,i);return e.compteRenduMiseEnGestion=new GestionGeneriqueOffres.Types.CompteRenduMiseEnGestion(u,this.espaceGlobalService.getObjetGenerique("DONNEES_COMPTE")),this.$q.when(e.compteRenduMiseEnGestion)}return this.$q.when(e.compteRenduMiseEnGestion)},n.prototype.paddy=function(e,r,n){var t="undefined"!=typeof n?n:"0",i=new Array(1+r).join(t);return(i+e).slice(-i.length)},n.prototype.traitementPostMiseEnGestion=function(e,r){var n=this;this.preparationBordereau(e),angular.isDefined(e.montantBordereau)&&(e.operationFinanciere.segmentPrvRio.montantGlobalOperation=e.montantBordereau),angular.isDefined(e)&&(angular.isUndefined(e.operationFinanciere.client.numeroPersonne)&&angular.isDefined(e.contexte.offreSouscrite)&&angular.isDefined(e.contexte.offreSouscrite.numeroPersonneIdentifiee)&&(e.operationFinanciere.client.numeroPersonne=e.contexte.offreSouscrite.numeroPersonneIdentifiee.toString()),e.operationFinanciere.client.numeroPersonne=this.paddy(e.operationFinanciere.client.numeroPersonne,9,"0"));var t=_.padLeft(e.operationFinanciere.signataire.codeRole,Math.min(e.operationFinanciere.signataire.codeRole.length+1,2),"0");return _.filter(e.contexte.listeSignataires,function(r){var i=e.operationFinanciere.signataire.nomPrenomParticipant;if(r.nom===i||!e.contexteAppelantBdr&&_.endsWith(r.nom," "+i)){var o=n.operationFinanciereService.libelleRoleSignataireParCodeRole(t,isNaN(r.rang)?1:r.rang),a=n.operationFinanciereService.mappingCodeRoleBatSignatairesVersOpefi(t,isNaN(r.rang)?1:r.rang);e.operationFinanciere.signataire.codeRole=a,e.operationFinanciere.signataire.libelleRole=o}}),this.postOperationFinanciere.traitementPostOperationFinanciere(e.operationFinanciere,r).then(function(){var r="";if(angular.isDefined(e.contexte.dossierVente)&&null!==e.contexte.dossierVente){var t=e.contexte.dossierVente.donneePrincipale.dateCreationDossier;r=moment(t.substring(0,10)).format("YYYY-MM-DD")}else r=moment().format("YYYY-MM-DD");return n.enregistrerResultatCommercial(e,r)})},n.prototype.enregistrerResultatCommercial=function(e,r,n){if(angular.isDefined(n)&&null!==n&&n.erreurs&&n.erreurs.length>0&&null!==n.erreurs[0]&&n.erreurs[0].niveau>0){var t=new MyWay.Services.Erreur("RAISA06",["Mise en gestion échouée"]);return t.libelle="Mise en gestion échouée",this.$q.reject(t)}var i=e.contexte.donneesProduit.produit.produitCaracteristique.identifiantProduitService,o=e.operationFinanciere.segmentPrvRio.montantGlobalOperation,a=e.numeroPersonne;return r=moment(r).format("YYYY-MM-DD"),"Invalid date"===r&&(r=moment().format("YYYY-MM-DD")),this.resultatCommercialService.codeTypeProduitServiceGcp=this.codeTypeProduitServiceGcp,this.resultatCommercialService.estEnVad=this.estEnVad,this.resultatCommercialService.enregistrerResultatCommercial(a,i,o,r)},n.prototype.versementPeriodiqueMiseEnGestion=function(r,n){var t=this;return this.miseEnGestionEstOk(n)&&r.versementPeriodique?this.versementRegulierService.testActivationVersementRegulier(r.versementPeriodique)?this.versementRegulierService.getBicIban(r.contexte.etablissement.codeEtablissement,r.contexte.etablissement.codeGuichetInterbancaire,r.numeroCompte,+this.cleRice).then(function(i){var o,a=moment().format("YYYY-MM-DD");return angular.isDefined(r.contexte.dossierVente)&&null!==r.contexte.dossierVente&&(a=r.contexte.dossierVente.donneePrincipale.dateCreationDossier.substring(0,10)),o=t.versementRegulierService.initInformationEcheancier(r.versementPeriodique,r.contexte,i,r.numeroCompte,a),t.versementRegulierService.postInformationEcheancier(o).then(function(i){var o;return o=angular.isUndefined(n.donnees)||null===n.donnees?new e.c0410.commun.DonneesCompte(r.numeroCompte,r.contexte.etablissement.codeEtablissement,r.contexte.etablissement.codeGuichetInterbancaire):n.donnees,n.donnees=t.epargneCommunService.creerObjetGeneriqueC0510(o,i),t.referenceProduitService=t.emitEventEnvoiNumeroCompte(n),n})["catch"](function(e){var r="Echéancier non créé",i=t.ggoService.messagesInformationsPopine(e),o={closeButtonText:"Fermer",headerText:r,bodyText:i,iconName:"",size:"md"};return t.modalService.showPopup(o),n})})["catch"](function(e){var r="Echéancier non créé",i=t.ggoService.messagesInformationsPopine(e),o={closeButtonText:"Fermer",headerText:r,bodyText:i,iconName:"",size:"md"};return t.modalService.showPopup(o),n}):(this.referenceProduitService=this.emitEventEnvoiNumeroCompte(n),this.$q.when(n)):(this.miseEnGestionEstOk(n)&&(this.referenceProduitService=this.emitEventEnvoiNumeroCompte(n)),this.$q.when(n))},n.prototype.emitEventEnvoiNumeroCompte=function(e){var r=e.erreurs;return""!==this.idBloc&&angular.isDefined(r)&&null!==r&&r.length>0&&null!==r[0]&&0===r[0].niveau?this.getReferenceProduitPrincipalOffre():null;
},n.prototype.compteRenduMiseEnGestion=function(e,r){var n=e.donnees;return this.epargneCommunService.creerObjetGeneriqueC0510(n,r)},n.prototype.miseEnGestionOffreAvenant=function(r){var n=this,t=this.espaceGlobalService.getObjetGenerique(e.c0410.commun.DonneesCompte.IDENTIFIANT_DONNEES_COMPTE);return r.numeroCompte=t.numeroDeCompte,this.signatureElectroniqueService.isBasculeSAG(r.contexte.offreSouscrite.codeActeGestion).then(function(e){return n.identifiantBordereauService.getNumeroBordereau(r.numeroPersonne.toString(),e).then(function(e){return r.bordereau=+e,r.initQueryAndBodyCaracteristiqueGeneral("M"),n.epargneCommunService.enregistrerObjetgenerique(r.contexte,r.numeroCompte,e),r.miseEnGestionOffreAvenant().then(function(e){return r.compteRenduMiseEnGestion=new GestionGeneriqueOffres.Types.CompteRenduMiseEnGestion(e,n.espaceGlobalService.getObjetGenerique("DONNEES_COMPTE")),r.compteRenduMiseEnGestion.erreurs=e,r.compteRenduMiseEnGestion})["catch"](function(e){return r.compteRenduMiseEnGestion=new GestionGeneriqueOffres.Types.CompteRenduMiseEnGestion(n.ggoService.creationErreurGgoTab(e)),r.compteRenduMiseEnGestion.erreurs=n.ggoService.creationErreurGgoTab(e),r.compteRenduMiseEnGestion})})["catch"](function(e){return r.compteRenduMiseEnGestion=new GestionGeneriqueOffres.Types.CompteRenduMiseEnGestion(n.ggoService.creationErreurGgoTab(e)),r.compteRenduMiseEnGestion.erreurs=n.ggoService.creationErreurGgoTab(e),r.compteRenduMiseEnGestion})})["catch"](function(e){return r.compteRenduMiseEnGestion=new GestionGeneriqueOffres.Types.CompteRenduMiseEnGestion(n.ggoService.creationErreurGgoTab(e)),r.compteRenduMiseEnGestion.erreurs=n.ggoService.creationErreurGgoTab(e),r.compteRenduMiseEnGestion})},n.prototype.preparationBordereau=function(e){if(e.operationFinanciere.compte.libelle=e.contexte.donneesProduit.produit.produitCaracteristique.libelleProduitService,e.operationFinanciere.compte.rice.cleCompte=this.cleCompte,e.operationFinanciere.compte.rice.radical=this.numeroRadical,e.operationFinanciere.compte.titulaire=e.contexte.donneesProduit.detenteur.getLibelle,angular.isDefined(e.montantBordereau)&&(e.operationFinanciere.segmentPrvRio.montantGlobalOperation=e.montantBordereau),this.setOperationFinanciereSignataire(e.operationFinanciere,e.contexte.listeSignataires,e.contexte.offreSouscrite.numeroPersonneIdentifiee),this.estSignataireVide(e.operationFinanciere)&&e.contexte.personnes&&0!==e.contexte.personnes.length){var r=this.epargneCommunService.extraireDonneesPersonne(e.contexte);angular.isDefined(r)&&this.setOperationFinanciereAvecPersonne(e.operationFinanciere,r)}},n.prototype.setOperationFinanciereSignataire=function(e,r,n){var t;r&&r.length>0&&(t=_.findWhere(r,{numeroPersonne:n})),angular.isUndefined(t)&&r&&r.length>0&&(t=r[0]),t&&(e.signataire.codeRole=t.role.toString(),e.signataire.libelleRole=t.designataire?t.designataire:"Titulaire",e.signataire.codePersonnaliteJuridique=t.codePersonnaliteJuridique,angular.isUndefined(t.numeroPersonne)||null===t.numeroPersonne?e.signataire.identifiantParticipant="000000000":e.signataire.identifiantParticipant=_.padLeft(t.numeroPersonne.toString(),9,"0"),angular.isUndefined(t.dateNaissance)||null===t.dateNaissance||"Invalid date"===moment(t.dateNaissance).format("DD/MM/YYYY")?e.signataire.dateNaissance="":e.signataire.dateNaissance=moment(t.dateNaissance).format("DD/MM/YYYY"),e.signataire.prenomParticipant="",e.signataire.nomParticipant=t.nom,e.signataire.nomPrenomParticipant=t.nom)},n.prototype.setOperationFinanciereAvecPersonne=function(r,n){r.signataire.codeRole=angular.isDefined(n.particulierInformation.codeCapaciteJuridique)&&""!==n.particulierInformation.codeCapaciteJuridique?n.particulierInformation.codeCapaciteJuridique:e.comContract.modeles.TypeSignataire.TITULAIRE.toString(),r.signataire.libelleRole="",r.signataire.nomParticipant=n.particulierInformation.nomFamillePersonnePhysique,r.signataire.prenomParticipant=n.particulierInformation.prenom,r.signataire.nomPrenomParticipant=n.particulierInformation.nomFamillePersonnePhysique+" "+n.particulierInformation.prenom,r.signataire.identifiantParticipant=_.padLeft(n.identifiantPersonne.toString(),9,"0"),r.signataire.dateNaissance=moment(n.particulierInformation.dateNaissance).format("DD/MM/YYYY"),r.signataire.codePersonnaliteJuridique=n.particulierInformation.codeCapaciteJuridique},n.prototype.estSignataireVide=function(e){return e.signataire?(angular.isUndefined(e.signataire.codeRole)||null===e.signataire.codeRole||""===e.signataire.codeRole)&&(angular.isUndefined(e.signataire.codePersonnaliteJuridique)||null===e.signataire.codePersonnaliteJuridique||""===e.signataire.codePersonnaliteJuridique)&&(angular.isUndefined(e.signataire.dateNaissance)||null===e.signataire.dateNaissance||""===e.signataire.dateNaissance)&&(angular.isUndefined(e.signataire.identifiantParticipant)||null===e.signataire.identifiantParticipant||""===e.signataire.identifiantParticipant)&&(angular.isUndefined(e.signataire.nomParticipant)||null===e.signataire.nomParticipant||""===e.signataire.nomParticipant)&&(angular.isUndefined(e.signataire.prenomParticipant)||null===e.signataire.prenomParticipant||""===e.signataire.prenomParticipant):!0},n.prototype.reserverNumeroRadical=function(e,r){var n=e.contexte.etablissement.codeEtablissement,t=e.contexte.etablissement.codeGuichetInterbancaire;return this.affectationRadicalService.getAffectationAutoRadical(n,r,t).then(function(r){e.operationFinanciere.compte.rice=r;var n=r.radical;return n})},n.prototype.calculeCleCompte=function(e,r){var n=e.contexte.etablissement.codeEtablissement,t=e.contexte.etablissement.codeGuichetInterbancaire,i=this.saisieRiceService.formatteRICE(n,t,r+this.numeroRadical);this.cleCompte=i.cleCompte,this.cleRice=i.cleRice},n.prototype.creerNumeroCompte=function(e,r){e.numeroCompte=r+this.numeroRadical+this.cleCompte},n.prototype.getReferenceProduitPrincipalOffre=function(){var r=this.espaceGlobalService.getObjetGenerique(e.c0410.commun.DonneesCompte.IDENTIFIANT_DONNEES_COMPTE);return this.serviceTrace.debug("offre-util-service =>   getReferenceProduitPrincipalOffre() =>"+JSON.stringify(r)),r.codeEtablissement&&r.codeGuichet&&r.numeroDeCompte?new GestionGeneriqueOffres.Types.ReferenceProduitPrincipalOffre(r.codeEtablissement+r.codeGuichet+r.numeroDeCompte,""):(this.serviceTrace.error("offre-util-service =>   getReferenceProduitPrincipalOffre() => donneesCompte n'as pas pu être obtenu"),new GestionGeneriqueOffres.Types.ReferenceProduitPrincipalOffre("",""))},n.prototype.getDonneesCompte=function(){return this.espaceGlobalService.getObjetGenerique(e.c0410.commun.DonneesCompte.IDENTIFIANT_DONNEES_COMPTE)},n.prototype.validerOffreAvenantSimple=function(e,r,n){var t=this;r||(r=e.contexte.donneesProduit.produit.produitCaracteristique.libelleProduitService);var i=this.$q.defer();return this.isVersementPeriodiqueOK(r,e.versementPeriodique,e.contexte).then(function(){e.tabErreurs&&0!==e.tabErreurs.length||(e.tabErreurs=t.ggoService.formulaireOk([])),angular.isDefined(n)&&null!==n&&t.modalService.showPopup(n),i.resolve(e.tabErreurs)})["catch"](function(n){e.tabErreurs||(e.tabErreurs=[]);var t=new GestionGeneriqueOffres.Types.ErreurGestionGeneriqueOffre(GestionGeneriqueOffres.Types.NiveauErreur.ErreurFatale,1,"Erreur lors de la souscription du "+r+" pour les raisons suivantes : "+n);e.tabErreurs.push(t),i.resolve(e.tabErreurs)}),i.promise},n.prototype.miseEnGestionOffreAvenantSimple=function(e,r){return e.tabErreursMiseEnGestion&&0!==e.tabErreursMiseEnGestion.length||(e.tabErreursMiseEnGestion=this.ggoService.miseEnGestionOk([],r)),e.compteRenduMiseEnGestion=new GestionGeneriqueOffres.Types.CompteRenduMiseEnGestion(e.tabErreursMiseEnGestion,this.espaceGlobalService.getObjetGenerique("DONNEES_COMPTE")),e.compteRenduMiseEnGestion.erreurs=e.tabErreursMiseEnGestion,this.$q.when(e.compteRenduMiseEnGestion)},n.prototype.controleExistanceRepresentants=function(e){var n=this,t=e.numeroPersonne,i=this.epargneCommunService.extraireDonneesPersonne(e.contexte),o=e.contexte.donneesProduit.detenteur.caracteristiqueEntiteTitulaire.identifiantEntiteTitulaire,a=e.contexte.etablissement;return this.intervenantEntiteTitulaireService.getIntervenantEntiteTitulaire(a.codeEtablissement,t,o).then(function(e){var t=_.filter(e,function(e){return e.codeFamilleLiensInterPersonnes===r.CodeFamilleLiensInterPersonnesEnum.REPRESENTANT_PERSONNE_PHYSIQUE||e.codeFamilleLiensInterPersonnes===r.CodeFamilleLiensInterPersonnesEnum.REPRESENTANT_PERSONNE_MORALE});return n.controlePersonneProtegeService.estMineurProtege(i.particulierInformation.codeCapaciteJuridique)?t&&t.length>0?!0:n.$q.reject("Ouverture impossible. Client mineur sans représentant légal."):!1})["catch"](function(e){return n.$q.reject("Erreur lors de la vérification des représentants : <br />"+e)})},n.prototype.showErreurRepresentantModal=function(e){var r={closeButtonText:"Fermer",headerText:"Contrôle des représentants légaux",bodyText:e+"<br />Le processus va être fermé.",iconName:"itce-warning",size:"md"};return this.modalService.showPopup(r)},n.prototype.initialiserDonneesProduitEngage=function(r,n,t){var i=this;return r.donneesProduitEngage={enRecapitulatif:r.contexte.modeAffichage,modePrecedent:r.modeRevenir,offreSouscrite:{codeActeGestion:r.contexte.offreSouscrite.codeSousFamilleActeGestion,numeroCompte:null,identifiantPersonne:r.contexte.offreSouscrite.numeroPersonneIdentifiee},produitService:{codeTypeOperation:n,identifiantProduitService:r.contexte.donneesProduit.produit.produitCaracteristique.identifiantProduitService,codeProduit:t},etablissement:{codeEtablissement:r.contexte.etablissement.codeEtablissement,codeGuichet:r.contexte.etablissement.codeGuichetInterbancaire},indicateurs:null},this.produitEngageService.getIndicPartageTracab(r.donneesProduitEngage.etablissement.codeEtablissement,r.donneesProduitEngage.produitService.codeTypeOperation,r.donneesProduitEngage.produitService.identifiantProduitService).then(function(n){if(r.donneesProduitEngage.indicateurs=n,r.formulaireProduitEngage=new e.transProduitEngage.ProduitEngageFormulaire(n.indicateurTracabiliteOblig,n.indicateurPartageOblig),r.enModification){var t=i.getDonneesCompte();r.donneesProduitEngage.offreSouscrite.numeroCompte=t.numeroDeCompte,r.donneesProduitEngage.etablissement.codeGuichet=t.codeGuichet}})},n.prototype.initDonneesProduitEngage=function(e,r,n,t,i){var o=this,a={enRecapitulatif:e.modeAffichage,modePrecedent:r,offreSouscrite:{codeActeGestion:e.offreSouscrite.codeSousFamilleActeGestion,numeroCompte:null,identifiantPersonne:e.offreSouscrite.numeroPersonneIdentifiee},produitService:{codeTypeOperation:t,identifiantProduitService:e.donneesProduit.produit.produitCaracteristique.identifiantProduitService,codeProduit:i},etablissement:{codeEtablissement:e.etablissement.codeEtablissement,codeGuichet:e.etablissement.codeGuichetInterbancaire},indicateurs:null};return this.produitEngageService.getIndicPartageTracab(a.etablissement.codeEtablissement,a.produitService.codeTypeOperation,a.produitService.identifiantProduitService).then(function(e){if(a.indicateurs=e,n){var r=o.getDonneesCompte();a.offreSouscrite.numeroCompte=r.numeroDeCompte,a.etablissement.codeGuichet=r.codeGuichet}return a})},n.prototype.rafraichirDonneesProduitEngage=function(e,r,n){n.enRecapitulatif=e?1:0,n.modePrecedent=r},n.prototype.isBDR=function(e){return e===r.ConstantesCommunes.CONTEXTE_APPELANT_BDR?!0:!1},n.prototype.isPersonneMorale=function(e){return this.epargneCommunService.extraireDonneesPersonne(e)instanceof GestionGeneriqueOffres.Types.Tiers.PersonneMorale},n.prototype.miseEnGestionEstOk=function(e){var n=!0;return _.forEach(e.erreurs,function(e){n=n&&e.codeErreur===r.ConstantesCommunes.CODE_RETOUR_MISE_EN_GESTION_EST_OK}),n},n.prototype.rechargerProduitEngage=function(e,n,t){var i={enRecapitulatif:e.modeAffichage,modePrecedent:n===r.ConstantesCommunes.MODE_PRECEDENT?!0:!1,offreSouscrite:{codeActeGestion:e.offreSouscrite.codeSousFamilleActeGestion,numeroCompte:null,identifiantPersonne:e.offreSouscrite.numeroPersonneIdentifiee},produitService:{codeTypeOperation:t,identifiantProduitService:e.donneesProduit.produit.produitCaracteristique.identifiantProduitService,codeProduit:e.donneesProduit.produit.produitCaracteristique.codeTypeProduitService},etablissement:{codeEtablissement:e.etablissement.codeEtablissement,codeGuichet:e.etablissement.codeGuichetInterbancaire},indicateurs:null};return this.produitEngageService.getIndicPartageTracab(i.etablissement.codeEtablissement,i.produitService.codeTypeOperation,i.produitService.identifiantProduitService).then(function(e){return i.indicateurs=e,i})["catch"](function(){return i})},n.prototype.rechargerInfoPartageTracab=function(e,r){if(angular.isUndefined(r.creditCoopDV)&&angular.isDefined(r.optionTracagePartage)&&null!==r.optionTracagePartage){var n=r.optionTracagePartage,t={codeEtablissement:e.etablissement.codeEtablissement,codeGuichet:e.etablissement.codeGuichetInterbancaire,numeroCompte:"",indicateurPartage:n.indicateurPartage?"true":"false",identifiantBeneficiaire:angular.isDefined(n.identifiantBeneficiaire)&&null!==n.identifiantBeneficiaire?n.identifiantBeneficiaire:null,valeurTauxPartage:angular.isDefined(n.valeurTauxPartage)&&null!==n.valeurTauxPartage?n.valeurTauxPartage:null,indicateurTracabilite:n.indicateurTracage?"true":"false",codeUniversTracabilite:angular.isDefined(n.codeUniversTracabilite)&&null!==n.codeUniversTracabilite?n.codeUniversTracabilite:null,codeProduit:"",identifiantProduitService:"",identifiantPersonne:0,codeDomaineTracabilite:"",libelleDomaineTracabilite:"",libelleTracab:"",libellePartage:""};return t}return angular.isDefined(r)&&null!==r&&angular.isDefined(r.creditCoopDV)&&null!==r.creditCoopDV?r.creditCoopDV:null},n.prototype.creditCoopEstActif=function(e){return angular.isDefined(e)&&null!==e&&angular.isDefined(e.creditCoopDV)&&null!==e.creditCoopDV||angular.isDefined(e)&&null!==e&&angular.isDefined(e.optionTracagePartage)&&null!==e.optionTracagePartage},n.prototype.getCodeLibelleHttpRessource=function(e){return angular.isDefined(e)&&null!==e&&angular.isDefined(e.codeLibelle)&&null!==e.codeLibelle?e.codeLibelle:""},n.prototype.getCodeErreurHttpRessource=function(e){return angular.isDefined(e)&&null!==e&&angular.isDefined(e.codeHttp)&&null!==e.codeHttp?e.codeHttp:0},n.prototype.getNiveauEstBloquantCompteRendu=function(e){return angular.isDefined(e)&&null!==e&&angular.isDefined(e.erreurs)&&null!==e.erreurs&&e.erreurs.length>0&&angular.isDefined(e.erreurs[0])&&null!==e.erreurs[0]&&angular.isDefined(e.erreurs[0].niveau)&&null!==e.erreurs[0].niveau&&e.erreurs[0].niveau>1?!0:!1},n.prototype.codeHttpAutre=function(e){return 200>e||e>204&&400!==e},n.prototype.creerCompteRenduCodeHttpIncorrect=function(e,r){return e.erreurs[0].message="Erreur lors de la souscription du "+r+" pour les raisons suivantes: Paramètre(s) en erreur ou Timeout de la ressource",e.erreurs[0].niveau=GestionGeneriqueOffres.Types.NiveauErreur.ErreurFatale,this.$q.when(e)},n.$inject=["$q","epargneCommunService","affectationRadicalService","saisieRiceService","signatureElectroniqueService","identifiantBordereauService","postOperationFinanciere","espaceGlobalService","ggoService","communicationComposantService","versementRegulierService","modalService","controlePersonneProtegeService","intervenantEntiteTitulaireService","resultatCommercialService","ajoutLSEService","produitEngageService","serviceAgentExtended","operationFinanciereService","serviceTrace","eligibiliteLivretService"],n}();r.OffreUtilService=n,r.communModule.service("offreUtilService",n)}(n=r.commun||(r.commun={}))}(r=e.gestionEpargne||(e.gestionEpargne={}))}(myway||(myway={}));var myway;!function(e){var r;!function(e){var r;!function(e){"use strict";var r=function(){function e(e,r){this.$q=e,this.serviceAgentExtended=r,this.restServiceUrl="http://myway-ressources-dua.sigcesie.caisse-epargne.fr:6083/contratparametre/v1/indicPartageTracab"}return e.prototype.recupererIndicateursPartageTracabilite=function(e){var r=this;return this.serviceAgentExtended.sendRequest({url:this.restServiceUrl,params:e,withHeaders:!0,method:MyWay.Services.MethodEnum.GET,responseType:MyWay.Services.ResponseTypeEnum.JSON,contentType:MyWay.Services.ContentTypeEnum.JSON}).then(function(e){return r.indicateursPartageTracabilite=e,r.indicateursPartageTracabilite})},e.$inject=["$q","serviceAgentExtended"],e}();e.PartageTracabiliteService=r,e.communModule.service("partageTracabiliteService",r)}(r=e.commun||(e.commun={}))}(r=e.gestionEpargne||(e.gestionEpargne={}))}(myway||(myway={}));var myway;!function(e){var r;!function(e){var r;!function(e){"use strict";var r=function(){function e(){var e=this;this.getTimers=function(){return e.timers},this.timers=[]}return e.prototype.initTimer=function(e,r,n){var t={libelle:e,timeStart:(new Date).getTime(),timeEnd:null,duration:0};return n&&(t.verbe=r,t.noyau=n.substring(0,n.lastIndexOf("/")),t.noyau=t.noyau.substring(t.noyau.lastIndexOf("/")+1),t.ressource=n.substring(n.lastIndexOf("/")+1)),this.timers.push(t),t},e.prototype.updateTimer=function(e){return e.timeEnd=(new Date).getTime(),e.duration=(e.timeEnd-e.timeStart)/1e3,e},e}();e.ProduitService=r,e.communModule.service("produitService",r)}(r=e.commun||(e.commun={}))}(r=e.gestionEpargne||(e.gestionEpargne={}))}(myway||(myway={}));var myway;!function(e){var r;!function(e){var r;!function(e){var r;!function(r){"use strict";var n=function(){function e(e,r){this.serviceAgentExtended=e,this.$q=r}return e.prototype.sendPostRequest=function(e){this.serviceAgentExtended.Trace.debug("Appel des données de la ressource 'dossiervente'","sendPostRequest");var r={critereConsultation:e,listeDossierVente:[]};return this.serviceAgentExtended.sendRequest({url:this.url(),data:r,withHeaders:!0,method:MyWay.Services.MethodEnum.POST,responseType:MyWay.Services.ResponseTypeEnum.JSON,contentType:MyWay.Services.ContentTypeEnum.JSON}).then(function(e){return e})},e.prototype.url=function(){return"http://myway-ressources-dua.sigcesie.caisse-epargne.fr:6083/dossiervente/v1/recherche"},e.$inject=["serviceAgentExtended","$q"],e}();r.RechercheDossierVenteService=n,e.communModule.service("RechercheDossierVenteService",n)}(r=e.DossierDeVente||(e.DossierDeVente={}))}(r=e.commun||(e.commun={}))}(r=e.gestionEpargne||(e.gestionEpargne={}))}(myway||(myway={}));var myway;!function(e){var r;!function(e){var r;!function(e){"use strict";var r=function(){function e(e,r){this.$q=e,this.serviceAgentExtended=r,this.codeTypeProduitServiceGcp="",this.estEnVad=!1,this.restServiceUrl="http://myway-ressources-dua.sigcesie.caisse-epargne.fr:6083/entretiencommercial-v1/resultatEntretien"}return e.prototype.enregistrerResultatCommercial=function(e,r,n,t){var i=this;return this.serviceAgentExtended.sendRequest({url:this.restServiceUrl,params:this.estLivretADemandeOuvertureVad()?{versionTraitement:"A"}:{},data:this.creerResultatCommercialProduit(e,r,n,t),withHeaders:!0,method:MyWay.Services.MethodEnum.POST,responseType:MyWay.Services.ResponseTypeEnum.JSON,contentType:MyWay.Services.ContentTypeEnum.JSON}).then(function(e){return i.resultatCommercial=e,i.resultatCommercial})},e.prototype.modifierResultatCommercialEcheancierPEL=function(e,r,n,t){var i=this;return this.serviceAgentExtended.sendRequest({url:this.restServiceUrl,data:this.modifierEcheancierPEL(e,r,n,t),withHeaders:!0,method:MyWay.Services.MethodEnum.POST,responseType:MyWay.Services.ResponseTypeEnum.JSON,contentType:MyWay.Services.ContentTypeEnum.JSON}).then(function(e){return i.resultatCommercial=e,i.resultatCommercial})},e.prototype.modifierResultatCommercialDureePEL=function(e){var r=this;return this.serviceAgentExtended.sendRequest({url:this.restServiceUrl,data:this.modifierDureePEL(e),withHeaders:!0,method:MyWay.Services.MethodEnum.POST,responseType:MyWay.Services.ResponseTypeEnum.JSON,contentType:MyWay.Services.ContentTypeEnum.JSON}).then(function(e){return r.resultatCommercial=e,r.resultatCommercial})},e.prototype.creerResultatCommercialProduit=function(e,r,n,t){(angular.isUndefined(t)||null===t)&&(t=moment().format("YYYY-MM-DD"));var i={identifiantPersonne:e,codeTypeFamilleResultat:"1",identifiantProduitService:r,codeNatureResultatCommercial:"0",codeTypeResultatCommercial:"4",codeTypeProduitService:"",indicRattachableCRE:"1",codeTypeProduitServiceGCP:this.codeTypeProduitServiceGcp,codeOrigineFonds:0,montantResultatCommercial:n,codeModeGestionLivret:"",sousCodeProduitService:"",codeProduitCarte:"",codeModeFinancier:"",codeCaractereForfaitaireOffre:"U",indicProduitServiceObligatoire:"",dateCreationResultatCommercial:t};return"DO0000"===this.codeTypeProduitServiceGcp&&(i.identifiantProduitService=0),i},e.prototype.modifierEcheancierPEL=function(e,r,n,t){var i=moment().format("YYYY-MM-DD"),o={identifiantPersonne:e,codeTypeFamilleResultat:"2",identifiantProduitService:r,codeNatureResultatCommercial:"0",codeTypeResultatCommercial:t?"2":"3",codeTypeProduitService:"",indicRattachableCRE:"1",codeTypeProduitServiceGCP:"",codeOrigineFonds:0,montantResultatCommercial:n,codeModeGestionLivret:"",sousCodeProduitService:"",codeProduitCarte:"",codeModeFinancier:"",codeCaractereForfaitaireOffre:"",indicProduitServiceObligatoire:"",dateCreationResultatCommercial:i};return o},e.prototype.modifierDureePEL=function(e){var r=moment().format("YYYY-MM-DD"),n={identifiantPersonne:e,codeTypeFamilleResultat:"1",identifiantProduitService:0,codeNatureResultatCommercial:"0",codeTypeResultatCommercial:"4",codeTypeProduitService:"",indicRattachableCRE:"1",codeTypeProduitServiceGCP:" P0016",codeOrigineFonds:0,montantResultatCommercial:0,codeModeGestionLivret:"",sousCodeProduitService:"",codeProduitCarte:"",codeModeFinancier:"",codeCaractereForfaitaireOffre:"",indicProduitServiceObligatoire:"",dateCreationResultatCommercial:r};return n},e.prototype.estLivretADemandeOuvertureVad=function(){return this.estEnVad&&"DO0000"===this.codeTypeProduitServiceGcp},e.$inject=["$q","serviceAgentExtended"],e}();e.ResultatCommercialService=r,e.communModule.service("resultatCommercialService",r)}(r=e.commun||(e.commun={}))}(r=e.gestionEpargne||(e.gestionEpargne={}))}(myway||(myway={}));var myway;!function(e){var r;!function(e){var r;!function(e){"use strict";!function(e){e[e.DEBUG=1]="DEBUG",e[e.ERROR=2]="ERROR",e[e.INFO=3]="INFO",e[e.WARNING=4]="WARNING"}(e.LogType||(e.LogType={}));var r=e.LogType,n=function(){function e(e,r){this.$q=e,this.$timeout=r,this.colors=["","#283B82","#C74F0C","#336924","#9E0808"],this.logPrefixe=""}return Object.defineProperty(e.prototype,"logPrefixe",{get:function(){return this._logPrefixe},set:function(e){this._logPrefixe=e},enumerable:!0,configurable:!0}),e.prototype.log=function(e,n,t){if(void 0===e&&(e=""),window.console&&console.log){var i=-1!==navigator.userAgent.indexOf("Trident"),o="\n";if(e=this.logPrefixe+e,console.log(o),i){var a="***";console.log("("+this.getTime()+") "+a+" "+r[t]+" "+a+" --> "+e)}else{var s="padding:2px 10px; background-color:"+this.colors[t]+"; color: white;";console.log("%c ("+this.getTime()+") "+e,s)}angular.isDefined(n)&&console.log(n),console.log(o)}},e.prototype.debug=function(e,n){this.traceServiceLogger(r.DEBUG,e,n)},e.prototype.error=function(e,n){this.traceServiceLogger(r.ERROR,e,n)},e.prototype.info=function(e,n){this.traceServiceLogger(r.INFO,e,n)},e.prototype.warning=function(e,n){this.traceServiceLogger(r.WARNING,e,n)},e.prototype.warn=function(e,r){this.warning(e,r)},e.prototype.traceServiceLogger=function(n,t,i){var o,a=null;switch(this.log(t,i,n),n){case r.DEBUG:try{e.logger.debug(t+" : %1",i)}catch(s){a="debug",o=s}break;case r.INFO:try{e.logger.info(t+" : %1",i)}catch(s){a="info",o=s}break;case r.ERROR:try{e.logger.error(t+" : %1",i)}catch(s){a="error",o=s}break;case r.WARNING:try{e.logger.warn(t+" : %1",i)}catch(s){a="warn",o=s}}null!==a&&this.log("TraceService Error : ServiceTrace.logger."+a,o,r.ERROR)},e.prototype.getTime=function(){var e=new Date;return e.getHours()+":"+e.getMinutes()+":"+e.getSeconds()+","+e.getMilliseconds()},e.CLASS_NAME="myway.gestionEpargne.commun.ServiceTrace",e.logger=MyWay.Services.Loggers.LoggerFactory.INSTANCE.getClass(e.CLASS_NAME),e.$inject=["$q","$timeout"],e}();e.ServiceTrace=n,e.communModule.service("serviceTrace",n)}(r=e.commun||(e.commun={}))}(r=e.gestionEpargne||(e.gestionEpargne={}))}(myway||(myway={}));var myway;!function(e){var r;!function(e){var r;!function(e){"use strict";var r=function(){function r(e,r){this.$q=e,this.serviceAgentExtended=r}return r.prototype.estSU1PValide=function(r){var n=this,t=this.$q.defer(),i=[this.serviceAgentExtended.Context.GetFromContext(e.Contexte.PARAMETRES_SERVEUR_POSTE),this.serviceAgentExtended.getAuthentificationInfo()];return this.$q.all(i).then(function(i){var o=JSON.parse(i[0]),a=i[1].codeEtablissement,s={propriete:"COSXAP",valeur:r,operateur:MyWay.Services.DonneesDelocalisees.CRITERES_OPERATEUR.EGAL},c=[],l=[];l.push(s),l.push({propriete:"COEIO1",valeur:e.EpargneCommunService.formaterEnChaine(i[1].agentConnecte.referenceExterneEdsRattachemen,8),operateur:MyWay.Services.DonneesDelocalisees.CRITERES_OPERATEUR.EGAL}),c.push(n.serviceAgentExtended.DonneesDelocalisees.getDonneesParCriteres(a,"SU1P",l));var u=[];u.push(s),u.push({propriete:"WLNLU",valeur:o&&o.NomServeur,operateur:MyWay.Services.DonneesDelocalisees.CRITERES_OPERATEUR.EGAL}),c.push(n.serviceAgentExtended.DonneesDelocalisees.getDonneesParCriteres(a,"SU1P",u));var m=[];m.push(s),m.push({propriete:"COEIO1",valeur:"TTCAISSE",operateur:MyWay.Services.DonneesDelocalisees.CRITERES_OPERATEUR.EGAL}),c.push(n.serviceAgentExtended.DonneesDelocalisees.getDonneesParCriteres(a,"SU1P",m)),n.$q.all(c).then(function(e){var r=e[0].filter(n.su1pFilterDDEJDA),i=e[1].filter(n.su1pFilterDDEJDA),o=e[2].filter(n.su1pFilterDDEJDA),a=r.length>0,s=i.length>0,c=o.length>0;console.log("estAgenceValide",a,e[0]),console.log("estServeurPosteValide",s,e[1]),console.log("estCaisseClose",c,e[2]),a||s||!c?t.resolve(!0):t.resolve(!1)})["catch"](function(e){t.resolve(null)})})["catch"](function(e){t.resolve(null)}),t.promise},r.prototype.su1pFilterDDEJDA=function(e){var r=moment().format("YYYY-MM-DD"),n=moment(e.DDEJDA,"DDMMYYYY").format("YYYY-MM-DD");return r>=n},r.$inject=["$q","serviceAgentExtended"],r}();e.Su1pService=r,e.communModule.service("su1pService",r)}(r=e.commun||(e.commun={}))}(r=e.gestionEpargne||(e.gestionEpargne={}))}(myway||(myway={}));var myway;!function(e){var r;!function(e){var r;!function(e){"use strict";var r=function(){function e(e,r,n,t,i){this.$scope=e,this.serviceAgent=r,this.$q=n,this.communNumberService=t,this.offreUtilService=i,!this.offreUtilService.enRestitutionDVenVadVpc&&angular.isDefined(this.operationFinanciere)&&null!==this.operationFinanciere||this.offreUtilService.vadVpcOpeFiChargee&&angular.isDefined(this.operationFinanciere)&&null!==this.operationFinanciere?this.affichageRecapitulatif():this.watchChargementDonneesOpeFi()}return e.prototype.watchChargementDonneesOpeFi=function(){var e=this;this.$scope.$watch(function(){return e.offreUtilService.vadVpcOpeFiChargee},function(r,n){r!==n&&r===!0&&angular.isDefined(e.operationFinanciere)&&null!==e.operationFinanciere&&e.affichageRecapitulatif()})},e.prototype.affichageRecapitulatif=function(){this.virementOperationDiverse=!1,this.especes=!1,this.chequeRecu=!1,this.virementInterneClient=!1,this.versementEspeceDivers=!1,this.divers=!1,this.affichedelaiEncaissement=!0,this.montantOperation=this.communNumberService.formatMoney(this.operationFinanciere.segmentPrvRio.montantGlobalOperation);var e=this.operationFinanciere.segmentPrvRio.modeFinancierNumerique;switch(e){case"00":this.virementOperationDiverse=!0,this.odMessage(),this.modeFinancier="VIREMENT OPERATION DIVERSE";break;case"01":this.especes=!0,this.modeFinancier="Espèces",this.construireMessageBilleterie(),this.monnaieMessageRecap=this.construireMessageMonnaie();break;case"02":this.chequeRecu=!0,this.reserveEtDelaiEncaissementMessage(),this.modeFinancier="Chèque";break;case"06":this.virementInterneClient=!0,this.compteDebiteMessage(),this.modeFinancier="Virement";break;case"07":this.versementEspeceDivers=!0,this.refEnveloppeSacMessage(),this.modeFinancier="Versement espèce divers",this.construireMessageBilleterie(),this.monnaieMessageRecap=this.construireMessageMonnaie();break;case"10":this.divers=!0,this.modeFinancier="Divers"}},e.prototype.construireMessageBilleterie=function(){var e=this.operationFinanciere.segmentPrvRio.S_BILLETERIE.nombreCoupure;this.billeterieGrosseCoupure="",this.billeteriePetiteCoupure="",e.b500&&0!==e.b500&&(this.billeterieGrosseCoupure="",this.billeterieGrosseCoupure=this.billeterieGrosseCoupure+e.b500.toString()+" billets 500€"),e.b200&&0!==e.b200&&(""===this.billeterieGrosseCoupure?this.billeterieGrosseCoupure="":this.billeterieGrosseCoupure=this.billeterieGrosseCoupure+" + ",this.billeterieGrosseCoupure=this.billeterieGrosseCoupure+e.b200.toString()+" billets 200€"),e.b100&&0!==e.b100&&(""===this.billeterieGrosseCoupure?this.billeterieGrosseCoupure="":this.billeterieGrosseCoupure=this.billeterieGrosseCoupure+" + ",this.billeterieGrosseCoupure=this.billeterieGrosseCoupure+e.b100.toString()+" billets 100€"),e.b50&&0!==e.b50&&(this.billeteriePetiteCoupure="",this.billeteriePetiteCoupure=this.billeteriePetiteCoupure+e.b50.toString()+" billets 50€"),e.b20&&0!==e.b20&&(""===this.billeteriePetiteCoupure?this.billeteriePetiteCoupure="":this.billeteriePetiteCoupure=this.billeteriePetiteCoupure+" + ",this.billeteriePetiteCoupure=this.billeteriePetiteCoupure+e.b20.toString()+" billets 20€"),e.b10&&0!==e.b10&&(""===this.billeteriePetiteCoupure?this.billeteriePetiteCoupure="":this.billeteriePetiteCoupure=this.billeteriePetiteCoupure+" + ",this.billeteriePetiteCoupure=this.billeteriePetiteCoupure+e.b10.toString()+" billets 10€"),e.b5&&0!==e.b5&&(""===this.billeteriePetiteCoupure?this.billeteriePetiteCoupure="":this.billeteriePetiteCoupure=this.billeteriePetiteCoupure+" + ",this.billeteriePetiteCoupure=this.billeteriePetiteCoupure+e.b5.toString()+" billets 5€")},e.prototype.construireMessageMonnaie=function(){var e=this.operationFinanciere.segmentPrvRio.S_BILLETERIE.monnaieSansBillet,r="";return e&&0!==e&&(r=this.communNumberService.formatMoney(e)+" €"),r},e.prototype.reserveEtDelaiEncaissementMessage=function(){var e=this.operationFinanciere.segmentPrvRio.nombreJourReserveEncaissement;"000"===e?(this.reserveCheque="Non",this.affichedelaiEncaissement=!1):(this.reserveCheque="Oui",this.delaiEncaissementCheque=_.parseInt(e)+" jours")},e.prototype.refEnveloppeSacMessage=function(){var e=this.operationFinanciere.segmentPrvRio.libelleOperation1;e=_.trim(e,"DEPOT ESP N° "),this.refEnveloppeSac=e},e.prototype.odMessage=function(){var e=this.operationFinanciere.segmentPrjo;this.oD=e.codeReferenceOD+" "+e.libelleTypeOD},e.prototype.compteDebiteMessage=function(){this.operationFinanciere&&this.operationFinanciere.compteVirementInterneSelectionne?(this.compteDebiteVPC=this.formatCompte(this.operationFinanciere.segmentPrvRio.S_PRVRIOUGR[0].numeroCompte,!1),angular.isDefined(this.operationFinanciere.compteVirementInterneSelectionne.valeurProduit)&&null!==this.operationFinanciere.compteVirementInterneSelectionne.valeurProduit&&(this.detenteurCompteDebite=this.operationFinanciere.compteVirementInterneSelectionne.libelleProduit+" - "+this.operationFinanciere.compteVirementInterneSelectionne.libelleEntiteTitulaire,this.compteDebite=this.compteDebiteVPC+" - Solde : "+this.communNumberService.formatMoney(this.operationFinanciere.compteVirementInterneSelectionne.valeurProduit)+" "+this.operationFinanciere.compteVirementInterneSelectionne.devise.symboleDevise)):this.detenteurCompteDebite=this.formatCompte(this.operationFinanciere.segmentPrvRio.S_PRVRIOUGR[0].numeroCompte,!0)},e.prototype.formatCompte=function(e,r){for(var n="",t=0;t<e.length;t++)(5===t||10===t)&&(n+=" "),21===t&&r&&(n+=" "),n+=e[t];return n},e.$inject=["$scope","serviceAgent","$q","communNumberService","offreUtilService"],e}();e.communModule.controller("recapitulatifOpefiControleur",r)}(r=e.commun||(e.commun={}))}(r=e.gestionEpargne||(e.gestionEpargne={}))}(myway||(myway={}));var myway;!function(e){var r;!function(e){var r;!function(e){"use strict";
function r(){return{templateUrl:"typescript/recapitulatif-ggo/recapitulatif-opefi.html",restrict:"E",scope:{operationFinanciere:"=",contexte:"="},controller:"recapitulatifOpefiControleur",controllerAs:"recapCtrl",bindToController:!0}}e.mwRecapitulatifVersementInitial=r,e.communModule.directive("mwRecapitulatifVersementInitial",r)}(r=e.commun||(e.commun={}))}(r=e.gestionEpargne||(e.gestionEpargne={}))}(myway||(myway={}));var myway;!function(e){var r;!function(e){var r;!function(e){"use strict";function r(){return{templateUrl:"typescript/recapitulatif-ggo/recapitulatif-opefi-vpc.html",restrict:"E",scope:{operationFinanciere:"=",contexte:"="},controller:"recapitulatifOpefiControleur",controllerAs:"recapCtrl",bindToController:!0}}e.mwRecapitulatifVersementInitialVpc=r,e.communModule.directive("mwRecapitulatifVersementInitialVpc",r)}(r=e.commun||(e.commun={}))}(r=e.gestionEpargne||(e.gestionEpargne={}))}(myway||(myway={}));var myway;!function(e){var r;!function(e){var r;!function(e){"use strict";var r=function(){function e(e,r,n,t){this.$scope=e,this.serviceAgent=r,this.$q=n,this.communNumberService=t,this.versementRegulierEstCharge=!1,angular.isDefined(this.versementPeriodique)&&null!==this.versementPeriodique&&(this.versementRegulierEstCharge=!0,this.dateDebut=this.communNumberService.dateToString(this.versementPeriodique.dateDebut),this.dateFin=this.communNumberService.dateToString(this.versementPeriodique.dateFin),this.montant=this.communNumberService.formatMoney(this.versementPeriodique.montant.montant),this.versementPeriodique.comptePrelevement&&this.versementPeriodique.comptePrelevement.valeurProduit&&this.versementPeriodique.comptePrelevement.devise.symboleDevise?(this.affichageDetailcompte=!0,this.libelleCompteADebiter=this.versementPeriodique.comptePrelevement.libelleProduit+" - "+this.versementPeriodique.comptePrelevement.libelleEntiteTitulaire,this.numeroCompteADebiter=this.versementPeriodique.ricePrelevement.codeEtablissement+" "+this.versementPeriodique.ricePrelevement.codeGuichet.value+" "+this.versementPeriodique.ricePrelevement.codeActiviteCompte+this.versementPeriodique.ricePrelevement.radical+this.versementPeriodique.ricePrelevement.cleCompte+"  - solde : "+this.communNumberService.formatMoney(this.versementPeriodique.comptePrelevement.valeurProduit)+" "+this.versementPeriodique.comptePrelevement.devise.symboleDevise):(this.affichageDetailcompte=!1,this.libelleCompteADebiter=this.versementPeriodique.ricePrelevement.codeEtablissement+" "+this.versementPeriodique.ricePrelevement.codeGuichet.value+" "+this.versementPeriodique.ricePrelevement.codeActiviteCompte+this.versementPeriodique.ricePrelevement.radical+this.versementPeriodique.ricePrelevement.cleCompte))}return e.$inject=["$scope","serviceAgent","$q","communNumberService"],e}();e.communModule.controller("recapitulatifVersementRegulierControleur",r)}(r=e.commun||(e.commun={}))}(r=e.gestionEpargne||(e.gestionEpargne={}))}(myway||(myway={}));var myway;!function(e){var r;!function(e){var r;!function(e){"use strict";function r(){return{templateUrl:"typescript/versement-regulier/vue-versement-regulier.html",restrict:"E",scope:{versementPeriodique:"="},controller:"recapitulatifVersementRegulierControleur",controllerAs:"recapVerRegCtrl",bindToController:!0}}e.mwRecapitulatifVersementRegulier=r,e.communModule.directive("mwRecapitulatifVersementRegulier",r)}(r=e.commun||(e.commun={}))}(r=e.gestionEpargne||(e.gestionEpargne={}))}(myway||(myway={}));var myway;!function(e){var r;!function(e){var r;!function(e){var r=function(){function e(){}return e}();e.ConversionRibBicIban=r}(r=e.commun||(e.commun={}))}(r=e.gestionEpargne||(e.gestionEpargne={}))}(myway||(myway={}));var myway;!function(e){var r;!function(e){var r;!function(e){var r=function(){function e(){}return e}();e.InformationEcheancier=r}(r=e.commun||(e.commun={}))}(r=e.gestionEpargne||(e.gestionEpargne={}))}(myway||(myway={}));var myway;!function(e){var r;!function(e){var r;!function(e){"use strict";var r=function(){function e(){}return e.INTERNE="I",e.EXTERNE="E",e.DV_PROPRE_SOINS="C",e.DV_INTERNE="B",e.DV_EXTERNE="D",e}();e.CodeTypeVirementVersementPeriodique=r;var n=function(){function r(e,r,n,t,i,o){this.$parse=e,this.serviceAgentExtended=r,this.$q=n,this.filtreCodeProduitService=t,this.communicationComposantService=i,this.saisieRiceService=o,this.restServiceUrl="http://myway-ressources-dua.sigcesie.caisse-epargne.fr:6083/echeancier/v1/informationEcheancier",this.urlRest="http://myway-ressources-dua.sigcesie.caisse-epargne.fr:6083/operationfinanciereservice-v1/conversionRibBicIban"}return r.prototype.postInformationEcheancier=function(e){return this.serviceAgentExtended.sendRequest({url:this.restServiceUrl,params:{},data:e,withHeaders:!0,method:MyWay.Services.MethodEnum.POST,responseType:MyWay.Services.ResponseTypeEnum.JSON,contentType:MyWay.Services.ContentTypeEnum.JSON}).then(function(e){return e})},r.prototype.initInformationEcheancier=function(r,n,t,i,o){var a=n.donneesProduit.detenteur,s=n.personnes,c=_.findWhere(s,{identifiantPersonne:a.listeCompositionEntiteTitulaire[0].identifiantTiers}),l=new e.InformationEcheancier,u=c.particulierInformation;return l.codeEtablissement=r.ricePrelevement.codeEtablissement,l.codeGuichet=r.ricePrelevement.codeGuichet.value,l.codeDevise=r.montant.codeDevise,l.datePremiereEcheance=r.dateDebut,l.dateDerniereEcheance=r.dateFin,l.montantMouvementVirmtImmediat=r.montant.montant,l.codePeriodicite=r.periodicite.key,l.numeroCompteClientDonneurOrdre=r.ricePrelevement.codeActiviteCompte+r.ricePrelevement.radical+r.ricePrelevement.cleCompte,l.cleRibNumeroCompte=r.ricePrelevement.cleRice,l.codeBicBanqueDonneurOrdre=r.bicPrelevement,l.numeroIbanCompteDonneurOrdre=r.ibanPrelevement,l.libelle1VirementImmediat=r.libelle,l.libelleCompletBeneficiaire=u.designationCourte,l.codeBicDestinataire=t.codeBic,l.numeroIbanCompteBeneficiaire=t.numeroIbanCompteBeneficiaire,l.indicatifPaysBeneficiaire=u.codeISOPays,l.numeroPersonne=+r.comptePrelevement.identifiantPersonne,l.codeTypeTraitement="M",l.prioriteVirement="O",l.typeVirementImmediat="1",l.montantContreValeur=0,l.codeDeviseContreValeur="EUR",l.codeEtatDossierPrelevement="A",l.codeApplicationDeiOrigine="EPT",l.typeInstruction="5",l.typeCompteDestinataire="N",l.dateOperation=o,l},r.prototype.getBicIban=function(e,r,n,t){return this.serviceAgentExtended.sendRequest({url:this.urlRest,params:{codeEtablissement:e,codeGuichet:r,numeroCompte:n,cleRib:t},withHeaders:!0,method:MyWay.Services.MethodEnum.GET}).then(function(e){return e})},r.prototype.lancerVersementPeriodique=function(r,n){var t=new MyWay.Model.ParametreVersementPeriodique;t.codePeriodiciteParDefaut="M";var i=r.donneesProduit.detenteur,o=[];if(_.forEach(i.listeCompositionEntiteTitulaire,function(e){o.push(e.identifiantTiers.toString())}),t.parametreListeCompte=new MyWay.Model.ParametresListeComptes,t.parametreListeCompte.identifiantsPersonnes=o,t.parametreListeCompte.typeRecherche="B",t.parametreListeCompte.codeEtatRecherche="A",n===e.CodeCanalEnum.FF){var a=r.donneesProduit.codeTypeProduitServicePrincipalOffre.valeur;this.filtreCodeProduitService.setEstVersementPeriodique(!0),t.parametreListeCompte.typesProduits=this.filtreCodeProduitService.getFiltreProduit(a)}else n===e.CodeCanalEnum.VAD&&(t.parametreListeCompte.typesProduits=this.filtreCodeProduitService.getFiltreVersementPeriodiqueVAD());return t.ricePrelevement=new MyWay.Model.Rice(r.etablissement.codeEtablissement,r.etablissement.codeGuichetInterbancaire),"0017"===r.donneesProduit.produit.produitCaracteristique.codeTypeProduitService?t.periodicites=[{key:"M",value:"Mensuelle",seuil:null,plafond:null}]:t.periodicites=[{key:"M",value:"Mensuelle",seuil:null,plafond:null},{key:"T",value:"Trimestrielle",seuil:null,plafond:null},{key:"S",value:"Semestrielle",seuil:null,plafond:null},{key:"A",value:"Annuelle",seuil:null,plafond:null}],t},r.prototype.restituerVersementPeriodiqueParametre=function(r){var n=this.communicationComposantService.getVersementPeriodique(),t=new MyWay.Model.ParametreVersementPeriodique;t.codePeriodiciteParDefaut=_.isUndefined(n.periodicite)||null==n.periodicite?"M":n.periodicite.key,t.ricePrelevement=n.ricePrelevement,t.periodicites=[],"0017"===r.donneesProduit.produit.produitCaracteristique.codeTypeProduitService?t.periodicites=[{key:"M",value:"Mensuelle",seuil:null,plafond:null}]:t.periodicites=[{key:"M",value:"Mensuelle",seuil:null,plafond:null},{key:"T",value:"Trimestrielle",seuil:null,plafond:null},{key:"S",value:"Semestrielle",seuil:null,plafond:null},{key:"A",value:"Annuelle",seuil:null,plafond:null}],t.parametreListeCompte=new MyWay.Model.ParametresListeComptes;var i=r.donneesProduit.detenteur,o=[];return _.forEach(i.listeCompositionEntiteTitulaire,function(e){o.push(e.identifiantTiers.toString())}),t.parametreListeCompte.identifiantsPersonnes=o,t.parametreListeCompte.typeRecherche="B",t.parametreListeCompte.codeEtatRecherche="A",t.parametreListeCompte.typesProduits=this.filtreCodeProduitService.getFiltreProduit(e.CodeTypeProduitsEnum.LIVRET_B),t},r.prototype.testActivationVersementRegulier=function(e){return void 0===e?!1:void 0===e.montant||void 0===e.montant.montant||null===e.montant.montant?!1:!0},r.prototype.checkVersementRegulier=function(e,r){var n=[];return!this.testActivationVersementRegulier(e)||e.$valid&&this.verifierVersementPeriodique(e)?n:(n.push(new GestionGeneriqueOffres.Types.ErreurGestionGeneriqueOffre(GestionGeneriqueOffres.Types.NiveauErreur.ErreurFatale,1,"Erreur lors de la souscription du "+r+" pour les raisons suivantes: Données saisies incorrectes")),n)},r.prototype.verifierVersementPeriodique=function(e){return angular.isUndefined(e.ricePrelevement)||null===e.ricePrelevement||angular.isUndefined(e.ibanPrelevement)||null===e.ibanPrelevement||angular.isUndefined(e.bicPrelevement)||null===e.bicPrelevement||angular.isUndefined(e.dateDebut)||null===e.dateDebut||angular.isUndefined(e.dateFin)||null===e.dateFin||angular.isUndefined(e.libelle)||null===e.libelle||""===e.libelle||angular.isUndefined(e.periodicite)||angular.isUndefined(e.periodicite.key)||null===e.periodicite.key||""===e.periodicite.key?!1:!0},r.$inject=["$parse","serviceAgentExtended","$q","filtreCodeProduitService","communicationComposantService","saisieRiceService"],r}();e.VersementRegulierService=n,e.communModule.service("versementRegulierService",n)}(r=e.commun||(e.commun={}))}(r=e.gestionEpargne||(e.gestionEpargne={}))}(myway||(myway={}));var myway;!function(e){var r;!function(r){var n;!function(r){var n=function(){function r(n,t,i){var o=this;this.$scope=n,this.serviceAgentExtended=t,this.operationFinanciereService=i,this.afficherBoutonSaisirCompte=!0,this.estForcage=!1,this.texteBouton=r.TEXTE_SAISIR_AUTRE_COMPTE,this.traitementRechercheComptes(),angular.isUndefined(this.blocageEditionVirement)&&(this.blocageEditionVirement=!1),null!=this.forcerAffichageRiceSaisie&&(this.afficherBoutonSaisirCompte=!1,null!=this.riceSaisiePreRemplit&&(this.rice=this.riceSaisiePreRemplit,this.afficherBoutonSaisirCompte=!1,n.$emit("rice_virement_interne_manuel",this.rice))),angular.isUndefined(this.codeGuichet)?this.serviceAgentExtended.getParametresComptables().then(function(e){e&&!o.estForcage&&(o.rice.codeGuichet={id:0,value:e.codeGuichetInterbancaire})}):this.rice.codeGuichet={id:0,value:this.codeGuichet},n.$watch(function(){return o.compteSelectionne},function(r,t){null!=r?(null!=r.valeurProduit&&(r.codeDeviseContrat!==e.comOpesFinancieres.Constantes.Devise.TEXTE_CODE_DEVISE_EURO&&r.valeurProduitDevise?o.soldeCompteChoisi=r.valeurProduitDevise:o.soldeCompteChoisi=r.valeurProduit),n.$emit("rice_virement_interne",r,o.soldeCompteChoisi)):o.estForcage||n.$emit("rice_virement_interne",null,0)}),n.$on("mode_financier_changed",function(r,n){null!==n&&n!==e.comOpesFinancieres.Constantes.CodeModeFinancier.MODE_FINANCIER_VIREMENT_INTERNE&&(o.compteSelectionne=null,o.rice&&(o.rice=new MyWay.Model.Rice(o.rice.codeEtablissement,o.rice.codeGuichet)))}),n.$watch(function(){return o.rice},function(e,r){e!==r&&(o.rice=e,n.$emit("rice_virement_interne_manuel",e))},!0),n.$watchCollection(function(){return o.listeNumerosPersonnes},function(e,r){o.traitementRechercheComptes()}),n.$watch(function(){return o.blocageEditionVirement},function(e,r){e!==r&&(o.blocageEditionVirement=e)}),n.$on("mwsfVirementInterne_forcage_opefi",function(e,r){o.compteSelectionne=r,o.afficherBoutonSaisirCompte=!0,o.estForcage=!0}),n.$on("mwsfVirementInterneSaisie_forcage_opefi",function(e,r){o.rice=r,o.afficherBoutonSaisirCompte=!1,o.estForcage=!0,n.$emit("rice_virement_interne_manuel",r)})}return r.prototype.traitementRechercheComptes=function(){this.parametreListeComptes=this.operationFinanciereService.creationObjetParametreListeComptes(this.typeRecherche,this.codeEtatRecherche,this.listeNumerosPersonnes,this.numeroPersonne,this.listeTypesProduits,this.codeDevise,this.compteEnleverListe),(angular.isDefined(this.itemBottomText)||null===this.itemBottomText)&&(this.parametreListeComptes.itemBottomText=this.itemBottomText)},r.prototype.boutonSaisirCompte=function(){this.afficherBoutonSaisirCompte?(this.afficherBoutonSaisirCompte=!1,this.texteBouton=r.TEXTE_BOUTON_AFFICHER_LISTE,this.compteSelectionne=null,this.$scope.$emit("rice_virement_interne",null,0)):(this.afficherBoutonSaisirCompte=!0,this.texteBouton=r.TEXTE_SAISIR_AUTRE_COMPTE,this.compteSelectionne=null,this.rice=new MyWay.Model.Rice(this.rice.codeEtablissement,this.rice.codeGuichet),this.$scope.$emit("rice_virement_interne_manuel",this.rice))},r.$inject=["$scope","serviceAgentExtended","operationFinanciereService"],r.TEXTE_SAISIR_AUTRE_COMPTE="Saisir un autre compte",r.TEXTE_BOUTON_AFFICHER_LISTE="Afficher la liste des comptes",r.TEXTE_LETTRE_CODE_ETAT_RECHERCHE_T="T",r.TEXTE_LETTRE_TYPE_RECHERCHE_B="B",r}();r.VirementInterneController=n,r.communModule.controller("VirementInterneController",n)}(n=r.commun||(r.commun={}))}(r=e.gestionEpargne||(e.gestionEpargne={}))}(myway||(myway={}));var myway;!function(e){var r;!function(e){var r;!function(e){"use strict";function r(){return{restrict:"E",templateUrl:"typescript/virement-interne/virement-interne-view.html",scope:{rice:"=",numeroPersonne:"=",compteSelectionne:"=",typeRecherche:"=?",codeEtatRecherche:"=?",listeNumerosPersonnes:"=?",listeTypesProduits:"=?",codeDevise:"=?",blocageEditionVirement:"=?",compteEnleverListe:"=?",forcerAffichageRiceSaisie:"=?",riceSaisiePreRemplit:"=?",codeGuichet:"=?",itemBottomText:"=?"},controller:"VirementInterneController",controllerAs:"viewModelVirementInterneCtrl",bindToController:!0,link:function(e,r,n){}}}e.gestionEpargneVirementInterne=r,e.communModule.directive("gestionEpargneVirementInterne",r)}(r=e.commun||(e.commun={}))}(r=e.gestionEpargne||(e.gestionEpargne={}))}(myway||(myway={}));var myway;!function(e){var r;!function(e){var r;!function(e){var r=function(){function e(e,r,n){e&&(this.operationFinanciere=e),r&&(this.specifiqueLGP=r),n&&(this.donneesCommunes=n)}return e}();e.CaracteristiqueGenerale=r;var n=function(){function e(){}return e}();e.SpecifiqueLgp=n}(r=e.commun||(e.commun={}))}(r=e.gestionEpargne||(e.gestionEpargne={}))}(myway||(myway={}));var myway;!function(e){var r;!function(e){var r;!function(e){"use strict";var r=function(){function r(r,n,t){this.$q=r,this.serviceAgentExtended=n,this.epargneCommunService=t,this.restServiceUrl="http://myway-ressources-dua.sigcesie.caisse-epargne.fr:6083/contratcptesurlivret/v1/caracteristiqueGenerale",this.data=new e.CaracteristiqueGenerale}return r.prototype.creerContratCompteSurLivret=function(e,r){var n=this,t=r.tauxVersementOuverture&&r.tauxVersementComplementaire||0===r.tauxVersementOuverture||0===r.tauxVersementComplementaire;return t||(delete r.tauxVersementComplementaire,delete r.tauxVersementOuverture),this.serviceAgentExtended.sendRequest({url:this.restServiceUrl,params:r,data:e,withHeaders:!0,method:MyWay.Services.MethodEnum.POST,responseType:MyWay.Services.ResponseTypeEnum.JSON,contentType:MyWay.Services.ContentTypeEnum.JSON}).then(function(e){return n.data=e,n.data})},r.prototype.getCaracteristiqueGenerale=function(e){var r=this;return this.serviceAgentExtended.sendRequest({url:this.restServiceUrl,params:e,withHeaders:!0,method:MyWay.Services.MethodEnum.GET,responseType:MyWay.Services.ResponseTypeEnum.JSON,contentType:MyWay.Services.ContentTypeEnum.JSON}).then(function(e){return r.data=e,r.data})},r.prototype.putCaracteristiqueGenerale=function(e,r){var n=this;return r?this.serviceAgentExtended.sendRequest({url:this.restServiceUrl,params:{tauxVersementComplementaire:r},data:e,withHeaders:!0,method:MyWay.Services.MethodEnum.PUT,responseType:MyWay.Services.ResponseTypeEnum.JSON,contentType:MyWay.Services.ContentTypeEnum.JSON}).then(function(e){return n.data=e,n.data}):this.serviceAgentExtended.sendRequest({url:this.restServiceUrl,params:{},data:e,withHeaders:!0,method:MyWay.Services.MethodEnum.PUT,responseType:MyWay.Services.ResponseTypeEnum.JSON,contentType:MyWay.Services.ContentTypeEnum.JSON}).then(function(e){return n.data=e,n.data})},r.prototype.getCaracteristiqueGeneraleObject=function(){return this.caracteristiqueGenerale},r.prototype.setCaracteristiqueGeneraleObject=function(e){this.caracteristiqueGenerale=e},r.$inject=["$q","serviceAgentExtended","epargneCommunService"],r}();e.CompteSurLivretService=r,e.communModule.service("compteSurLivretService",r)}(r=e.commun||(e.commun={}))}(r=e.gestionEpargne||(e.gestionEpargne={}))}(myway||(myway={}));var myway;!function(e){var r;!function(e){var r;!function(e){"use strict";var r=function(){function e(){}return e}();e.ParametresCaracteritiqueGeneraleLivretPOST=r;var n=function(){function e(){}return e}();e.ParametresCaracteritiqueGeneraleLivretGET=n}(r=e.commun||(e.commun={}))}(r=e.gestionEpargne||(e.gestionEpargne={}))}(myway||(myway={}));var myway;!function(e){var r;!function(e){var r;!function(e){"use strict";var r=function(){function e(e,r,n){this.$q=e,this.serviceAgentExtended=r,this.serviceTrace=n,this.restServiceUrl="http://myway-ressources-dua.sigcesie.caisse-epargne.fr:6083/cdvirementservice/v1/eligibiliteLivret"}return e.prototype.isCompteEligible=function(e,r,n,t,i,o){var a=t&&t.numeroCompteIBAN,s=i&&"FR76"+i.formatRicePourStructureEchange();return this.postEligibiliteLivret(a||s,e,n,r,o)},e.prototype.postEligibiliteLivret=function(e,r,n,t,i){var o=this.$q.defer(),a={codeCanalSepa:"PTU",numibanCompteEmetteur:e,codeSensEchange:"E",typeFonctionBriqueEligibilite:"V",codeBanqueCompteRecepteur:r,codeTypeProduitService:n,numEntiteTitulaireBeneficiaire:t,indicateurVirementPermanent:i?"O":"N"};return this.serviceAgentExtended.sendRequest({url:this.restServiceUrl,data:a,withHeaders:!0,method:MyWay.Services.MethodEnum.POST,responseType:MyWay.Services.ResponseTypeEnum.JSON,contentType:MyWay.Services.ContentTypeEnum.JSON}).then(function(e){"O"===e.codeReponse?o.resolve(!0):o.reject(e.libelleReponse)})["catch"](function(e){o.reject(e.libelle)}),o.promise},e.$inject=["$q","serviceAgentExtended","serviceTrace"],e}();e.EligibiliteLivretService=r,e.communModule.service("eligibiliteLivretService",r)}(r=e.commun||(e.commun={}))}(r=e.gestionEpargne||(e.gestionEpargne={}))}(myway||(myway={}));var myway;!function(e){var r;!function(e){var r;!function(e){"use strict"}(r=e.commun||(e.commun={}))}(r=e.gestionEpargne||(e.gestionEpargne={}))}(myway||(myway={}));var myway;!function(e){var r;!function(e){var r;!function(e){"use strict";var r=function(){function e(){}return e}();e.OperationFinanciereDV=r}(r=e.commun||(e.commun={}))}(r=e.gestionEpargne||(e.gestionEpargne={}))}(myway||(myway={}));var myway;!function(e){var r;!function(e){var r;!function(e){"use strict";var r=function(){function e(){}return e}();e.VesementPeriodiqueDV=r}(r=e.commun||(e.commun={}))}(r=e.gestionEpargne||(e.gestionEpargne={}))}(myway||(myway={}));var myway;!function(e){var r;!function(e){var r;!function(e){"use strict";var r=function(){function e(e,r){this.$q=e,this.serviceAgentExtended=r}return e.prototype.creerDossierDeVente=function(e,r,n,t,i){var o={};if((void 0===t||null===t)&&(t=!0),i?o.indicateurForcageVpc=i:o.indicateurForcageVpc=!1,n){var a=void 0;a=n.contexteSaisieOperationFinanciere&&n.contexteSaisieOperationFinanciere.codeEtablissement?{codeModeFinancier:n.modeFinancier.CTGXM1,codeEtablissementOperation:n.contexteSaisieOperationFinanciere.codeEtablissement}:{codeModeFinancier:n.modeFinancier.CTGXM1,codeEtablissementOperation:n.compte.rice.codeEtablissement},o.donneesDeSauvegardeProduitService=r,o.modeFinancier=a,t===!0&&(o.donneesMDEC=e)}else o.donneesDeSauvegardeProduitService=r,t===!0&&(o.donneesMDEC=e);return this.serviceAgentExtended.Trace.debug(JSON.stringify(o)),this.$q.when(o)},e.$inject=["$q","serviceAgentExtended"],e}();e.CreerDossierDeVenteService=r,e.communModule.service("creerDossierDeVenteService",r)}(r=e.commun||(e.commun={}))}(r=e.gestionEpargne||(e.gestionEpargne={}))}(myway||(myway={}));var myway;!function(e){var r;!function(e){var r;!function(e){"use strict";var r=function(){function e(e,r){this.$q=e,this.communNumberService=r}return e.prototype.getVueMDECCreditCoop=function(e){var r=new GestionGeneriqueOffres.Types.DossierDeVente.BlocMDEC,n=new GestionGeneriqueOffres.Types.DossierDeVente.SectionMDEC;return e.choixTracabilite?(n.champs.push(new GestionGeneriqueOffres.Types.DossierDeVente.ChampsMDEC("Traçabilité","Oui","3")),n.champs.push(new GestionGeneriqueOffres.Types.DossierDeVente.ChampsMDEC(e.donneesRestPartageTracab.paramPartageTracab.informationTracabilite.libelleDomaine,e.domaineTracabilite.libelleUniversTracabilite,"3"))):n.champs.push(new GestionGeneriqueOffres.Types.DossierDeVente.ChampsMDEC("Pas de traçabilité","","3")),e.choixPartage?(n.champs.push(new GestionGeneriqueOffres.Types.DossierDeVente.ChampsMDEC("Partage","Oui","3")),n.champs.push(new GestionGeneriqueOffres.Types.DossierDeVente.ChampsMDEC("Organisme bénéficiaire",e.organismeBeneficiaire.designationBeneficiare,"3")),n.champs.push(new GestionGeneriqueOffres.Types.DossierDeVente.ChampsMDEC("Taux de partage",this.communNumberService.formatTaux(e.tauxPartage.valeurTauxPartage.toString())+" %","3"))):n.champs.push(new GestionGeneriqueOffres.Types.DossierDeVente.ChampsMDEC("Pas de partage","","3")),r.sections.push(n),r},e.$inject=["$q","communNumberService"],e}();e.EnregistrerCreditCoopDansDVService=r,e.communModule.service("enregistrerCreditCoopDansDVService",r)}(r=e.commun||(e.commun={}))}(r=e.gestionEpargne||(e.gestionEpargne={}))}(myway||(myway={}));var myway;!function(e){var r;!function(e){var r;!function(e){"use strict";var r=function(){function r(e,r,n,t){this.$q=e,this.epargneCommunService=r,this.operationFinanciereService=n,this.communNumberService=t,this.MODE_FINANCIER_02_LIBELLE="CHEQUE RECU",this.MODE_FINANCIER_02_LIBELLE_CORRIGE="CHEQUE"}return r.prototype.creerDonneesSauvegardeOperationFinanciere=function(r){void 0!==r.compteVirementInterneSelectionne&&null!==r.compteVirementInterneSelectionne&&(r.client.numeroPersonne=r.compteVirementInterneSelectionne.identifiantPersonne);var n=new e.OperationFinanciereDV;return n.operationFinanciere=this.operationFinanciereService.creationObjetChoixUtilisateursParObjetOpeFi(r),"06"===n.operationFinanciere.codeModeFinancier&&(angular.isUndefined(n.operationFinanciere.modeFiVirInterne)||null===n.operationFinanciere.modeFiVirInterne||angular.isUndefined(n.operationFinanciere.modeFiVirInterne.numeroRice)||null===n.operationFinanciere.modeFiVirInterne.numeroRice||23!==n.operationFinanciere.modeFiVirInterne.numeroRice.length&&21!==n.operationFinanciere.modeFiVirInterne.numeroRice.length||_.endsWith(n.operationFinanciere.modeFiVirInterne.numeroRice,"null"))&&(n.operationFinanciere.modeFiVirInterne=null),n},r.prototype.getVueMDECOPEFI=function(e,r){var n=new GestionGeneriqueOffres.Types.DossierDeVente.SectionMDEC,t=e.segmentPrvRio.montantGlobalOperation.toString(),i=this.communNumberService.formatMoney(parseFloat(t))+" "+e.segmentPrvRio.codeDeviseMontantOperation,o=e.modeFinancier.LIJMMI.toString();if(o===this.MODE_FINANCIER_02_LIBELLE&&(o=this.MODE_FINANCIER_02_LIBELLE_CORRIGE),n.champs.push(new GestionGeneriqueOffres.Types.DossierDeVente.ChampsMDEC("Versement initial",i,"2")),n.champs.push(new GestionGeneriqueOffres.Types.DossierDeVente.ChampsMDEC("Montant du versement initial",i,"1")),n.champs.push(new GestionGeneriqueOffres.Types.DossierDeVente.ChampsMDEC("Mode financier",o,"2")),n.champs.push(new GestionGeneriqueOffres.Types.DossierDeVente.ChampsMDEC("Mode de versement",o,"1")),"06"===e.modeFinancier.CTGXM1){var a=void 0;e.compteVirementInterneSelectionne&&e.compteVirementInterneSelectionne.riceContrat?n.champs.push(new GestionGeneriqueOffres.Types.DossierDeVente.ChampsMDEC("Compte à débiter",this.formatterLibelleCompteVirementInterne(e.compteVirementInterneSelectionne),"3")):null!==e.segmentPrvRio.S_PRVRIOUGR[0].numeroCompte&&void 0!==e.segmentPrvRio.S_PRVRIOUGR[0].numeroCompte&&""!==e.segmentPrvRio.S_PRVRIOUGR[0].numeroCompte&&(a=this.epargneCommunService.formatCompte(e.segmentPrvRio.S_PRVRIOUGR[0].numeroCompte,!0),n.champs.push(new GestionGeneriqueOffres.Types.DossierDeVente.ChampsMDEC("Compte à débiter",a,"3")))}if("01"===e.modeFinancier.CTGXM1){var s=e.segmentPrvRio.codeDeviseMontantOperation,c=e.segmentPrvRio.S_BILLETERIE.nombreCoupure.b5+" billets 5 "+s+" "+e.segmentPrvRio.S_BILLETERIE.nombreCoupure.b10+" billets 10 "+s+" "+e.segmentPrvRio.S_BILLETERIE.nombreCoupure.b20+" billets 20 "+s+" "+e.segmentPrvRio.S_BILLETERIE.nombreCoupure.b50+" billets 50 "+s+" "+e.segmentPrvRio.S_BILLETERIE.nombreCoupure.b100+" billets 100 "+s+" "+e.segmentPrvRio.S_BILLETERIE.nombreCoupure.b200+" billets 200 "+s+" "+e.segmentPrvRio.S_BILLETERIE.nombreCoupure.b500+" billets 500 "+s;n.champs.push(new GestionGeneriqueOffres.Types.DossierDeVente.ChampsMDEC("Billetterie",c,"3"))}"07"===e.modeFinancier.CTGXM1&&angular.isDefined(e.referenceEnveloppe)&&null!==e.referenceEnveloppe&&n.champs.push(new GestionGeneriqueOffres.Types.DossierDeVente.ChampsMDEC("Référence SAC",e.referenceEnveloppe.numeroReferenceEnveloppe,"2")),"02"===e.modeFinancier.CTGXM1&&("000"===e.segmentPrvRio.nombreJourReserveEncaissement?n.champs.push(new GestionGeneriqueOffres.Types.DossierDeVente.ChampsMDEC("Délai d'encaissement","Non","2")):n.champs.push(new GestionGeneriqueOffres.Types.DossierDeVente.ChampsMDEC("Délai d'encaissement",e.segmentPrvRio.nombreJourReserveEncaissement+" jours","2"))),"00"===e.modeFinancier.CTGXM1&&(n.champs.push(new GestionGeneriqueOffres.Types.DossierDeVente.ChampsMDEC("Famille OD",e.segmentPrjo.codeFamilleOD+" - "+e.segmentPrjo.libelleFamilleOD,"2")),n.champs.push(new GestionGeneriqueOffres.Types.DossierDeVente.ChampsMDEC("Type OD",e.segmentPrjo.libelleTypeOD+" - "+e.segmentPrjo.libelleTypeOD,"2")));var l=new GestionGeneriqueOffres.Types.DossierDeVente.BlocMDEC;return l.sections.push(n),l},r.prototype.formatterLibelleCompteVirementInterne=function(e){var r="";return angular.isDefined(e.libelleProduit)&&null!==e.libelleProduit&&""!==e.libelleProduit&&(r=e.libelleProduit+" - "),r+=this.epargneCommunService.formatCompte(e.riceContrat,!1),angular.isDefined(e.libelleEntiteTitulaire)&&null!==e.libelleEntiteTitulaire&&""!==e.libelleEntiteTitulaire&&(r=r+" - "+e.libelleEntiteTitulaire),r},r.$inject=["$q","epargneCommunService","operationFinanciereService","communNumberService"],r}();e.EnregistrerOpeFiDansDVService=r,e.communModule.service("enregistrerOpeFiDansDVService",r)}(r=e.commun||(e.commun={}))}(r=e.gestionEpargne||(e.gestionEpargne={}))}(myway||(myway={}));var myway;!function(e){var r;!function(e){var r;!function(e){"use strict";var r=function(){function r(e,r,n){this.$q=e,this.communNumberService=r,this.epargneCommunService=n}return r.prototype.creerDonneesSauvegardeVersementPeriodique=function(r){var n=new e.VesementPeriodiqueDV;return n.version="1.0",angular.isDefined(r.dateDebut)&&null!==r.dateDebut?n.dateDebut=r.dateDebut.toISOString().substr(0,10):n.dateDebut=null,angular.isDefined(r.dateFin)&&null!==r.dateFin?n.dateFin=r.dateFin.toISOString().substr(0,10):n.dateFin=null,n.libelle=r.libelle,n.montant=r.montant.montant,n.codeDevise=r.montant.codeDevise,n.periodicite=r.periodicite.key,n.ricePrelevement=this.epargneCommunService.objetRiceToString(r.ricePrelevement),n.ibanPrelevement=r.ibanPrelevement,n.bicPrelevement=r.bicPrelevement,n.libelleComptePrelevementProduit=r.comptePrelevement.libelleProduit,n.libelleComptePrelevementEntiteTitulaire=r.comptePrelevement.libelleEntiteTitulaire,n},r.prototype.getVueMDECEcheancier=function(e){var r=new GestionGeneriqueOffres.Types.DossierDeVente.SectionMDEC,n=new GestionGeneriqueOffres.Types.DossierDeVente.BlocMDEC;if(angular.isDefined(e)&&angular.isDefined(e.comptePrelevement)&&null!==e.comptePrelevement){if(e.montant.montant){var t=this.communNumberService.formatMoney(parseFloat(e.montant.montant.toString()))+" "+e.montant.codeDevise;r.champs.push(new GestionGeneriqueOffres.Types.DossierDeVente.ChampsMDEC("Versement périodique",t,"2")),r.champs.push(new GestionGeneriqueOffres.Types.DossierDeVente.ChampsMDEC("Montant du versement périodique",t,"1"))}if(e.comptePrelevement){var i=e.comptePrelevement.libelleProduit+" - "+this.epargneCommunService.formatCompte(e.comptePrelevement.riceContrat,!1)+" - "+e.comptePrelevement.libelleEntiteTitulaire;r.champs.push(new GestionGeneriqueOffres.Types.DossierDeVente.ChampsMDEC("Compte à débiter",i,"3"))}e.periodicite&&r.champs.push(new GestionGeneriqueOffres.Types.DossierDeVente.ChampsMDEC("Périodicité",e.periodicite.value,"3")),e.dateDebut&&(r.champs.push(new GestionGeneriqueOffres.Types.DossierDeVente.ChampsMDEC("Date de début",this.communNumberService.dateToString(e.dateDebut),"2")),r.champs.push(new GestionGeneriqueOffres.Types.DossierDeVente.ChampsMDEC("Jour de prélèvement",this.communNumberService.dateToString(e.dateDebut).substring(0,2),"3"))),e.dateFin&&r.champs.push(new GestionGeneriqueOffres.Types.DossierDeVente.ChampsMDEC("Date de fin",this.communNumberService.dateToString(e.dateFin),"2")),r.champs.push(new GestionGeneriqueOffres.Types.DossierDeVente.ChampsMDEC("Mode financier","virement Interne","2")),r.champs.push(new GestionGeneriqueOffres.Types.DossierDeVente.ChampsMDEC("Mode de versement","virement Interne","1")),n.sections.push(r)}else r.champs.push(new GestionGeneriqueOffres.Types.DossierDeVente.ChampsMDEC("","","3")),n.sections.push(r);return n},r.prototype.verifierVersementPeriodique=function(e){var r=!0;return angular.isDefined(e)&&angular.isDefined(e.comptePrelevement)&&null!==e.comptePrelevement&&angular.isDefined(e.montant.montant)||(r=!1),r},r.$inject=["$q","communNumberService","epargneCommunService"],r}();e.EnregistrerVersPerDansDVService=r,e.communModule.service("enregistrerVersPerDansDVService",r)}(r=e.commun||(e.commun={}))}(r=e.gestionEpargne||(e.gestionEpargne={}))}(myway||(myway={}));var myway;!function(e){var r;!function(r){var n;!function(r){"use strict";var n=function(){function r(e,r,n){this.operationFinanciereService=e,this.deviseService=r,this.filtreCodeProduitService=n}return r.prototype.restituerOperationFinanciere=function(r,n,t,i){var o=this,a=new e.comOpesFinancieres.Model.OperationFinanciere;return this.operationFinanciereService.creationObjetOpeFiParObjetChoixUtilisateurs(r.operationFinanciere).then(function(e){a=e,a.titrePanelPrincipal="Versement initial",a.compte=new MyWay.Model.Compte,a.compte.devise=new MyWay.Model.Devise;var r;r=void 0!==a.segmentPrvRio.S_PRVRIOUGR[0].numeroCompte&&null!==a.segmentPrvRio.S_PRVRIOUGR[0].numeroCompte&&""!==a.segmentPrvRio.S_PRVRIOUGR[0].numeroCompte?{id:0,value:a.segmentPrvRio.S_PRVRIOUGR[0].numeroCompte.substring(5,10)}:{id:0,value:n.etablissement.codeGuichetInterbancaire},angular.isUndefined(a.riceVirementInterneSaisie)&&(a.riceVirementInterneSaisie=new MyWay.Model.Rice(n.etablissement.codeEtablissement,r)),a.riceVirementInterneSaisie.codeGuichet=r,a.compte.devise.code=n.donneesProduit.produit.produitCatalogue.codeDeviseMontantOperation,a.signataire=new MyWay.Model.ParticipantInformationClient("","","","","","","","Titulaire"),a.compte.rice=new MyWay.Model.Rice,a.compte.rice.codeActiviteCompte=t,a.compte.rice.codeEtablissement=n.etablissement.codeEtablissement,a.compte.rice.codeGuichet=r,a.compte.produit=new MyWay.Model.Produit,
a.compte.produit.CODIPR=i,a.compte.produit.LNEGCO=n.donneesProduit.produit.produitCaracteristique.libelleProduitService,a.compte.listeParticipant=[],a.typeRechercheListeCompteVirementInterne="B",a.codeEtatRechercheListeCompteVirementInterne="A",a.listeTypesProduitsPourVirementInterne=o.filtreCodeProduitService.getFiltreProduit(i),a.fonctionnalite=MyWay.Model.Fonctionnalite.GENERIQUE_VAD,a.canal=n.offreSouscrite.codeCanal,a.modeDeVente=n.offreSouscrite.codeModeDeVentePossible;var s=_.findIndex(a.listeNumerosPersonnesPourVirementInterne,function(e){return e===a.client.numeroPersonne});if(angular.isUndefined(a.listeNumerosPersonnesPourVirementInterne)||0===a.listeNumerosPersonnesPourVirementInterne.length){for(var c=[],l=0,u=n.dossierVente.listePersonneLiee;l<u.length;l++){var m=u[l];c.push(m.identifiantPersonne.toString())}a.listeNumerosPersonnesPourVirementInterne=_.uniq(c)}else-1===s&&a.listeNumerosPersonnesPourVirementInterne.push(n.personnes[0].identifiantPersonne.toString());return a})},r.prototype.restituerListeNumerosPersonnesPourVirementInterne=function(e,r,n){var t=_.filter(r,function(e){return"RPP"===e.codeFamilleLiensInterPersonnes&&"106"===e.codeLienPersonne}),i=_.map(t,function(e){return e.numeroPersonne.toString()});return e.listeNumerosPersonnesPourVirementInterne=[],e.listeNumerosPersonnesPourVirementInterne.length=0,e.listeNumerosPersonnesPourVirementInterne=e.listeNumerosPersonnesPourVirementInterne.concat(n.toString()),e.listeNumerosPersonnesPourVirementInterne=e.listeNumerosPersonnesPourVirementInterne.concat(i),e.listeNumerosPersonnesPourVirementInterne},r.$inject=["operationFinanciereService","deviseService","filtreCodeProduitService"],r}();r.RestituerOperationFinanciereService=n,r.communModule.service("restituerOperationFinanciereService",n)}(n=r.commun||(r.commun={}))}(r=e.gestionEpargne||(e.gestionEpargne={}))}(myway||(myway={}));var myway;!function(e){var r;!function(e){var r;!function(e){"use strict";var r=function(){function r(e,r,n,t,i){this.serviceAgentExtended=e,this.$q=r,this.filtreCodeProduitService=n,this.epargneCommunService=t,this.saisieRiceService=i}return r.prototype.restituerParametreVersementPeriodique=function(r,n,t){(null===r||void 0===r)&&(r=new e.VesementPeriodiqueDV);var i=n.donneesProduit.detenteur,o=[];_.forEach(i.listeCompositionEntiteTitulaire,function(e){o.push(e.identifiantTiers.toString())});var a=new MyWay.Model.ParametreVersementPeriodique;return a.codeDevise=r.codeDevise,a.codePeriodiciteParDefaut=r.periodicite,a.ricePrelevement=this.epargneCommunService.stringToObjetRice(r.ricePrelevement,n.etablissement.codeEtablissement,n.etablissement.codeGuichetInterbancaire),a.parametreListeCompte=new MyWay.Model.ParametresListeComptes,a.parametreListeCompte.identifiantsPersonnes=o,a.parametreListeCompte.typeRecherche="B",a.parametreListeCompte.codeEtatRecherche="A",a.parametreListeCompte.typesProduits=this.filtreCodeProduitService.getFiltreVersementPeriodiqueVAD(),a.periodicites=[{key:"M",value:"Mensuelle",seuil:null,plafond:null},{key:"T",value:"Trimestrielle",seuil:null,plafond:null},{key:"S",value:"Semestrielle",seuil:null,plafond:null},{key:"A",value:"Annuelle",seuil:null,plafond:null}],a},r.prototype.restituerVersementPeriodique=function(e,r){var n=new MyWay.Model.VersementPeriodique;if(null===e||void 0===e)return n;if(n.montant=new MyWay.Model.MontantDevise,n.montant.montant=e.montant,n.montant.codeDevise=e.codeDevise,null!==e.dateDebut)if(moment(new Date(e.dateDebut)).isBefore(moment(Date.now()))){var t=void 0;"M"===e.periodicite?t=1:"T"===e.periodicite?t=3:"S"===e.periodicite?t=6:"A"===e.periodicite&&(t=12),n.dateDebut=moment(Date.now()).add(t,"month").toDate()}else n.dateDebut=new Date(e.dateDebut);else n.dateDebut=null;if(null!==e.dateFin&&moment(new Date(e.dateFin)).isAfter(n.dateDebut)?n.dateFin=new Date(e.dateFin):n.dateFin=null,n.libelle=e.libelle,n.periodicite=new MyWay.Model.Periodicite,n.periodicite.key=e.periodicite,n.periodicite.value=this.epargneCommunService.getValuePeriodiciteByKey(n.periodicite.key),n.ricePrelevement=this.epargneCommunService.stringToObjetRice(e.ricePrelevement,r.etablissement.codeEtablissement,r.etablissement.codeGuichetInterbancaire),angular.isDefined(n.ricePrelevement)&&(angular.isUndefined(n.ricePrelevement.cleRice)||null===n.ricePrelevement.cleRice))if(angular.isDefined(e.ibanPrelevement)&&null!==e.ibanPrelevement&&e.ibanPrelevement.length>0)n.ricePrelevement.cleRice=e.ibanPrelevement.substr(e.ibanPrelevement.length-2);else{var i=this.saisieRiceService.formatteRICE(r.etablissement.codeEtablissement,r.etablissement.codeGuichetInterbancaire,n.ricePrelevement.codeActiviteCompte+n.ricePrelevement.radical);n.ricePrelevement.cleRice=i.cleRice}n.comptePrelevement=new MyWay.Model.Contrat;var o=this.epargneCommunService.extraireDonneesPersonne(r);return n.comptePrelevement.identifiantPersonne=o.identifiantPersonne.toString(),n.comptePrelevement.riceContrat=e.ricePrelevement.substr(0,21),n.ibanPrelevement=e.ibanPrelevement,n.bicPrelevement=e.bicPrelevement,n.comptePrelevement.libelleEntiteTitulaire=e.libelleComptePrelevementEntiteTitulaire,n.comptePrelevement.libelleProduit=e.libelleComptePrelevementProduit,n},r.$inject=["serviceAgentExtended","$q","filtreCodeProduitService","epargneCommunService","saisieRiceService"],r}();e.RestituerVersementPeriodiqueService=r,e.communModule.service("restituerVersementPeriodiqueService",r)}(r=e.commun||(e.commun={}))}(r=e.gestionEpargne||(e.gestionEpargne={}))}(myway||(myway={}));var myway;!function(e){var r;!function(e){var r;!function(e){"use strict";var r=function(){function r(e,r,n,t,i,o,a){this.$scope=e,this.$rootScope=r,this.epargneCommunService=n,this.filtreCodeProduitService=t,this.communVersementPeriodiqueService=i,this.signataireVersementPeriodiqueService=o,this.serviceAgentExtended=a,this.afficherFormulaireSaisieRice=!1,this.afficherSaisieRice=!1,this.initialiserRice(),this.modifierParametresListeComptes(),this.datejour=new Date,this.genPel="General",this.parametreListeComptes=new MyWay.Model.ParametresListeComptes([this.identifiantPersonneTitulaire],"B","A",this.filtreCodeProduitService.getFiltreProduit(this.codeProduitAppelant)),this.modifierParametresListeComptes(),this.listePeriodicite=[{key:1,value:"Mensuelle"},{key:3,value:"Trimestrielle"},{key:6,value:"Semestrielle"},{key:12,value:"Annuelle"}],this.checkAdresseDomTom=!1,this.pays=[{key:"FR",value:"France - FR"},{key:"XA",value:"Acores, Madere - XA"},{key:"AF",value:"Afghanistan - AF"},{key:"AL",value:"Albanie - AL"},{key:"DZ",value:"Algerie - DZ"}]}return r.prototype.estPEL=function(){return this.codeProduitAppelant===e.CodeTypeProduitsEnum.PLAN_EPARGNE_LOGEMENT},r.prototype.validerDonnees=function(){switch(this.codeProduitAppelant){case e.CodeTypeProduitsEnum.PLAN_EPARGNE_LOGEMENT:return this.validationDonnesPEL();default:return this.validationDonnesGenerique()}},r.prototype.validationDonnesGenerique=function(){var e=!1;return this.epargneCommunService.estDefiniEtPasNullEtPositif(this.donnesGeneriques.montant)&&this.epargneCommunService.estDefiniEtPasNull(this.donnesGeneriques.compteSelectionne)&&this.epargneCommunService.estDefiniEtPasNull(this.donnesGeneriques.periodicite)&&this.epargneCommunService.estDefiniEtPasNull(this.donnesGeneriques.dateDebut)&&this.epargneCommunService.estDefiniEtPasNull(this.donnesGeneriques.dateFin)&&(e=!0),e},r.prototype.validationDonnesPEL=function(){var e=!1;return this.epargneCommunService.estDefiniEtPasNullEtPositif(this.donnesPEL.montant)&&(this.donnesPEL.versementAutomatique&&this.epargneCommunService.estDefiniEtPasNull(this.donnesPEL.periodicite)&&this.epargneCommunService.estDefiniEtPasNull(this.donnesPEL.dateDebut)&&this.epargneCommunService.estDefiniEtPasNull(this.donnesPEL.compteSelectionne)&&"I"===this.donnesPEL.typeVirement&&(e=!0),this.donnesPEL.versementAutomatique||this.epargneCommunService.estDefiniEtPasNull(this.donnesPEL.periodicite)&&(e=!0)),e},r.prototype.modifierParametresListeComptes=function(){var e=this;this.$rootScope.$on("MWSFLISTESIGNATAIRES_CHOIX_SIGNATAIRES_CHANGED",function(r,n){if(e.estInitialise()){var t=e.signataireVersementPeriodiqueService.getListeComptesAutorises(e.identifiantPersonneTitulaire,e.listeSignataires);e.parametreListeComptes=new MyWay.Model.ParametresListeComptes(t.getListeSignataires(),"B","A",t.getListeComptesAutorises()),e.estEnVAD()?e.parametreListeComptes.itemBottomText=null:e.parametreListeComptes.itemBottomText="Saisir un autre compte",console.log("LISTE ==> ",t),console.log("PARAMETRES ==> ",e.parametreListeComptes)}})},r.prototype.estEnVAD=function(){return"true"===this.enVad},r.prototype.afficherCacherSaisieRice=function(){console.log("AFFICHER LE COMPOSANT SAISIE RICE"),this.afficherSaisieRice=!this.afficherSaisieRice,this.afficherSaisieRice?this.initialiserRice():this.donnesGeneriques.compteSelectionne=null},r.prototype.afficherLienListeComptes=function(){return this.afficherSaisieRice},r.prototype.afficherLienSaisirAutreCompte=function(){return console.log("AFFICHER LE BLOC SAISIR UN AUTRE COMPTE"),!this.enVad},r.prototype.initialiserRice=function(){var e=this;this.serviceAgentExtended.getAuthentificationInfo().then(function(r){var n=angular.isDefined(r.guichetAgent)&&null!==r.guichetAgent&&angular.isDefined(r.guichetAgent.codeGuichetInterbancaire)&&null!==r.guichetAgent.codeGuichetInterbancaire?r.guichetAgent.codeGuichetInterbancaire:"00001";e.riceSaisi=new MyWay.Model.Rice(r.codeEtablissement,n)})},r.prototype.estInitialise=function(){return angular.isDefined(this.riceSaisi)&&null!==this.riceSaisi&&angular.isDefined(this.donnesGeneriques)&&null!==this.donnesGeneriques},r.$inject=["$scope","$rootScope","epargneCommunService","filtreCodeProduitService","versementPeriodiqueService","signataireVersementPeriodiqueService","serviceAgentExtended"],r}();e.CommunVersementPeriodiqueControleur=r,e.communModule.controller("communVersementPeriodiqueControleur",r)}(r=e.commun||(e.commun={}))}(r=e.gestionEpargne||(e.gestionEpargne={}))}(myway||(myway={}));var myway;!function(e){var r;!function(e){var r;!function(e){"use strict";function r(){return{templateUrl:"typescript/versement-periodique/vues/vue-versement-periodique.html",restrict:"E",scope:{identifiantPersonneTitulaire:"@",codeProduitAppelant:"@",listeSignataires:"=",enVad:"@",versementPeriodique:"=donnesGeneriques",versementPeriodiquePel:"=donnesPEL"},controller:"communVersementPeriodiqueControleur",controllerAs:"comVerPerCtrl",bindToController:!0}}e.mwCommunVersementPeriodique=r,e.communModule.directive("mwCommunVersementPeriodique",r)}(r=e.commun||(e.commun={}))}(r=e.gestionEpargne||(e.gestionEpargne={}))}(myway||(myway={}));var myway;!function(e){var r;!function(e){var r;!function(e){"use strict";var r=function(){function e(e){this.identifiantTitulaire=e,this.identifiantPersonne=e,this.identifiantsSignataires=[],this.comptesAutorisesTitulaire=[],this.comptesAutorisesSignataires=[]}return e.prototype.ajouterSignataire=function(e){angular.isDefined(e)&&null!==e&&-1===this.identifiantsSignataires.indexOf(e.toString())&&this.identifiantsSignataires.push(e.toString())},e.prototype.ajouterCompteTitulaire=function(e){this.comptesAutorisesTitulaire=e},e.prototype.ajouterComptesSignataires=function(e){angular.isDefined(e)&&null!==e&&e.length>0&&this.comptesAutorisesSignataires.length===this.identifiantsSignataires.length-1&&this.comptesAutorisesSignataires.push(e)},e.prototype.getListeSignataires=function(){var e=[];return e.push(this.identifiantPersonne),_.forEach(this.identifiantsSignataires,function(r){e.push(r)}),e},e.prototype.getListeComptesAutorises=function(){var e=[];return e.push(this.comptesAutorisesTitulaire),_.forEach(this.comptesAutorisesSignataires,function(r){e.push(r)}),e},e}();e.ListeSignataires=r}(r=e.commun||(e.commun={}))}(r=e.gestionEpargne||(e.gestionEpargne={}))}(myway||(myway={}));var myway;!function(e){var r;!function(e){var r;!function(e){"use strict";var r=function(){function e(){}return e}();e.VersementPeriodiqueGenerique=r}(r=e.commun||(e.commun={}))}(r=e.gestionEpargne||(e.gestionEpargne={}))}(myway||(myway={}));var myway;!function(e){var r;!function(e){var r;!function(e){"use strict";var r=function(e){function r(){e.apply(this,arguments)}return __extends(r,e),r}(e.VersementPeriodiqueGenerique);e.VersementPeriodiquePEL=r}(r=e.commun||(e.commun={}))}(r=e.gestionEpargne||(e.gestionEpargne={}))}(myway||(myway={}));var myway;!function(e){var r;!function(r){var n;!function(r){"use strict";var n=function(){function r(e,r,n,t,i,o){this.$parse=e,this.serviceAgentExtended=r,this.$q=n,this.filtreCodeProduitService=t,this.communVersementPeriodiqueService=i,this.epargneCommunService=o}return r.prototype.getListeComptesAutorises=function(r,n){var t=new e.gestionEpargne.commun.ListeSignataires(r);t.ajouterCompteTitulaire(this.filtreCodeProduitService.getFiltreProduit(this.communVersementPeriodiqueService.produitAppelant));for(var i=0;i<n.length;i++)n[i].numeroPersonne!==parseInt(r)&&(t.ajouterSignataire(n[i].numeroPersonne),t.ajouterComptesSignataires(this.filtreCodeProduitService.getFiltreProduit(this.communVersementPeriodiqueService.produitAppelant)));return t},r.$inject=["$parse","serviceAgentExtended","$q","filtreCodeProduitService","communVersementPeriodiqueService","epargneCommunService"],r}();r.SignataireVersementPeriodiqueService=n,r.communModule.service("signataireVersementPeriodiqueService",n)}(n=r.commun||(r.commun={}))}(r=e.gestionEpargne||(e.gestionEpargne={}))}(myway||(myway={}));var myway;!function(e){var r;!function(r){var n;!function(r){"use strict";var n=function(){function r(e,r,n,t){this.$parse=e,this.serviceAgentExtended=r,this.$q=n,this.filtreCodeProduitService=t}return Object.defineProperty(r.prototype,"produitAppelant",{get:function(){return this.codeProduitAppelant},set:function(r){r in e.gestionEpargne.commun.CodeTypeProduitsEnum?this.codeProduitAppelant=r:this.codeProduitAppelant=""},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"listeSignataires",{get:function(){return this.tableauListeSignataires},set:function(e){this.tableauListeSignataires=e},enumerable:!0,configurable:!0}),r.$inject=["$parse","serviceAgentExtended","$q","filtreCodeProduitService"],r}();r.VersementPeriodiqueService=n,r.communModule.service("communVersementPeriodiqueService",n)}(n=r.commun||(r.commun={}))}(r=e.gestionEpargne||(e.gestionEpargne={}))}(myway||(myway={})),angular.module("myway.gestionEpargne.commun").run(["$templateCache",function(e){e.put("typescript/recapitulatif-ggo/recapitulatif-opefi-vpc.html",'\r\n<form class="form-horizontal">\r\n    <div class="form-group">\r\n        <div class="col-sm-5 col-md-5 col-lg-5 col-sm-offset-1 col-md-offset-1 col-lg-offset-1">\r\n            <label>Versement initial</label>\r\n        </div>\r\n        <!-- VIREMENT INTERNE-->\r\n        <div ng-if="recapCtrl.virementInterneClient" class="col-sm-12 col-md-12 col-lg-12 form-group">\r\n            <div class="form-group">\r\n                <!-- Montant -->\r\n                <label class="col-sm-4 col-md-4 col-lg-4 control-label" for="montant-id-virement-interne">\r\n                    Montant\r\n                </label>\r\n                <div class="center-verticaly-recap col-sm-8 col-md-8 col-lg-8">\r\n                    <label ng-bind="::recapCtrl.montantOperation" id="montant-id-virement-interne"></label>\r\n                    <label ng-bind="::recapCtrl.operationFinanciere.compte.devise.symboleDevise" class="center-verticaly"></label>\r\n                </div>\r\n            </div>\r\n            <div class="form-group">\r\n                <!-- Mode financier -->\r\n                <label class="col-sm-4 col-md-4 col-lg-4 control-label" for="mode-financier-id-virement-interne">\r\n                    Mode financier\r\n                </label>\r\n                <div class="center-verticaly-recap col-sm-8 col-md-8 col-lg-8">\r\n                    <label ng-bind="::recapCtrl.modeFinancier" id="mode-financier-id-virement-interne"></label>\r\n                </div>\r\n            </div>\r\n            <div class="form-group">\r\n                <!-- Compte à débiter -->\r\n                <label class="col-sm-4 col-md-4 col-lg-4 control-label" for="detenteur-compte-a-debiter-id">\r\n                    Compte &agrave; d&eacute;biter\r\n                </label>\r\n                <div class="col-sm-8 col-md-8 col-lg-8" ng-show="recapCtrl.detenteurCompteDebite">\r\n                    <label ng-bind="recapCtrl.detenteurCompteDebite" id="detenteur-compte-a-debiter-id"></label>\r\n                </div>\r\n                <div class="col-sm-8 col-md-8 col-lg-8" ng-hide="recapCtrl.detenteurCompteDebite">\r\n                    <label ng-bind="recapCtrl.compteDebiteVPC" id="compte-a-debiter-id-1"></label>\r\n                </div>\r\n                <div class="col-sm-offset-4 col-md-offset-4 col-lg-offset-4 col-sm-8 col-md-8 col-lg-8" ng-show="recapCtrl.detenteurCompteDebite">\r\n                    <label ng-bind="recapCtrl.compteDebite" id="compte-a-debiter-id-2"></label>\r\n                </div>\r\n            </div>\r\n        </div>\r\n\r\n\r\n        <!-- CHEQUE -->\r\n        <div ng-if="recapCtrl.chequeRecu" class="col-sm-12 col-md-12 col-lg-12 form-group">\r\n            <div class="form-group">\r\n                <!-- Montant -->\r\n                <label class="col-sm-4 col-md-4 col-lg-4 control-label" for="montant-id-cheque">\r\n                    Montant\r\n                </label>\r\n                <div class="center-verticaly-recap col-sm-8 col-md-8 col-lg-8">\r\n                    <label ng-bind="::recapCtrl.montantOperation" id="montant-id-cheque"></label>\r\n                    <label class="center-verticaly">&nbsp;&euro;</label>\r\n                </div>\r\n            </div>\r\n            <div class="form-group">\r\n                <!-- Mode financier -->\r\n                <label class="col-sm-4 col-md-4 col-lg-4 control-label" for="mode-financier-id-cheque">\r\n                    Mode financier\r\n                </label>\r\n                <div class="center-verticaly-recap col-sm-8 col-md-8 col-lg-8">\r\n                    <label ng-bind="::recapCtrl.modeFinancier" id="mode-financier-id-cheque"></label>\r\n                </div>\r\n            </div>\r\n            <div class="form-group">\r\n                <!-- Reserve  -->\r\n                <label class="col-sm-4 col-md-4 col-lg-4 control-label" for="reserve-id">\r\n                    R&eacute;serve d\'encaissement\r\n                </label>\r\n                <div class="center-verticaly-recap col-sm-8 col-md-8 col-lg-8">\r\n                    <label ng-bind="::recapCtrl.reserveCheque" id="reserve-id"></label>\r\n                </div>\r\n            </div>\r\n            <div ng-if="recapCtrl.affichedelaiEncaissement" class="form-group">\r\n                <!-- Oui délai d\'encaissement  -->\r\n                <label class="col-sm-4 col-md-4 col-lg-4 control control-label" for="delai-encaissement-id">\r\n                    D&eacute;lai d\'encaissement\r\n                </label>\r\n                <div class="center-verticaly-recap col-sm-8 col-md-8 col-lg-8">\r\n                    <label ng-bind="::recapCtrl.delaiEncaissementCheque" id="delai-encaissement-id"></label>\r\n                </div>\r\n            </div>\r\n        </div>\r\n\r\n\r\n        <!-- VERSEMENT ESPECE DIVERS -->\r\n        <div ng-if="recapCtrl.versementEspeceDivers" class="col-sm-12 col-md-12 col-lg-12 form-group">\r\n            <div class="form-group">\r\n                <!-- Montant -->\r\n                <label class="col-sm-4 col-md-4 col-lg-4 control-label" for="montant-id-espece-divers">\r\n                    Montant\r\n                </label>\r\n                <div class="center-verticaly-recap col-sm-8 col-md-8 col-lg-8">\r\n                    <label ng-bind="::recapCtrl.montantOperation" id="montant-id-espece-divers"></label>\r\n                    <label class="center-verticaly">&nbsp;&euro;</label>\r\n                </div>\r\n            </div>\r\n            <div class="form-group">\r\n                <!-- Mode financier -->\r\n                <label class="col-sm-4 col-md-4 col-lg-4 control-label" for="mode-financier-id-espece-divers">\r\n                    Mode financier\r\n                </label>\r\n                <div class="center-verticaly-recap col-sm-8 col-md-8 col-lg-8">\r\n                    <label ng-bind="::recapCtrl.modeFinancier" id="mode-financier-id-espece-divers"></label>\r\n                </div>\r\n            </div>\r\n            <div class="form-group">\r\n                <!-- Réf Sac  -->\r\n                <label class="col-sm-4 col-md-4 col-lg-4 control-label" for="ref-sac-id">\r\n                    R&eacute;f Sac\r\n                </label>\r\n                <div class="center-verticaly-recap col-sm-8 col-md-8 col-lg-8">\r\n                    <label ng-bind="::recapCtrl.refEnveloppeSac" id="ref-sac-id"></label>\r\n                </div>\r\n            </div>\r\n             <!-- Billeterie -->\r\n            <div class="form-group" ng-hide="recapCtrl.billeterieGrosseCoupure === \'\' && recapCtrl.billeteriePetiteCoupure === \'\'">\r\n                <label class="col-sm-4 col-md-4 col-lg-4 control-label" for="billeterie-id">\r\n                    Billeterie\r\n                </label>\r\n                <div class="center-verticaly-recap col-sm-8 col-md-8 col-lg-8">\r\n                    <label ng-show="recapCtrl.billeterieGrosseCoupure === \'\'" ng-bind="::recapCtrl.billeteriePetiteCoupure" for="billeterie-id"></label>\r\n                    <label ng-hide="recapCtrl.billeterieGrosseCoupure === \'\'" ng-bind="::recapCtrl.billeterieGrosseCoupure" for="billeterie-id"></label>\r\n                </div>\r\n            </div>\r\n            <div class="form-group" ng-hide="recapCtrl.billeterieGrosseCoupure ===\'\'">\r\n                <div class="center-verticaly-recap col-sm-offset-4 col-md-offset-4 col-lg-offset-4 col-sm-8 col-md-8 col-lg-8">\r\n                    <label ng-bind="::recapCtrl.billeteriePetiteCoupure" for="billeterie-id"></label>\r\n                </div>\r\n            </div>\r\n            <div class="form-group" ng-hide="recapCtrl.monnaieMessageRecap === \'\'">\r\n                <!-- Monnaie -->\r\n                <label class="col-sm-4 col-md-4 col-lg-4 control-label" for="monnaie-id">\r\n                    Monnaie\r\n                </label>\r\n                <div class="center-verticaly-recap col-sm-8 col-md-8 col-lg-8">\r\n                    <label ng-bind="::recapCtrl.monnaieMessageRecap" for="monnaie-id"></label>\r\n                </div>\r\n            </div>\r\n        </div>\r\n\r\n\r\n        <!-- DIVERS -->\r\n        <div ng-if="recapCtrl.divers" class="col-sm-12 col-md-12 col-lg-12 form-group">\r\n            <div class="form-group">\r\n                <!-- Montant -->\r\n                <label class="col-sm-4 col-md-4 col-lg-4 control-label" for="montant-id-divers">\r\n                    Montant\r\n                </label>\r\n                <div class="center-verticaly-recap col-sm-8 col-md-8 col-lg-8">\r\n                    <label ng-bind="::recapCtrl.montantOperation" id="montant-id-divers"></label>\r\n                    <label class="center-verticaly">&nbsp;&euro;</label>\r\n                </div>\r\n            </div>\r\n            <div class="form-group">\r\n                <!-- Mode financier -->\r\n                <label class="col-sm-4 col-md-4 col-lg-4 control-label" for="mode-financier-id-divers">\r\n                    Mode financier\r\n                </label>\r\n                <div class="center-verticaly-recap col-sm-8 col-md-8 col-lg-8">\r\n                    <label ng-bind="::recapCtrl.modeFinancier" id="mode-financier-id-divers"></label>\r\n                </div>\r\n            </div>\r\n        </div>\r\n\r\n\r\n        <!-- OPERATIONS DIVERSES -->\r\n        <div ng-if="recapCtrl.virementOperationDiverse" class="col-sm-12 col-md-12 col-lg-12 form-group">\r\n            <div class="form-group">\r\n                <!-- Montant -->\r\n                <label class="col-sm-4 col-md-4 col-lg-4 control-label" for="montant-id-operations-diverses">\r\n                    Montant\r\n                </label>\r\n                <div class="center-verticaly-recap col-sm-8 col-md-8 col-lg-8">\r\n                    <label ng-bind="::recapCtrl.montantOperation" id="montant-id-operations-diverses"></label>\r\n                    <label class="center-verticaly">&nbsp;&euro;</label>\r\n                </div>\r\n            </div>\r\n            <div class="form-group">\r\n                <!-- Mode financier -->\r\n                <label class="col-sm-4 col-md-4 col-lg-4 control-label" for="mode-financier-id-operations-diverses">\r\n                    Mode financier\r\n                </label>\r\n                <div class="center-verticaly-recap col-sm-8 col-md-8 col-lg-8">\r\n                    <label ng-bind="::recapCtrl.modeFinancier" id="mode-financier-id-operations-diverses"></label>\r\n                </div>\r\n            </div>\r\n            <div class="form-group">\r\n                <!-- OD -->\r\n                <label class="col-sm-4 col-md-4 col-lg-4 control-label" for="=od-id">\r\n                    OD\r\n                </label>\r\n                <div class="center-verticaly-recap col-sm-8 col-md-8 col-lg-8">\r\n                    <label ng-bind="::recapCtrl.oD" id="od-id"></label>\r\n                </div>\r\n            </div>\r\n        </div>\r\n\r\n\r\n        <!-- ESPECES -->\r\n        <div ng-if="recapCtrl.especes" class="col-sm-12 col-md-12 col-lg-12 form-group">\r\n            <div class="form-group">\r\n                <!-- Montant -->\r\n                <label class="col-sm-4 col-md-4 col-lg-4 control-label" for="montant-id-especes">\r\n                    Montant\r\n                </label>\r\n                <div class="center-verticaly-recap col-sm-8 col-md-8 col-lg-8">\r\n                    <label ng-bind="::recapCtrl.montantOperation" id="montant-id-especes"></label>\r\n                    <label class="center-verticaly">&nbsp;&euro;</label>\r\n                </div>\r\n            </div>\r\n            <div class="form-group">\r\n                <!-- Mode financier -->\r\n                <label class="col-sm-4 col-md-4 col-lg-4 control-label" for="mode-financier-id-especes">\r\n                    Mode financier\r\n                </label>\r\n                <div class="center-verticaly-recap col-sm-8 col-md-8 col-lg-8">\r\n                    <label ng-bind="::recapCtrl.modeFinancier" id="mode-financier-id-especes"></label>\r\n                </div>\r\n            </div>\r\n            <!-- Billeterie -->\r\n            <div class="form-group" ng-hide="recapCtrl.billeterieGrosseCoupure === \'\' && recapCtrl.billeteriePetiteCoupure === \'\'">\r\n                <label class="col-sm-4 col-md-4 col-lg-4 control-label" for="billeterie-id">\r\n                    Billeterie\r\n                </label>\r\n                <div class="center-verticaly-recap col-sm-8 col-md-8 col-lg-8">\r\n                    <label ng-show="recapCtrl.billeterieGrosseCoupure === \'\'" ng-bind="::recapCtrl.billeteriePetiteCoupure" for="billeterie-id"></label>\r\n                    <label ng-hide="recapCtrl.billeterieGrosseCoupure === \'\'" ng-bind="::recapCtrl.billeterieGrosseCoupure" for="billeterie-id"></label>\r\n                </div>\r\n            </div>\r\n            <div class="form-group" ng-hide="recapCtrl.billeterieGrosseCoupure ===\'\'">\r\n                <div class="center-verticaly-recap col-sm-offset-4 col-md-offset-4 col-lg-offset-4 col-sm-8 col-md-8 col-lg-8">\r\n                    <label ng-bind="::recapCtrl.billeteriePetiteCoupure" for="billeterie-id"></label>\r\n                </div>\r\n            </div>\r\n            <div class="form-group" ng-hide="recapCtrl.monnaieMessageRecap === \'\'">\r\n                <!-- Monnaie -->\r\n                <label class="col-sm-4 col-md-4 col-lg-4 control-label" for="monnaie-id">\r\n                    Monnaie\r\n                </label>\r\n                <div class="center-verticaly-recap col-sm-8 col-md-8 col-lg-8">\r\n                    <label ng-bind="::recapCtrl.monnaieMessageRecap" for="monnaie-id"></label>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</form>'),e.put("typescript/recapitulatif-ggo/recapitulatif-opefi.html",'\r\n<form class="form-horizontal">\r\n    <div class="form-group">\r\n        <div class="col-sm-5 col-md-5 col-lg-5 col-sm-offset-1 col-md-offset-1 col-lg-offset-1">\r\n            <label>Versement initial</label>\r\n        </div>\r\n        <!-- VIREMENT INTERNE-->\r\n        <div ng-if="recapCtrl.virementInterneClient" class="col-sm-12 col-md-12 col-lg-12 form-group">\r\n            <div class="form-group">\r\n                <!-- Montant -->\r\n                <label class="col-sm-4 col-md-4 col-lg-4 control-label" for="montant-id-virement-interne">\r\n                    Montant\r\n                </label>\r\n                <div class="center-verticaly-recap col-sm-8 col-md-8 col-lg-8">\r\n                    <label ng-bind="::recapCtrl.montantOperation" id="montant-id-virement-interne"></label>\r\n                    <label ng-bind="::recapCtrl.operationFinanciere.compte.devise.symboleDevise" class="center-verticaly" ng-show="recapCtrl.operationFinanciere.compte.devise.symboleDevise"></label>\r\n                    <label ng-bind="::recapCtrl.operationFinanciere.compte.devise.code" class="center-verticaly" ng-hide="recapCtrl.operationFinanciere.compte.devise.symboleDevise"></label>\r\n                </div>\r\n            </div>\r\n            <div class="form-group">\r\n                <!-- Mode financier -->\r\n                <label class="col-sm-4 col-md-4 col-lg-4 control-label" for="mode-financier-id-virement-interne">\r\n                    Mode financier\r\n                </label>\r\n                <div class="center-verticaly-recap col-sm-8 col-md-8 col-lg-8">\r\n                    <label ng-bind="::recapCtrl.modeFinancier" id="mode-financier-id-virement-interne"></label>\r\n                </div>\r\n            </div>\r\n            <div class="form-group">\r\n                <!-- Compte à débiter -->\r\n                <label class="col-sm-4 col-md-4 col-lg-4 control-label" for="detenteur-compte-a-debiter-id">\r\n                    Compte &agrave; d&eacute;biter\r\n                </label>\r\n                <div class="col-sm-8 col-md-8 col-lg-8" ng-show="recapCtrl.detenteurCompteDebite">\r\n                    <label ng-bind="recapCtrl.detenteurCompteDebite" id="detenteur-compte-a-debiter-id"></label>\r\n                </div>\r\n                <div class="col-sm-8 col-md-8 col-lg-8" ng-hide="recapCtrl.detenteurCompteDebite">\r\n                    <label ng-bind="recapCtrl.compteDebiteVPC" id="compte-a-debiter-id-1"></label>\r\n                </div>\r\n                <div class="col-sm-offset-4 col-md-offset-4 col-lg-offset-4 col-sm-8 col-md-8 col-lg-8" ng-show="recapCtrl.detenteurCompteDebite">\r\n                    <label ng-bind="recapCtrl.compteDebite" id="compte-a-debiter-id-2"></label>\r\n                </div>\r\n            </div>\r\n        </div>\r\n\r\n\r\n        <!-- CHEQUE -->\r\n        <div ng-if="recapCtrl.chequeRecu" class="col-sm-12 col-md-12 col-lg-12 form-group">\r\n            <div class="form-group">\r\n                <!-- Montant -->\r\n                <label class="col-sm-4 col-md-4 col-lg-4 control-label" for="montant-id-cheque">\r\n                    Montant\r\n                </label>\r\n                <div class="center-verticaly-recap col-sm-8 col-md-8 col-lg-8">\r\n                    <label ng-bind="::recapCtrl.montantOperation" id="montant-id-cheque"></label>\r\n                    <label class="center-verticaly">&nbsp;&euro;</label>\r\n                </div>\r\n            </div>\r\n            <div class="form-group">\r\n                <!-- Mode financier -->\r\n                <label class="col-sm-4 col-md-4 col-lg-4 control-label" for="mode-financier-id-cheque">\r\n                    Mode financier\r\n                </label>\r\n                <div class="center-verticaly-recap col-sm-8 col-md-8 col-lg-8">\r\n                    <label ng-bind="::recapCtrl.modeFinancier" id="mode-financier-id-cheque"></label>\r\n                </div>\r\n            </div>\r\n            <div class="form-group">\r\n                <!-- Reserve  -->\r\n                <label class="col-sm-4 col-md-4 col-lg-4 control-label" for="reserve-id">\r\n                    R&eacute;serve d\'encaissement\r\n                </label>\r\n                <div class="center-verticaly-recap col-sm-8 col-md-8 col-lg-8">\r\n                    <label ng-bind="::recapCtrl.reserveCheque" id="reserve-id"></label>\r\n                </div>\r\n            </div>\r\n            <div ng-if="recapCtrl.affichedelaiEncaissement" class="form-group">\r\n                <!-- Oui délai d\'encaissement  -->\r\n                <label class="col-sm-4 col-md-4 col-lg-4 control control-label" for="delai-encaissement-id">\r\n                    D&eacute;lai d\'encaissement\r\n                </label>\r\n                <div class="center-verticaly-recap col-sm-8 col-md-8 col-lg-8">\r\n                    <label ng-bind="::recapCtrl.delaiEncaissementCheque" id="delai-encaissement-id"></label>\r\n                </div>\r\n            </div>\r\n        </div>\r\n\r\n\r\n        <!-- VERSEMENT ESPECE DIVERS -->\r\n        <div ng-if="recapCtrl.versementEspeceDivers" class="col-sm-12 col-md-12 col-lg-12 form-group">\r\n            <div class="form-group">\r\n                <!-- Montant -->\r\n                <label class="col-sm-4 col-md-4 col-lg-4 control-label" for="montant-id-espece-divers">\r\n                    Montant\r\n                </label>\r\n                <div class="center-verticaly-recap col-sm-8 col-md-8 col-lg-8">\r\n                    <label ng-bind="::recapCtrl.montantOperation" id="montant-id-espece-divers"></label>\r\n                    <label class="center-verticaly">&nbsp;&euro;</label>\r\n                </div>\r\n            </div>\r\n            <div class="form-group">\r\n                <!-- Mode financier -->\r\n                <label class="col-sm-4 col-md-4 col-lg-4 control-label" for="mode-financier-id-espece-divers">\r\n                    Mode financier\r\n                </label>\r\n                <div class="center-verticaly-recap col-sm-8 col-md-8 col-lg-8">\r\n                    <label ng-bind="::recapCtrl.modeFinancier" id="mode-financier-id-espece-divers"></label>\r\n                </div>\r\n            </div>\r\n            <div class="form-group">\r\n                <!-- Réf Sac  -->\r\n                <label class="col-sm-4 col-md-4 col-lg-4 control-label" for="ref-sac-id">\r\n                    R&eacute;f Sac\r\n                </label>\r\n                <div class="center-verticaly-recap col-sm-8 col-md-8 col-lg-8">\r\n                    <label ng-bind="::recapCtrl.refEnveloppeSac" id="ref-sac-id"></label>\r\n                </div>\r\n            </div>\r\n            <!-- Billeterie -->\r\n            <div class="form-group" ng-hide="recapCtrl.billeterieGrosseCoupure === \'\' && recapCtrl.billeteriePetiteCoupure === \'\'">\r\n                <label class="col-sm-4 col-md-4 col-lg-4 control-label" for="billeterie-id">\r\n                    Billeterie\r\n                </label>\r\n                <div class="center-verticaly-recap col-sm-8 col-md-8 col-lg-8">\r\n                    <label ng-show="recapCtrl.billeterieGrosseCoupure === \'\'" ng-bind="::recapCtrl.billeteriePetiteCoupure" for="billeterie-id"></label>\r\n                    <label ng-hide="recapCtrl.billeterieGrosseCoupure === \'\'" ng-bind="::recapCtrl.billeterieGrosseCoupure" for="billeterie-id"></label>\r\n                </div>\r\n            </div>\r\n            <div class="form-group" ng-hide="recapCtrl.billeterieGrosseCoupure ===\'\'">\r\n                <div class="center-verticaly-recap col-sm-offset-4 col-md-offset-4 col-lg-offset-4 col-sm-8 col-md-8 col-lg-8">\r\n                    <label ng-bind="::recapCtrl.billeteriePetiteCoupure" for="billeterie-id"></label>\r\n                </div>\r\n            </div>\r\n            <div class="form-group" ng-hide="recapCtrl.monnaieMessageRecap === \'\'">\r\n                <!-- Monnaie -->\r\n                <label class="col-sm-4 col-md-4 col-lg-4 control-label" for="monnaie-id">\r\n                    Monnaie\r\n                </label>\r\n                <div class="center-verticaly-recap col-sm-8 col-md-8 col-lg-8">\r\n                    <label ng-bind="::recapCtrl.monnaieMessageRecap" for="monnaie-id"></label>\r\n                </div>\r\n            </div>\r\n        </div>\r\n\r\n\r\n        <!-- DIVERS -->\r\n        <div ng-if="recapCtrl.divers" class="col-sm-12 col-md-12 col-lg-12 form-group">\r\n            <div class="form-group">\r\n                <!-- Montant -->\r\n                <label class="col-sm-4 col-md-4 col-lg-4 control-label" for="montant-id-divers">\r\n                    Montant\r\n                </label>\r\n                <div class="center-verticaly-recap col-sm-8 col-md-8 col-lg-8">\r\n                    <label ng-bind="::recapCtrl.montantOperation" id="montant-id-divers"></label>\r\n                    <label class="center-verticaly">&nbsp;&euro;</label>\r\n                </div>\r\n            </div>\r\n            <div class="form-group">\r\n                <!-- Mode financier -->\r\n                <label class="col-sm-4 col-md-4 col-lg-4 control-label" for="mode-financier-id-divers">\r\n                    Mode financier\r\n                </label>\r\n                <div class="center-verticaly-recap col-sm-8 col-md-8 col-lg-8">\r\n                    <label ng-bind="::recapCtrl.modeFinancier" id="mode-financier-id-divers"></label>\r\n                </div>\r\n            </div>\r\n        </div>\r\n\r\n\r\n        <!-- OPERATIONS DIVERSES -->\r\n        <div ng-if="recapCtrl.virementOperationDiverse" class="col-sm-12 col-md-12 col-lg-12 form-group">\r\n            <div class="form-group">\r\n                <!-- Montant -->\r\n                <label class="col-sm-4 col-md-4 col-lg-4 control-label" for="montant-id-operations-diverses">\r\n                    Montant\r\n                </label>\r\n                <div class="center-verticaly-recap col-sm-8 col-md-8 col-lg-8">\r\n                    <label ng-bind="::recapCtrl.montantOperation" id="montant-id-operations-diverses"></label>\r\n                    <label class="center-verticaly">&nbsp;&euro;</label>\r\n                </div>\r\n            </div>\r\n            <div class="form-group">\r\n                <!-- Mode financier -->\r\n                <label class="col-sm-4 col-md-4 col-lg-4 control-label" for="mode-financier-id-operations-diverses">\r\n                    Mode financier\r\n                </label>\r\n                <div class="center-verticaly-recap col-sm-8 col-md-8 col-lg-8">\r\n                    <label ng-bind="::recapCtrl.modeFinancier" id="mode-financier-id-operations-diverses"></label>\r\n                </div>\r\n            </div>\r\n            <div class="form-group">\r\n                <!-- OD -->\r\n                <label class="col-sm-4 col-md-4 col-lg-4 control-label" for="=od-id">\r\n                    OD\r\n                </label>\r\n                <div class="center-verticaly-recap col-sm-8 col-md-8 col-lg-8">\r\n                    <label ng-bind="::recapCtrl.oD" id="od-id"></label>\r\n                </div>\r\n            </div>\r\n        </div>\r\n\r\n\r\n        <!-- ESPECES -->\r\n        <div ng-if="recapCtrl.especes" class="col-sm-12 col-md-12 col-lg-12 form-group">\r\n            <div class="form-group">\r\n                <!-- Montant -->\r\n                <label class="col-sm-4 col-md-4 col-lg-4 control-label" for="montant-id-especes">\r\n                    Montant\r\n                </label>\r\n                <div class="center-verticaly-recap col-sm-8 col-md-8 col-lg-8">\r\n                    <label ng-bind="::recapCtrl.montantOperation" id="montant-id-especes"></label>\r\n                    <label class="center-verticaly">&nbsp;&euro;</label>\r\n                </div>\r\n            </div>\r\n            <div class="form-group">\r\n                <!-- Mode financier -->\r\n                <label class="col-sm-4 col-md-4 col-lg-4 control-label" for="mode-financier-id-especes">\r\n                    Mode financier\r\n                </label>\r\n                <div class="center-verticaly-recap col-sm-8 col-md-8 col-lg-8">\r\n                    <label ng-bind="::recapCtrl.modeFinancier" id="mode-financier-id-especes"></label>\r\n                </div>\r\n            </div>\r\n            <!-- Billeterie -->\r\n            <div class="form-group" ng-hide="recapCtrl.billeterieGrosseCoupure === \'\' && recapCtrl.billeteriePetiteCoupure === \'\'">\r\n                <label class="col-sm-4 col-md-4 col-lg-4 control-label" for="billeterie-id">\r\n                    Billeterie\r\n                </label>\r\n                <div class="center-verticaly-recap col-sm-8 col-md-8 col-lg-8">\r\n                    <label ng-show="recapCtrl.billeterieGrosseCoupure === \'\'" ng-bind="::recapCtrl.billeteriePetiteCoupure" for="billeterie-id"></label>\r\n                    <label ng-hide="recapCtrl.billeterieGrosseCoupure === \'\'" ng-bind="::recapCtrl.billeterieGrosseCoupure" for="billeterie-id"></label>\r\n                </div>\r\n            </div>\r\n            <div class="form-group" ng-hide="recapCtrl.billeterieGrosseCoupure ===\'\'">\r\n                <div class="center-verticaly-recap col-sm-offset-4 col-md-offset-4 col-lg-offset-4 col-sm-8 col-md-8 col-lg-8">\r\n                    <label ng-bind="::recapCtrl.billeteriePetiteCoupure" for="billeterie-id"></label>\r\n                </div>\r\n            </div>\r\n            <div class="form-group" ng-hide="recapCtrl.monnaieMessageRecap === \'\'">\r\n                <!-- Monnaie -->\r\n                <label class="col-sm-4 col-md-4 col-lg-4 control-label" for="monnaie-id">\r\n                    Monnaie\r\n                </label>\r\n                <div class="center-verticaly-recap col-sm-8 col-md-8 col-lg-8">\r\n                    <label ng-bind="::recapCtrl.monnaieMessageRecap" for="monnaie-id"></label>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</form>'),
e.put("typescript/versement-regulier/vue-versement-regulier.html",'\r\n<form class="form-horizontal">\r\n    <div class="form-group">\r\n        <div class="col-sm-5 col-md-5 col-lg-5 col-sm-offset-1 col-md-offset-1 col-lg-offset-1">\r\n            <label>Versement Périodique</label>\r\n        </div>\r\n        <div class="col-sm-12 col-md-12 col-lg-12 form-group">\r\n            <div class="form-group">\r\n                <!-- Compte à débiter -->\r\n                <label class="col-sm-4 col-md-4 col-lg-4 control-label" for="compte-a-debiter-id">\r\n                    Compte à débiter\r\n                </label>\r\n                <div class="col-sm-8 col-md-8 col-lg-8">\r\n                    <label ng-bind="::recapVerRegCtrl.libelleCompteADebiter" id="libelle-compte-a-debiter-id"></label>\r\n                </div>\r\n                <div ng-if="recapVerRegCtrl.affichageDetailcompte" class="col-sm-offset-4 col-md-offset-4 col-lg-offset-4 col-sm-8 col-md-8 col-lg-8">\r\n                    <label ng-bind="::recapVerRegCtrl.numeroCompteADebiter" id="numero-compte-a-debiter-id"></label>\r\n                </div>\r\n            </div>\r\n            <div class="form-group">\r\n                <!-- Périodicité -->\r\n                <label class="col-sm-4 col-md-4 col-lg-4 control-label" for="periodicite-id">\r\n                    Périodicité\r\n                </label>\r\n                <div class="center-verticaly-recap col-sm-8 col-md-8 col-lg-8">\r\n                    <label ng-bind="::recapVerRegCtrl.versementPeriodique.periodicite.value" id="periodicite-id-label"></label>\r\n                </div>\r\n            </div>\r\n            <div class="form-group">\r\n                <!-- Montant -->\r\n                <label class="col-sm-4 col-md-4 col-lg-4 control-label" for="montant-id">\r\n                    Montant\r\n                </label>\r\n                <div class="center-verticaly-recap col-sm-8 col-md-8 col-lg-8">\r\n                    <label ng-bind="::recapVerRegCtrl.montant" id="montant-id-label"></label>\r\n                    <label ng-bind="::recapVerRegCtrl.versementPeriodique.montant.devise.symboleDevise" id="devise-id-label"></label>\r\n                </div>\r\n            </div>\r\n            <div class="form-group">\r\n                <!-- Libellé -->\r\n                <label class="col-sm-4 col-md-4 col-lg-4 control-label" for="libelle-id">\r\n                    Libellé\r\n                </label>\r\n                <div class="center-verticaly-recap col-sm-8 col-md-8 col-lg-8">\r\n                    <label ng-bind="::recapVerRegCtrl.versementPeriodique.libelle" id="libelle-id-label"></label>\r\n                </div>\r\n            </div>\r\n            <div class="form-group">\r\n                <!-- Date de début -->\r\n                <label class="col-sm-4 col-md-4 col-lg-4 control-label" for="date-de-debut-id">\r\n                    Date de début\r\n                </label>\r\n                <div class="center-verticaly-recap col-sm-8 col-md-8 col-lg-8">\r\n                    <label ng-bind="::recapVerRegCtrl.dateDebut" id="date-de-debut-id-label"></label>\r\n                </div>\r\n            </div>\r\n            <div class="form-group">\r\n                <!-- Date de fin -->\r\n                <label class="col-sm-4 col-md-4 col-lg-4 control-label" for="date-fin-id">\r\n                    Date de fin\r\n                </label>\r\n                <div class="center-verticaly-recap col-sm-8 col-md-8 col-lg-8">\r\n                    <label ng-bind="::recapVerRegCtrl.dateFin" id="date-fin-id-label"></label>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</form>\r\n'),e.put("typescript/virement-interne/virement-interne-view.html",'<form class="form-horizontal">\r\n    <div class="form-group">\r\n        <div class="col-md-12 col-sm-12 col-lg-12" data-ng-show="viewModelVirementInterneCtrl.afficherBoutonSaisirCompte">\r\n            <mwsf-liste-compte compte-selectionne="viewModelVirementInterneCtrl.compteSelectionne" parametres="viewModelVirementInterneCtrl.parametreListeComptes" ng-disabled="viewModelVirementInterneCtrl.blocageEditionVirement" on-bottom-action="viewModelVirementInterneCtrl.boutonSaisirCompte()" id="id-liste-comptes-virement-interne-opefi">\r\n            </mwsf-liste-compte>\r\n        </div>\r\n        <div class="col-md-12 col-sm-12 col-lg-12" data-ng-show="!viewModelVirementInterneCtrl.afficherBoutonSaisirCompte">\r\n            <mwsf-saisie-rice data-ng-model="viewModelVirementInterneCtrl.rice" data-read-only="viewModelVirementInterneCtrl.blocageEditionVirement" data-mode-appel="Guichet" id="id-rice-virement-interne-opefi">\r\n            </mwsf-saisie-rice>\r\n        </div>\r\n        <!--<div class="col-md-4 col-sm-4 col-lg-4"\r\n             data-ng-show="!viewModelVirementInterneCtrl.afficherBoutonSaisirCompte">\r\n            <mw-button modele="zone"\r\n                       texte="{{viewModelVirementInterneCtrl.texteBouton}}"\r\n                       ng-click="viewModelVirementInterneCtrl.boutonSaisirCompte()"\r\n                       id="bouton-virement-interne-switch-rice-compte">\r\n            </mw-button>\r\n        </div>-->\r\n    </div>\r\n    <div class="form-group" data-ng-show="!viewModelVirementInterneCtrl.afficherBoutonSaisirCompte">\r\n        <span class="afficher-compte-rice-lien col-md-12 col-sm-12 col-lg-12" id="lien-virement-interne-switch-rice-compte" data-ng-click="viewModelVirementInterneCtrl.boutonSaisirCompte()">\r\n            {{viewModelVirementInterneCtrl.texteBouton}}\r\n        </span>\r\n    </div>\r\n</form>'),e.put("typescript/versement-periodique/vues/vue-versement-periodique.html",'<!-- V2 Versement periodique -->\r\n<!-- La directive a été testé dans le fichier "livret-b-personnalisation-recapitulatif.html" -->\r\n<hr>\r\n<form class="form-horizontal">\r\n\r\n    <!-- C’est un filtre pour montrer la version de la nouvelle directive générale (tous les produits en général) et PEL -->\r\n    <!-- Filter \r\n    <div class="row">\r\n        <div class="col-sm-5 col-md-5 col-lg-6">\r\n            <ul class="list-inline">\r\n                <li class="mw-radio-btn">\r\n                    <input id="filter-1" type="radio" name="filter" value="General" ng-model="comVerPerCtrl.genPel" />\r\n                    <label for="filter-1">\r\n                        General\r\n                    </label>\r\n                </li>\r\n                <li class="mw-radio-btn">\r\n                    <input id="filter-2" type="radio" name="filter" value="PEL" ng-model="comVerPerCtrl.genPel" />\r\n                    <label for="filter-2">\r\n                        PEL\r\n                    </label>\r\n                </li>\r\n            </ul>\r\n        </div>\r\n    </div>\r\n    <!-- ./ Filter -->\r\n\r\n    <!-- General -  All -->\r\n    <div ng-if="comVerPerCtrl.genPel == \'General\'">\r\n        <!-- Compte a debiter -->\r\n        <div class="form-group">\r\n            <label class="col-sm-3 col-md-4 col-lg-3 control-label" for="compte-a-debiter-id">\r\n                Compte à débiter\r\n            </label>\r\n            <div class="col-sm-9 col-md-8 col-lg-9">\r\n                <mwsf-liste-compte parametres="comVerPerCtrl.parametreListeComptes" compte-selectionne="comVerPerCtrl.donnesGeneriques.compteSelectionne" ng-model="comVerPerCtrl.donnesGeneriques.compteSelectionne" on-bottom-action="comVerPerCtrl.afficherCacherSaisieRice()" id="compte-a-debiter-id" ng-show="!comVerPerCtrl.afficherSaisieRice">\r\n                </mwsf-liste-compte>\r\n\r\n                <mwsf-saisie-rice ng-if="comVerPerCtrl.estInitialise()" data-ng-model="comVerPerCtrl.riceSaisi" data-read-only="comVerPerCtrl.enVAD" data-mode-appel="Etablissement" id="id-rice-virement-interne-opefi" ng-show="comVerPerCtrl.afficherSaisieRice">\r\n                </mwsf-saisie-rice>\r\n                <span ng-show="comVerPerCtrl.afficherSaisieRice" ng-click="comVerPerCtrl.afficherCacherSaisieRice()" class="afficher-compte-rice-lien">\r\n                    Afficher la liste des comptes\r\n                </span>\r\n\r\n                <!--<mwsf-saisie-rice ng-model="comVerPerCtrl.riceInterne" data-read-only="true" data-mode-appel="Etablissement" data-controle="true"></mwsf-saisie-rice>-->\r\n            </div>\r\n        </div>\r\n        <!-- ./ Compte a debiter-->\r\n        <!-- Montant -->\r\n        <div class="form-group">\r\n            <label class="col-sm-3 col-md-3 col-lg-3 control-label" for="montant">\r\n                Montant\r\n            </label>\r\n            <div class="col-sm-5 col-md-5 col-lg-5">\r\n                <input type="text" class="form-control" mw-montant ng-model="comVerPerCtrl.donnesGeneriques.montant" ng-change="comVerPerCtrl.validerDonnees()" name="montant" id="montant" aria-describedby="deviseEURO">\r\n            </div>\r\n            <div class="col-sm-1 col-md-1 col-lg-1">\r\n                <p id="deviseEURO" class="form-control-static">€</p>\r\n            </div>\r\n        </div>\r\n        <!-- ./ Montant -->\r\n        <!-- Périodicité -->\r\n        <div class="form-group">\r\n            <label class="col-sm-3 col-md-3 col-lg-3 control-label" for="periodicite">\r\n                Périodicité\r\n            </label>\r\n            <div class="col-sm-5 col-md-5 col-lg-5">\r\n                <input type="text" id="periodicite" ng-model="comVerPerCtrl.donnesGeneriques.periodicite" ng-change="comVerPerCtrl.validerDonnees()" class="form-control" name="periodicite" required mw-combobox="periode.value for periode in comVerPerCtrl.listePeriodicite">\r\n            </div>\r\n        </div>\r\n        <!-- ./ Périodicité -->\r\n        <!-- Libellé -->\r\n        <div class="form-group">\r\n            <label class="col-sm-3 col-md-3 col-lg-3 control-label" for="libelle-id">\r\n                Libellé\r\n            </label>\r\n            <div class="col-sm-5 col-md-5 col-lg-5">\r\n                <input type="text" ng-model="comVerPerCtrl.donnesGeneriques.libelle" class="form-control" id="libelle-id">\r\n            </div>\r\n        </div>\r\n        <!-- ./ Libellé -->\r\n        <!-- Date debut  -->\r\n        <div class="form-group">\r\n            <label class="col-sm-3 col-md-3 col-lg-3 control-label" for="date-debut">\r\n                Date de début\r\n            </label>\r\n            <div class="col-sm-5 col-md-5 col-lg-5 has-feedback">\r\n                <input type="text" class="form-control" id="date-debut" name="dateDebut" ng-model="comVerPerCtrl.donnesGeneriques.dateDebut" ng-change="comVerPerCtrl.validerDonnees()" mw-date-legere uib-datepicker-popup="dd/MM/yyyy" is-open="comVerPerCtrl.openedDateDebut" datepicker-options="{ showWeeks: false, startingDay:1}">\r\n                <span class="btn btn-success form-control-feedback">\r\n                    <mw-button-icone texte="Calendrier" taille="sm" icone="icone itce-calendar icodate" id="buttndatefin" ng-click="comVerPerCtrl.openedDateDebut = true"></mw-button-icone>\r\n                </span>\r\n            </div>\r\n        </div>\r\n        <!-- ./ Date debut -->\r\n        <!-- Date de fin  -->\r\n        <div class="form-group">\r\n            <label class="col-sm-3 col-md-3 col-lg-3 control-label" for="date-fin-id">\r\n                Date de fin\r\n            </label>\r\n            <div class="col-sm-5 col-md-5 col-lg-5 has-feedback">\r\n                <input type="text" class="form-control" id="date-fin" name="dateFin" ng-model="comVerPerCtrl.donnesGeneriques.dateFin" ng-change="comVerPerCtrl.validerDonnees()" mw-date-legere uib-datepicker-popup="dd/MM/yyyy" is-open="comVerPerCtrl.openedDateFin" datepicker-options="{ showWeeks: false, startingDay:1}" placeholder="jj/mm/aaaa" min-date="comVerPerCtrl.donnesGeneriques.dateDebut">\r\n                        <!--min-date="comVerPerCtrl.donnesPEL.dateDebut ? ctrl.versementPeriodique.dateDebut : ctrl.minDate" />-->\r\n                <span class="btn btn-success form-control-feedback">\r\n                    <mw-button-icone texte="Calendrier" taille="sm" icone="icone itce-calendar icodate" id="buttndatefin" ng-click="comVerPerCtrl.openedDateFin = true"></mw-button-icone>\r\n                </span>\r\n            </div>\r\n        </div>\r\n        <!-- ./ Date de fin -->\r\n    </div>\r\n    <!-- ./ General -  All -->\r\n    \r\n    <!-- PEL -->\r\n        <div ng-if="comVerPerCtrl.genPel == \'PEL\'">\r\n            <!-- Virement Automatique o par ses propres soins Input -->\r\n            <div class="form-group">\r\n                <label class="col-sm-3 col-md-4 col-lg-3 control-label" for="mode-versement" ng-class="{\'asterisque\': true}">\r\n                    Mode de versement\r\n                </label>\r\n                <div class="col-sm-5 col-md-5 col-lg-6">\r\n                    <ul class="list-inline">\r\n                        <li class="mw-radio-btn">\r\n                            <input id="mode-versemen-1" type="radio" name="mode-versemen" ng-value="true" ng-model="comVerPerCtrl.donnesPEL.versementAutomatique" ng-change="comVerPerCtrl.validerDonnees()">\r\n                            <label for="mode-versemen-1">\r\n                                Automatique\r\n                            </label>\r\n                        </li>\r\n                        <li class="mw-radio-btn">\r\n                            <input id="mode-versemen-2" type="radio" name="mode-versemen" ng-value="false" ng-model="comVerPerCtrl.donnesPEL.versementAutomatique" ng-change="comVerPerCtrl.validerDonnees()">\r\n                            <label for="mode-versemen-2">\r\n                                Par ses propres soins\r\n                            </label>\r\n                        </li>\r\n                    </ul>\r\n                </div>\r\n            </div>\r\n            <!-- ./ Virement Automatique o par ses propres soins Input -->\r\n            <!-- Montant -->\r\n            <div class="form-group">\r\n                <label class="col-sm-3 col-md-3 col-lg-3 control-label" for="montant-id">\r\n                    Montant\r\n                </label>\r\n                <div class="col-sm-5 col-md-5 col-lg-5">\r\n                    <input type="text" class="form-control" mw-montant ng-model="comVerPerCtrl.donnesPEL.montant" ng-change="comVerPerCtrl.validerDonnees()" name="montant" id="montant" aria-describedby="deviseEURO">\r\n                </div>\r\n                <div class="col-sm-1 col-md-1 col-lg-1">\r\n                    <p id="deviseEURO" class="form-control-static">€</p>\r\n                </div>\r\n            </div>\r\n            <!-- ./ Montant -->\r\n            <!-- Périodicité -->\r\n            <div class="form-group">\r\n                <label class="col-sm-3 col-md-3 col-lg-3 control-label" for="periodicite-id">\r\n                    Périodicité\r\n                </label>\r\n                <div class="col-sm-5 col-md-5 col-lg-5">\r\n                    <input type="text" id="periodicite" ng-model="comVerPerCtrl.donnesPEL.periodicite" ng-change="comVerPerCtrl.validerDonnees()" class="form-control" name="periodicite" required mw-combobox="periode.value for periode in comVerPerCtrl.listePeriodicite">\r\n                </div>\r\n            </div>\r\n            <!-- ./ Périodicité -->\r\n            <!-- IF par ses propres soins-->\r\n            <div ng-show="comVerPerCtrl.donnesPEL.versementAutomatique">\r\n                <!-- Date de premiere echeance  -->\r\n                <div class="form-group">\r\n                    <label class="col-sm-3 col-md-3 col-lg-3 control-label" for="date-debut" ng-class="{\'asterisque\': true}">\r\n                        Date de premiere echeance\r\n                    </label>\r\n                    <div class="col-sm-5 col-md-5 col-lg-5 has-feedback">\r\n                        <input type="text" class="form-control" ng-required="true" ng-attr-aria-required="true" id="date-debut" name="dateDebut" ng-model="comVerPerCtrl.donnesPEL.dateDebut" ng-change="comVerPerCtrl.validerDonnees()" mw-date-legere uib-datepicker-popup="dd/MM/yyyy" is-open="comVerPerCtrl.openedDateFin" datepicker-options="{ showWeeks: false, startingDay:1}" placeholder="jj/mm/aaaa">\r\n                        <span class="btn btn-success form-control-feedback">\r\n                            <mw-button-icone texte="Calendrier" taille="sm" icone="icone itce-calendar icodate" id="buttndatefin" ng-click="comVerPerCtrl.openedDateDebut = true"></mw-button-icone>\r\n                        </span>\r\n                    </div>\r\n                </div>\r\n                <!-- ./ Date de premiere echeance -->\r\n                <!-- Virement Interne o Externe Input -->\r\n                <div class="form-group">\r\n                    <label class="col-sm-3 col-md-4 col-lg-3 control-label" for="type-virement-id">\r\n                        Virement\r\n                    </label>\r\n                    <div class="col-sm-5 col-md-5 col-lg-6">\r\n                        <ul class="list-inline">\r\n                            <li class="mw-radio-btn">\r\n                                <input id="radio-btn-1" type="radio" name="radio-btn" value="I" ng-model="comVerPerCtrl.donnesPEL.typeVirement" ng-change="comVerPerCtrl.validerDonnees()">\r\n                                <label for="radio-btn-1">\r\n                                    Interne\r\n                                </label>\r\n                            </li>\r\n                            <li class="mw-radio-btn">\r\n                                <input id="radio-btn-2" type="radio" name="radio-btn" value="E" ng-model="comVerPerCtrl.donnesPEL.typeVirement" ng-change="comVerPerCtrl.validerDonnees()">\r\n                                <label for="radio-btn-2">\r\n                                    Externe\r\n                                </label>\r\n                            </li>\r\n                        </ul>\r\n                    </div>\r\n                </div>\r\n                <!-- ./ Virement Interne o Externe Input -->\r\n                <!-- IF type virement -> Interne -->\r\n                <div ng-show="comVerPerCtrl.getTypeInternePEL()">\r\n\r\n                    <div class="form-group">\r\n                        <label class="col-sm-3 col-md-4 col-lg-3 control-label" for="compte-a-debiter-id">\r\n                            Compte à débiter\r\n                        </label>\r\n                        <div class="col-sm-9 col-md-8 col-lg-9">\r\n                            <mwsf-liste-compte parametres="comVerPerCtrl.parametreListeComptes" compte-selectionne="comVerPerCtrl.donnesPEL.compteSelectionne" ng-model="comVerPerCtrl.donnesPEL.compteSelectionne" ng-blur="comVerPerCtrl.validerDonnees()" ng-change="comVerPerCtrl.validerDonnees()" ng-click="comVerPerCtrl.validerDonnees()" id="compte-a-debiter-id">\r\n                            </mwsf-liste-compte>\r\n\r\n                            <mwsf-saisie-rice ng-if="comVerPerCtrl.estInitialise()" data-ng-model="comVerPerCtrl.riceSaisi" data-read-only="comVerPerCtrl.enVAD" data-mode-appel="Etablissement" id="id-rice-virement-interne-opefi" ng-show="comVerPerCtrl.afficherSaisieRice">\r\n                            </mwsf-saisie-rice>\r\n\r\n                            <span ng-show="comVerPerCtrl.afficherSaisieRice" ng-click="comVerPerCtrl.afficherCacherSaisieRice()" class="afficher-compte-rice-lien">\r\n                                Afficher la liste des comptes\r\n                            </span>\r\n                        </div>\r\n                    </div>\r\n\r\n                </div>\r\n                <!-- ./ IF type virement  -> Interne -->\r\n                <!-- IF type virement -> Externe -->\r\n                <div ng-show="!comVerPerCtrl.getTypeInternePEL()">\r\n\r\n\r\n                    <!-- TODO: Validation pour le parti Externe -->\r\n                    <p><strong>Compte de prélèvement</strong></p>\r\n\r\n                    <!-- IBAN -->\r\n                    <div class="form-group">\r\n                        <label class="col-sm-3 col-md-4 col-lg-3 control-label" for="iban">\r\n                            IBAN\r\n                        </label>\r\n                        <div class="col-sm-5 col-md-5 col-lg-5">\r\n                            <mwsf-iban data-ng-model="iban" required="true" id="iban"></mwsf-iban>\r\n                        </div>\r\n                    </div>\r\n                    <!-- ./ IBAN -->\r\n\r\n                    <p><strong>Titulaire du compte prélevé</strong></p>\r\n\r\n                    <!-- Nom - IBAN -->\r\n                    <div class="form-group">\r\n                        <label class="col-sm-3 col-md-4 col-lg-3 control-label" for="nom-iban" ng-class="{\'asterisque\': true}">\r\n                            Nom\r\n                        </label>\r\n                        <div class="col-sm-5 col-md-5 col-lg-5">\r\n                            <input id="nom-iban" name="nom-iban" class="form-control" ng-model="comVerPerCtrl.nomIban" type="text" ng-required="true" ng-attr-aria-required="true" aria-describedby="help-text">\r\n                        </div>\r\n                    </div>\r\n                    <!-- ./ Nom - IBAN -->\r\n                    <!-- Prenom - IBAN -->\r\n                    <div class="form-group">\r\n                        <label class="col-sm-3 col-md-4 col-lg-3 control-label" for="prenom-iban" ng-class="{\'asterisque\': true}">\r\n                            Prénom\r\n                        </label>\r\n                        <div class="col-sm-5 col-md-5 col-lg-5">\r\n                            <input id="prenom-iban" name="prenom-iban" class="form-control" ng-model="comVerPerCtrl.prenomIban" type="text" ng-required="true" ng-attr-aria-required="true" aria-describedby="help-text">\r\n                        </div>\r\n                    </div>\r\n                    <!-- ./ Prenom - IBAN -->\r\n                    <!-- DOM-TOM Adresse Checkbox - IBAN -->\r\n                    <div class="form-group">\r\n                        <label class="col-sm-3 col-md-4 col-lg-3 control-label" for="dom-tom-iban-label">\r\n                        </label>\r\n                        <div class="col-sm-5 col-md-5 col-lg-5">\r\n\r\n                            <div class="mw-input-check vertical-alignement">\r\n                                <label for="id-check-required" id="dom-tom-iban">\r\n                                    <input id="id-check-required" type="checkbox" ng-model="comVerPerCtrl.checkAdresseDomTom" ng-attr-aria-checked="comVerPerCtrl.checkAdresseDomTom" aria-labelledby="dom-tom-iban">\r\n                                    <span aria-hidden="true" class="icon" ng-class="{\'itce-fa-check\':comVerPerCtrl.checkAdresseDomTom}"></span>\r\n                                    Adresse hors France et DOM-TOM\r\n                                </label>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                    <!-- ./DOM-TOM Adresse Checkbox - IBAN -->\r\n                    <!-- Adresse  - IBAN -->\r\n                    <div class="form-group">\r\n                        <label class="col-sm-3 col-md-4 col-lg-3 control-label" for="adresse-iban">\r\n                            Adresse\r\n                        </label>\r\n                        <div class="col-sm-5 col-md-5 col-lg-5">\r\n                            <input id="adresse-iban" name="address-iban" class="form-control" ng-model="comVerPerCtrl.adresseIban" type="text" aria-describedby="help-text" placeholder="Assistance à la saisie? Consulter l\'aide ci-contre" ng-disabled="comVerPerCtrl.checkAdresseDomTom">\r\n                        </div>\r\n                    </div>\r\n                    <!-- ./ Adresse - IBAN -->\r\n                    <!-- Etage / Appartament - IBAN -->\r\n                    <div class="form-group">\r\n                        <label class="col-sm-3 col-md-4 col-lg-3 control-label" for="etage-appartament-iban">\r\n                            Etage / Appartament\r\n                        </label>\r\n                        <div class="col-sm-5 col-md-5 col-lg-5">\r\n                            <input id="etage-appartament-iban" name="etage-appartament-iban" class="form-control" ng-model="comVerPerCtrl.etageAppartamentIban" type="text" aria-describedby="help-text">\r\n                        </div>\r\n                    </div>\r\n                    <!-- ./ Etage / Appartament - IBAN -->\r\n                    <!-- Etage / Appartament - IBAN -->\r\n                    <div class="form-group">\r\n                        <label class="col-sm-3 col-md-4 col-lg-3 control-label" for="batiment-iban">\r\n                            Bâtiment\r\n                        </label>\r\n                        <div class="col-sm-5 col-md-5 col-lg-5">\r\n                            <input id="batiment-iban" name="batiment-iban" class="form-control" ng-model="comVerPerCtrl.batimentIban" type="text" aria-describedby="help-text">\r\n                        </div>\r\n                    </div>\r\n                    <!-- ./ Etage / Appartament - IBAN -->\r\n                    <!-- Voie ou Rue - IBAN -->\r\n                    <div class="form-group">\r\n                        <label class="col-sm-3 col-md-4 col-lg-3 control-label" for="voie-rue-iban" ng-class="{\'asterisque\': true}">\r\n                            Voie ou Rue\r\n                        </label>\r\n                        <div class="col-sm-5 col-md-5 col-lg-5">\r\n                            <input id="voie-rue-iban" name="voie-rue-iban" class="form-control" ng-model="comVerPerCtrl.voieRueIban" ng-required="true" ng-attr-aria-required="true" type="text" aria-describedby="help-text">\r\n                        </div>\r\n                    </div>\r\n                    <!-- ./ Voie ou Rue - IBAN -->\r\n                    <!-- Lieu dit - IBAN -->\r\n                    <div class="form-group" ng-show="!comVerPerCtrl.checkAdresseDomTom">\r\n                        <label class="col-sm-3 col-md-4 col-lg-3 control-label" for="lieu-dit-iban">\r\n                            Lieu dit\r\n                        </label>\r\n                        <div class="col-sm-5 col-md-5 col-lg-5">\r\n                            <input id="lieu-dit-iban" name="lieu-dit-iban" class="form-control" ng-model="comVerPerCtrl.lieuDitIban" type="text" aria-describedby="help-text">\r\n                        </div>\r\n                    </div>\r\n                    <!-- ./ Lieu dit - IBAN -->\r\n                    <!-- Code postal et Ville - IBAN -->\r\n                    <div class="form-group">\r\n                        <label class="col-sm-3 col-md-4 col-lg-3 control-label" for="code-postal-ville-iban" ng-class="{\'asterisque\': true}">\r\n                            Code postal et ville\r\n                        </label>\r\n                        <div class="col-sm-5 col-md-5 col-lg-5">\r\n                            <input id="code-postal-ville-iban" name="code-postal-ville-iban" class="form-control" ng-model="comVerPerCtrl.codePostalVilleIban" ng-required="true" ng-attr-aria-required="true" type="text" aria-describedby="help-text">\r\n                        </div>\r\n                    </div>\r\n                    <!-- ./ Code postal et Ville - IBAN -->\r\n                    <!-- Pays - IBAN -->\r\n                    <div class="form-group">\r\n                        <label class="col-sm-3 col-md-4 col-lg-3 control-label" for="pays-iban">\r\n                            Pays\r\n                        </label>\r\n                        <div class="col-sm-5 col-md-5 col-lg-5">\r\n                            <ui-select ng-model="comVerPerCtrl.pays" id="pays-iban" required="true">\r\n                                <ui-select-match placeholder="Sélectionnez ou cherchez..."></ui-select-match>\r\n                                <ui-select-choices repeat="pays in comVerPerCtrl.pays | filter: $select.search">{{ pays.value }}</ui-select-choices>\r\n                            </ui-select>\r\n                        </div>\r\n                    </div>\r\n                    <!-- ./ Pays - IBAN -->\r\n\r\n                </div>\r\n                <!-- ./ IF type virement  -> Externe -->\r\n            </div>\r\n            <!-- ./ IF par ses propres soins-->\r\n        </div>\r\n    <!-- ./ PEL-->\r\n</form>\r\n\r\n<hr>')}]);