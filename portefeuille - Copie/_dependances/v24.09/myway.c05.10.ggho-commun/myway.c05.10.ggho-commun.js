/**
 * Généré par : SIGCESIE\ct-tfsbuild
 * Changeset TFS : undefined
 * Etiquette TFS : undefined
 * Déclenchement : undefined
 */
var myway;!function(e){var t;!function(e){var t;!function(e){"use strict";e.app=angular.module("myway.c05.10.ggho-commun",["ngRoute","moduleAgent","myway.comInterdomaine","myway.comOpesFinancieres","myway.gestionEpargne.horsOffre.commun","myway.ui","ui.bootstrap","ngAnimate"])}(t=e.gghoCommun||(e.gghoCommun={}))}(t=e.gestionEpargne||(e.gestionEpargne={}))}(myway||(myway={}));var myway;!function(e){var t;!function(t){var r;!function(t){"use strict";var r=function(){function r(e,t,r,n,i,o,s,a,u,c,p,m,d,l){var f=this;this.$scope=e,this.$q=t,this.serviceAgentExtended=r,this.contexteProcessusService=n,this.identifiantBordereauService=i,this.saisieRiceService=o,this.postOperationFinanciere=s,this.opeFiService=a,this.ouvertureProduitService=u,this.gghoService=c,this.resultatCommercialService=p,this.blocMDECDATService=m,this.creerDossierDeVenteService=d,this.donneesSauvegardeProduitServiceDATService=l,this.codeModeFinancierParDefaut="06",this.listeNumerosPersonnesPourVirementInterne=[],this.estInitialise=!1,this.validerDonneesPourOuverture=function(){return f.$q.when([])},this.realiserLaMiseEnGestion=function(e){var t=f.obtenirEligibiliteSAG(e);return f.identifiantBordereauService.getNumeroBordereau(f.donneesOuverture.detenteur.numeroPersonne.toString(),t).then(function(e){return f.serviceAgentExtended.getAuthentificationInfo().then(function(t){var r=t.numeroStationTravail;return f.operationFinanciere.contexteSaisieOperationFinanciere.identifiantBordereau=r+"-"+e,f.gghoService.setIdentifiantBordereau(e),f.ouvrirProduit()})}).then(function(e){return f.gghoService.isCompteRenduEnErreur(e)?e:f.traitementPostMiseEnGestion(e,t)})},this.sauvegarderDossierDeVente=function(){return f.creerMDEC().then(function(e){return f.donneesMDEC=e,f.donneesSauvegardeProduitServiceDAT=f.donneesSauvegardeProduitServiceDATService.creerDonneesSauvegardeProduitServiceDAT(f.operationFinanciere,f.donneesOuvertureProduits),f.creerDossierDeVenteService.creerDossierDeVente(f.donneesMDEC,f.donneesSauvegardeProduitServiceDAT)})},this.getDonneesOuverture().then(function(){f.initialiserLesListesDeCompteSupport(),f.associerBoutonGGHOavecFonctionControleur(),f.transmettreLibelleProduitAGGHO(),f.initialiserOperationFinancierePourComposant().then(function(){f.ecouteBlocSignataire(),f.contexte.libTitreProduit=f.donneesOuverture.produit.libelleProduitCatalogueDAT,f.$scope.$emit("CSPR_CHARGEMENT_EFFECTUE#"+f.idBloc),f.$scope.$emit("CSPR_DEFINIR_ROUTAGE_EDITIQUE#"+f.idBloc,{valeur:GestionGeneriqueOffres.Types.SpaEditiques.EpargneDat}),f.estInitialise=!0})})}return r.prototype.setDonneesOuvertureProduits=function(e){this.donneesOuvertureProduits=e},r.prototype.getDonneesOuverture=function(){var e=this;return this.contexteProcessusService.getDonneesCAT().then(function(t){console.log("XXXXX OuvertureProduitControleur => getDonneesOuverture : donneesOuverture",t),e.donneesOuverture=t})},r.prototype.associerBoutonGGHOavecFonctionControleur=function(){this.contexte&&this.contexte.donneesProduit&&(this.contexte.donneesProduit.pointsEntree.validerFormulaire=this.validerDonneesPourOuverture,this.contexte.donneesProduit.pointsEntree.mettreEnGestion=this.realiserLaMiseEnGestion,this.contexte.donneesProduit.pointsEntree.sauvegarderDossierDeVente=this.sauvegarderDossierDeVente)},r.prototype.transmettreLibelleProduitAGGHO=function(){},r.prototype.ecouteBlocSignataire=function(){var e=this;this.$scope.$root.$on("MWSFLISTESIGNATAIRES_CHOIX_SIGNATAIRES_CHANGED",function(t,r){var n=_.filter(r,function(e){return"RPP"===e.codeFamilleLiensInterPersonnes&&"106"===e.codeLienPersonne}),i=_.map(n,function(e){return e.numeroPersonne.toString()});e.listeNumerosPersonnesPourVirementInterne=[e.donneesOuverture.detenteur.numeroPersonne.toString()],e.listeNumerosPersonnesPourVirementInterne=e.listeNumerosPersonnesPourVirementInterne.concat(i),e.operationFinanciere.listeNumerosPersonnesPourVirementInterne=e.listeNumerosPersonnesPourVirementInterne,e.contexte.listeSignataires=r})},r.prototype.initialiserOperationFinancierePourComposant=function(){var e=this,t=this.contexte.offreSouscrite.numeroPersonneIdentifiee.toString();return this.opeFiService.obtenirOperationFinancierePourComposant(this.contexte,t,this.donneesOuverture.produit.montantNominalSouscription).then(function(t){e.operationFinanciere=t})},r.prototype.obtenirEligibiliteSAG=function(e){var r=!1;return this.contexte.offreSouscrite.codeCanal!==t.CodeCanalEnum.FF?r=!0:angular.isDefined(e)&&null!==e&&(r=!e.indicateurPapier),r},r.prototype.ouvrirProduit=function(){return this.$q.reject()},r.prototype.initialiserLesListesDeCompteSupport=function(){this.listeTypesComptesPourVersements=this.opeFiService.obtenirListeDesTypesDeCompte(t.CodeTypeProduitsEnum.DEPOT_A_TERME)},r.prototype.traitementPostMiseEnGestion=function(e,t){var r=this;this.operationFinanciere.client.numeroPersonne=this.contexte.offreSouscrite.numeroPersonneIdentifiee.toString(),this.preparerOpeFiPourBordereau(this.operationFinanciere,e);var n;return this.serviceAgentExtended.getFromContext("NumBordereau").then(function(i){return r.serviceAgentExtended.getAuthentificationInfo().then(function(o){return angular.isDefined(i)&&null!==i&&(n=o.numeroStationTravail,r.operationFinanciere.contexteSaisieOperationFinanciere.identifiantBordereau=n+"-"+i,r.gghoService.setIdentifiantBordereau(i)),r.postOperationFinanciere.traitementPostOperationFinanciere(r.operationFinanciere,t).then(function(){return r.resultatCommercialService.enregistrerResultatCommercial(e.numeroPersonne,r.contexte.donneesProduit.produit.produitCaracteristique.identifiantProduitService,e.montantOperation).then(function(){return e})["catch"](function(t){return e.erreurs.push(r.gghoService.resultatCommercialKo()),e})})})})},r.prototype.preparerOpeFiPourBordereau=function(e,t){var r=this.opeFiService.obtenirRiceDepuisRibSansCle(t.numeroCompte);e.compte.libelle=this.contexte.donneesProduit.produit.produitCaracteristique.libelleProduitService,e.compte.titulaire=this.contexte.donneesProduit.detenteur.getLibelle,e.compte.rice.radical=r.radical,e.compte.rice.cleCompte=r.cleCompte,e.compte.rice.cleRice=r.cleRice,t.ilYAUneDemandeAutorisation&&this.ajouterLibelleAutorisation(e),this.renseignerSignataireDansOperationFinanciere(e)},r.prototype.ajouterLibelleAutorisation=function(e){e.libelleOperation.libelleCourt+=" Autor"},r.prototype.renseignerSignataireDansOperationFinanciere=function(e){var t=this.trouverSignataireDansListeSignataires();t||(t=this.trouverSignataireDansListePersonnes()),this.operationFinanciere.signataire=t},r.prototype.trouverSignataireDansListeSignataires=function(){return this.contexte.listeSignataires&&this.contexte.listeSignataires.length>0?this.obtenirSignataireOpeFiDepuisSignataireComplet(this.contexte.listeSignataires[0]):null},r.prototype.obtenirSignataireOpeFiDepuisSignataireComplet=function(e){var t={codeRole:e.role.toString(),libelleRole:e.designataire?e.designataire:"Titulaire",codePersonnaliteJuridique:e.codePersonnaliteJuridique,identifiantParticipant:e.numeroPersonne?_.padLeft(e.numeroPersonne.toString(),9,"0"):null,dateNaissance:moment(e.dateNaissance).format("DD/MM/YYYY"),nomParticipant:e.nomUsage?e.nomUsage:e.nomFamille,prenomParticipant:e.prenom,nomPrenomParticipant:e.nomUsage?e.nomUsage:e.nomFamille+" "+e.prenom};return t},r.prototype.trouverSignataireDansListePersonnes=function(){var e=_.findWhere(this.contexte.personnes,{identifiantPersonne:this.donneesOuverture.detenteur.numeroPersonne});return e?this.obtenirSignataireOpeFiDepuisPersonne(e):null},r.prototype.obtenirSignataireOpeFiDepuisPersonne=function(t){var r={codeRole:e.comContract.modeles.TypeSignataire.TITULAIRE.toString(),libelleRole:"Titulaire",nomParticipant:t.particulierInformation.nomMarital?t.particulierInformation.nomMarital:t.particulierInformation.nomFamillePersonnePhysique,prenomParticipant:t.particulierInformation.prenom,nomPrenomParticipant:t.particulierInformation.nomFamillePersonnePhysique+" "+t.particulierInformation.prenom,identifiantParticipant:_.padLeft(t.identifiantPersonne.toString(),9,"0"),dateNaissance:moment(t.particulierInformation.dateNaissance).format("DD/MM/YYYY"),codePersonnaliteJuridique:t.particulierInformation.codeCapaciteJuridique};return r},r.prototype.creerMDEC=function(){return this.$q.when(null)},r.$inject=["$scope","$q","serviceAgentExtended","contexteProcessusService","identifiantBordereauService","saisieRiceService","postOperationFinanciere","opeFiService","ouvertureProduitService","gghoService","resultatCommercialService","blocMDECDATService","creerDossierDeVenteService","donneesSauvegardeProduitServiceDATService"],r}();t.OuvertureProduitControleur=r}(r=t.gghoCommun||(t.gghoCommun={}))}(t=e.gestionEpargne||(e.gestionEpargne={}))}(myway||(myway={}));var myway;!function(e){var t;!function(e){var t;!function(e){"use strict"}(t=e.gghoCommun||(e.gghoCommun={}))}(t=e.gestionEpargne||(e.gestionEpargne={}))}(myway||(myway={}));var myway;!function(e){var t;!function(e){var t;!function(e){"use strict";var t=function(){function e(){}return e}();e.Devise=t}(t=e.gghoCommun||(e.gghoCommun={}))}(t=e.gestionEpargne||(e.gestionEpargne={}))}(myway||(myway={}));var myway;!function(e){var t;!function(e){var t;!function(e){"use strict"}(t=e.gghoCommun||(e.gghoCommun={}))}(t=e.gestionEpargne||(e.gestionEpargne={}))}(myway||(myway={}));var myway;!function(e){var t;!function(e){var t;!function(e){"use strict";var t=function(){function e(e){this._identifiantPersonne=e.identifiantPersonne,this._codeTypeFamilleResultat=e.codeTypeFamilleResultat,this._identifiantProduitService=e.identifiantProduitService,this._codeNatureResultatCommercial=e.codeNatureResultatCommercial,this._codeTypeResultatCommercial=e.codeTypeResultatCommercial,this._codeTypeProduitService=e.codeTypeProduitService,this._indicRattachableCRE=e.indicRattachableCRE,this._codeTypeProduitServiceGCP=e.codeTypeProduitServiceGCP,this._codeOrigineFonds=e.codeOrigineFonds,this._montantResultatCommercial=e.montantResultatCommercial,this._codeModeGestionLivret=e.codeModeGestionLivret,this._sousCodeProduitService=e.sousCodeProduitService,this._codeProduitCarte=e.codeProduitCarte,this._codeModeFinancier=e.codeModeFinancier,this._codeCaractereForfaitaireOffre=e.codeCaractereForfaitaireOffre,this._indicProduitServiceObligatoire=e.indicProduitServiceObligatoire}return Object.defineProperty(e.prototype,"identifiantPersonne",{get:function(){return this._identifiantPersonne},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"codeTypeFamilleResultat",{get:function(){return this._codeTypeFamilleResultat},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"identifiantProduitService",{get:function(){return this._identifiantProduitService},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"codeNatureResultatCommercial",{get:function(){return this._codeNatureResultatCommercial},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"codeTypeResultatCommercial",{get:function(){return this._codeTypeResultatCommercial},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"codeTypeProduitService",{get:function(){return this._codeTypeProduitService},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"indicRattachableCRE",{get:function(){return this._indicRattachableCRE},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"codeTypeProduitServiceGCP",{get:function(){return this._codeTypeProduitServiceGCP},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"codeOrigineFonds",{get:function(){return this._codeOrigineFonds},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"montantResultatCommercial",{get:function(){return this._montantResultatCommercial},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"codeModeGestionLivret",{get:function(){return this._codeModeGestionLivret},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"sousCodeProduitService",{get:function(){return this._sousCodeProduitService},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"codeProduitCarte",{get:function(){return this._codeProduitCarte},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"codeModeFinancier",{get:function(){return this._codeModeFinancier},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"codeCaractereForfaitaireOffre",{get:function(){return this._codeCaractereForfaitaireOffre},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"indicProduitServiceObligatoire",{get:function(){return this._indicProduitServiceObligatoire},enumerable:!0,configurable:!0}),e}();e.ResultatCommercial=t}(t=e.gghoCommun||(e.gghoCommun={}))}(t=e.gestionEpargne||(e.gestionEpargne={}))}(myway||(myway={}));var myway;!function(e){var t;!function(e){var t;!function(e){var t=function(){function e(e,t){this.$q=e,this.serviceAgentExtended=t,this.restServiceUrl="http://myway-ressources-dua.sigcesie.caisse-epargne.fr:6083/devise/v1/caracteristique"}return e.prototype.getDeviseCaracteristique=function(e){return this.serviceAgentExtended.sendRequest({url:this.restServiceUrl,params:{codeDevise:e},withHeaders:!0,method:MyWay.Services.MethodEnum.GET})},e.$inject=["$q","serviceAgentExtended"],e}();e.DeviseService=t,e.app.service("deviseService",t)}(t=e.gghoCommun||(e.gghoCommun={}))}(t=e.gestionEpargne||(e.gestionEpargne={}))}(myway||(myway={}));var myway;!function(e){var t;!function(e){var t;!function(e){"use strict";var t=function(){function e(){}return e.LIVRET_A="0000",e.LIVRET_B="0001",e.LIVRET_GRAND_PRIX="0001",e.COMPTE_ATTENTE="0002",e.COMPTE_DEPOTS="0004",e.LIVRET_EPARGNE_POPULAIRE="0005",e.LIVRET_DEVELOPPEMENT_DURABLE="0006",e.COMPTE_COURANT_ENTREPRISE="0008",e.LIVRET_JEUNE="0010",e.COMPTE_EPARGNE_LOGEMENT="0011",e.PLAN_EPARGNE_LOGEMENT="0016",e.CSL_DEVISE_CAD="5855",e.CSL_DEVISE_USD="5856",e.DEPOT_A_TERME="0009",e.COMPTE_PRO_INTERNE="0088",e}();e.CodeTypeProduitsEnum=t;var r=function(){function e(){}return e.prototype.getFiltreProduit=function(e){switch(e){case t.LIVRET_A:case t.LIVRET_B:case t.LIVRET_DEVELOPPEMENT_DURABLE:case t.LIVRET_JEUNE:return this.listeProduitBDD();case t.COMPTE_EPARGNE_LOGEMENT:case t.LIVRET_EPARGNE_POPULAIRE:case t.COMPTE_DEPOTS:case t.COMPTE_ATTENTE:case t.PLAN_EPARGNE_LOGEMENT:return this.listeProduitBDDHorsCompteAttente();case t.CSL_DEVISE_CAD:case t.CSL_DEVISE_USD:return this.listeProduitCSLDevise();case t.DEPOT_A_TERME:return this.listeProduitPourDAT();default:return this.listeProduitBDD()}},e.prototype.listeProduitBDDHorsCompteAttente=function(){var e=[];return e.push(t.COMPTE_DEPOTS),e},e.prototype.listeProduitBDD=function(){var e=[];return e.push(t.COMPTE_ATTENTE),e.push(t.COMPTE_DEPOTS),e},e.prototype.listeProduitCSLDevise=function(){var e=[];return e.push(t.COMPTE_DEPOTS),e.push(t.COMPTE_COURANT_ENTREPRISE),e},e.prototype.listeProduitPourDAT=function(){var e=this.listeProduitBDD();return e.push(t.COMPTE_COURANT_ENTREPRISE),e.push(t.COMPTE_PRO_INTERNE),e},e}();e.FiltreCodeProduitService=r,e.app.service("filtreCodeProduitService",r)}(t=e.gghoCommun||(e.gghoCommun={}))}(t=e.gestionEpargne||(e.gestionEpargne={}))}(myway||(myway={}));var myway;!function(e){var t;!function(e){var t;!function(e){"use strict";var t=function(){function e(){}return e.FF="FF",e.VAD="VAD",e}();e.CodeCanalEnum=t;var r=function(){function e(){}return e.prototype.formulaireOk=function(){return new GestionGeneriqueOffres.Types.ErreurGestionGeneriqueOffre(GestionGeneriqueOffres.Types.NiveauErreur.Ok,0,"étape suivante")},e.prototype.formulaireKo=function(e){return new GestionGeneriqueOffres.Types.ErreurGestionGeneriqueOffre(GestionGeneriqueOffres.Types.NiveauErreur.Erreur,2,e)},e.prototype.miseEnGestionKoAnnulationForcage=function(e){return new GestionGeneriqueOffres.Types.ErreurGestionGeneriqueOffre(GestionGeneriqueOffres.Types.NiveauErreur.Erreur,2,e)},e.prototype.miseEnGestionOk=function(e){return new GestionGeneriqueOffres.Types.ErreurGestionGeneriqueOffre(GestionGeneriqueOffres.Types.NiveauErreur.Ok,0,"Le produit "+e+" a bien été ouvert")},e.prototype.miseEnGestionKo=function(e,t){return new GestionGeneriqueOffres.Types.ErreurGestionGeneriqueOffre(GestionGeneriqueOffres.Types.NiveauErreur.Erreur,2,"Erreur lors de la souscription du "+t+" pour les raisons suivantes: "+e.valeurs+".")},e.prototype.resultatCommercialKo=function(){return new GestionGeneriqueOffres.Types.ErreurGestionGeneriqueOffre(GestionGeneriqueOffres.Types.NiveauErreur.Warning,1,"Résultat commercial non enregistré. La mise en gestion a bien eu lieu.")},e.prototype.listerValeursErreur=function(e){var t="";return _.forEach(e.valeurs,function(e){t+="\r\n"+e}),t},e.prototype.getIdentifiantBordereau=function(){return this.identifiantBordereau},e.prototype.setIdentifiantBordereau=function(e){this.identifiantBordereau=e},e.prototype.isCompteRenduEnErreur=function(e){var t;return t=!e.erreurs.every(function(e){return 0===e.niveau})},e}();e.GghoService=r,e.app.service("gghoService",r)}(t=e.gghoCommun||(e.gghoCommun={}))}(t=e.gestionEpargne||(e.gestionEpargne={}))}(myway||(myway={}));var myway;!function(e){var t;!function(e){var t;!function(e){"use strict";var t=function(){function e(){}return e.prototype.faireMiseEnGestionPourGGHO=function(){return null},e.$inject=[],e}();e.InterfaceAvecGGHOService=t,e.app.service("interfaceAvecGGHOService",t)}(t=e.gghoCommun||(e.gghoCommun={}))}(t=e.gestionEpargne||(e.gestionEpargne={}))}(myway||(myway={}));var myway;!function(e){var t;!function(t){var r;!function(t){"use strict";var r=function(){function r(e,t,r,n,i,o){this.$parse=e,this.$q=t,this.serviceAgentExtended=r,this.deviseService=n,this.filtreCodeProduitService=i,this.saisieRiceService=o,this.forcageBadge=!1,this._modeFinancier=""}return r.prototype.obtenirOperationFinancierePourComposant=function(r,n,i){var o=this;return this.obtenirComptePourOperationFinanciere(e.gestionEpargne.horsOffre.commun.CODE_PRODUIT_DAT,r,t.CodeTypeProduitsEnum.DEPOT_A_TERME).then(function(e){var s=o.initialiserOperationFinancierePourComposant(t.CodeTypeProduitsEnum.DEPOT_A_TERME,n,e,r.offreSouscrite.codeCanal,MyWay.Model.Fonctionnalite.OUVERTURE_DAT,r.offreSouscrite.codeModeDeVenteCalcule);return o.fixerMontantOperationFinanciere(s,i),s})},r.prototype.initialiserOperationFinancierePourComposant=function(t,r,n,i,o,s){var a=new e.comOpesFinancieres.Model.OperationFinanciere;return"TL"===i?(a.fonctionnalite=MyWay.Model.Fonctionnalite.GENERIQUE_VAD,a.canal="TL",a.modeDeVente="MEGI"):a.fonctionnalite=o?o:MyWay.Model.Fonctionnalite.OUVERTURE_EPARGNE,a.signataire=new MyWay.Model.ParticipantInformationClient("Titulaire","","","","",""),a.contexteSaisieOperationFinanciere=new e.comOpesFinancieres.Model.ContexteSaisieOperationFinanciere,a.compte=n,a.client=new MyWay.Model.Client,a.client.numeroPersonne=this.paddy(r,9,"0"),a.typeRechercheListeCompteVirementInterne="B",a.codeEtatRechercheListeCompteVirementInterne="A",a.listeTypesProduitsPourVirementInterne=this.filtreCodeProduitService.getFiltreProduit(t),a.titrePanelPrincipal="Versement initial",a},r.prototype.paddy=function(e,t,r){var n="undefined"!=typeof r?r:"0",i=new Array(1+t).join(n);return(i+e).slice(-i.length)},r.prototype.obtenirListeDesTypesDeCompte=function(e){return this.filtreCodeProduitService.getFiltreProduit(e)},r.prototype.obtenirComptePourOperationFinanciere=function(e,t,r){var n=new MyWay.Model.Compte;return n.rice=new MyWay.Model.Rice,n.rice.codeActiviteCompte=e,n.rice.codeEtablissement=t.etablissement.codeEtablissement,n.rice.codeGuichet=t.etablissement.codeGuichetInterbancaire,n.produit=new MyWay.Model.Produit,n.produit.CODIPR=r,n.produit.LNEGCO=t.donneesProduit.produit.produitCaracteristique.libelleProduitService,n.listeParticipant=[],this.deviseService.getDeviseCaracteristique(t.donneesProduit.produit.produitCatalogue.codeDeviseMontantOperation).then(function(e){var t=new MyWay.Model.Devise({code:e.codeDevise,sigle:e.symboleDevise,libelle:e.libelleDevise,nombreDecimalesGerees:e.nombreDecimalesGerees,nombreDecimalesReelles:e.nombreDecimalesReelles,symboleDevise:e.symboleDevise});return n.devise=t,n})["catch"](function(e){return n})},r.prototype.fixerMontantOperationFinanciere=function(e,t){e.montant=t,e.estDesactiverSaisieMontant=!0},r.prototype.obtenirNumeroRibDepuisRiceOuContrat=function(e,t){if(!(t&&t.riceContrat||e.$valid&&e.isComplete()))return null;var r;if(null===t)r=e;else{var n=t.riceContrat.substring(0,5),i=t.riceContrat.substring(5,10),o=t.riceContrat.substring(10,19);r=this.saisieRiceService.formatteRICE(n,i,o)}var s=this.saisieRiceService.riceKeyCalculator(r);return r.formatRicePourRib()+s},r.prototype.ajouterCleAuRib=function(e){var t=this.obtenirCleDepuisRibSansCle(e);return e+t},r.prototype.obtenirCleDepuisRibSansCle=function(e){var t=this.obtenirRiceDepuisRibSansCle(e);return this.saisieRiceService.riceKeyCalculator(t)},r.prototype.obtenirRiceDepuisRibSansCle=function(e){var t,r=e.substring(0,5),n=e.substring(5,10),i=e.substring(10,19);return t=this.saisieRiceService.formatteRICE(r,n,i)},Object.defineProperty(r.prototype,"modeFinancier",{get:function(){return this._modeFinancier},set:function(e){this._modeFinancier=e},enumerable:!0,configurable:!0}),r.$inject=["$parse","$q","serviceAgentExtended","deviseService","filtreCodeProduitService","saisieRiceService"],r}();t.OpeFiService=r,t.app.service("opeFiService",r)}(r=t.gghoCommun||(t.gghoCommun={}))}(t=e.gestionEpargne||(e.gestionEpargne={}))}(myway||(myway={}));var __extends=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)},myway;!function(e){var t;!function(t){var r;!function(t){"use strict";var r=function(e){function t(){e.call(this,[]),this.ilYAUneDemandeAutorisation=!1}return __extends(t,e),Object.defineProperty(t.prototype,"numeroCompte",{get:function(){return""},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"montantOperation",{get:function(){return 0},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"numeroPersonne",{get:function(){return 0},enumerable:!0,configurable:!0}),t}(GestionGeneriqueOffres.Types.CompteRenduMiseEnGestion);t.DonneesProcessMiseEnGestion=r;var n=function(){function e(e,t,r,n,i,o){this.$q=e,this.serviceAgentExtended=t,this.opeFiService=r,this.gghoService=n,this.modalService=i,this.contexteProcessusService=o}return e.prototype.ouvrirProduit=function(e){var t=this;return e.demanderOuverture().then(function(r){return r.erreurs.push(t.gghoService.miseEnGestionOk(e.libelleProduitCatalogue)),r.ilYAUneDemandeAutorisation=e.ilYAUneDemandeAutorisation(),r})["catch"](function(n){if(!n||"MSG.RECRA00"!==n.codeLibelle&&"MSG.RECRA01"!==n.codeLibelle){var i=new r;return i.erreurs.push(t.gghoService.miseEnGestionKo(n,e.libelleProduitCatalogue)),i}return t.traiterDemandeDeForcage(n,e)})},e.prototype.traiterDemandeDeForcage=function(e,t){var r=this,n={actionButtonText:"Forcer",closeButtonText:"Annuler",headerText:"Autorisation requise",bodyText:this.gghoService.listerValeursErreur(e),iconName:"itce-warning",size:"md"};return this.modalService.showConfirm(n).then(function(){return r.ouvrirProduitAvecDemandeForcage(t,e)})["catch"](function(){return r.traitementSuiteARefusDeForcage(t,e)})},e.prototype.ouvrirProduitAvecDemandeForcage=function(e,t){switch(t.codeLibelle){case"MSG.RECRA00":e.setBadgeDemandeForcageOpposition(t);break;case"MSG.RECRA01":e.setBadgeDemandeForcageEpargne(t)}return this.ouvrirProduit(e)},e.prototype.traitementSuiteARefusDeForcage=function(e,t){var r=this;switch(t.codeLibelle){case"MSG.RECRA00":e.setBadgeRefusForcageOpposition(t);break;case"MSG.RECRA01":e.setBadgeRefusForcageEpargne(t)}return e.demanderOuverture().then(function(e){return e.erreurs.push(r.gghoService.miseEnGestionKoAnnulationForcage("Annulation forçage")),e})},e.$inject=["$q","serviceAgentExtended","opeFiService","gghoService","modalService","contexteProcessusService"],e}();t.OuvertureProduitService=n;var i=function(){function t(e,t,r){this.saisieRiceService=e,this.operationFinanciere=t,this.serviceAgentExtended=r,this.query={},this.operationFinancierePourRessource=this.initialiserOperationFinancierePourRessource(t.segmentPrvRio,t.segmentPrjo,r)}return Object.defineProperty(t.prototype,"libelleProduitCatalogue",{get:function(){return""},enumerable:!0,configurable:!0}),t.prototype.initialiserOperationFinancierePourRessource=function(t,r,n){var i={};return i.codeDeviseOperation=t.codeDeviseMontantOperation,i.codeEvenementAtome=t.codeEvenementAtome,i.dateValeurOperation=t.dateDeValeur?t.dateDeValeur.toISOString?t.dateDeValeur.toISOString():t.dateDeValeur.toString():moment().format("YYYY-MM-DD"),i.infosCheque={riceCompteVirement:"",typeCheque:t.typeCheque,nombreJourReserveEncaissement:t.nombreJourReserveEncaissement},r&&(i.infosOperationDiverse={codeReference:r.codeReferenceOD,libelleType:r.libelleTypeOD,codeFamille:r.codeFamilleOD,libelle1Saisi:r.libelle1SaisiOD,libelle2Saisi:r.libelle2SaisiOD}),t.modeFinancierNumerique===e.comOpesFinancieres.Constantes.CodeModeFinancier.MODE_FINANCIER_VIREMENT_INTERNE&&(i.infosVirementInterne=this.obtenirInfoVirementInterne(t.S_PRVRIOUGR[0])),i.libelleOperation1=t.libelleOperation1,i.libelleOperation2=t.libelleOperation2,i.modeFinancierChoisi=t.modeFinancierChoisi,i.modeFinancierNumerique=t.modeFinancierNumerique,t.modeFinancierNumerique&&n.addToContext("codeModeFinancier",t.modeFinancierNumerique),i.montantOperation=t.montantGlobalOperation,i},t.prototype.obtenirInfoVirementInterne=function(e){var t={riceCompteVirement:this.ajouterCleAuRib(e.numeroCompte),libelleVirement:e.libelleVirement};return t},t.prototype.ajouterCleAuRib=function(e){var t=this.obtenirRiceDepuisRibSansCle(e),r=this.saisieRiceService.riceKeyCalculator(t);return t.formatRicePourRib()+r},t.prototype.obtenirRiceDepuisRibSansCle=function(e){var t,r=e.substring(0,5),n=e.substring(5,10),i=e.substring(10,19);return t=this.saisieRiceService.formatteRICE(r,n,i)},t.prototype.demanderOuverture=function(){return null},t.prototype.setBadgeDemandeForcageOpposition=function(e){this.query.codeOptionAutorisation2="10"},t.prototype.setBadgeRefusForcageOpposition=function(e){this.query.codeOptionAutorisation2="90"},t.prototype.setBadgeDemandeForcageEpargne=function(e){this.query.codeOptionAutorisation="10"},t.prototype.setBadgeRefusForcageEpargne=function(e){this.query.codeOptionAutorisation="90"},t.prototype.ilYAUneDemandeAutorisation=function(){return"10"===this.query.codeOptionAutorisation||"10"===this.query.codeOptionAutorisation2},t}();t.AdapteurOuvertureProduit=i,t.app.service("ouvertureProduitService",n)}(r=t.gghoCommun||(t.gghoCommun={}))}(t=e.gestionEpargne||(e.gestionEpargne={}))}(myway||(myway={}));var myway;!function(e){var t;!function(e){var t;!function(e){"use strict";var t=function(){function e(e,t){this.$q=e,this.serviceAgentExtended=t,this.restServiceUrl="http://myway-ressources-dua.sigcesie.caisse-epargne.fr:6083/entretiencommercial-v1/resultatEntretien"}return e.prototype.enregistrerResultatCommercial=function(e,t,r){return this.serviceAgentExtended.sendRequest({url:this.restServiceUrl,data:this.creerResultatCommercialProduit(e,t,r),withHeaders:!0,method:MyWay.Services.MethodEnum.POST,responseType:MyWay.Services.ResponseTypeEnum.JSON,contentType:MyWay.Services.ContentTypeEnum.JSON})},e.prototype.creerResultatCommercialProduit=function(e,t,r){var n={identifiantPersonne:e,codeTypeFamilleResultat:"1",identifiantProduitService:t,codeNatureResultatCommercial:"0",codeTypeResultatCommercial:"4",codeTypeProduitService:"",indicRattachableCRE:"1",codeTypeProduitServiceGCP:"",codeOrigineFonds:0,montantResultatCommercial:r,codeModeGestionLivret:"",sousCodeProduitService:"",codeProduitCarte:"",codeModeFinancier:"",codeCaractereForfaitaireOffre:"",indicProduitServiceObligatoire:""};return n},e.$inject=["$q","serviceAgentExtended"],e}();e.ResultatCommercialService=t,e.app.service("resultatCommercialService",t)}(t=e.gghoCommun||(e.gghoCommun={}))}(t=e.gestionEpargne||(e.gestionEpargne={}))}(myway||(myway={}));var myway;!function(e){var t;!function(e){var t;!function(e){"use strict";var t=function(){function t(e,t){this.$q=e,this.serviceAgentExtended=t,this.restServiceUrl="http://myway-ressources-dua.sigcesie.caisse-epargne.fr:6083/cdvirementservice/v1/eligibiliteLivret"}return t.prototype.isCompteEligible=function(e,t,r,n){var i=r&&r.numeroCompteIBAN,o=n&&"FR76"+n.formatRicePourStructureEchange();return this.postEligibiliteLivret(i||o,e,t)},t.prototype.postEligibiliteLivret=function(t,r,n){var i=this.$q.defer(),o={codeCanalSepa:"PTU",numibanCompteEmetteur:t,codeSensEchange:"E",typeFonctionBriqueEligibilite:"V",codeBanqueCompteRecepteur:r,codeTypeProduitService:e.CodeTypeProduitsEnum.DEPOT_A_TERME,numEntiteTitulaireBeneficiaire:n,indicateurVirementPermanent:"N"};return this.serviceAgentExtended.sendRequest({url:this.restServiceUrl,data:o,withHeaders:!0,method:MyWay.Services.MethodEnum.POST,responseType:MyWay.Services.ResponseTypeEnum.JSON,contentType:MyWay.Services.ContentTypeEnum.JSON}).then(function(e){"O"===e.codeReponse?i.resolve(!0):i.reject(e.libelleReponse)})["catch"](function(e){i.reject(e.libelle)}),i.promise},t.$inject=["$q","serviceAgentExtended","serviceTrace"],t}();e.EligibiliteLivretService=t,e.app.service("eligibiliteLivretService",t)}(t=e.gghoCommun||(e.gghoCommun={}))}(t=e.gestionEpargne||(e.gestionEpargne={}))}(myway||(myway={}));var myway;!function(e){var t;!function(e){var t;!function(e){"use strict";var t=function(){function e(){}return e}();e.DonneeOuvertureDV=t}(t=e.gghoCommun||(e.gghoCommun={}))}(t=e.gestionEpargne||(e.gestionEpargne={}))}(myway||(myway={}));var myway;!function(e){var t;!function(e){var t;!function(e){"use strict";var t=function(){function e(){}return e}();e.OperationFinanciereDV=t;var r=function(){function e(){}return e}();e.DonneesProduitDATDV=r;var n=function(){function e(){}return e}();e.DonneesProduitQuadretoDV=n}(t=e.gghoCommun||(e.gghoCommun={}))}(t=e.gestionEpargne||(e.gestionEpargne={}))}(myway||(myway={}));var myway;!function(e){var t;!function(e){var t;!function(e){"use strict";var t=function(){function e(e,t,r){this.$q=e,this.enregistrerOpeFiDansDVService=t,this.enregistrerDonneeOuvertureDansDVService=r}return e.prototype.creerDonneesMDEC=function(e,t,r){var n=this.enregistrerOpeFiDansDVService.getVueMDECOPEFI(e,t),i=n.sections[0].champs.concat(r.sections[0].champs),o=new GestionGeneriqueOffres.Types.DossierDeVente.BlocMDEC;return o.sections[0]=new GestionGeneriqueOffres.Types.DossierDeVente.SectionMDEC,o.sections[0].champs=i,o.sections[0].titresSections=[],o.sections[0].titresSections.push({libelle:t.donneesProduit.produit.produitCaracteristique.libelleProduitService,vision:"3"}),o},e.prototype.creerDonneeMDECCat=function(e,t,r){var n=this.enregistrerDonneeOuvertureDansDVService.getVueMDECDonneeOuvertureCat(r,t),i=this.creerDonneesMDEC(e,t,n);return this.$q.when(i)},e.prototype.creerDonneeMDECQuadreto=function(e,t,r){var n=this.enregistrerDonneeOuvertureDansDVService.getVueMDECDonneeOuvertureQuadreto(r,t),i=this.creerDonneesMDEC(e,t,n);return this.$q.when(i)},e.$inject=["$q","enregistrerOpeFiDansDVService","enregistrerDonneeOuvertureDansDVService"],e}();e.BlocMDECDATService=t,e.app.service("blocMDECDATService",t)}(t=e.gghoCommun||(e.gghoCommun={}))}(t=e.gestionEpargne||(e.gestionEpargne={}))}(myway||(myway={}));var myway;!function(e){var t;!function(e){var t;!function(e){"use strict";var t=function(){function e(e,t){this.$q=e,this.serviceAgentExtended=t}return e.prototype.creerDossierDeVente=function(e,t){var r={};return r.donneesDeSauvegardeProduitService=t,r.donneesMDEC=e,this.$q.when(r)},e.$inject=["$q","serviceAgentExtended"],e}();e.CreerDossierDeVenteService=t,e.app.service("creerDossierDeVenteService",t)}(t=e.gghoCommun||(e.gghoCommun={}))}(t=e.gestionEpargne||(e.gestionEpargne={}))}(myway||(myway={}));var myway;!function(e){var t;!function(e){var t;!function(e){"use strict";var t=function(){function e(e,t){this.enregistrerOpeFiDansDVService=e,this.enregistrerDonneeOuvertureDansDVService=t}return e.prototype.creerDonneesSauvegardeProduitServiceDAT=function(e,t){
var r={operationFinanciereDV:this.enregistrerOpeFiDansDVService.creerDonneesSauvegardeOperationFinanciere(e)};return r.donneeProduitDatDV=this.enregistrerDonneeOuvertureDansDVService.enregisterDonneeProuitDansJsonData(t),r},e.$inject=["enregistrerOpeFiDansDVService","enregistrerDonneeOuvertureDansDVService"],e}();e.DonneesSauvegardeProduitServiceDATService=t,e.app.service("donneesSauvegardeProduitServiceDATService",t)}(t=e.gghoCommun||(e.gghoCommun={}))}(t=e.gestionEpargne||(e.gestionEpargne={}))}(myway||(myway={}));var myway;!function(e){var t;!function(e){var t;!function(e){"use strict";var t=function(){function e(e,t,r){this.$q=e,this.operationFinanciereService=t,this.numberFormatService=r}return e.prototype.enregisterDonneeProuitDansJsonData=function(e){var t=_.assign({},e.produit);return t.detenteur=e.detenteur,t},e.prototype.getVueMDECDonneeOuvertureCat=function(e,t){var r=new GestionGeneriqueOffres.Types.DossierDeVente.SectionMDEC;r.champs.push(new GestionGeneriqueOffres.Types.DossierDeVente.ChampsMDEC("Durée du CAT",this.calculDureeDat(new Date(e.produit.dateEcheanceContrat),new Date(e.produit.dateEffetContrat))+" an(s)","3")),r.champs.push(new GestionGeneriqueOffres.Types.DossierDeVente.ChampsMDEC("Date de fin du CAT",moment(e.produit.dateEcheanceContrat).format("DD/MM/YYYY").toString(),"2")),r.champs.push(new GestionGeneriqueOffres.Types.DossierDeVente.ChampsMDEC("Taux de rendement annuel net",this.numberFormatService.formatTaux(parseFloat(this.afficherTRAAN(e.produit.tauxActuarielNet))),"3"));var n=new GestionGeneriqueOffres.Types.DossierDeVente.BlocMDEC;return n.sections.push(r),n},e.prototype.getVueMDECDonneeOuvertureQuadreto=function(e,t){var r=new GestionGeneriqueOffres.Types.DossierDeVente.SectionMDEC;r.champs.push(new GestionGeneriqueOffres.Types.DossierDeVente.ChampsMDEC("Durée du Quadreto",this.calculDureeDat(new Date(e.produit.dateEcheanceContrat),new Date(e.produit.dateEffetContrat))+" an(s)","3")),r.champs.push(new GestionGeneriqueOffres.Types.DossierDeVente.ChampsMDEC("Date de fin du Quadreto",moment(e.produit.dateEcheanceContrat).format("DD/MM/YYYY").toString(),"2"));var n="";void 0!==e.produit.tauxActuarielNet&&null!==e.produit.tauxActuarielNet&&(n=this.numberFormatService.formatTaux(parseFloat(this.afficherTRAAN(e.produit.tauxActuarielNet))).toString(),r.champs.push(new GestionGeneriqueOffres.Types.DossierDeVente.ChampsMDEC("Taux de rendement annuel net",n,"3"))),void 0!==e.produit.codePeriodiciteRevenus&&null!==e.produit.codePeriodiciteRevenus&&r.champs.push(new GestionGeneriqueOffres.Types.DossierDeVente.ChampsMDEC("Montant du revenu trimestriel",this.numberFormatService.formatMontant(e.produit.mtRevenuNetSouhaite).toString(),"3")),r.champs.push(new GestionGeneriqueOffres.Types.DossierDeVente.ChampsMDEC("Valeur nette PEL à échéance",this.numberFormatService.formatMontant(e.produit.montantNetPrevisionnelEcheancePEL).toString(),"3"));var i=new GestionGeneriqueOffres.Types.DossierDeVente.BlocMDEC;return i.sections.push(r),i},e.prototype.afficherTRAAN=function(e){var t;return t=null===e||void 0===e||0===e?"Non Calculé":e.toString()},e.prototype.calculDureeDat=function(e,t){return moment(moment(e).format("YYYY-MM-DD")).diff(moment(moment(t).format("YYYY-MM-DD")),"years",!0).toFixed(0).toString()},e.$inject=["$q","operationFinanciereService","numberFormatService"],e}();e.EnregistrerDonneeOuvertureDansDVService=t,e.app.service("enregistrerDonneeOuvertureDansDVService",t)}(t=e.gghoCommun||(e.gghoCommun={}))}(t=e.gestionEpargne||(e.gestionEpargne={}))}(myway||(myway={}));var myway;!function(e){var t;!function(e){var t;!function(e){"use strict";var t=function(){function t(e,t,r,n){this.$q=e,this.operationFinanciereService=t,this.epargneCommunService=r,this.numberFormatService=n}return t.prototype.creerDonneesSauvegardeOperationFinanciere=function(t){void 0!==t.compteVirementInterneSelectionne&&null!==t.compteVirementInterneSelectionne&&(t.client.numeroPersonne=t.compteVirementInterneSelectionne.identifiantPersonne);var r=new e.OperationFinanciereDV;return r.operationFinanciere=this.operationFinanciereService.creationObjetChoixUtilisateursParObjetOpeFi(t),"06"===r.operationFinanciere.codeModeFinancier&&(!r.operationFinanciere.modeFiVirInterne.numeroRice||23!==r.operationFinanciere.modeFiVirInterne.numeroRice.length&&21!==r.operationFinanciere.modeFiVirInterne.numeroRice.length||_.endsWith(r.operationFinanciere.modeFiVirInterne.numeroRice,"null"))&&(r.operationFinanciere.modeFiVirInterne=null),r},t.prototype.getVueMDECOPEFI=function(e,t){var r=new GestionGeneriqueOffres.Types.DossierDeVente.SectionMDEC,n=e.segmentPrvRio.montantGlobalOperation.toString(),i=this.numberFormatService.formatMontant(parseFloat(n))+" "+e.segmentPrvRio.codeDeviseMontantOperation;if(r.champs.push(new GestionGeneriqueOffres.Types.DossierDeVente.ChampsMDEC("Versement initial",i,"2")),r.champs.push(new GestionGeneriqueOffres.Types.DossierDeVente.ChampsMDEC("Mode financier",e.modeFinancier.LIJMMI.toString(),"2")),r.champs.push(new GestionGeneriqueOffres.Types.DossierDeVente.ChampsMDEC("Montant du versement initial",i,"1")),r.champs.push(new GestionGeneriqueOffres.Types.DossierDeVente.ChampsMDEC("Mode de versement",e.modeFinancier.LIJMMI.toString(),"1")),"06"===e.modeFinancier.CTGXM1){var o=void 0;e.compteVirementInterneSelectionne?(o=e.compteVirementInterneSelectionne.libelleProduit+" - "+this.epargneCommunService.formatCompte(e.compteVirementInterneSelectionne.riceContrat,!1)+" - "+e.compteVirementInterneSelectionne.libelleEntiteTitulaire,r.champs.push(new GestionGeneriqueOffres.Types.DossierDeVente.ChampsMDEC("Compte à débiter",o,"3"))):null!==e.segmentPrvRio.S_PRVRIOUGR[0].numeroCompte&&void 0!==e.segmentPrvRio.S_PRVRIOUGR[0].numeroCompte&&""!==e.segmentPrvRio.S_PRVRIOUGR[0].numeroCompte&&(o=this.epargneCommunService.formatCompte(e.segmentPrvRio.S_PRVRIOUGR[0].numeroCompte,!0),r.champs.push(new GestionGeneriqueOffres.Types.DossierDeVente.ChampsMDEC("Compte à débiter",o,"3")))}if("01"===e.modeFinancier.CTGXM1){var s=e.segmentPrvRio.codeDeviseMontantOperation,a=e.segmentPrvRio.S_BILLETERIE.nombreCoupure.b5+" billets 5 "+s+" "+e.segmentPrvRio.S_BILLETERIE.nombreCoupure.b10+" billets 10 "+s+" "+e.segmentPrvRio.S_BILLETERIE.nombreCoupure.b20+" billets 20 "+s+" "+e.segmentPrvRio.S_BILLETERIE.nombreCoupure.b50+" billets 50 "+s+" "+e.segmentPrvRio.S_BILLETERIE.nombreCoupure.b100+" billets 100 "+s+" "+e.segmentPrvRio.S_BILLETERIE.nombreCoupure.b200+" billets 200 "+s+" "+e.segmentPrvRio.S_BILLETERIE.nombreCoupure.b500+" billets 500 "+s;r.champs.push(new GestionGeneriqueOffres.Types.DossierDeVente.ChampsMDEC("Billetterie",a,"3"))}"07"===e.modeFinancier.CTGXM1&&angular.isDefined(e.referenceEnveloppe)&&null!==e.referenceEnveloppe&&r.champs.push(new GestionGeneriqueOffres.Types.DossierDeVente.ChampsMDEC("Référence SAC",e.referenceEnveloppe.numeroReferenceEnveloppe,"2")),"02"===e.modeFinancier.CTGXM1&&("000"===e.segmentPrvRio.nombreJourReserveEncaissement?r.champs.push(new GestionGeneriqueOffres.Types.DossierDeVente.ChampsMDEC("Délai d’encaissement","Non","2")):r.champs.push(new GestionGeneriqueOffres.Types.DossierDeVente.ChampsMDEC("Délai d’encaissement",e.segmentPrvRio.nombreJourReserveEncaissement+" jours","2"))),"00"===e.modeFinancier.CTGXM1&&(r.champs.push(new GestionGeneriqueOffres.Types.DossierDeVente.ChampsMDEC("Famille OD",e.segmentPrjo.codeFamilleOD+" - "+e.segmentPrjo.libelleFamilleOD,"2")),r.champs.push(new GestionGeneriqueOffres.Types.DossierDeVente.ChampsMDEC("Type OD",e.segmentPrjo.libelleTypeOD+" - "+e.segmentPrjo.libelleTypeOD,"2")));var u=new GestionGeneriqueOffres.Types.DossierDeVente.BlocMDEC;return u.sections.push(r),u},t.$inject=["$q","operationFinanciereService","epargneCommunService","numberFormatService"],t}();e.EnregistrerOpeFiDansDVService=t,e.app.service("enregistrerOpeFiDansDVService",t)}(t=e.gghoCommun||(e.gghoCommun={}))}(t=e.gestionEpargne||(e.gestionEpargne={}))}(myway||(myway={}));var myway;!function(e){var t;!function(e){var t;!function(e){"use strict";var t=function(){function e(){}return e.prototype.toLocalString=function(e){return e?e.toISOString():null},e.prototype.calculateAge=function(e){var t=Date.now()-e.getTime(),r=new Date(t);return Math.abs(r.getUTCFullYear()-1970)},e.prototype.formatCompte=function(e,t){if(void 0===e)return"";for(var r="",n=0;n<e.length;n++)(5===n||10===n)&&(r+=" "),21===n&&t&&(r+=" "),r+=e[n];return r},e.$inject=[],e}();e.EpargneCommunService=t,e.app.service("epargneCommunService",t)}(t=e.gghoCommun||(e.gghoCommun={}))}(t=e.gestionEpargne||(e.gestionEpargne={}))}(myway||(myway={}));