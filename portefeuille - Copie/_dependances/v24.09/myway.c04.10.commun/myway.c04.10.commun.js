/**
 * Généré par : SIGCESIE\ct-tfsbuild
 * Changeset TFS : C600895
 * Etiquette TFS : commun-v21.05_20210310.3
 * Déclenchement : Manual
 */
var myway;!function(e){var t;!function(e){var t;!function(e){"use strict";e.communModule=angular.module("myway.c0410.commun",["myway.comInterdomaine","myway.comOpesFinancieres"])}(t=e.commun||(e.commun={}))}(t=e.c0410||(e.c0410={}))}(myway||(myway={}));var __extends=this&&this.__extends||function(e,t){function i(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)},myway;!function(e){var t;!function(t){var i;!function(t){"use strict";var i=function(){function e(e){e&&(this.identifiant=e)}return e}();t.ObjetGenerique=i;var r=function(){function e(e){this._nomChamps=e}return e.prototype.getMessageErreur=function(){return this._nomChamps+" n'a pas été renseigné alors qu'il est obligatoire"},e}();t.StatutChampsFormulaire=r;var n=function(e){function t(t){e.call(this,t)}return __extends(t,e),t.prototype.estValideChamps=function(e){return angular.isDefined(e)&&null!==e&&""!==e},t.prototype.estValideFormulaire=function(){return!1},t.prototype.getInformationsChampsInvalidesFormulaire=function(){return[]},t}(i);t.Formulaire=n;var o=function(e){function t(i,r,n){e.call(this,t.IDENTIFIANT_DONNEES_COMPTE),this.numeroDeCompte=i,this.codeEtablissement=r?r:null,this.codeGuichet=n?n:null}return __extends(t,e),t.IDENTIFIANT_DONNEES_COMPTE="DONNEES_COMPTE",t}(e.c0410.commun.ObjetGenerique);t.DonneesCompte=o}(i=t.commun||(t.commun={}))}(t=e.c0410||(e.c0410={}))}(myway||(myway={}));var myway;!function(e){var t;!function(e){var t;!function(e){var t;!function(t){"use strict";var i=function(e){function t(t,i){void 0===i&&(i=!1),e.call(this,t),this.isMessageErreurPersonnalise=i}return __extends(t,e),t.prototype.getMessageErreur=function(){return this.getLibelleMessageErreur(this._nomChamps)},t.prototype.getLibelleMessageErreur=function(e){return this.isMessageErreurPersonnalise?e?e:this._nomChamps:this._nomChamps+" n'a pas été renseigné alors qu'il est obligatoire"},t}(e.StatutChampsFormulaire);t.StatutChampsFormulaireExtended=i;var r=function(t){function i(e){t.call(this,e),this.listeChamps=[],this._estModifie=!1}return __extends(i,t),i.prototype.addChamps=function(e,t,i,r){void 0===i&&(i=null),void 0===r&&(r=!1);var o=new n(e,t,i,r);this.listeChamps.push(o)},i.prototype.getChamps=function(e){return _.find(this.listeChamps,{id:e})},i.prototype.getValeurChamps=function(e){var t=this.getChamps(e);return t?t.getValeur():null},i.prototype.setValeurChamps=function(e,t){var i=this.getChamps(e);i&&i.setValeur(t)},i.prototype.initValeurChamps=function(e,t){var i=this.getChamps(e);i&&i.initValeur(t)},i.prototype.estValideChamps=function(e){return angular.isDefined(e)&&null!==e&&""!==e},i.prototype.estValideFormulaire=function(){if(0===this.listeChamps.length)return!1;var e=!0;return _.forIn(this.listeChamps,function(t){e=e&&t.isValide()}),e},i.prototype.getInformationsChampsInvalidesFormulaire=function(){for(var t=[],i=0;i<arguments.length;i++)t[i-0]=arguments[i];var r=[];return _.forIn(this.listeChamps,function(t){t.isValide()||r.push(new e.StatutChampsFormulaire(t.getLibelle()))}),r},Object.defineProperty(i.prototype,"estModifie",{get:function(){return this._estModifie||void 0!==_.find(this.listeChamps,{estModifie:!0})},set:function(e){this._estModifie=e},enumerable:!0,configurable:!0}),i}(e.ObjetGenerique);t.FormulaireExtended=r;var n=function(){function e(e,t,i,r){void 0===r&&(r=!1),this.id=e,this.libelle=t,this.valeur=i,this.estModifie=r}return e.prototype.isValide=function(){return angular.isDefined(this.valeur)&&null!==this.valeur&&""!==this.valeur.toString()},e.prototype.initValeur=function(e){this.valeur=e},e.prototype.setValeur=function(e){this.valeur=e,this.estModifie=!0},e.prototype.getValeur=function(){return this.valeur},e.prototype.getLibelle=function(){return this.libelle},e.prototype.setModifie=function(e){this.estModifie=e},e}();t.ChampsFormulaire=n}(t=e.form||(e.form={}))}(t=e.commun||(e.commun={}))}(t=e.c0410||(e.c0410={}))}(myway||(myway={}));var myway;!function(e){var t;!function(e){var t;!function(e){"use strict"}(t=e.commun||(e.commun={}))}(t=e.c0410||(e.c0410={}))}(myway||(myway={}));var myway;!function(e){var t;!function(e){var t;!function(e){"use strict"}(t=e.commun||(e.commun={}))}(t=e.c0410||(e.c0410={}))}(myway||(myway={}));var myway;!function(e){var t;!function(e){var t;!function(e){"use strict";var t=function(){function e(){}return e.getCoupure500=function(e){var t="";return 0!==e.b500&&(t+=e.b500+" billets 500€",(0!==e.b200||0!==e.b100||0!==e.b50||0!==e.b20||0!==e.b10||0!==e.b5)&&(t+=", ")),t},e.getCoupure200=function(e){var t="";return 0!==e.b200&&(t+=e.b200+"billets 200€",(0!==e.b100||0!==e.b50||0!==e.b20||0!==e.b10||0!==e.b5)&&(t+=", ")),t},e.getCoupure100=function(e){var t="";return 0!==e.b100&&(t+=e.b100+"billets 100€",(0!==e.b50||0!==e.b20||0!==e.b10||0!==e.b5)&&(t+=", ")),t},e.getCoupure50=function(e){var t="";return 0!==e.b50&&(t+=e.b50+"billets 50€",(0!==e.b20||0!==e.b10||0!==e.b5)&&(t+=", ")),t},e.getCoupure20=function(e){var t="";return 0!==e.b20&&(t+=e.b20+"billets 20€",(0!==e.b10||0!==e.b5)&&(t+=", ")),t},e.getCoupure10=function(e){var t="";return 0!==e.b10&&(t+=e.b10+"billets 10€",0!==e.b5&&(t+=", ")),t},e.getCoupure5=function(e,t){var i="";return 0!==e.b5&&(i+=e.b5+"billets 5€",0!==t&&(i+=", ")),i},e.getBilleterie=function(t){var i="(";return i+=e.getCoupure500(t.nombreCoupure)+e.getCoupure200(t.nombreCoupure)+e.getCoupure100(t.nombreCoupure)+e.getCoupure50(t.nombreCoupure)+e.getCoupure20(t.nombreCoupure)+e.getCoupure10(t.nombreCoupure)+e.getCoupure5(t.nombreCoupure,t.monnaieSansBillet),0!==t.monnaieSansBillet&&(i+=t.monnaieSansBillet+"sans billets"),i+" )"},e}();e.GestionnaireBilleterie=t}(t=e.commun||(e.commun={}))}(t=e.c0410||(e.c0410={}))}(myway||(myway={}));var myway;!function(e){var t;!function(e){var t;!function(e){"use strict";var t=function(){function e(){}return e.QUINZAINE={codePeriodicite:"Q",libellePeriodicite:"Quinzaine",nbOperationsAnnuelles:24},e.MENSUELLE={codePeriodicite:"M",libellePeriodicite:"Mensuelle",nbOperationsAnnuelles:12,nbMoisPeriodicite:1},e.TRIMESTRIELLE={codePeriodicite:"T",libellePeriodicite:"Trimestrielle",nbOperationsAnnuelles:4,nbMoisPeriodicite:3},e.SEMESTRIELLE={codePeriodicite:"S",libellePeriodicite:"Semestrielle",nbMoisPeriodicite:6},e.BIMENSUELLE={codePeriodicite:"B",libellePeriodicite:"Bi-mensuelle"},e.HEBDOMADAIRE={codePeriodicite:"H",libellePeriodicite:"Hebdomadaire"},e.UNMOIS={codePeriodicite:"1",libellePeriodicite:"1",nbMoisPeriodicite:1},e.DEUXMOIS={codePeriodicite:"2",libellePeriodicite:"2",nbMoisPeriodicite:2},e.TROIXMOIS={codePeriodicite:"3",libellePeriodicite:"3",nbMoisPeriodicite:3},e.QUATREMOIS={codePeriodicite:"4",libellePeriodicite:"4",nbMoisPeriodicite:4},e.CINQMOIS={codePeriodicite:"5",libellePeriodicite:"5",nbMoisPeriodicite:5},e.SIXMOIS={codePeriodicite:"6",libellePeriodicite:"6",nbMoisPeriodicite:6},e}();e.Periodicite=t}(t=e.commun||(e.commun={}))}(t=e.c0410||(e.c0410={}))}(myway||(myway={}));var myway;!function(e){var t;!function(e){var t;!function(e){"use strict";var t=function(){function e(){}return e.OUVERTURE="OU",e.AVENANT="AV",e.CLOTURE="CL",e.MODE_PRECEDENT="1",e}();e.ProduitServiceConstantes=t;var i=function(){function e(e,t,i,r,n){var o=this;this.$q=e,this.$scope=t,this.compteBddCommunService=i,this.espaceGlobalService=r,this.service=n,this.pointEntreeFonctionSauvegarde=function(){return o.sauvegarderDossierDeVente()},this.constructorTimer=n.initTimer("constructeur"),this.idegps=this.getIdegps(),this.psName=this.contexte.donneesProduit.produit.produitCaracteristique.libelleProduitService,this.determinerMode(this.codeActeGestion.substring(0,2)),this.enLectureSeule=this.contexte.modeAcces===GestionGeneriqueOffres.Types.ModeAcces.Lecture&&this.contexte.modeAffichage===GestionGeneriqueOffres.Types.ModeAffichage.Personnalisation,this.identifiantFormulaire=this.idBloc.concat(this.idegps.toString()),console.log(this.getLogMessage("constructor() : identifiantFormulaire  "),this.identifiantFormulaire),console.log(this.getLogMessage("constructor() : contexte  "),this.contexte),this.contexte.indicateurDossierVenteAutorise&&this.contexte.donneesGeneriques&&this.contexte.donneesGeneriques[0]?(this.donneesSauvegarde=this.contexte.donneesGeneriques[0].donneesDeSauvegardeProduitService,console.log(this.getLogMessage("constructor() : donneesSauvegarde "),this.donneesSauvegarde)):console.log(this.getLogMessage("constructor() : PAS DE DONNEES GENERIQUES"))}return e.prototype.getIdegps=function(){return this.contexte.donneesProduit.produit.produitCaracteristique.identifiantProduitService},e.prototype.determinerMode=function(e){e===t.AVENANT?(console.log(this.getLogMessage("determinerMode : MODIFICATION  "),e),this.enModification=!0):e===t.OUVERTURE?(console.log(this.getLogMessage("determinerMode : OUVERTURE  "),e),this.enOuverture=!0):e===t.CLOTURE&&(console.log(this.getLogMessage("determinerMode : CLOTURE  "),e),this.enCloture=!0)},e.prototype.initialiserComposant=function(){var e=this,t=this.$q.defer();return this.initialiser().then(function(){if(e.contexte.modeAffichage===GestionGeneriqueOffres.Types.ModeAffichage.Recapitulatif&&!e.formulaire&&e.contexte.indicateurDossierVenteAutorise){console.warn(e.getLogMessage("Affichage en mode Recap mais formulaire inexistant => application du patch avec rechargerRecapVPC de manière générique"));var i=e.rechargerRecapVPC();i&&i.then?i.then(function(){t.resolve()}):t.resolve()}else t.resolve()}),t.promise.then(function(){e.chargementTermine()}),t.promise},e.prototype.initialiser=function(){return this.enOuverture?this.initialiserEnOuverture():this.enModification?this.initialiserEnAvenant():this.enCloture?this.initialiserEnCloture():void 0},e.prototype.initPointEntree=function(){this.contexte.donneesProduit.pointsEntree.validerFormulaire=this.validerDonnees,this.miseEnGestionPostProd&&(this.contexte.donneesProduit.pointsEntree.mettreEnGestionPostProducteur=this.miseEnGestionPostProd),this.miseEnGestion&&(this.contexte.donneesProduit.pointsEntree.mettreEnGestion=this.miseEnGestion),this.demanderDebranchementPreEditiqueVpc&&(this.contexte.donneesProduit.pointsEntree.demanderDebranchementPreEditiqueVpc=this.demanderDebranchementPreEditiqueVpc.bind(this)),this.contexte.donneesProduit.pointsEntree.sauvegarderDossierDeVente=this.pointEntreeFonctionSauvegarde,this.contexte.donneesProduit.pointsEntree.getTimers=this.service.getTimers},e.prototype.chargementTermine=function(){this.service.updateTimer(this.constructorTimer),this.compteBddCommunService.notifierChargementTermine(this.$scope,this.idBloc)},e.prototype.hasModifieChamps=function(e){return this.espaceGlobalService.hasModifieChamps(e,this.formulaireRecapAvenant,this.formulaire)},e.prototype.afficherDirectiveEnPerso=function(){return!this.enRecapitulatif&&!this.enCloture},e.prototype.afficherDirectiveEnRecap=function(){return this.enRecapitulatif},e.prototype.sauvegarderDossierDeVente=function(){!this.contexte.donneesProduit.estModifie.valeur&&this.formulaire&&this.formulaire.estModifie&&this.enModification&&(this.contexte.donneesProduit.estModifie.valeur=!0);var e={};return this.doitSauvegarderDonneesMDEC()&&(e.donneesMDEC=this.getVueMDEC()),e.donneesDeSauvegardeProduitService=this.getDonneesSauvegardeProduitService(),console.log(this.getLogMessage("sauvergarderDossierDeVente() :  dossierDeVente "),JSON.stringify(e)),this.$q.when(e)},e.prototype.doitSauvegarderDonneesMDEC=function(){return this.formulaire&&this.formulaire.estModifie||this.contexte.donneesProduit.repris},e.prototype.rechargerRecapVPC=function(){var e=this,t=this.$q.defer();if(this.donneesSauvegarde)if(this.restaurerDossierDeVente){var i=this.restaurerDossierDeVente();i&&i.then?i.then(function(){e.espaceGlobalService.enregistrerObjetGenerique(e.formulaire),t.resolve(!0)}):(this.espaceGlobalService.enregistrerObjetGenerique(this.formulaire),t.resolve(!0))}else console.error(this.getLogMessage("restaurerDossierDeVente n'est pas implémenté !")),t.resolve(!1);else{console.log(this.getLogMessage("rechargerRecapVPC() : ERROR, PAS DE DONNEES GENERIQUES"));var r=[];r.push(new GestionGeneriqueOffres.Types.ErreurGestionGeneriqueOffre(GestionGeneriqueOffres.Types.NiveauErreur.ErreurFatale,1,"Erreur de rechargement du dossier de vente: impossible de recharger "+this.psName+" en recapitulatif. Données de sauvegarde manquantes")),this.$scope.$emit("CSPR_EMISSION_ERREUR#"+this.idBloc,r),t.resolve(!0)}return t.promise},e.prototype.getLogMessage=function(e){return"XXXX PSAbstractControleur ["+this.idegps+"] "+this.psName+" => "+e},e.prototype.getCodeActeGestionComplet=function(){var e=this,t=_.find(this.contexte.donneesProduit.reference.listeActesGestion,function(t){return-1!==t.indexOf(e.codeActeGestion)});return t},e}();e.ProduitServiceControleur=i;var r=function(e){function i(){e.apply(this,arguments)}return __extends(i,e),i.prototype.determinerMode=function(e){e===t.OUVERTURE?(console.log("XXXX PSControleur =>  determinerMode : OUVERTURE  ",e),this.enOuverture=!0):e===t.CLOTURE&&(console.log("XXXX PSControleur =>  determinerMode : CLOTURE  ",e),this.enCloture=!0)},i.prototype.initialiserEnOuverture=function(){return this.init()},i.prototype.initialiserEnAvenant=function(){return this.init()},i.prototype.initialiserEnCloture=function(){return this.init()},i.prototype.init=function(){return this.contexte.donneesProduit.invisible.valeur=!0,this.$q.when(!0)},i}(i);e.EmptyProduitServiceControleur=r}(t=e.commun||(e.commun={}))}(t=e.c0410||(e.c0410={}))}(myway||(myway={}));var myway;!function(e){var t;!function(e){var t;!function(e){"use strict";function t(){return{templateUrl:"vues/produit-service-vue.html",restrict:"E",scope:{lectureSeule:"=",id:"@"},transclude:!0}}e.mwProduitService=t,e.communModule.directive("mwProduitService",t)}(t=e.commun||(e.commun={}))}(t=e.c0410||(e.c0410={}))}(myway||(myway={}));var myway;!function(e){var t;!function(e){var t;!function(e){"use strict";var t=function(){function e(){var e=this;this.getTimers=function(){return e.timers},this.timers=[]}return e.prototype.initTimer=function(e,t,i){var r={libelle:e,timeStart:(new Date).getTime(),timeEnd:null,duration:0};return i&&(r.verbe=t,r.noyau=i.substring(0,i.lastIndexOf("/")),r.noyau=r.noyau.substring(r.noyau.lastIndexOf("/")+1),r.ressource=i.substring(i.lastIndexOf("/")+1)),this.timers.push(r),r},e.prototype.updateTimer=function(e){return e.timeEnd=(new Date).getTime(),e.duration=(e.timeEnd-e.timeStart)/1e3,e},e}();e.ProduitService=t}(t=e.commun||(e.commun={}))}(t=e.c0410||(e.c0410={}))}(myway||(myway={}));var myway;!function(e){var t;!function(e){var t;!function(e){"use strict"}(t=e.commun||(e.commun={}))}(t=e.c0410||(e.c0410={}))}(myway||(myway={}));var myway;!function(e){var t;!function(e){var t;!function(e){"use strict";var t=function(){function e(e){this._identifiantPersonne=e.identifiantPersonne,this._codeTypeFamilleResultat=e.codeTypeFamilleResultat,this._identifiantProduitService=e.identifiantProduitService,this._codeNatureResultatCommercial=e.codeNatureResultatCommercial,this._codeTypeResultatCommercial=e.codeTypeResultatCommercial,this._codeTypeProduitService=e.codeTypeProduitService,this._indicRattachableCRE=e.indicRattachableCRE,this._codeTypeProduitServiceGCP=e.codeTypeProduitServiceGCP,this._codeOrigineFonds=e.codeOrigineFonds,this._montantResultatCommercial=e.montantResultatCommercial,this._codeModeGestionLivret=e.codeModeGestionLivret,this._sousCodeProduitService=e.sousCodeProduitService,this._codeProduitCarte=e.codeProduitCarte,this._codeModeFinancier=e.codeModeFinancier,this._codeCaractereForfaitaireOffre=e.codeCaractereForfaitaireOffre,this._indicProduitServiceObligatoire=e.indicProduitServiceObligatoire}return Object.defineProperty(e.prototype,"identifiantPersonne",{get:function(){return this._identifiantPersonne},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"codeTypeFamilleResultat",{get:function(){return this._codeTypeFamilleResultat},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"identifiantProduitService",{get:function(){return this._identifiantProduitService},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"codeNatureResultatCommercial",{get:function(){return this._codeNatureResultatCommercial},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"codeTypeResultatCommercial",{get:function(){return this._codeTypeResultatCommercial},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"codeTypeProduitService",{get:function(){return this._codeTypeProduitService},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"indicRattachableCRE",{get:function(){return this._indicRattachableCRE},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"codeTypeProduitServiceGCP",{get:function(){return this._codeTypeProduitServiceGCP},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"codeOrigineFonds",{get:function(){return this._codeOrigineFonds},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"montantResultatCommercial",{get:function(){return this._montantResultatCommercial},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"codeModeGestionLivret",{get:function(){return this._codeModeGestionLivret},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"sousCodeProduitService",{get:function(){return this._sousCodeProduitService},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"codeProduitCarte",{get:function(){return this._codeProduitCarte},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"codeModeFinancier",{get:function(){return this._codeModeFinancier},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"codeCaractereForfaitaireOffre",{get:function(){return this._codeCaractereForfaitaireOffre},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"indicProduitServiceObligatoire",{get:function(){return this._indicProduitServiceObligatoire},enumerable:!0,configurable:!0}),e}();e.ResultatsCommerciaux=t}(t=e.commun||(e.commun={}))}(t=e.c0410||(e.c0410={}))}(myway||(myway={}));var myway;!function(e){var t;!function(e){var t;!function(e){"use strict";var t=function(){function e(){this.blocs=[]}return e}();e.DonneesMDEC=t;var i=function(){function e(){this.sections=[]}return e}();e.BlocMDEC=i;var r=function(){function e(){this.champs=[]}return e}();e.SectionMDEC=r;var n=function(){function e(e,t){this.libelle=e,this.valeur=t}return e}();e.ChampsMDEC=n}(t=e.commun||(e.commun={}))}(t=e.c0410||(e.c0410={}))}(myway||(myway={}));var myway;!function(e){var t;!function(e){var t;!function(e){"use strict";var t=function(){function e(e,t,i){this.serviceAgentExtended=e,this.$q=t,this.serviceTrace=i,this._listeRequeteEncours=[],this.cacheConstantes=[],this._listePromise=[]}return e.prototype.notifierChargementTermine=function(e,t){e.$emit("CSPR_CHARGEMENT_EFFECTUE#"+t)},e.prototype.filtrerReferencesProduit=function(e){var t=e.donneesProduit.detenteur,i=e.donneesProduit.produit.produitCaracteristique.identifiantProduitService;return _.find(e.referencesProduits,function(e){return e.identifiantProduitService===i&&e.detenteur===t})},e.prototype.CompteRenduMiseEnGestionSansModifier=function(){var e=[];return e.push(new GestionGeneriqueOffres.Types.ErreurGestionGeneriqueOffre(GestionGeneriqueOffres.Types.NiveauErreur.Ok,0,"")),this.$q.when(new GestionGeneriqueOffres.Types.CompteRenduMiseEnGestion(e))},e.prototype.getDonneesDelocalisees=function(e,t,i){var r=this,n=this.$q.defer(),o=e+"-"+t,s="donneeDelocalisee-"+o,u=this._listeRequeteEncours.filter(function(e){return e[0]===s})[0];if(u&&u.length)console.log("Requête déjà en cours : "+s),n.resolve(u[1]);else if(this.cacheConstantes.filter(function(e){return e.id===o}).length)console.log("Récupération des données depuis le cache : "+o),n.resolve(this.cacheConstantes[s]);else{console.log("Création de la requête DonneesDelocalisees : "+o);var c=this.serviceAgentExtended.DonneesDelocalisees.getDonneesDelocalisees(e,t);c.then(function(e){r.cacheConstantes.push(e),r.finRequeteEncours(s),n.resolve(e)})["catch"](function(e){var t="getInformationsInitialisationBadTablesDelocalisees: impossible de lire les données délocalisées, blocage: "+e.libelle;r.serviceTrace.error(t,e),r.finRequeteEncours(s),n.reject(e)}),this.ajouterRequeteEncours(s,c,i)}return n.promise},e.prototype.finRequeteEncours=function(e){var t=this._listeRequeteEncours.indexOf(e);-1!==t&&this._listeRequeteEncours.splice(t,1)},e.prototype.ajouterRequeteEncours=function(e,t,i){this._listeRequeteEncours.push([e,t||null])},e.prototype.existRequeteEncours=function(e){return-1===_.indexOf(this._listeRequeteEncours,e)?!1:!0},e.prototype.stockerPromise=function(e,t){var i=_.find(this._listePromise,t.id);angular.isUndefined(i)&&(this._listePromise.push(t),console.log("=>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>> On stocke la promise",t))},e.prototype.getPromise=function(e,t){var i=e+"-"+JSON.stringify(t),r=_.find(this._listePromise,{id:i});return angular.isUndefined(r)&&(r=null),console.log("=>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>> On recupere la promise",r),r},e.prototype.genererIdPromise=function(e,t){var i=e+"-"+JSON.stringify(t);return i},e.$inject=["serviceAgentExtended","$q","serviceTrace"],e}();e.CompteBddCommunService=t,e.communModule.service("compteBddCommunService",t)}(t=e.commun||(e.commun={}))}(t=e.c0410||(e.c0410={}))}(myway||(myway={}));var myway;!function(e){var t;!function(e){var t;!function(e){"use strict";var t=function(){function e(){this._servicePopup=!1}return Object.defineProperty(e.prototype,"typeService",{get:function(){return this._typeService},set:function(e){this._typeService=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"servicePopup",{get:function(){return this._servicePopup},set:function(e){this._servicePopup=e},enumerable:!0,configurable:!0}),e}();e.DonneesBadService=t,e.communModule.service("donneesBadService",t)}(t=e.commun||(e.commun={}))}(t=e.c0410||(e.c0410={}))}(myway||(myway={}));var myway;!function(e){var t;!function(e){var t;!function(e){"use strict";var t=function(){function e(){}return Object.defineProperty(e.prototype,"codeEtablissement",{get:function(){return this._codeEtablissement},set:function(e){this._codeEtablissement=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"identifiantProduitService",{get:function(){return this._identifiantProduitService},set:function(e){this._identifiantProduitService=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"indicateurEngagementDom",{get:function(){return this._indicateurEngagementDom},set:function(e){this._indicateurEngagementDom=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"montantEngagementDom",{get:function(){return this._montantEngagementDom},set:function(e){this._montantEngagementDom=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"indicateurEngagementEpargne",{get:function(){return this._indicateurEngagementEpargne},set:function(e){this._indicateurEngagementEpargne=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"montantEngagementEpargne",{get:function(){return this._montantEngagementEpargne},set:function(e){this._montantEngagementEpargne=e},enumerable:!0,configurable:!0}),e}();e.DonneesEngagementClientService=t,e.communModule.service("donneesEngagementClientService",t)}(t=e.commun||(e.commun={}))}(t=e.c0410||(e.c0410={}))}(myway||(myway={}));var myway;!function(e){var t;!function(e){var t;!function(e){"use strict";var t=function(){function e(){this._montantEngagement=0,this._periodicite=1}return Object.defineProperty(e.prototype,"montantEngagement",{get:function(){return this._montantEngagement},set:function(e){this._montantEngagement=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"periodicite",{get:function(){return this._periodicite},set:function(e){this._periodicite=e},enumerable:!0,configurable:!0}),e}();e.DonneesEngagementDomService=t,e.communModule.service("donneesEngagementDomService",t)}(t=e.commun||(e.commun={}))}(t=e.c0410||(e.c0410={}))}(myway||(myway={}));var myway;!function(e){var t;!function(t){var i;!function(t){"use strict";var i=function(e){function t(t){e.call(this),this.serviceAgentExtended=t,this.restServiceUrl="http://myway-ressources-dua.sigcesie.caisse-epargne.fr:6083/contratcarte/v1/libreServiceEcureuil/",this._listeRequeteEncours=[]}return __extends(t,e),t.prototype.recupererLibreServiceEcureuil=function(e,t,i){var r=this;this.ajouterRequeteEncours("recupererLibreServiceEcureuil");var n=this.initTimer("recupererLibreServiceEcureuil","GET",this.restServiceUrl);return this.serviceAgentExtended.sendRequest({url:this.restServiceUrl,params:{codeEtablissementBanque:e,personneEnRelation:t,dateNaissancePersonne:this.toLocalString(i)},withHeaders:!0,method:MyWay.Services.MethodEnum.GET}).then(function(e){return r.updateTimer(n),r.finRequeteEncours("recupererLibreServiceEcureuil"),e})["finally"](function(){r.finRequeteEncours("recupererLibreServiceEcureuil")})},t.prototype.creerLibreServiceEcureuil=function(e,t,i){return this.serviceAgentExtended.sendRequest({url:this.restServiceUrl,params:{numeroOffreSoucrite:t,dateNaissancePersonne:this.toLocalString(i)},data:this.nettoyerObjet(e),withHeaders:!0,method:MyWay.Services.MethodEnum.POST,responseType:MyWay.Services.ResponseTypeEnum.JSON}).then(function(e){return e})},t.prototype.modifierLibreServiceEcureuil=function(e,t){return this.serviceAgentExtended.sendRequest({url:this.restServiceUrl,params:{dateNaissancePersonne:this.toLocalString(t)},data:this.nettoyerObjet(e),withHeaders:!0,method:MyWay.Services.MethodEnum.PUT}).then(function(e){return e})},t.prototype.nettoyerObjet=function(e){var t=angular.copy(e);return t.contratCarte&&t.contratCarte.forEach(function(e){e.compteHorsAbonnement.forEach(function(e){void 0===e||!e.checked&&e.checked||delete e.checked}),e.compteDansAbonnement.forEach(function(t){void 0===t||!t.checked&&t.checked||delete t.checked,void 0===t||!t.isCompteSupport&&t.isCompteSupport||delete t.isCompteSupport,void 0===t||t.numeroRangDuCompte||(t.numeroRangDuCompte=null),e.compteHorsAbonnement=_.without(e.compteHorsAbonnement,t)})}),t},t.prototype.supprimerLibreServiceEcureuil=function(e){return this.serviceAgentExtended.sendRequest({url:this.restServiceUrl,data:this.nettoyerObjet(e),withHeaders:!0,method:MyWay.Services.MethodEnum.DELETE}).then(function(e){return e})},t.prototype.initialiser=function(e,t,i){return{codeEtablissementBanque:e,identifiantPersonne:t,contratCarte:i}},t.prototype.copier=function(e){return _.assign({},e)},t.prototype.toLocalString=function(e){return e?e.toISOString():null},t.prototype.finRequeteEncours=function(e){var t=this._listeRequeteEncours.indexOf(e);-1!==t&&this._listeRequeteEncours.splice(t,1)},t.prototype.ajouterRequeteEncours=function(e){this._listeRequeteEncours.push(e)},t.prototype.existRequeteEncours=function(){return this._listeRequeteEncours.length>0},t.$inject=["serviceAgentExtended"],t}(e.c0410.commun.ProduitService);t.LibreServiceEcureuilCommunService=i,t.communModule.service("libreServiceEcureuilCommunService",i)}(i=t.commun||(t.commun={}))}(t=e.c0410||(e.c0410={}))}(myway||(myway={}));var myway;!function(e){var t;!function(e){var t;!function(e){"use strict";var t=function(){function t(e,t){this.$parse=e,this.serviceAgentExtended=t,this.structureObjetGenerique=[]}return t.prototype.enregistrerObjetGenerique=function(e){e&&(_.remove(this.structureObjetGenerique,{identifiant:e.identifiant}),this.structureObjetGenerique.push(e))},t.prototype.getObjetGenerique=function(e){return console.log("\n\n\ngetObjetGenerique() --> this.structureObjetGenerique",this.structureObjetGenerique),console.log("\n\n\n"),_.findWhere(this.structureObjetGenerique,{identifiant:e})},t.prototype.hasModifieChamps=function(e,t,i){var r=this.$parse(e)(i),n=this.$parse(e)(t);return!r&&!n||angular.equals(n,r)?!1:!0},t.prototype.getListeObjetsGeneriques=function(){return this.structureObjetGenerique},t.prototype.getDonneesContratDepuisDossierVente=function(t){if(t&&t.donneePrincipale&&t.donneePrincipale.identifiantContratSupport){var i=t.donneePrincipale.identifiantContratSupport,r=i.substring(10,i.length),n=i.substring(0,5),o=i.substring(5,10);return new e.DonneesCompte(r,n,o)}return void 0},t.prototype.getDonneesCompte=function(t){if(this.donneesCompte)return this.donneesCompte;if(this.donneesCompte=this.getObjetGenerique(e.DonneesCompte.IDENTIFIANT_DONNEES_COMPTE),!this.donneesCompte&&t.dossierVente&&t.indicateurDossierVenteAutorise){var i=this.getDonneesContratDepuisDossierVente(t.dossierVente);i&&(this.donneesCompte=new e.DonneesCompte(i.numeroDeCompte,i.codeEtablissement,i.codeGuichet))}return this.donneesCompte},t.prototype.supprimerObjetGenerique=function(e){_.remove(this.structureObjetGenerique,{identifiant:e})},t.$inject=["$parse","serviceAgentExtended"],t}();e.EspaceGlobalService=t,e.communModule.service("espaceGlobalService",t)}(t=e.commun||(e.commun={}))}(t=e.c0410||(e.c0410={}))}(myway||(myway={}));var myway;!function(e){var t;!function(t){var i;!function(t){"use strict";var i=function(e){function t(t,i){e.call(this),this.$q=t,this.serviceAgentExtended=i,this.restServiceReleveNumeriqueUrl="http://myway-ressources-dua.sigcesie.caisse-epargne.fr:6083/servicerelevecomptepart/v1/releveDeCompteNumerique"}return __extends(t,e),t.prototype.getReleveNumerique=function(e,t,i){var r=this,n=this.initTimer("getReleveNumerique","GET",this.restServiceReleveNumeriqueUrl);return this.serviceAgentExtended.sendRequest({url:this.restServiceReleveNumeriqueUrl,params:{codeEtablissementBancaire:e,numeroPersonne:t,typeDeSouscription:i},withHeaders:!0,method:MyWay.Services.MethodEnum.GET}).then(function(e){return r.updateTimer(n),e})},t.prototype.creerReleveNumerique=function(e,t){return this.serviceAgentExtended.sendRequest({url:this.restServiceReleveNumeriqueUrl,params:{numeroOffreSouscrite:t},data:e,withHeaders:!0,method:MyWay.Services.MethodEnum.POST}).then(function(e){return e})},t.prototype.supprimerReleveDeCompteNumerique=function(e){return this.serviceAgentExtended.sendRequest({url:this.restServiceReleveNumeriqueUrl,data:e,withHeaders:!0,method:MyWay.Services.MethodEnum.DELETE}).then(function(e){return e})},t.$inject=["$q","serviceAgentExtended"],t}(e.c0410.commun.ProduitService);t.ReleveNumeriqueService=i,t.communModule.service("releveNumeriqueService",i)}(i=t.commun||(t.commun={}))}(t=e.c0410||(e.c0410={}))}(myway||(myway={}));var myway;!function(e){var t;!function(e){var t;!function(e){"use strict";var t=function(){function t(e,t,i,r){this.$q=e,this.serviceAgentExtended=t,this.espaceGlobalService=i,this.affectationRadicalService=r}return t.prototype.isNumeroDeCompteReserve=function(){for(var t=!1,i=0;!t&&i<this.espaceGlobalService.getListeObjetsGeneriques().length;)this.espaceGlobalService.getListeObjetsGeneriques()[i]instanceof e.DonneesCompte&&(t=!0),i++;return t},t.prototype.reserverNumeroDeCompte=function(t,i,r){var n=t.substring(2,t.length);return this.isNumeroDeCompteReserve()?this.$q.when(this.espaceGlobalService.getObjetGenerique(e.DonneesCompte.IDENTIFIANT_DONNEES_COMPTE).numeroDeCompte):this.affectationRadicalService.getAffectationAutoRadical(i,t,r).then(function(e){return n+e.radical+e.cleCompte})},t.$inject=["$q","serviceAgentExtended","espaceGlobalService","affectationRadicalService"],t}();e.ReservationNumeroCompteService=t,e.communModule.service("reservationNumeroCompteService",t)}(t=e.commun||(e.commun={}))}(t=e.c0410||(e.c0410={}))}(myway||(myway={}));var myway;!function(e){var t;!function(e){var t;!function(e){"use strict";var t=function(){function e(e,t){this.$q=e,this.serviceAgentExtended=t,this.restServiceResultatsCommerciauxUrl="http://myway-ressources-dua.sigcesie.caisse-epargne.fr:6083/entretiencommercial-v1/resultatEntretien"}return e.prototype.mettreAJourResultatsCommerciaux=function(e){return this.serviceAgentExtended.sendRequest({url:this.restServiceResultatsCommerciauxUrl,data:e,withHeaders:!0,method:MyWay.Services.MethodEnum.POST,params:{versionTraitement:"B"}}).then(function(e){return e;
})},e.$inject=["$q","serviceAgentExtended"],e}();e.ResultsCommerciauxService=t,e.communModule.service("resultsCommerciauxService",t)}(t=e.commun||(e.commun={}))}(t=e.c0410||(e.c0410={}))}(myway||(myway={}));var myway;!function(e){var t;!function(e){var t;!function(e){"use strict";var t=function(){function e(){this.objectenfragement=[],this.historiqueLog="",this.maxSizeObject=10922,this.nombrefragement=0,this.tabError=[],this.colors={debug:"#283B82",error:"#C74F0C",info:"#336924",warning:"#9E0808"}}return e.prototype.log=function(e,t,i){if(void 0===e&&(e=""),window.console&&console.log){var r=-1!==navigator.userAgent.indexOf("Trident"),n="\n",o="***",s="padding:2px 10px; background-color:"+this.colors[this.logType]+"; color: white;";console.log(n),r?i?console.log(o+" "+i.toUpperCase()+" "+o+" --> "+e+" ("+this.getTime()+")"):console.log(o+" "+i+" "+o+" --> "+e+" ("+this.getTime()+")"):console.log("%c "+e+" ("+this.getTime()+")",s),angular.isDefined(t)&&console.log(t),console.log(n)}},e.prototype.debug=function(e,t){this.traceServiceLogger("debug",e,t)},e.prototype.error=function(e,t,i){void 0===i&&(i=!1),this.traceServiceLogger("error",e,t)},e.prototype.info=function(e,t,i){void 0===i&&(i=!1),this.traceServiceLogger("info",e,t)},e.prototype.warning=function(e,t){this.traceServiceLogger("warning",e,t)},e.prototype.warn=function(e,t){this.warning(e,t)},e.prototype.traceServiceLogger=function(t,i,r){var n,o=null,s="",u=null;if(this.logType=t,this.log(i,r,t),r=this.objectToString(r),r.length<=this.maxSizeObject)switch(this.logType){case"debug":try{e.logger.debug(i+" : %1",r)}catch(c){u="debug",n=c}break;case"info":try{e.logger.info(i+" : %1",r)}catch(c){u="info",n=c}break;case"error":try{e.logger.error(i+" : %1",r)}catch(c){u="error",n=c}break;case"warn":try{e.logger.warn(i+" : %1",r)}catch(c){u="warn",n=c}}else{switch(o=this.objetToFragment(r),console.warn("$$$$ = > Object to fragment   ->"+o),this.logType){case"debug":for(var a=0;a<this.nombrefragement;a++){0===a?s=" Debut de l'objet ":a===this.nombrefragement-1&&(s=" Fin de l'objet ");try{e.logger.debug(i+" : %1",s+" | Partie "+a+" | "+o[a]),console.log(i+" : %1",s+" | Partie "+a+" | "+o[a])}catch(c){u="debug",n=c}}break;case"info":for(var a=1;a<=o.length;a++)try{e.logger.info(i+" : %1",s+"Partie"+a+o[a])}catch(c){u="info",n=c}break;case"error":for(var a=1;a<=o.length;a++)try{e.logger.error(i+" : %1",s+" | Partie "+a+" | "+o[a])}catch(c){u="debug",n=c}break;case"warn":for(var a=1;a<=o.length;a++)try{e.logger.warn(i+" : %1",s+"Partie"+a+o[a])}catch(c){u="warn",n=c}}null!==u&&(this.logType="error",this.log("TraceService Error : ServiceTrace.logger."+u,n))}},e.prototype.getTime=function(){var e=new Date;return e.getHours()+":"+e.getMinutes()+":"+e.getSeconds()+":"+e.getMilliseconds()},e.prototype.clearHistoriqueLog=function(){this.historiqueLog=""},Object.defineProperty(e.prototype,"logType",{get:function(){return this._logType},set:function(e){this._logType=e},enumerable:!0,configurable:!0}),e.prototype.objectToString=function(e){return e="string"!=typeof e&&"null"!==e&&"undefined"!=typeof e?JSON.stringify(e):""},e.prototype.objetToFragment=function(e){var t=e,i=0,r=i+this.maxSizeObject;if("null"!==e&&"undefined"!=typeof e){e.length>this.maxSizeObject&&(this.nombrefragement=e.length/this.maxSizeObject,this.nombrefragement>Math.floor(this.nombrefragement)&&(this.nombrefragement=Math.floor(this.nombrefragement)+1));for(var n=1;n<=this.nombrefragement;n++)e=t.substring(i,r),this.objectenfragement.push(e),i=r,n===this.nombrefragement?(i=r-5,r=e.length):(i=r,r=r+this.maxSizeObject-1)}return this.objectenfragement},e.prototype.sauvgardeErreurProduit=function(e,t){e=JSON.stringify(e),this.tabError.push(e,t)},e.prototype.getTabError=function(){return this.tabError},e.CLASS_NAME="myway.c0410.commun.ServiceTrace",e.logger=MyWay.Services.Loggers.LoggerFactory.INSTANCE.getClass(e.CLASS_NAME),e}();e.ServiceTrace=t,e.communModule.service("serviceTrace",t)}(t=e.commun||(e.commun={}))}(t=e.c0410||(e.c0410={}))}(myway||(myway={})),angular.module("myway.c0410.commun").run(["$templateCache",function(e){e.put("vues/produit-service-vue.html",'<div class="clearfix">\r\n    <data-ng-form class="form-horizontal" name="::id">\r\n        <span ng-if="::lectureSeule" class="text-danger">Ce produit/service est repris, vous ne pouvez donc pas le modifier.</span>\r\n        <fieldset data-ng-disabled="::lectureSeule" ng-transclude></fieldset>\r\n    </data-ng-form>\r\n</div>')}]);