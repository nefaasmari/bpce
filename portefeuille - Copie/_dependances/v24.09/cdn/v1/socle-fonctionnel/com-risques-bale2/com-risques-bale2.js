/**
 * Généré par : SIGCESIE\ct-tfsbuild
 * Changeset TFS : C604386
 * Etiquette TFS : com-risques-bale2-21.01_20210211.1
 * Déclenchement : IndividualCI
 */
"use strict";var myway;!function(e){var t;!function(e){e.app=angular.module("myway.comRisquesBale2",["ui.bootstrap","myway.comInterdomaine","moduleAgent","myway.ui","ngSanitize"])}(t=e.comRisquesBale2||(e.comRisquesBale2={}))}(myway||(myway={}));var myway;!function(e){var t;!function(e){var t=function(){function e(e,t,n){var i=this;this.$scope=e,this.echelleNotationService=t,this.$timeout=n,this.messageError="",this.echelleNotationService.getEchelleNotation(this.idPersonne,this.noteBale).then(function(e){angular.isDefined(e)&&angular.isUndefined(e.codeHttp)?(angular.isDefined(e.noteRisque)&&null!==e.noteRisque&&(i.noteCourante=String(e.noteRisque).substring(1,5).trim()),i.items=e.listeEchelon):i.messageError="-"},function(e){i.messageError="-"})}return e.$inject=["$scope","echelleNotationService","$timeout"],e}();e.EchelleNotationController=t,e.app.controller("EchelleNotationController",t)}(t=e.comRisquesBale2||(e.comRisquesBale2={}))}(myway||(myway={}));var myway;!function(e){var t;!function(e){function t(){return{restrict:"E",templateUrl:"typescript/echelle-notation/echelle-notation-view.html",scope:{libelle:"@",idPersonne:"@",noteBale:"@"},controller:"EchelleNotationController",controllerAs:"viewModelEchelleNotationCtrl",bindToController:!0,link:function(e,t,n){}}}e.mwsfEchelleNotation=t,e.app.directive("mwsfEchelleNotation",t)}(t=e.comRisquesBale2||(e.comRisquesBale2={}))}(myway||(myway={}));var myway;!function(e){var t;!function(e){var t=function(){function e(e,t){this.$q=e,this.serviceAgentExtended=t}return e.prototype.getEchelleNotation=function(e,t){var n=this;return this.serviceAgentExtended.getAuthentificationInfo().then(function(i){return e&&null!=e?t&&t.length>0?n.getEchelle(String(e),t,i.codeEtablissement):n.getNoteBale2(String(e),i.codeEtablissement).then(function(t){return angular.isDefined(t)&&angular.isDefined(t.codeModeleNotationRisque)?n.getEchelle(String(e),t.codeModeleNotationRisque,i.codeEtablissement):void 0},function(e){return e}):n.serviceAgentExtended.getFromContext("identifiantPersonne").then(function(e){return n.getNoteBale2(e,i.codeEtablissement).then(function(t){return angular.isDefined(t)&&angular.isDefined(t.codeModeleNotationRisque)?n.getEchelle(e,t.codeModeleNotationRisque,i.codeEtablissement):void 0},function(e){return e})})},function(e){return e})},e.prototype.getEchelle=function(e,t,n){var i=null!==t?MyWay.Services.StringUtils.padRight(String(t)," ",20):t,o="http://myway-ressources-dua.sigcesie.caisse-epargne.fr:6083/risqueclient-v1/echelleNotation?codeEtablissement="+n+"&identifiantTiers="+e+"&noteBale2="+encodeURIComponent(i);return"null"!==encodeURIComponent(i)?this.serviceAgentExtended.sendRequest({url:o,withHeaders:!0,method:MyWay.Services.MethodEnum.GET}).then(function(e){return e},function(e){return e}):void 0},e.prototype.getNoteBale2=function(e,t){var n="http://myway-ressources-dua.sigcesie.caisse-epargne.fr:6083/tiers-v1/particulierNotation?codeEtablissement="+t+"&idPersonne="+e;return this.serviceAgentExtended.sendRequest({url:n,withHeaders:!0,method:MyWay.Services.MethodEnum.GET})},e.$inject=["$q","serviceAgentExtended"],e}();e.EchelleNotationService=t,e.app.service("echelleNotationService",t)}(t=e.comRisquesBale2||(e.comRisquesBale2={}))}(myway||(myway={})),angular.module("myway.comRisquesBale2").run(["$templateCache",function(e){e.put("typescript/echelle-notation/echelle-notation-view.html",'<div class="row">\r\n    <div class="col-md-12 col-sm-12">\r\n        <label class="control-label" data-ng-show="viewModelEchelleNotationCtrl.libelle"><span data-ng-bind="::viewModelEchelleNotationCtrl.libelle"></span></label>\r\n    </div>\r\n</div>\r\n<div class="row">\r\n    <div class="col-md-12 col-sm-12">\r\n        <div class="echelle-notation echelle-notation-border" data-ng-class="{\'critique\' : item.indicateurDefaut, \'normal\' : !item.indicateurDefaut, \'note\' : item.valeurEchelon == viewModelEchelleNotationCtrl.noteCourante  }" data-ng-repeat="item in viewModelEchelleNotationCtrl.items track by $index">\r\n            <div class="align-texte-echelle-notation">\r\n                <span class="police-echelle-notation" ng-bind="::item.valeurEchelon"></span>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</div>\r\n<div class="row">\r\n    <div class="col-md-12 hidden-xs hidden-sm">\r\n        <div class="echelle-notation" data-ng-class="{\'pointeur-note\' : item.valeurEchelon == viewModelEchelleNotationCtrl.noteCourante }" data-ng-repeat="item in viewModelEchelleNotationCtrl.items track by $index">\r\n        </div>\r\n    </div>\r\n</div>\r\n<div class="row" data-ng-if="viewModelEchelleNotationCtrl.messageError">\r\n    <div class="col-md-12">\r\n        <div class="control-label" role="alert" data-ng-bind="::viewModelEchelleNotationCtrl.messageError"></div>\r\n    </div>\r\n</div>')}]);