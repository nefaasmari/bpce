/**
 * Généré par : SIGCESIE\ct-tfsbuild
 * Changeset TFS : C649402
 * Etiquette TFS : trans-prdt-engg-v22.05_20220524.3
 * Déclenchement : IndividualCI
 */
var myway;!function(e){var a;!function(e){"use strict";e.module=angular.module("myway.transProduitEngage",["ngRoute","moduleAgent","myway.comInterdomaine"])}(a=e.transProduitEngage||(e.transProduitEngage={}))}(myway||(myway={}));var myway;!function(e){var a;!function(e){var a=function(){function e(){}return e.LIBELLE_BLOC_TRACABILITE="Paramètres de traçabilité",e.LABEL_TRACABILITE="Traçabilité",e.LABEL_DOMAINE="Secteur",e.LABEL_OUI="OUI",e.LABEL_NON="NON",e.LIBELLE_BLOC_PARTAGE="Paramètres de partage",e.LABEL_PARTAGE_INTERET_CHOIX="Partage des intérêts",e.LABEL_PARTAGE_ORGANISME="Organisme bénéficiaire",e.LABEL_PARTAGE_TAUX="Taux de partage",e.FILTER_UNIVER_CODEUNIV="codeUniver",e.FILTER_UNIVER_PAR_DEFAUT="parDefaut",e}();e.ProduitEngageConstantes=a;var i=function(){function i(i,r,t,n){var o=this;this.$scope=i,this.$parse=r,this.serviceAgentExtended=t,this.produitEngageService=n,this.libBlocTracabilite=a.LIBELLE_BLOC_TRACABILITE,this.labelTracabilite=a.LABEL_TRACABILITE,this.labelOui=a.LABEL_OUI,this.labelNon=a.LABEL_NON,this.libelleDomaine=a.LABEL_DOMAINE,this.libBlocPartage=a.LIBELLE_BLOC_PARTAGE,this.labelPartageInteret=a.LABEL_PARTAGE_INTERET_CHOIX,this.labelPartageOrganisme=a.LABEL_PARTAGE_ORGANISME,this.labelPartageTaux=a.LABEL_PARTAGE_TAUX,this.chargementEncours=!1,this.determinerMode(this.contexteProduitEngage.produitService.codeTypeOperation),1===this.contexteProduitEngage.enRecapitulatif?(this.enRecapitulatif=!0,this.isModeRechargementDvRecapOuvertureOffre()?this.infoPartageTracab&&(this.produitEngageFormulaire=new e.ProduitEngageFormulaire(this.contexteProduitEngage.indicateurs.indicateurTracabiliteOblig?!0:!1,this.contexteProduitEngage.indicateurs.indicateurPartageOblig?!0:!1),this.initParamPartageTracab().then(function(e){o.produitEngageFormulaire.setFormulaireProduitEngage(o.infoPartageTracab)})):this.initIhmEnModeRecap()):(this.contexteProduitEngage.modePrecedent||(this.produitEngageFormulaire=new e.ProduitEngageFormulaire(this.contexteProduitEngage.indicateurs.indicateurTracabiliteOblig?!0:!1,this.contexteProduitEngage.indicateurs.indicateurPartageOblig?!0:!1),this.initParamPartageTracab().then(function(e){"OU"!==o.contexteProduitEngage.offreSouscrite.codeActeGestion||o.infoPartageTracab?o.infoPartageTracab?(o.infoPartageTracab.codeUniversTracabilite||o.infoPartageTracab.identifiantBeneficiaire||o.setUniverParDefaut(),o.initialiserIhm()):o.recupererInfoProduitEngage(o.contexteProduitEngage.indicateurs).then(function(e){o.infoPartageTracab=e,o.initialiserIhm()})["catch"](function(){o.checkToSetDirtyFormulaire(),o.setUniverParDefaut()}):(o.checkToSetDirtyFormulaire(),o.setUniverParDefaut())})),this.produitEngageFormulaire.estModifieFormulaire=!1)}return i.prototype.initParamPartageTracab=function(){var e=this;return this.chargementEncours=!0,this.produitEngageService.getParamPartageTracab(this.contexteProduitEngage.etablissement.codeEtablissement,this.contexteProduitEngage.produitService.identifiantProduitService,this.contexteProduitEngage.indicateurs).then(function(a){return e.produitEngageFormulaire.donneesRestPartageTracab.paramPartageTracab=a,a.informationTracabilite&&a.informationTracabilite.libelleDomaine&&(e.produitEngageFormulaire.libelletDomaineTracabilite=a.informationTracabilite.libelleDomaine),a})["catch"](function(a){var i="Problème lors de la récupération des paramètres produit engagé "+a.libelle;return console.error(i),e.serviceAgentExtended.Trace.error(i),e.disableAll=!0,null})["finally"](function(){e.chargementEncours=!1})},i.prototype.initialiserIhm=function(){this.produitEngageFormulaire.donneesRestPartageTracab.infoPartageTracab=new e.InfoPartageTracab(this.infoPartageTracab),this.produitEngageFormulaire.setFormulaireProduitEngage(this.infoPartageTracab),this.infoPartageTracab.codeProduit=this.contexteProduitEngage.produitService.codeProduit,this.infoPartageTracab.identifiantProduitService=this.contexteProduitEngage.produitService.identifiantProduitService.toString(),this.produitEngageFormulaire.infoPartageTracab=new e.InfoPartageTracab(this.infoPartageTracab),this.checkToSetDirtyFormulaire()},i.prototype.determinerMode=function(e){return"AV"===e?this.enModification=!0:"OU"===e?this.enOuverture=!0:"CL"===e&&(this.enCloture=!0),!1},i.prototype.checkToSetDirtyFormulaire=function(){angular.isUndefined(this.produitEngageFormulaire.domaineTracabilite)&&this.contexteProduitEngage.indicateurs.indicateurTracabiliteOblig?this.produitEngageFormulaire.traceProduitEngageForm.domaine.$setDirty():angular.isUndefined(this.produitEngageFormulaire.organismeBeneficiaire)&&angular.isUndefined(this.produitEngageFormulaire.tauxPartage)&&this.contexteProduitEngage.indicateurs.indicateurPartageOblig&&this.produitEngageFormulaire.traceProduitEngageForm.beneficiaire.$setDirty()},i.prototype.setUniverParDefaut=function(){var e=this.produitEngageFormulaire.donneesRestPartageTracab.paramPartageTracab;if(this.contexteProduitEngage.indicateurs.indicateurTracabiliteVisible&&e.informationTracabilite)for(var a=0,i=e.informationTracabilite.listeUnivers;a<i.length;)i[a].indicateurUniversDefaut&&(this.produitEngageFormulaire.domaineTracabilite=i[a],a=i.length),a++},i.prototype.recupererInfoProduitEngage=function(e){var a=this;return this.chargementEncours=!0,this.produitEngageService.recupererPartageTracab(this.contexteProduitEngage.etablissement.codeEtablissement,this.contexteProduitEngage.etablissement.codeGuichet,this.contexteProduitEngage.offreSouscrite.numeroCompte,e.indicateurPartageVisible,e.indicateurTracabiliteVisible).then(function(e){return e})["catch"](function(e){return e})["finally"](function(){a.chargementEncours=!1})},i.prototype.recupererIndicesVisibilitePartageTracab=function(e,a,i){return this.produitEngageService.getIndicPartageTracab(e,a,i).then(function(e){return e})["catch"](function(e){return e})},i.prototype.hasModifieChamps=function(e){var a=this.$parse(e)(this.produitEngageFormulaire),i=this.$parse(e)(this.produitEngageFormulaireInitiale);return!a&&!i||angular.equals(i,a)?!1:!0},i.prototype.initIhmEnModeRecap=function(){(this.enModification||this.enOuverture&&this.infoPartageTracab)&&!this.produitEngageFormulaireInitiale&&(this.produitEngageFormulaireInitiale=new e.ProduitEngageFormulaire(this.contexteProduitEngage.indicateurs.indicateurTracabiliteOblig?!0:!1,this.contexteProduitEngage.indicateurs.indicateurPartageOblig?!0:!1),this.produitEngageFormulaireInitiale.donneesRestPartageTracab=this.produitEngageFormulaire.donneesRestPartageTracab,this.produitEngageFormulaireInitiale.setFormulaireProduitEngage(this.infoPartageTracab?this.infoPartageTracab:this.produitEngageFormulaire.donneesRestPartageTracab.infoPartageTracab))},i.prototype.isModeRechargementDvRecapOuvertureOffre=function(){return!this.produitEngageFormulaire&&-1!==["OU","DO","OC"].indexOf(this.contexteProduitEngage.offreSouscrite.codeActeGestion)},i.$inject=["$scope","$parse","serviceAgentExtended","produitEngageService"],i}();e.ProduitEngageController=i,e.module.controller("ProduitEngageController",i)}(a=e.transProduitEngage||(e.transProduitEngage={}))}(myway||(myway={}));var myway;!function(e){var a;!function(e){function a(){return{restrict:"E",replace:!0,controller:"ProduitEngageController",controllerAs:"produitEngageCtrl",bindToController:!0,scope:{infoPartageTracab:"=",contexteProduitEngage:"=",produitEngageFormulaire:"="},templateUrl:"typescript/views/produit-engage-view.html"}}e.mwsfProduitEngage=a,e.module.directive("mwsfProduitEngage",a)}(a=e.transProduitEngage||(e.transProduitEngage={}))}(myway||(myway={}));var myway;!function(e){var a;!function(e){var a=function(){function a(a,i,t,n,o){this._choixTracabilite=a,this._choixPartage=i,a&&(this._domaineTracabilite=t),i&&(this._organismeBeneficiaire=n,this._tauxPartage=o),this._libelletDomaineTracabilite=e.ProduitEngageConstantes.LABEL_DOMAINE,this._donneesRestPartageTracab=new r}return Object.defineProperty(a.prototype,"choixTracabilite",{get:function(){return this._choixTracabilite},set:function(e){e||(this._domaineTracabilite=null),this._choixTracabilite=e},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"choixPartage",{get:function(){return this._choixPartage},set:function(e){e||(this._organismeBeneficiaire=null,this._tauxPartage=null),this._choixPartage=e},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"domaineTracabilite",{get:function(){return this._domaineTracabilite},set:function(e){this._domaineTracabilite=e},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"organismeBeneficiaire",{get:function(){return this._organismeBeneficiaire},set:function(e){angular.isUndefined(e)&&(this._tauxPartage=void 0),this._organismeBeneficiaire=e},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"tauxPartage",{get:function(){return this._tauxPartage},set:function(e){this._tauxPartage=e},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"libelletDomaineTracabilite",{get:function(){return this._libelletDomaineTracabilite},set:function(e){this._libelletDomaineTracabilite=e},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"estModifieFormulaire",{get:function(){if(this.donneesRestPartageTracab.infoPartageTracab){if(null!==this.donneesRestPartageTracab.paramPartageTracab.informationTracabilite){if(this.choixTracabilite&&!this.donneesRestPartageTracab.infoPartageTracab.codeUniversTracabilite||!this.choixTracabilite&&this.donneesRestPartageTracab.infoPartageTracab.codeUniversTracabilite)return this._estModifieFormulaire=!0;if(this.estModifieDomaineTracabilite())return this._estModifieFormulaire=!0}if(null!==this.donneesRestPartageTracab.paramPartageTracab.informationPartage){if(this.choixPartage&&!this.donneesRestPartageTracab.infoPartageTracab.identifiantBeneficiaire||!this.choixPartage&&this.donneesRestPartageTracab.infoPartageTracab.identifiantBeneficiaire)return this._estModifieFormulaire=!0;if(this.estModifieOrganismeBeneficiaire()||this.estModifieTauxPartage())return this._estModifieFormulaire=!0}}else if(this.choixPartage||this.choixTracabilite)return this._estModifieFormulaire=!0;return this._estModifieFormulaire=!1},set:function(e){this._estModifieFormulaire=e},enumerable:!0,configurable:!0}),a.prototype.estModifieTauxPartage=function(){return this.tauxPartage&&this.tauxPartage.valeurTauxPartage!==this.donneesRestPartageTracab.infoPartageTracab.valeurTauxPartage||(angular.isUndefined(this.tauxPartage)||null===this.tauxPartage)&&null!==this.donneesRestPartageTracab.infoPartageTracab.valeurTauxPartage},a.prototype.estModifieOrganismeBeneficiaire=function(){return this.organismeBeneficiaire&&this.organismeBeneficiaire.identifiantBeneficiaire!==this.donneesRestPartageTracab.infoPartageTracab.identifiantBeneficiaire||(angular.isUndefined(this.organismeBeneficiaire)||null===this.organismeBeneficiaire)&&null!==this.donneesRestPartageTracab.infoPartageTracab.identifiantBeneficiaire},a.prototype.estModifieDomaineTracabilite=function(){return this.domaineTracabilite&&this.domaineTracabilite.codeUniversTracabilite!==this.donneesRestPartageTracab.infoPartageTracab.codeUniversTracabilite||(angular.isUndefined(this.domaineTracabilite)||null===this.domaineTracabilite)&&null!==this.donneesRestPartageTracab.infoPartageTracab.codeUniversTracabilite},Object.defineProperty(a.prototype,"infoPartageTracab",{get:function(){return this._infoPartageTracab},set:function(e){this._infoPartageTracab=e},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"donneesRestPartageTracab",{get:function(){return this._donneesRestPartageTracab},set:function(e){this._donneesRestPartageTracab=e},enumerable:!0,configurable:!0}),a.prototype.setFormulaireProduitEngage=function(e){e.codeUniversTracabilite&&(this.choixTracabilite=!0,this.domaineTracabilite=this.getElementPartageOuTracabList("tracabilite",this._donneesRestPartageTracab.paramPartageTracab.informationTracabilite.listeUnivers,e)),e.identifiantBeneficiaire&&e.valeurTauxPartage&&(this.choixPartage=!0,this.organismeBeneficiaire=this.getElementPartageOuTracabList("beneficiaire",this._donneesRestPartageTracab.paramPartageTracab.informationPartage,e),this.organismeBeneficiaire&&(0===this.organismeBeneficiaire.listeTaux.length?(this.tauxPartage={inactif:!0,valeurTauxPartage:e.valeurTauxPartage},this.organismeBeneficiaire.listeTaux.push(this.tauxPartage),this.donneesRestPartageTracab.paramPartageTracab.informationPartage.push(this.organismeBeneficiaire)):this.tauxPartage=this.getElementPartageOuTracabList("taux",this.organismeBeneficiaire.listeTaux,e)))},a.prototype.getElementPartageOuTracabList=function(e,a,i){for(var r=null,t=0,n=!1,o=a.length;o>t&&!n;){switch(e){case"tracabilite":var l=a[t];l.codeUniversTracabilite===i.codeUniversTracabilite?(r=l,n=!0):t===a.length-1&&(l={codeUniversTracabilite:i.codeUniversTracabilite,libelleUniversTracabilite:i.libelleTracab},r=l,this.donneesRestPartageTracab.paramPartageTracab.informationTracabilite.listeUnivers.push(l));break;case"beneficiaire":var c=a[t];c.identifiantBeneficiaire===i.identifiantBeneficiaire?(r=c,n=!0):t===a.length-1&&(c={identifiantBeneficiaire:i.identifiantBeneficiaire,designationBeneficiare:i.libellePartage,listeTaux:[]},r=c);break;case"taux":var g=a[t];if(g.valeurTauxPartage===i.valeurTauxPartage)r=g,n=!0;else if(t===a.length-1){var u={inactif:!0,valeurTauxPartage:i.valeurTauxPartage};this.organismeBeneficiaire.listeTaux.push(u),r=u}}t++}return r},a.prototype.isValideFormulaire=function(){return this._champsInvalides=[],this.choixTracabilite&&!this.domaineTracabilite&&this._champsInvalides.push(new i("Le domaine de Traçabilité ")),this.choixPartage&&(this.organismeBeneficiaire?this.tauxPartage||this._champsInvalides.push(new i("Le taux de partage ")):(this._champsInvalides.push(new i("L'organisme bénéficiaire ")),this._champsInvalides.push(new i("Le taux de partage ")))),0===this._champsInvalides.length?!0:!1},a.prototype.getInformationsChampsInvalidesFormulaireProduitEngage=function(){return this._champsInvalides||this.isValideFormulaire(),this._champsInvalides},a}();e.ProduitEngageFormulaire=a;var i=function(){function e(e){this._nomChamps=e}return e.prototype.getMessageErreur=function(){return this._nomChamps+" n'a pas été renseigné alors qu'il est obligatoire"},e}();e.StatutChampsFormulaire=i;var r=function(){function e(){}return Object.defineProperty(e.prototype,"paramPartageTracab",{get:function(){return this._paramPartageTracab},set:function(e){this._paramPartageTracab=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"infoPartageTracab",{get:function(){return this._infoPartageTracab},set:function(e){this._infoPartageTracab=e},enumerable:!0,configurable:!0}),e}();e.DonneesPartageTracab=r}(a=e.transProduitEngage||(e.transProduitEngage={}))}(myway||(myway={}));var myway;!function(e){var a;!function(e){var a=function(){function e(e){this.codeEtablissement=e.codeEtablissement,this.codeGuichet=e.codeGuichet,this.numeroCompte=e.numeroCompte,this.indicateurPartage=e.indicateurPartage,this.identifiantBeneficiaire=e.identifiantBeneficiaire,this.codeUniversTracabilite=e.codeUniversTracabilite,this.valeurTauxPartage=e.valeurTauxPartage,this.indicateurTracabilite=e.indicateurTracabilite,this.codeProduit=e.codeProduit,this.identifiantProduitService=e.identifiantProduitService,this.identifiantPersonne=e.identifiantPersonne,this.libelleTracab=null,this.libellePartage=null}return e}();e.InfoPartageTracab=a}(a=e.transProduitEngage||(e.transProduitEngage={}))}(myway||(myway={}));var myway;!function(e){var a;!function(e){var a=function(){function e(e,a){this.$q=e,this.serviceAgentExtended=a,this.restUrlGetParamPartageTracab="http://myway-ressources-dua.sigcesie.caisse-epargne.fr:6083/contratparametre/v1/paramPartageTracab",this.restUrlGererPartageTracabExistant="http://myway-ressources-dua.sigcesie.caisse-epargne.fr:6083/contratservice/v1/infoPartageTracab",this.restUrlGetIndicPartageTracab="http://myway-ressources-dua.sigcesie.caisse-epargne.fr:6083/contratparametre/v1/indicPartageTracab"}return e.prototype.getParamPartageTracab=function(e,a,i){return this.serviceAgentExtended.sendRequest({url:this.restUrlGetParamPartageTracab,params:{codeEtablissement:e,identifiantProduitService:a,indicateurPartageVisible:i.indicateurPartageVisible,indicateurTracabiliteVisible:i.indicateurTracabiliteVisible,indicateurPartageOblig:i.indicateurPartageOblig,indicateurTracabiliteOblig:i.indicateurTracabiliteOblig},withHeaders:!0,method:MyWay.Services.MethodEnum.GET})},e.prototype.putInfoPartageTracab=function(e){return this.serviceAgentExtended.sendRequest({url:this.restUrlGererPartageTracabExistant,data:e,withHeaders:!0,method:MyWay.Services.MethodEnum.PUT}).then(function(e){return e})},e.prototype.recupererPartageTracab=function(e,a,i,r,t){return this.serviceAgentExtended.sendRequest({url:this.restUrlGererPartageTracabExistant,params:{codeEtablissement:e,codeGuichet:a,numeroCompte:i,consultationPartage:r,consultationTracabilite:t},withHeaders:!0,method:MyWay.Services.MethodEnum.GET})},e.prototype.getIndicPartageTracab=function(e,a,i){return this.serviceAgentExtended.sendRequest({url:this.restUrlGetIndicPartageTracab,params:{codeEtablissement:e,codeTypeOperation:a,identifiantProduitService:i},withHeaders:!0,method:MyWay.Services.MethodEnum.GET})},e.prototype.enregistrerPartageTracab=function(e){var a=[],i=e.infoPartageTracab?e.infoPartageTracab:e.donneesRestPartageTracab.infoPartageTracab;return this.putInfoPartageTracab(this.initialiserInfoPartageTracab(i,e)).then(function(e){return a.push(new GestionGeneriqueOffres.Types.ErreurGestionGeneriqueOffre(GestionGeneriqueOffres.Types.NiveauErreur.Ok,0,"")),new GestionGeneriqueOffres.Types.CompteRenduMiseEnGestion(a)})["catch"](function(e){return a.push(new GestionGeneriqueOffres.Types.ErreurGestionGeneriqueOffre(GestionGeneriqueOffres.Types.NiveauErreur.ErreurFatale,1,"Impossible d'enregistrer les données de Traçabilité/Partage pour les raisons suivantes: "+e.valeurs+" "+e.codeLibelle)),new GestionGeneriqueOffres.Types.CompteRenduMiseEnGestion(a)})},e.prototype.getDonneesSauvegardeProduitEngage=function(e){var a;if(e.infoPartageTracab)var a=e.infoPartageTracab;else a={codeEtablissement:null,codeGuichet:null,numeroCompte:null,indicateurPartage:null,identifiantBeneficiaire:null,valeurTauxPartage:null,indicateurTracabilite:null,codeUniversTracabilite:null,codeProduit:null,identifiantProduitService:null,identifiantPersonne:null,codeDomaineTracabilite:null,libelleDomaineTracabilite:null,libelleTracab:null,libellePartage:null};return a.identifiantBeneficiaire=e.organismeBeneficiaire&&e.choixPartage?e.organismeBeneficiaire.identifiantBeneficiaire:null,a.valeurTauxPartage=e.tauxPartage&&e.choixPartage?e.tauxPartage.valeurTauxPartage:null,a.codeUniversTracabilite=e.domaineTracabilite&&e.choixTracabilite?e.domaineTracabilite.codeUniversTracabilite:null,a.indicateurPartage=a.identifiantBeneficiaire&&a.valeurTauxPartage?"true":"false",a.indicateurTracabilite=a.codeUniversTracabilite?"true":"false",a},e.prototype.initialiserInfoPartageTracab=function(e,a){return e.indicateurTracabilite=null,a.choixTracabilite?(e.codeUniversTracabilite?e.codeUniversTracabilite!==a.domaineTracabilite.codeUniversTracabilite&&(e.indicateurTracabilite="M"):e.indicateurTracabilite="A",e.codeUniversTracabilite=a.domaineTracabilite.codeUniversTracabilite):(e.codeUniversTracabilite&&(e.indicateurTracabilite="B"),e.codeUniversTracabilite=null),e.indicateurPartage=null,a.choixPartage?(e.identifiantBeneficiaire?(e.identifiantBeneficiaire!==a.organismeBeneficiaire.identifiantBeneficiaire||e.valeurTauxPartage!==a.tauxPartage.valeurTauxPartage)&&(e.indicateurPartage="M"):e.indicateurPartage="A",e.identifiantBeneficiaire=a.organismeBeneficiaire.identifiantBeneficiaire,e.valeurTauxPartage=a.tauxPartage.valeurTauxPartage):(e.identifiantBeneficiaire&&(e.indicateurPartage="B"),e.identifiantBeneficiaire=null,e.valeurTauxPartage=0),e},e.$inject=["$q","serviceAgentExtended"],e}();e.ProduitEngageService=a,e.module.service("produitEngageService",a)}(a=e.transProduitEngage||(e.transProduitEngage={}))}(myway||(myway={}));var myway;!function(e){var a;!function(e){var a;!function(e){var a=function(){function e(){}return e}();e.DonneesProduitEngage=a;var i=function(){function e(){}return e}();e.IEtablissement=i;var r=function(){function e(){}return e}();e.IContexteOffre=r;var t=function(){function e(){}return e}();e.IProduitService=t}(a=e.Model||(e.Model={}))}(a=e.transProduitEngage||(e.transProduitEngage={}))}(myway||(myway={})),angular.module("myway.transProduitEngage").run(["$templateCache",function(e){e.put("typescript/views/produit-engage-view.html",'<div class="col-md-12 col-sm-12 col-lg-12">\r\n    <div class="form-horizontal">\r\n        <div class="form-group" data-ng-form="produitEngageCtrl.produitEngageFormulaire.traceProduitEngageForm" mw-chargement="produitEngageCtrl.chargementEncours">\r\n            <div ng-if="!produitEngageCtrl.enRecapitulatif">\r\n                <!--      ==================================Paramètre de Traçabilité ================================================          -->\r\n                <mw-hretractable id="hretractable-tracabilite" open="true" ng-if="produitEngageCtrl.contexteProduitEngage.indicateurs.indicateurTracabiliteVisible">\r\n                    <mw-hretractable-titre>\r\n                        <span>{{::produitEngageCtrl.libBlocTracabilite}}</span>\r\n                    </mw-hretractable-titre>\r\n                    <div class="form-group" ng-if="produitEngageCtrl.enOuverture || produitEngageCtrl.enModification">\r\n                        <fieldset class="form-group mw-radio-group">\r\n                            <legend class="col-md-2 col-sm-2 control-label" ng-bind="::produitEngageCtrl.labelTracabilite"></legend>\r\n                            <ul class="col-md-10 col-sm-4 list-inline">\r\n                                <li class="mw-radio-btn">\r\n                                    <input id="btn-tracabilite-oui" ng-value="true" type="radio" name="tracabilite-oui" ng-model="produitEngageCtrl.produitEngageFormulaire.choixTracabilite" ng-disabled="(produitEngageCtrl.produitEngageFormulaire.donneesRestPartageTracab.paramPartageTracab.informationTracabilite &&\r\n                                                                                                                                                                                                           (produitEngageCtrl.produitEngageFormulaire.donneesRestPartageTracab.paramPartageTracab.informationTracabilite.listeUnivers === [] ||\r\n                                                                                                                                                                                                           !produitEngageCtrl.produitEngageFormulaire.donneesRestPartageTracab.paramPartageTracab.informationTracabilite.libelleDomaine)) || produitEngageCtrl.disableAll">\r\n                                    <label for="btn-tracabilite-oui" ng-bind="::produitEngageCtrl.labelOui"></label>\r\n                                </li>\r\n                                <li class="mw-radio-btn">\r\n                                    <input id="btn-tracabilite-non" ng-value="false" type="radio" name="tracabilite-non" ng-model="produitEngageCtrl.produitEngageFormulaire.choixTracabilite" ng-disabled="produitEngageCtrl.contexteProduitEngage.indicateurs.indicateurTracabiliteOblig || produitEngageCtrl.disableAll">\r\n                                    <label for="btn-tracabilite-non" ng-bind="::produitEngageCtrl.labelNon"></label>\r\n                                </li>\r\n                            </ul>\r\n                        </fieldset>\r\n                        <div class="bloc-choix-tracabilite" ng-if="produitEngageCtrl.produitEngageFormulaire.choixTracabilite">\r\n                            <div class="form-group">\r\n                                <label class="col-md-4 control-label">{{::produitEngageCtrl.produitEngageFormulaire.donneesRestPartageTracab.paramPartageTracab.informationTracabilite.libelleDomaine}}</label>\r\n                                <div class="col-sm-12 col-md-5" ng-class="{\'has-error\':ProduitEngageFormulaire.domaineTracabilite.$error.required}">\r\n                                    <input type="text" id="combo-tracabilite" ng-model="produitEngageCtrl.produitEngageFormulaire.domaineTracabilite" class="form-control" name="domaine" required mw-combobox="domaine as domaine.libelleUniversTracabilite for domaine in produitEngageCtrl.produitEngageFormulaire.donneesRestPartageTracab.paramPartageTracab.informationTracabilite.listeUnivers | orderBy: \'codeUniversTracabilite\'" mw-combobox-min-length="0" mw-combobox-editable="false" mw-combobox-on-select="produitEngageCtrl.produitEngageFormulaire.traceProduitEngageForm.domaine.$setDirty()" placeholder="Choisir un élément">\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </mw-hretractable>\r\n                    <!--      ==================================Paramètre de partage ================================================          -->\r\n                    <mw-hretractable id="hretractable-partage" open="true" ng-if="produitEngageCtrl.contexteProduitEngage.indicateurs.indicateurPartageVisible">\r\n                        <mw-hretractable-titre>\r\n                            <span>{{::produitEngageCtrl.libBlocPartage}}</span>\r\n                        </mw-hretractable-titre>\r\n                        <div class="form-group" ng-if="produitEngageCtrl.enOuverture || produitEngageCtrl.enModification">\r\n                            <fieldset class="form-group mw-radio-group">\r\n                                <legend class="col-md-2 col-sm-2 control-label" ng-bind="::produitEngageCtrl.labelPartageInteret"></legend>\r\n                                <ul class="col-md-10 col-sm-4 list-inline">\r\n                                    <li class="mw-radio-btn">\r\n                                        <input id="btn-partage-oui" type="radio" data-ng-model="produitEngageCtrl.produitEngageFormulaire.choixPartage" data-ng-value="true" ng-disabled="produitEngageCtrl.disableAll">\r\n                                        <label for="btn-partage-oui" ng-bind="::produitEngageCtrl.labelOui"></label>\r\n                                    </li>\r\n                                    <li class="mw-radio-btn">\r\n                                        <input id="btn-partage-non" type="radio" data-ng-model="produitEngageCtrl.produitEngageFormulaire.choixPartage" data-ng-value="false" ng-disabled="produitEngageCtrl.contexteProduitEngage.indicateurs.indicateurPartageOblig || produitEngageCtrl.disableAll">\r\n                                        <label for="btn-partage-non" ng-bind="::produitEngageCtrl.labelNon"></label>\r\n                                    </li>\r\n                                </ul>\r\n                            </fieldset>\r\n                            <div class="bloc-choix-partage" ng-if="produitEngageCtrl.produitEngageFormulaire.choixPartage">\r\n                                <!--Listebx Organismes bénéficiaire-->\r\n                                <div class="form-group">\r\n                                    <label class="col-md-4 control-label">{{::produitEngageCtrl.labelPartageOrganisme}}</label>\r\n                                    <div class="col-sm-12 col-md-5" ng-class="{\'has-error\':ProduitEngageFormulaire.organismeBeneficiaire.$error.required}">\r\n                                        <input type="text" id="combo-partage-benefeciaire" ng-model="produitEngageCtrl.produitEngageFormulaire.organismeBeneficiaire" class="form-control" name="beneficiaire" required mw-combobox="beneficiaire as beneficiaire.designationBeneficiare for beneficiaire in produitEngageCtrl.produitEngageFormulaire.donneesRestPartageTracab.paramPartageTracab.informationPartage " mw-combobox-min-length="0" mw-combobox-editable="false" mw-combobox-on-select="produitEngageCtrl.produitEngageFormulaire.tauxPartage = null; produitEngageCtrl.produitEngageFormulaire.traceProduitEngageForm.beneficiaire.$setDirty()" placeholder="Choisir un élément">\r\n                                    </div>\r\n                                </div>\r\n                                <!--Listebx taux partage-->\r\n                                <div class="form-group">\r\n                                    <label class="col-md-4 control-label">{{::produitEngageCtrl.labelPartageTaux}}</label>\r\n                                    <div class="col-sm-12 col-md-5" ng-class="{\'has-error\':ProduitEngageFormulaire.tauxPartage.$error.required}" ng-disabled="!produitEngageCtrl.produitEngageFormulaire.organismeBeneficiaire">\r\n                                        <input type="text" id="combo-partage-taux" ng-model="produitEngageCtrl.produitEngageFormulaire.tauxPartage" class="form-control" name="taux" required mw-combobox="taux as taux.inactif ? taux.valeurTauxPartage.toString().concat(\' % (Inactif)\') : taux.valeurTauxPartage.toString().concat(\' %\') for taux in produitEngageCtrl.produitEngageFormulaire.organismeBeneficiaire.listeTaux " mw-combobox-min-length="0" mw-combobox-editable="false" mw-combobox-on-select="produitEngageCtrl.produitEngageFormulaire.traceProduitEngageForm.taux.$setDirty()" placeholder="Choisir un élément">\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n\r\n\r\n                        <span ng-show="produitEngageCtrl.enCloture">mode cloture</span>\r\n                    </mw-hretractable>\r\n</div>\r\n            <!-- Recapitulatif -->\r\n            <div ng-if="produitEngageCtrl.enRecapitulatif">\r\n                <div class="form-group" ng-if="produitEngageCtrl.produitEngageFormulaire.choixTracabilite">\r\n                    <!-- BLOC Traçabilité -->\r\n                    <div class="row">\r\n                        <div class="page-header mwsf-prdtengg-header-title">\r\n                            <h5 class="ng-binding">{{::produitEngageCtrl.libBlocTracabilite}}</h5>\r\n                        </div>\r\n                        <!-- Traçabilité -->\r\n                        <div class="form-group">\r\n                            <label for="nom" class="col-md-4 control-label ng-binding" ng-bind="::produitEngageCtrl.labelTracabilite"></label>\r\n                            <div class="col-md-6 mwsf-prdtengg-form-static">\r\n                                <span ng-bind="::produitEngageCtrl.labelOui" ng-class="(produitEngageCtrl.enModification && !produitEngageCtrl.hasModifieChamps(\'choixTracabilite\')) ? \'recapitulatif-valeur\' : \'recapitulatif-valeur-modifie\'"></span>\r\n                            </div>\r\n                        </div>\r\n                        <!-- Domaine / Secteur -->\r\n                        <div class="form-group">\r\n                            <label for="nom" class="col-md-4 control-label ng-binding" ng-bind="::produitEngageCtrl.produitEngageFormulaire.libelletDomaineTracabilite"></label>\r\n                            <div class="col-md-6 mwsf-prdtengg-form-static">\r\n                                <span ng-bind="::produitEngageCtrl.produitEngageFormulaire.domaineTracabilite.libelleUniversTracabilite" ng-class="(produitEngageCtrl.enModification && !produitEngageCtrl.hasModifieChamps(\'domaineTracabilite\')) ? \'recapitulatif-valeur\' : \'recapitulatif-valeur-modifie\'"></span>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n                <div class="form-group" ng-if="produitEngageCtrl.produitEngageFormulaire.choixPartage">\r\n                    <!-- BLOC PARTAGE -->\r\n                    <div class="row">\r\n                        <div class="page-header mwsf-prdtengg-header-title">\r\n                            <h5 class="ng-binding">{{::produitEngageCtrl.libBlocPartage}}</h5>\r\n                        </div>\r\n                        <!-- Partage des interets -->\r\n                        <div class="form-group">\r\n                            <label for="nom" class="col-md-4 control-label ng-binding" ng-bind="::produitEngageCtrl.labelPartageInteret"></label>\r\n                            <div class="col-md-6 mwsf-prdtengg-form-static">\r\n                                <span ng-bind="::produitEngageCtrl.labelOui" ng-class="(produitEngageCtrl.enModification && !produitEngageCtrl.hasModifieChamps(\'choixPartage\')) ? \'recapitulatif-valeur\' : \'recapitulatif-valeur-modifie\'"></span>\r\n                            </div>\r\n                        </div>\r\n                        <!-- Organisme bénéficiaire -->\r\n                        <div class="form-group">\r\n                            <label for="nom" class="col-md-4 control-label ng-binding" ng-bind="::produitEngageCtrl.labelPartageOrganisme"></label>\r\n                            <div class="col-md-6 mwsf-prdtengg-form-static">\r\n                                <span ng-bind="::produitEngageCtrl.produitEngageFormulaire.organismeBeneficiaire.designationBeneficiare" ng-class="(produitEngageCtrl.enModification && !produitEngageCtrl.hasModifieChamps(\'organismeBeneficiaire\')) ? \'recapitulatif-valeur\' : \'recapitulatif-valeur-modifie\'"></span>\r\n                            </div>\r\n                        </div>\r\n                        <!-- taux de partage -->\r\n                        <div class="form-group">\r\n                            <label for="nom" class="col-md-4 control-label ng-binding" ng-bind="::produitEngageCtrl.labelPartageTaux"></label>\r\n                            <div class="col-md-6 mwsf-prdtengg-form-static" ng-class="(produitEngageCtrl.enModification \r\n                                          && !produitEngageCtrl.hasModifieChamps(\'tauxPartage\')\r\n                                          && !produitEngageCtrl.hasModifieChamps(\'organismeBeneficiaire\')) ? \'recapitulatif-valeur\' : \'recapitulatif-valeur-modifie\'">\r\n                                <span ng-bind="::produitEngageCtrl.produitEngageFormulaire.tauxPartage.valeurTauxPartage.toString().concat(\' %\')"></span>\r\n                                <span ng-show="::produitEngageCtrl.produitEngageFormulaire.tauxPartage.inactif" ng-bind="\' (Inactif)\'"></span>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</div>');
}]);