/**
 * Généré par : ITGCE\S9990774
 * Changeset TFS : undefined
 * Etiquette TFS : undefined
 * Déclenchement : undefined
 */
"use strict";var myway;!function(t){var e;!function(t){t.module=angular.module("myway.comCaisseAuto",["ui.bootstrap","moduleAgent","myway.ui","myway.comInterdomaine","myway.comOpesFinancieres"])}(e=t.comCaisseAuto||(t.comCaisseAuto={}))}(myway||(myway={}));var myway;!function(t){var e;!function(t){var e=function(){function t(t,e){this.$modalInstance=t,this.serviceAgentExtended=e}return t.prototype.annuler=function(){this.$modalInstance.dismiss()},t.prototype.valider=function(){this.serviceAgentExtended.Lisa.Next(2),this.$modalInstance.close(12.33)},t.$inject=["$modalInstance","serviceAgentExtended"],t}();t.MwcaDistribuerCaisseAutoModalController=e,t.module.controller("MwcaDistribuerCaisseAutoModalController",e)}(e=t.comCaisseAuto||(t.comCaisseAuto={}))}(myway||(myway={}));var myway;!function(t){var e;!function(t){var e=function(){function t(t,e){this.montantRetrait=t,this.montantDepot=e}return t}();t.OperationDistribution=e}(e=t.comCaisseAuto||(t.comCaisseAuto={}))}(myway||(myway={}));var myway;!function(t){var e;!function(t){var e=function(){function e(t,e,n){this.$q=t,this.serviceAgentExtended=e,this.modalService=n}return e.prototype.isPosteCaisseAuto=function(){console.log("appel isPosteCaisseAuto");var t=this.serviceAgentExtended;return t.getParametresComptables().then(function(t){return console.log(t.typeCA),null!==t.typeCA&&""!==t.typeCA})},e.prototype.alimenterDistribution=function(e){var n;if(console.log("appel alimenterDistribution"),"ESP"===e.modeFinancier.CTGXMF){var o=this.serviceAgentExtended,i=e.client.identifiantPersonne;o.getFromContext("Distrib"+i).then(function(a){isNaN(e.montant)||(n=null===a?new t.OperationDistribution(0,0):a,console.log("la valeur récupérée: depot "+n.montantDepot+"|retrait "+n.montantRetrait),e.montant>0?n.montantDepot=n.montantDepot+e.montant:n.montantRetrait=n.montantRetrait+Math.abs(e.montant),o.addToSharedContext("Distrib"+i,n).then(function(){console.log("ajout effectué")}))})}},e.prototype.finaliserDistribution=function(t){var e=this;e.serviceAgentExtended.getFromContext("Distrib"+_.padLeft(t,9,"0")).then(function(t){return null===t?-1:(console.log("la valeur récupérée: depot "+t.montantDepot+"|retrait "+t.montantRetrait),void e.serviceAgentExtended.addToSharedContext("MontantDep_EUR",t.montantDepot).then(function(){console.log("ajout MontantDep_EUR effectuéxxx"),e.serviceAgentExtended.addToSharedContext("MontantRet_EUR",t.montantRetrait).then(function(){console.log("ajout MontantRet_EUR effectué"),e.serviceAgentExtended.Lisa.Next(1)})}))})},e.prototype.InventaireEspeces=function(){var t=this;console.log("appel isPosteCaisseAuto");var e=this.serviceAgentExtended;return e.getParametresComptables().then(function(e){if(console.log(e.typeCA),"R"!==e.typeCA)return 0;console.log("depotcaisse");var n="INVEN9990774EURO0SEC28112345         123.12";return t.serviceAgentExtended.TraitementNsdk.Lancer("depot",n).then(function(t){return console.log("retourdepotcaisse"),console.log("-->"+t),Number(t)})})},e.$inject=["$q","serviceAgentExtended","modalService"],e}();t.CaisseAutomatique=e,t.module.service("caisseautomatique",e)}(e=t.comCaisseAuto||(t.comCaisseAuto={}))}(myway||(myway={})),angular.module("myway.comCaisseAuto").run(["$templateCache",function(t){t.put("typescript/distribution/distribution-caisse-auto-modal-view.html",'<div class="modal-header">\r\n    <h3 class="modal-title">Distribution</h3>\r\n</div>\r\n<div class="modal-body texte-gros row">\r\n    \r\n</div>\r\n<div class="modal-footer">\r\n    <div class="col-sm-6">\r\n        <button id="annuler" type="button" class="btn btn-default" ng-click="caisseAutoModal.annuler()">Annuler</button>\r\n    </div>\r\n    <div class="col-sm-6">\r\n        <button id="valider" type="button" class="btn btn-primary" ng-click="caisseAutoModal.valider()">Valider</button>\r\n    </div>\r\n</div>')}]);