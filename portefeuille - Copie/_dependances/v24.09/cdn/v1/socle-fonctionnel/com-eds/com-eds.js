/**
 * Généré par : SIGCESIE\ct-tfsbuild
 * Changeset TFS : C654471
 * Etiquette TFS : com-eds-v1-v22.09_20220727.1
 * Déclenchement : Manual
 */
"use strict";var myway;!function(e){var t;!function(e){e.app=angular.module("myway.comEds",["ui.bootstrap","myway.comInterdomaine","moduleAgent","myway.ui","ngSanitize"])}(t=e.comEds||(e.comEds={}))}(myway||(myway={}));var myway;!function(e){var t;!function(e){var t=function(){function e(e,t,n,i,c,r){var s=this;this.$scope=e,this.$timeout=t,this.saisieAgentService=n,this.serviceAgentExtended=i,this.$q=c,this.$element=r,this.agentNonNominatif=this.agentNonNominatif?this.agentNonNominatif.toUpperCase():" ",this.loaderAgent=!1,this.minLength=this.typeFonction?0:2,this.waitTime=this.typeFonction?0:1e3,this.checkPlaceholder=!1,"Rechercher un poste fonctionnel"===this.placeholder&&(this.checkPlaceholder=!0),this.matricule&&(this.rechercheMatricule||angular.isUndefined(this.rechercheMatricule))&&(_.isNaN(+this.matricule[0])&&(this.matricule=this.matricule.substring(1)),this.rechercher(this.matricule).then(function(e){s.listeAgents=e,s.listeAgents&&1===s.listeAgents.length&&(s.agent=s.listeAgents[0])})),e.$watch(function(){return s.typeFonction},function(e,t){e&&e!==t&&s.rechercher("").then(function(e){s.listeAgents=e})}),this.ngFocus&&this.onFocus()}return e.prototype.rechercher=function(t){var n=this;if(this.loaderAgent=!0,this.typeFonction){if(t&&this.listeAgents){var i=this.$q.defer();this.errorMessage=null;var c=this.listeAgents.filter(function(e){return e.designation.indexOf(t.toUpperCase())>-1});return c&&0===c.length&&(this.errorMessage=e.ERROR_MESSAGE_AUCUN_RESULTAT),this.loaderAgent=!1,i.resolve(c),i.promise}return this.saisieAgentService.getRechercheParTypeFonction(this.typeFonction,this.codeAction).then(function(e){return n.errorMessage=null,n.loaderAgent=!1,n.listeAgents=e,n.ngFocus&&n.onFocus(),e},function(e){n.processError(e)})}if(this.rechercheMatricule||angular.isUndefined(this.rechercheMatricule)){var r=parseInt(t);if(t&&t.length<=e.NBRE_CARAC_MATRICULE&&r)return this.lastRecherche=t,this.saisieAgentService.getRechercheParMatricule(r,this.codeAction).then(function(e){return n.errorMessage=null,n.loaderAgent=!1,e},function(e){n.processError(e)})}if(this.lastRecherche&&t.toUpperCase().indexOf(this.lastRecherche.toUpperCase())>-1){var i=this.$q.defer();this.errorMessage=null;var c=this.listeAgents.filter(function(e){return e.designation.indexOf(t.toUpperCase())>-1});if(c&&c.length>0)return this.loaderAgent=!1,i.resolve(c),i.promise;0===c.length&&(this.errorMessage=e.ERROR_MESSAGE_AUCUN_RESULTAT)}return this.typeFonction?void 0:(this.lastRecherche=t,this.saisieAgentService.getAgents(t,this.maxReponses,this.agentNonNominatif,this.codeAction).then(function(t){return n.listeAgents=t,n.loaderAgent=!1,n.errorMessage=null,t&&0===t.length&&(n.errorMessage=e.ERROR_MESSAGE_AUCUN_RESULTAT),t},function(e){n.processError(e)}))},e.prototype.processError=function(e){this.loaderAgent=!1,this.listeAgents=[],e&&e.libelle&&(this.errorMessage=e.libelle)},e.prototype.onSelect=function(e){this._onSelect&&this._onSelect({selectedItem:e})},e.prototype.onItemSelect=function(e){this.agent=e,this.onSelect(e)},e.prototype.onFocus=function(){if(this.typeFonction){var e=this.$element.find("input").controller("ngModel");e.$setViewValue(NaN),e.$setViewValue(" ")}},e.$inject=["$scope","$timeout","saisieAgentService","serviceAgentExtended","$q","$element"],e.NBRE_CARAC_MATRICULE=7,e.ERROR_MESSAGE_AUCUN_RESULTAT="PAS D'AGENT POUR CETTE RECHERCHE ",e}();e.SaisirAgentController=t,e.app.controller("SaisirAgentController",t)}(t=e.comEds||(e.comEds={}))}(myway||(myway={}));var myway;!function(e){var t;!function(e){function t(){return{restrict:"E",templateUrl:"typescript/liste-agent/saisie-agent-view.html",scope:{agent:"=ngModel",disable:"=disable",placeholder:"@",required:"=",maxReponses:"=maxReponses",rechercheMatricule:"=",agentNonNominatif:"@",codeAction:"=codeAction",_onSelect:"&onSelect",typeFonction:"@",ngFocus:"@",prolongementListeVersGauche:"=",matricule:"@"},controller:"SaisirAgentController",controllerAs:"viewModelAgentCtrl",bindToController:!0,link:function(e,t,n){if("typeFonction"in n){var i=t.find("input").controller("ngModel");i.$setViewValue(" ")}if(!("ngModel"in n))throw new Error('ng-model est un paramètre obligatoire.   ==>  < mwsf-saisie-agent ng-model="myObject" > \n');if(!("required"in n))throw new Error('required est un paramètre obligatoire.   ==>  < mwsf-saisie-agent required="true or false" > \n');if(!("codeAction"in n))throw new Error('code-action est un paramètre obligatoire.   ==>  < mwsf-saisie-agent code-action="0 or 1 or 2 or 3" > \n')}}}e.mwsfSaisieAgent=t,e.app.directive("mwsfSaisieAgent",t)}(t=e.comEds||(e.comEds={}))}(myway||(myway={}));var myway;!function(e){var t;!function(e){var t=function(){function e(e,t){this.$q=e,this.serviceAgentExtended=t}return e.prototype.replaceAll=function(e,t,n){for(;e.indexOf(t)>-1;)e=e.replace(t,n);return e},e.prototype.getCurrentCOCXBQ=function(){return this.serviceAgentExtended.getAuthentificationInfo().then(function(e){try{return e.codeEtablissement}catch(t){throw"impossible de récuperer les données depuis le context"}})},e.prototype.getRechercheParMatricule=function(e,t){var n=this;return this.getCurrentCOCXBQ().then(function(i){var c=_.padLeft(String(e),7,"0"),r="http://myway-ressources-dua.sigcesie.caisse-epargne.fr:6083/agent-v3/recherche?typeRecherche=05&codeEtablissement="+i+"&identifiantAgent="+c+"&codeAction="+t;return n.serviceAgentExtended.sendRequest({url:r,withHeaders:!0,method:MyWay.Services.MethodEnum.GET}).then(function(e){return n.mapAgent(e.listeAgents)})})},e.prototype.getRechercheParTypeFonction=function(e,t){var n=this;return this.getCurrentCOCXBQ().then(function(i){var c="http://myway-ressources-dua.sigcesie.caisse-epargne.fr:6083/agent-v3/recherche?typeRecherche=3&codeEtablissement="+i+"&typeFonction="+e+"&codeAction="+t;return n.serviceAgentExtended.sendRequest({url:c,withHeaders:!0,method:MyWay.Services.MethodEnum.GET,originalResponse:!0}).then(function(e){return n.mapData(e)})})},e.prototype.getAgents=function(t,n,i,c){var r=this;return n=angular.isUndefined(n)?e.MAX_REPONSES:n,i=angular.isUndefined(i)?" ":i,t=t.toUpperCase(),t=this.replaceAll(t,'"',""),this.getCurrentCOCXBQ().then(function(e){var s="http://myway-ressources-dua.sigcesie.caisse-epargne.fr:6083/agent-v3/recherche?typeRecherche=01&codeEtablissement="+e+"&nomAgentDebutPlage="+t+"&nombreMaximumReponse="+n+"&indicateurAgentNonNominatif="+i+"&codeAction="+c;return r.serviceAgentExtended.sendRequest({url:s,withHeaders:!0,method:MyWay.Services.MethodEnum.GET,originalResponse:!0}).then(function(e){return r.mapData(e)})})},e.prototype.mapData=function(e){var t=this.$q.defer();if(console.log("com.eds  saisie agent code status "+e.status),console.log("com.eds  saisie agent response "+e.response),204===e.status)t.resolve([]);else if(206===e.status)t.reject({libelle:e.response});else{var n=JSON.parse(e.response);t.resolve(this.mapAgent(n.listeAgents))}return t.promise},e.prototype.mapAgent=function(e){var t=[];return angular.isUndefined(e)?t:(angular.forEach(e,function(e,n){var i=new MyWay.Model.Agent(e.identifiantAgent,e.designationAgent,e.libelleFonction,e.referenceElementStructure,e.libelleEDSHierarchique);i.dateDebutValidite=e.dateDebutValiditeAgent,i.dateFinValidite=e.dateFinValiditeAgent,i.idEdsHierarchique=e.identifiantEDSHierarchique,i.idEds=e.identifiantElementStructure,i.indicAgentNonNominatif=e.indicateurAgentNonNominatif,i.libelleTypeEdsHierarchique=e.libelleTypeEDSHierarchique,i.refEDSHierarchique=e.referenceEDSHierarchique,i.typeEdsHierarchique=e.typeEDSHierarchique,i.typeFonction=e.typeFonction,t.push(i)}),t)},e.MAX_REPONSES=999,e.$inject=["$q","serviceAgentExtended"],e}();e.SaisieAgentService=t,e.app.service("saisieAgentService",t)}(t=e.comEds||(e.comEds={}))}(myway||(myway={}));var myway;!function(e){var t;!function(t){var n=function(){function t(e,n,i,c){var r=this;this.$scope=e,this.saisieAgenceDestinataireService=n,this.serviceAgentExtended=i,this.$element=c,this.serviceAgentExtended.getFromContext(t.AGENCES_CONTEXT).then(function(e){if(!e||e&&0===e.length)r.saisieAgenceDestinataireService.getAgencesDestinataires().then(function(e){r.listeAgences=[];var n=e;angular.isUndefined(n)&&(n=[]);for(var i=0;i<n.length;i++)r.listeAgences.push(n[i]);if(angular.isNumber(r.agence)||angular.isString(r.agence)){var c=r.saisieAgenceDestinataireService.affineValue(String(r.agence));if(angular.isNumber(r.agence)?r.agence=r.listeAgences.filter(function(e){return e.identifiantElementStructure===parseInt(String(r.agence))})[0]:angular.isString(r.agence)&&(r.agence=r.listeAgences.filter(function(e){return e.id===c})[0]),!r.agence){var s=r.listeAgences.filter(function(e){return e.id===c})[0],o=r.listeAgences.filter(function(e){return e.identifiantElementStructure===parseInt(String(r.agence))})[0];r.agence=s?s:o}r.selected=r.agence?r.agence.value:null}else if(r.agence instanceof MyWay.Model.Agence&&angular.isDefined(r.agence.id)){r.agence.id=_.padLeft(r.agence.id,7,"0");var a=r.listeAgences.filter(function(e){return e.id===r.agence.id})[0];r.agence=a?a:null}null!=r.agence&&r.serviceAgentExtended.addToContext(t.AGENCES_DOMI_CONTEXT,r.agence),r.serviceAgentExtended.addToContext(t.AGENCES_CONTEXT,r.listeAgences)},function(e){r.processError(e)});else if(r.listeAgences=e,r.serviceAgentExtended.getFromContext(t.AGENCES_DOMI_CONTEXT).then(function(e){r.agence=e}),angular.isDefined(r.listeAgences)&&(angular.isNumber(r.agence)||angular.isString(r.agence))){var n=r.saisieAgenceDestinataireService.affineValue(String(r.agence));if(angular.isNumber(r.agence)?r.agence=r.listeAgences.filter(function(e){return e.identifiantElementStructure===parseInt(String(r.agence))})[0]:angular.isString(r.agence)&&(r.agence=r.listeAgences.filter(function(e){return e.id===n})[0]),!r.agence){var i=r.listeAgences.filter(function(e){return e.id===n})[0],c=r.listeAgences.filter(function(e){return e.identifiantElementStructure===parseInt(String(r.agence))})[0];r.agence=i?i:c}r.selected=r.agence?r.agence.value:null}else if(angular.isDefined(r.listeAgences)&&r.agence instanceof MyWay.Model.Agence&&angular.isDefined(r.agence.id)){r.agence.id=_.padLeft(r.agence.id,7,"0");var s=r.listeAgences.filter(function(e){return e.id===r.agence.id})[0];r.agence=s?s:null}}),e.$watch(function(){return r.selected},function(e,t){(null===e||angular.isUndefined(e)||""===e)&&angular.isDefined(r.listeAgences)&&(r.agence=null)}),e.$watch(function(){return r.agence},function(e,t){if(e instanceof MyWay.Model.Agence&&angular.isUndefined(e.id)&&angular.isUndefined(e.value)&&(r.agence=e,r.selected=r.agence?r.agence.value:null),e&&e.id)if(angular.isDefined(r.listeAgences)&&angular.isUndefined(e.value)){e.id=_.padLeft(e.id,7,"0");var n=r.listeAgences.filter(function(t){return t.id===e.id})[0];r.agence=n?n:null}else r.agence=e,r.selected=r.agence?r.agence.value:null;var i=parseInt(String(e));if(angular.isDefined(r.listeAgences)&&(i||angular.isString(r.agence))){var c=r.saisieAgenceDestinataireService.affineValue(String(i));if(angular.isNumber(r.agence)?r.agence=r.listeAgences.filter(function(e){return e.identifiantElementStructure===parseInt(String(r.agence))})[0]:angular.isString(r.agence)&&(r.agence=r.listeAgences.filter(function(e){return e.id===c})[0]),!r.agence){var s=r.listeAgences.filter(function(e){return e.id===c})[0],o=r.listeAgences.filter(function(e){return e.identifiantElementStructure===parseInt(String(i))})[0];r.agence=s?s:o}r.selected=r.agence?r.agence.value:null}})}return t.prototype.onSelect=function(e){this._onSelect&&this._onSelect({selectedItem:e})},t.prototype.onItemSelect=function(e){this.agence=e,this.onSelect(e)},t.prototype.processError=function(e){this.listeAgences=[],this.agence=null,e&&e.data&&(e.data.valeurs&&e.data.valeurs.length>0?this.errorMessage=e.data.valeurs[0]:this.errorMessage=e.data.libelle)},t.prototype.keydown=function(t){this.enterKeypressEvent&&t.keyCode===e.comInterdomaine.KeyCode.ENTER&&(t.preventDefault(),this.$scope.$emit(MyWay.CustomEvents.ENTER_KEYPRESS))},t.prototype.onblur=function(){this.selected=this.agence?this.agence.value:null},t.$inject=["$scope","saisieAgenceDestinataireService","serviceAgentExtended","$element"],t.MAX_LENGTH=7,t.DEFAULT_ERROR_MESSAGE="Erreur technique lors de la récupération des agences",t.AGENCES_CONTEXT="AGENCES",t.AGENCES_DOMI_CONTEXT="AGENCE_DOMI",t}();t.SaisirAgenceDestinataireController=n,t.app.controller("SaisirAgenceDestinataireController",n)}(t=e.comEds||(e.comEds={}))}(myway||(myway={}));var myway;!function(e){var t;!function(e){function t(){return{restrict:"E",templateUrl:"typescript/agence-destinataire/saisie-agence-destinataire-view.html",scope:{libelle:"@",setLabelWidth:"@",agence:"=ngModel",required:"=",chevronVisible:"@",dropdownSetWidth:"@",notItemsFoundText:"@",enterKeypressEvent:"=",disable:"=disable",_onSelect:"&onSelect",placeholder:"@",prolongementListeVersGauche:"="},controller:"SaisirAgenceDestinataireController",controllerAs:"viewModelAgenceDestinataireCtrl",bindToController:!0,link:function(e,t,n){if(!("ngModel"in n))throw new Error('ng-model est un paramètre obligatoire.   ==>  < mwsf-saisie-agence-destinataire ng-model="myObject" > \n');if(!("required"in n))throw new Error('required est un paramètre obligatoire.   ==>  < mwsf-saisie-agence-destinataire required="true or false" > \n')}}}e.mwsfSaisieAgenceDestinataire=t,e.app.directive("mwsfSaisieAgenceDestinataire",t)}(t=e.comEds||(e.comEds={}))}(myway||(myway={}));var myway;!function(e){var t;!function(e){var t=function(){function t(e,t,n){this.$q=e,this.$http=t,this.serviceAgentExtended=n}return t.prototype.getAgencesDestinataires=function(){var e=this;return this.getCurrentCOCXBQ().then(function(t){var n="http://myway-ressources-dua.sigcesie.caisse-epargne.fr:6083/structure-v1/recherche?codeEtablissement="+t+"&typeRechercheEDS=4&typeEDS=003";return e.serviceAgentExtended.sendRequest({url:n,withHeaders:!0,method:MyWay.Services.MethodEnum.GET}).then(function(t){return e.getAgencesDTO(t)})["catch"](function(t){return e.getAgencesDTO(null)})})},t.prototype.affineValue=function(t){return t&&String(t).length<e.SaisirAgenceDestinataireController.MAX_LENGTH?_.padLeft(String(t),e.SaisirAgenceDestinataireController.MAX_LENGTH,"0"):t},t.prototype.getAgencesDTO=function(e){var t=this,n=[];return angular.forEach(e,function(e,i){var c=new MyWay.Model.Agence,r=e?t.affineValue(String(e.referenceExterneEDS)):"";c.id=r,c.value=r?r.concat(" - ").concat(String(e.libelleElementStructure)):"",c.identifiantElementStructure=e.identifiantElementStructure,n.push(c)}),n},t.prototype.getCurrentCOCXBQ=function(){return this.serviceAgentExtended.getAuthentificationInfo().then(function(e){try{return e.codeEtablissement}catch(t){throw"impossible de récuperer les données depuis le context"}})},t.$inject=["$q","$http","serviceAgentExtended"],t}();e.SaisieAgenceDestinataireService=t,e.app.service("saisieAgenceDestinataireService",t)}(t=e.comEds||(e.comEds={}))}(myway||(myway={}));var myway;!function(e){var t;!function(e){var t=function(){function e(e,t){var n=this;this.$scope=e,this.rechercheEdsService=t,this.chargerListeGuichet(),e.$watch(function(){return n.edsGuichetParam},function(e,t){e!==t&&n.chargerListeGuichet()},!0)}return e.prototype.chargerListeGuichet=function(){var t=this;this.listeGuichet=[],this.rechercheEdsService.getListeGuichets(this.edsGuichetParam.identifiantInterneEDS,this.edsGuichetParam.codeEtablissement,this.edsGuichetParam.typeGuichet).then(function(n){angular.forEach(n.listeGuichet,function(n,i){n.referenceExterneGuichetAffichage=_.padLeft(n.referenceExterneGuichet.toString(),e.MAX_LENGTH,"0"),t.listeGuichet.push(n)})})},e.$inject=["$scope","mwsfRechercheEdsGuichetService"],e.MAX_LENGTH=7,e}();e.ListeGuichetController=t,e.app.controller("ListeGuichetController",t)}(t=e.comEds||(e.comEds={}))}(myway||(myway={}));var myway;!function(e){var t;!function(e){function t(){return{restrict:"E",templateUrl:"typescript/liste-guichet/liste-guichet-view.html",scope:{edsGuichetParam:"=",edsGuichet:"="},controller:"ListeGuichetController",controllerAs:"viewModelListeGuichetCtrl",bindToController:!0,link:function(e,t,n){}}}e.mwsfListeGuichet=t,e.app.directive("mwsfListeGuichet",t)}(t=e.comEds||(e.comEds={}))}(myway||(myway={}));var MyWay;!function(e){var t;!function(e){var t=function(){function e(e,t,n){this.id=e,this.value=t,this.identifiantElementStructure=n}return e}();e.Agence=t}(t=e.Model||(e.Model={}))}(MyWay||(MyWay={}));var MyWay;!function(e){var t;!function(e){var t=function(){function e(e,t,n,i,c){this.id=e,this.libelleFonction=n,this.refEDS=i,this.designation=t,this.libelleEdsHierarchique=c,this.libelle=this.designation+" - "+this.libelleFonction+" - "+this.libelleEdsHierarchique}return e}();e.Agent=t}(t=e.Model||(e.Model={}))}(MyWay||(MyWay={}));var MyWay;!function(e){var t;!function(e){var t=function(){function e(e,t){this.codeCaisse=e,this.codeEDS=t}return e}();e.EDS=t;var n=function(){function e(e,t,n){this.typeEDSGlobal=e,this.edsInformations=t,this.edsAgent=n}return e}();e.EDSGlobal=n;var i=function(){function e(e,t,n){this.codeEtablissement=e,this.identifiantInterneEDS=t,this.typeGuichet=n}return e}();e.EDSGuichetParam=i;var c=function(){function e(e,t,n){this.codeEtablissement=e,this.codeRelation=t,this.typeGuichet=n}return e}();e.EDSRechercheGuichetParam=c;var r=function(){function e(e,t,n){this.codeEtablissement=e,this.codeRelation=t,this.presencePFParFonction=n}return e}();e.EDSRechercheGlobaleParam=r}(t=e.Model||(e.Model={}))}(MyWay||(MyWay={}));var myway;!function(e){var t;!function(e){}(t=e.comEds||(e.comEds={}))}(myway||(myway={}));var myway;!function(e){var t;!function(e){var t=function(){function e(e,t){var n=this;this.$scope=e,this.rechercheEdsGlobaleService=t,this.$scope.$on("envoiListeEds",function(e,t){n.listeEds=t})}return e.prototype.ouvrirModaleEdsGlobale=function(){var e=this;this.rechercheEdsGlobaleService.ouvrirModaleRecherche(this.edsRechercheGlobaleParam,this.edsSelectionne).then(function(t){e.edsSelectionne=t,e.edsSelectionne&&e.onSelect&&e.onSelect({eds:e.edsSelectionne})})},e.$inject=["$scope","mwsfRechercheEdsGlobaleService"],e}();e.RechercheEdsGlobaleController=t,e.app.controller("mwsfRechercheEdsGlobaleController",t)}(t=e.comEds||(e.comEds={}))}(myway||(myway={}));var myway;!function(e){var t;!function(e){var t=function(){return{restrict:"E",templateUrl:"typescript/recherche-eds-globale/recherche-eds-globale-view.html",controller:"mwsfRechercheEdsGlobaleController",controllerAs:"mwsfRechercheEdsGlobale",bindToController:!0,scope:{edsRechercheGlobaleParam:"=",edsSelectionne:"=?eds",textButton:"@",onSelect:"&?",listeEds:"=?"}}};t.$inject=[],e.app.directive("mwsfRechercheEdsGlobale",t)}(t=e.comEds||(e.comEds={}))}(myway||(myway={}));var myway;!function(e){var t;!function(e){var t=function(){function e(e){this.modalService=e}return e.prototype.ouvrirModaleRecherche=function(e,t){return this.modalService.showModal({templateUrl:"typescript/recherche-eds-globale/modale/recherche-eds-globale-modale-view.html",controller:"mwsfRechercheEdsGlobaleModaleController",controllerAs:"mwsfRechercheEdsGlobaleModale",size:"full",backdrop:"static",resolve:{edsRechercheGlobaleParam:function(){return e},eds:function(){return t}}})},e.$inject=["modalService"],e}();e.RechercheEdsGlobaleService=t,e.app.service("mwsfRechercheEdsGlobaleService",t)}(t=e.comEds||(e.comEds={}))}(myway||(myway={}));var myway;!function(e){var t;!function(e){var t=function(){function e(e,t){this.informationGuichet=e,this.caracteristiqueGuichet=t}return e}();e.Guichet=t}(t=e.comEds||(e.comEds={}))}(myway||(myway={}));var myway;!function(e){var t;!function(e){var t=function(){function e(e,t,n){this.$scope=e,this.serviceAgentExtended=t,this.rechercheEdsService=n}return e.prototype.ouvrirModaleEds=function(){var e=this;this.rechercheEdsService.ouvrirModaleRecherche(this.edsRechercheGuichetParam,this.guichetSelectionne).then(function(t){e.guichetSelectionne=t,e.guichetSelectionne&&e.onSelect&&e.onSelect({guichet:e.guichetSelectionne})})},e.$inject=["$scope","serviceAgentExtended","mwsfRechercheEdsGuichetService"],e}();e.RechercheEdsGuichetController=t,e.app.controller("mwsfRechercheEdsGuichetController",t)}(t=e.comEds||(e.comEds={}))}(myway||(myway={}));var myway;!function(e){var t;!function(e){var t=function(){return{restrict:"E",templateUrl:"typescript/recherche-eds-guichet/recherche-eds-guichet-view.html",controller:"mwsfRechercheEdsGuichetController",controllerAs:"mwsfRechercheEdsGuichet",bindToController:!0,scope:{edsRechercheGuichetParam:"=",guichetSelectionne:"=?guichet",onSelect:"&?"}}};t.$inject=[],e.app.directive("mwsfRechercheEdsGuichet",t)}(t=e.comEds||(e.comEds={}))}(myway||(myway={}));var myway;!function(e){var t;!function(e){var t=function(){function e(e,t,n){this.$q=e,this.serviceAgentExtended=t,this.modalService=n}return e.prototype.ouvrirModaleRecherche=function(e,t){return this.modalService.showModal({templateUrl:"typescript/recherche-eds-guichet/modale/recherche-eds-guichet-modale-view.html",controller:"mwsfRechercheEdsGuichetModaleController",controllerAs:"mwsfRechercheEdsGuichetModale",size:"full",backdrop:"static",resolve:{edsRechercheGuichetParam:function(){return e},guichet:function(){return t}}})},e.prototype.getFonctionPosteFonctionnelGuichet=function(e){var t={codeEtablissement:e,typeInterrogation:"F",dateInterrogation:(new Date).toISOString()};return this.serviceAgentExtended.sendRequest({url:"http://myway-ressources-dua.sigcesie.caisse-epargne.fr:6083/structureparametre-v1/parametreEDS",withHeaders:!0,params:t}).then(function(e){return e})},e.prototype.getCaracteristiqueGuichet=function(e,t,n){var i={codeEtablissement:n,identifiantElementStructure:e,typeOrganisation:t,dateInterrogation:(new Date).toISOString()};return this.serviceAgentExtended.sendRequest({url:"http://myway-ressources-dua.sigcesie.caisse-epargne.fr:6083/structure-v2/caracteristiqueGuichet",withHeaders:!0,params:i}).then(function(e){return e})},e.prototype.getListeGuichets=function(e,t,n){var i={codeEtablissement:t,identifiantInterneEDS:e};return null!=n&&(i.typeGuichetRecherche=n),this.serviceAgentExtended.sendRequest({url:"http://myway-ressources-dua.sigcesie.caisse-epargne.fr:6083/structure-v2/guichetEDS",withHeaders:!0,params:i}).then(function(e){return e})},e.prototype.getTypeEDS=function(e,t){var n={codeEtablissement:e};return null!=t&&(n.codeRelationEDS=t),this.serviceAgentExtended.sendRequest({url:"http://myway-ressources-dua.sigcesie.caisse-epargne.fr:6083/structureparametre-v1/typeEDS",withHeaders:!0,params:n}).then(function(e){return _.sortBy(e.listeValeurTypeEDS,"libelleTypeEDS")})},e.prototype.getRecherche=function(e){return this.serviceAgentExtended.sendRequest({url:"http://myway-ressources-dua.sigcesie.caisse-epargne.fr:6083/structure-v2/recherche",withHeaders:!0,params:e})},e.$inject=["$q","serviceAgentExtended","modalService"],e}();e.RechercheEdsGuichetService=t,e.app.service("mwsfRechercheEdsGuichetService",t)}(t=e.comEds||(e.comEds={}))}(myway||(myway={}));var myway;!function(e){var t;!function(e){!function(e){e[e.IDENTIFIANT_INTERNE=1]="IDENTIFIANT_INTERNE",e[e.REFERENCE_EXTERNE_ET_TYPE=2]="REFERENCE_EXTERNE_ET_TYPE",e[e.LIBELLE_EDS=3]="LIBELLE_EDS",e[e.TYPE_EDS=4]="TYPE_EDS"}(e.TypeRechercheEDSEnum||(e.TypeRechercheEDSEnum={}));var t=(e.TypeRechercheEDSEnum,function(){function e(){}return e}());e.DonneesCommunesEDSGuichet=t}(t=e.comEds||(e.comEds={}))}(myway||(myway={}));var myway;!function(e){var t;!function(e){}(t=e.comEds||(e.comEds={}))}(myway||(myway={}));var myway;!function(e){var t;!function(e){var t=function(){function t(e,t,n){var i=this;this.rechercheEdsGlobaleService=e,this.$scope=t,this.rechercheEdsService=n,this.affichageListeAgences=!0,t.$watch(function(){return i.agence},function(e,t){e!==t&&(e&&e.identifiantElementStructure?i.selectionAgenceListeType(e):null===e&&i.affichageListeAgences===!0&&(i.edsSelectionne=null))}),t.$watch(function(){return i.agenceDefaut},function(e,t){e!==t&&(i.codeTypeEdsDefaut&&"003"!==i.codeTypeEdsDefaut&&i.agenceDefaut&&i.agenceDefaut.identifiantElementStructure?i.chargementListeEdsParDefaut(i.agenceDefaut.identifiantElementStructure,i.codeTypeEdsDefaut):i.agence=i.agenceDefaut)}),this.codeTypeEdsDefaut&&"003"!==this.codeTypeEdsDefaut&&this.agenceDefaut&&this.agenceDefaut.identifiantElementStructure?this.chargementListeEdsParDefaut(this.agenceDefaut.identifiantElementStructure,this.codeTypeEdsDefaut):this.agence=this.agenceDefaut,t.$watch(function(){return i.edsGlobalSelectionne},function(e,t){e!==t&&(i.affichageListeAgences=!1,i.agence=null,e&&("003"===e.edsInformations.typeElementStructure?(i.affichageListeAgences=!0,i.agence=new MyWay.Model.Agence,i.agence.identifiantElementStructure=e.edsInformations.identifiantElementStructure,i.agence.id=_.padLeft(e.edsInformations.referenceExterneEDS,7,"0"),i.selectionAgenceListeType(i.agence)):i.edsSelectionne=e.edsInformations))})}return t.prototype.chargementListeEdsParDefaut=function(t,n){var i=this;this.rechercheEdsService.getRecherche({typeRechercheEDS:e.TypeRechercheEDSEnum.TYPE_EDS,codeEtablissement:this.parametreListeEdsGlobal.codeEtablissement,typeEDS:n}).then(function(e){e.length>0&&(i.listeEds=e,i.edsSelectionne=_.find(i.listeEds,{identifiantElementStructure:t}),i.affichageListeAgences=!1)})},t.prototype.selectionAgenceListeType=function(t){var n=this;t&&this.rechercheEdsService.getRecherche({typeRechercheEDS:e.TypeRechercheEDSEnum.IDENTIFIANT_INTERNE,codeEtablissement:this.parametreListeEdsGlobal.codeEtablissement,typeEDS:"003",identifiantEDS:t.identifiantElementStructure}).then(function(e){e.length>0&&(n.edsSelectionne=e[0],n.affichageListeAgences=!0)})},t.$inject=["mwsfRechercheEdsGlobaleService","$scope","mwsfRechercheEdsGuichetService"],t}();e.RechercheListeTypeEdsControleur=t,e.app.controller("mwsfRechercheListeTypeEdsControleur",t)}(t=e.comEds||(e.comEds={}))}(myway||(myway={}));var myway;!function(e){var t;!function(e){function t(){return{restrict:"E",controller:"mwsfRechercheListeTypeEdsControleur",controllerAs:"ctrl",bindToController:!0,templateUrl:"typescript/recherche-liste-type-eds/recherche-liste-type-eds-view.html",scope:{edsSelectionne:"=",parametreListeEdsGlobal:"=",agenceDefaut:"=?",texteBouton:"@?",codeTypeEdsDefaut:"=?",blocageRechercheEds:"=?"}}}e.app.directive("rechercheListeTypeEds",t)}(t=e.comEds||(e.comEds={}))}(myway||(myway={}));var myway;!function(e){var t;!function(e){var t=function(){function t(e,t,n,i,c,r,s,o){var a=this;this.$scope=e,this.$timeout=t,this.modale=n,this.serviceAgentExtended=i,this.rechercheEdsService=c,this.edsRechercheGlobaleParam=r,this.eds=s,this.$rootScope=o,this.ID_COLONNE_TYPE="type",this.ID_COLONNE_EDS="eds",this.ID_COLONNE_FONCTION="fonction",this.afficherColonneRechercheAgence=!1,this.afficherColonneAutreRecherche=!1,this.afficherColonnePosteFonctionnel=!1,this.afficherColonneFonctionsPosteFonctionnels=!1,this.estSelectionneFonction=!1,this.afficherColonneAutreRecherche=!0,this.afficherColonneRechercheAgence=!1,this.afficherColonnePosteFonctionnel=!1,this.afficherColonneFonctionsPosteFonctionnels=!1,this.loading=this.rechercheEdsService.getTypeEDS(this.edsRechercheGlobaleParam.codeEtablissement,this.edsRechercheGlobaleParam.codeRelation).then(function(e){if(a.edsRechercheGlobaleParam.presencePFParFonction){var t=angular.copy(e[0]);t.libelleTypeEDS="POSTE FONCTIONNEL PAR FONCTION",t.typeEDS="PFF",e.push(t)}_.remove(e,{typeEDS:"020"}),a.types=_.sortBy(e,"libelleTypeEDS")}),e.$watch(function(){return a.agent},function(e,t){void 0!==e&&null!==e&&e instanceof Object&&(a.eds=new MyWay.Model.EDSGlobal,a.eds.typeEDSGlobal="A",a.eds.edsAgent=e)})}return t.prototype.onSelectionChangeNavcolList=function(e,t){this.eds=null,t===this.ID_COLONNE_TYPE?this.selectionType(e):t===this.ID_COLONNE_FONCTION?this.selectionFonction(e):t===this.ID_COLONNE_EDS&&this.selectionEDS(e)},t.prototype.onNavcolRecherche=function(e,t){},t.prototype.selectionFonction=function(e){this.agent=null,this.afficherColonnePosteFonctionnel=!0,this.estSelectionneFonction=!0,this.codeFonctionPFSelectionne=e.codeFonction},t.prototype.selectionAgence=function(t){var n=this;this.estSelectionneFonction=!1,t&&this.rechercheEdsService.getRecherche({typeRechercheEDS:e.TypeRechercheEDSEnum.IDENTIFIANT_INTERNE,codeEtablissement:this.edsRechercheGlobaleParam.codeEtablissement,typeEDS:this.typeSelectionne.typeEDS,identifiantEDS:t.identifiantElementStructure}).then(function(e){n.selectionEDS(e[0])})},t.prototype.selectionType=function(t){var n=this;this.typeSelectionne=t,"001"===t.typeEDS?(this.afficherColonneAutreRecherche=!1,this.afficherColonneRechercheAgence=!1,this.afficherColonnePosteFonctionnel=!0,this.afficherColonneFonctionsPosteFonctionnels=!1,this.estSelectionneFonction=!1):"003"===t.typeEDS?(this.afficherColonneRechercheAgence=!0,this.afficherColonneAutreRecherche=!1,this.afficherColonnePosteFonctionnel=!1,this.afficherColonneFonctionsPosteFonctionnels=!1,this.estSelectionneFonction=!1):"PFF"===t.typeEDS?(this.afficherColonneAutreRecherche=!1,this.afficherColonnePosteFonctionnel=!1,this.afficherColonneRechercheAgence=!1,this.afficherColonneFonctionsPosteFonctionnels=!0,this.estSelectionneFonction=!1,this.loading=this.rechercheEdsService.getFonctionPosteFonctionnelGuichet(this.edsRechercheGlobaleParam.codeEtablissement).then(function(e){n.listeFonctions=angular.copy(e.fonction)})):(this.afficherColonneRechercheAgence=!1,this.afficherColonneAutreRecherche=!0,this.afficherColonnePosteFonctionnel=!1,this.afficherColonneFonctionsPosteFonctionnels=!1,this.estSelectionneFonction=!1,this.loading=this.rechercheEdsService.getRecherche({typeRechercheEDS:e.TypeRechercheEDSEnum.TYPE_EDS,codeEtablissement:this.edsRechercheGlobaleParam.codeEtablissement,typeEDS:this.typeSelectionne.typeEDS}).then(function(e){e.forEach(function(e){e.referenceExterneEDS=_.padLeft(e.referenceExterneEDS,7,"0"),e.refLibelleEDS=e.referenceExterneEDS+" - "+e.libelleLongEDS}),n.listeEDS=e,n.$rootScope.$broadcast("envoiListeEds",n.listeEDS)})["catch"](function(e){n.serviceAgentExtended.Trace.info("L'EDS ne renvoit rien ou trop de résultats","selectionType",e),n.listeEDS=[]}))},t.prototype.selectionEDS=function(e){this.eds=new MyWay.Model.EDSGlobal,this.eds.typeEDSGlobal="E",this.eds.edsInformations=e},t.$inject=["$scope","$timeout","$modalInstance","serviceAgentExtended","mwsfRechercheEdsGuichetService","edsRechercheGlobaleParam","eds","$rootScope"],t}();e.RechercheEdsGlobaleModaleController=t,e.app.controller("mwsfRechercheEdsGlobaleModaleController",t)}(t=e.comEds||(e.comEds={}))}(myway||(myway={}));var myway;!function(e){var t;!function(t){var n=function(){function n(e,t,n,i,c,r,s,o,a){var l=this;this.$scope=e,this.$timeout=t,this.modale=n,this.serviceAgentExtended=i,this.rechercheEdsService=c,this.edsRechercheGuichetParam=r,this.guichet=s,this.$filter=o,this.saisieAgenceDestinataireService=a,this.ID_COLONNE_TYPE="type",this.ID_COLONNE_EDS="eds",this.ID_COLONNE_GUICHET="guichet",this.afficherColonneRechercheAgence=!1,this.afficherColonneAutreRecherche=!1,this.listeGuichet=[],this.afficherColonneAutreRecherche=!0,this.afficherColonneRechercheAgence=!1,this.loading=this.rechercheEdsService.getTypeEDS(this.edsRechercheGuichetParam.codeEtablissement,this.edsRechercheGuichetParam.codeRelation).then(function(e){_.remove(e,{typeEDS:"020"}),l.types=e})}return n.prototype.onSelectionChangeNavcolList=function(t,n){var i=this;n===this.ID_COLONNE_TYPE?this.selectionType(t):n===this.ID_COLONNE_EDS?this.selectionEDS(t):n===this.ID_COLONNE_GUICHET&&(this.guichet=new e.comEds.Guichet,this.guichet.informationGuichet=t,this.rechercheEdsService.getCaracteristiqueGuichet(this.guichet.informationGuichet.identifiantInterneGuichet,"002",this.edsRechercheGuichetParam.codeEtablissement).then(function(e){i.guichet.caracteristiqueGuichet=e}))},n.prototype.onNavcolRecherche=function(e,t){},n.prototype.selectionType=function(e){var n=this;this.typeSelectionne=e,"003"===e.typeEDS?(this.listeGuichet=[],this.loading=this.serviceAgentExtended.getFromContext("AGENCES").then(function(e){return n.listeEDS=[],!e||e&&0===e.length?n.saisieAgenceDestinataireService.getAgencesDestinataires().then(function(e){e.forEach(function(e){var i=new t.DonneesCommunesEDSGuichet;i.identifiantElementStructure=e.identifiantElementStructure,i.refLibelleEDS=e.value,i.libelleLongEDS=e.value.split(" - ")[1],console.log(i.libelleLongEDS),i.referenceExterneEDS=e.id,n.listeEDS.push(i)}),n.serviceAgentExtended.addToContext("AGENCES",e),
n.listeEDS=n.$filter("orderBy")(n.listeEDS,"libelleLongEDS")},function(e){n.serviceAgentExtended.Trace.info("L'EDS ne renvoit rien ou trop de résultats","rechercheEDSGuichet",e),n.listeEDS=[]}):(e.forEach(function(e){var i=new t.DonneesCommunesEDSGuichet;i.identifiantElementStructure=e.identifiantElementStructure,i.refLibelleEDS=e.value,i.libelleLongEDS=e.value.split(" - ")[1],console.log(i.libelleLongEDS),i.referenceExterneEDS=e.id,n.listeEDS.push(i)}),void(n.listeEDS=n.$filter("orderBy")(n.listeEDS,"libelleLongEDS")))})):(this.listeGuichet=[],this.afficherColonneRechercheAgence=!1,this.afficherColonneAutreRecherche=!0,this.loading=this.rechercheEdsService.getRecherche({typeRechercheEDS:t.TypeRechercheEDSEnum.TYPE_EDS,codeEtablissement:this.edsRechercheGuichetParam.codeEtablissement,typeEDS:this.typeSelectionne.typeEDS}).then(function(e){e.forEach(function(e){e.referenceExterneEDS=_.padLeft(e.referenceExterneEDS,7,"0"),e.refLibelleEDS=e.referenceExterneEDS+" - "+e.libelleLongEDS}),console.log(e),n.listeEDS=n.$filter("orderBy")(e,"libelleLongEDS")})["catch"](function(e){n.serviceAgentExtended.Trace.info("L'EDS ne renvoit rien ou trop de résultats","rechercheEDSGuichet",e),n.listeEDS=[]}))},n.prototype.selectionEDS=function(e){var t=this;this.listeGuichet=[],this.rechercheEdsService.getListeGuichets(e.identifiantElementStructure,this.edsRechercheGuichetParam.codeEtablissement,this.edsRechercheGuichetParam.typeGuichet).then(function(e){angular.forEach(e.listeGuichet,function(e,i){0!==e.referenceExterneGuichet&&(e.referenceExterneGuichetAffichage=_.padLeft(e.referenceExterneGuichet.toString(),n.MAX_LENGTH,"0")),""!==e.referenceExterneGAB&&(e.referenceExterneGABAffichage=_.padLeft(e.referenceExterneGAB.toString(),n.MAX_LENGTH,"0")),t.listeGuichet.push(e)})})},n.MAX_LENGTH=7,n.$inject=["$scope","$timeout","$modalInstance","serviceAgentExtended","mwsfRechercheEdsGuichetService","edsRechercheGuichetParam","guichet","$filter","saisieAgenceDestinataireService"],n}();t.RechercheEdsGuichetModaleController=n,t.app.controller("mwsfRechercheEdsGuichetModaleController",n)}(t=e.comEds||(e.comEds={}))}(myway||(myway={})),angular.module("myway.comEds").run(["$templateCache",function(e){e.put("typescript/agence-destinataire/customAgence.html",'\r\n<a tabindex="-1" bind-html-unsafe="match.model.value | typeaheadHighlight:query" class="ng-scope ng-binding agence-template" ng-mouseenter="selectActive($index)" ng-click="selectMatch($index)">\r\n</a>'),e.put("typescript/agence-destinataire/saisie-agence-destinataire-view.html",'\r\n<data-ng-form class="mwsf-agence-destinataire form-horizontal" name="formAgence" role="form" novalidate>\r\n    <div class="form-group col-md-12" data-ng-class="{\'has-error\' : viewModelAgenceDestinataireCtrl.required && !viewModelAgenceDestinataireCtrl.agence}" mw-chargement="!viewModelAgenceDestinataireCtrl.listeAgences && !viewModelAgenceDestinataireCtrl.errorMessage">\r\n  \r\n        <input type="text" id="agence" ng-model="viewModelAgenceDestinataireCtrl.selected" class="form-control" name="agences" data-ng-class="{\'liste-agences-left\' : viewModelAgenceDestinataireCtrl.prolongementListeVersGauche}" ng-disabled="viewModelAgenceDestinataireCtrl.disable" mw-combobox="agence.value for agence in viewModelAgenceDestinataireCtrl.listeAgences | filter: {\'value\':$viewValue} | limitTo: 20" placeholder="{{::viewModelAgenceDestinataireCtrl.placeholder}}" mw-combobox-min-length="1" mw-combobox-on-select="viewModelAgenceDestinataireCtrl.onItemSelect($item)" mw-combobox-with-scroll="true" ng-click="viewModelAgenceDestinataireCtrl.onSelect(selectedItem);" ng-blur="viewModelAgenceDestinataireCtrl.onblur();">\r\n        \r\n        <span ng-show="viewModelAgenceDestinataireCtrl.errorMessage" class="error-msg col-md-12" ng-bind="viewModelAgenceDestinataireCtrl.errorMessage"></span>\r\n\r\n    </div>\r\n</data-ng-form> '),e.put("typescript/liste-agent/customAgent.html",'<a tabindex="-1" bind-html-unsafe="match.model.libelle | typeaheadHighlight:query" class="ng-scope ng-binding agent-template" ng-mouseenter="selectActive($index)" ng-click="selectMatch($index)">\r\n</a>'),e.put("typescript/liste-agent/saisie-agent-view.html",'\r\n<data-ng-form name="formAgent" role="form" novalidate class="form-horizontal">\r\n    <div class="form-group" data-ng-class="{\'has-error\' : viewModelAgentCtrl.required && !viewModelAgentCtrl.agent}">\r\n        <div class="col-md-12">\r\n            <input type="text" class="form-control col-md-12" ng-disabled="viewModelAgentCtrl.disable" ng-model="viewModelAgentCtrl.agent" mw-uppercase autocomplete="off" typeahead="agent as agent.designation for agent in viewModelAgentCtrl.rechercher($viewValue)" typeahead-min-length="viewModelAgentCtrl.minLength" typeahead-wait-ms="viewModelAgentCtrl.waitTime" typeahead-loading="false" typeahead-template-url="typescript/liste-agent/customAgent.html" placeholder="{{::viewModelAgentCtrl.placeholder}}" ng-class="!viewModelAgentCtrl.checkPlaceholder ? \'liste-agents-left\' : \'\'" mw-input-loader="viewModelAgentCtrl.loaderAgent" ng-attr-id="rechercher" name="rechercher" typeahead-on-select="viewModelAgentCtrl.onItemSelect($item)" ng-focus="viewModelAgentCtrl.onFocus()" id="agent" mw-clear-button>\r\n\r\n            <span ng-show="viewModelAgentCtrl.errorMessage" class="error-msg col-md-12" ng-bind="viewModelAgentCtrl.errorMessage"></span>\r\n        \r\n        </div>\r\n    </div>\r\n</data-ng-form>'),e.put("typescript/liste-guichet/liste-guichet-view.html",'<div class="form-group">\r\n    <div class="col-md-12 col-lg-12 col-sm-12">\r\n        <ui-select id="liste-guichet-eds" focus-on="uiSelectFocusOn" ng-model="viewModelListeGuichetCtrl.edsGuichet" class="help-block">\r\n            <ui-select-match allow-clear placeholder="Selectionnez un guichet">{{$select.selected.referenceExterneGuichetAffichage}}</ui-select-match>\r\n            <ui-select-choices repeat="guichet in viewModelListeGuichetCtrl.listeGuichet | filter: $select.search">{{guichet.referenceExterneGuichetAffichage}}</ui-select-choices>\r\n        </ui-select>\r\n    </div>\r\n</div>'),e.put("typescript/recherche-eds-globale/recherche-eds-globale-view.html",'<button class="btn btn-block btn-zone" data-ng-click="mwsfRechercheEdsGlobale.ouvrirModaleEdsGlobale()" id="btn-ouvrir-modale-eds-globale">\r\n    {{mwsfRechercheEdsGlobale.textButton ? mwsfRechercheEdsGlobale.textButton : \'Rechercher un EDS\'}}\r\n</button>\r\n'),e.put("typescript/recherche-eds-guichet/recherche-eds-guichet-view.html",'<data-ng-form name="rechercheEDSGuichet">\r\n    <div class="form-group">\r\n        <div class="col-md-12 col-lg-12 col-sm-12">\r\n            <mw-button texte="Rechercher un guichet" modele="zone" data-ng-click="mwsfRechercheEdsGuichet.ouvrirModaleEds()" id="btn-ouvrir-modale-eds-guichet"></mw-button>\r\n        </div>\r\n    </div>\r\n</data-ng-form>\r\n'),e.put("typescript/recherche-liste-type-eds/recherche-liste-type-eds-view.html",'<div class="mw-form-static">\r\n    <div data-ng-show="ctrl.affichageListeAgences" data-ng-class="{\'col-md-12\' : ctrl.blocageRechercheEds, \'col-md-4\' : !ctrl.blocageRechercheEds}">\r\n        <div data-ng-show="!ctrl.blocageRechercheEds">\r\n            <mwsf-saisie-agence-destinataire ng-model="ctrl.agence" required="false" on-select="ctrl.selectionAgenceListeType(selectedItem)" prolongement-liste-vers-gauche="false">\r\n            </mwsf-saisie-agence-destinataire>\r\n        </div>\r\n        <div class="form-group" data-ng-show="ctrl.blocageRechercheEds">\r\n            <span class="form-control-static" data-ng-bind="ctrl.edsSelectionne.libelleLongEDS"></span>\r\n        </div>      \r\n    </div>\r\n    <div data-ng-class="{\'col-md-12\' : ctrl.blocageRechercheEds, \'col-md-4\' : !ctrl.blocageRechercheEds}" data-ng-show="!ctrl.affichageListeAgences" class="form-horizontal">\r\n        <div class="form-group col-md-12" data-ng-show="!ctrl.blocageRechercheEds">\r\n            <input type="text" id="liste-type-eds" ng-model="ctrl.edsSelectionne" class="form-control" name="liste-type-eds" mw-combobox="eds as eds.libelleLongEDS for eds in ctrl.listeEds" mw-combobox-min-length="0" mw-combobox-with-scroll="true">\r\n        </div>\r\n        <div class="form-group" data-ng-show="ctrl.blocageRechercheEds">\r\n            <span class="form-control-static" ng-bind="ctrl.edsSelectionne.libelleLongEDS"></span>\r\n        </div>\r\n    </div>\r\n    <div class="col-md-4" data-ng-show="!ctrl.blocageRechercheEds">\r\n        <mwsf-recherche-eds-globale eds-recherche-globale-param="ctrl.parametreListeEdsGlobal" eds="ctrl.edsGlobalSelectionne" liste-eds="ctrl.listeEds" text-button="{{ctrl.texteBouton ? ctrl.texteBouton : \'Sélectionner un autre EDS\'}}"></mwsf-recherche-eds-globale>\r\n    </div>\r\n</div>'),e.put("typescript/recherche-eds-globale/modale/recherche-eds-globale-modale-view.html",'<div class="modal-header">Recherche globale d\'un élément de structure (EDS)</div>\r\n<div class="modal-body">\r\n    <!--htmlhint id-class-value:false -->\r\n\r\n    <ng-form name="rechercheEDSGlobale">\r\n        <mw-navcol id="navcols" search-enabled="false" handler="mwsfRechercheEdsGlobaleModale" mw-chargement="mwsfRechercheEdsGlobaleModale.loading">\r\n            <!-- Première colonne -->\r\n            <mw-navcol-list titre="Type des EDS" distinct-field="libelleTypeEDS" datalist="mwsfRechercheEdsGlobaleModale.types" ng-attr-id="{{::mwsfRechercheEdsGlobaleModale.ID_COLONNE_TYPE}}" template-url="recherche-eds-globale-types" class="col-lg-4 col-md-4 col-sm-4">\r\n                <script type="text/ng-template" id="recherche-eds-globale-types">\r\n                    <span ng-bind="item.libelleTypeEDS"></span>\r\n                </script>\r\n            </mw-navcol-list>\r\n\r\n            <!-- Deuxième colonne -->\r\n            <mw-navcol-list titre="Liste des points de vente" data-ng-show="mwsfRechercheEdsGlobaleModale.afficherColonneAutreRecherche" distinct-field="refLibelleEDS" last-column="true" datalist="mwsfRechercheEdsGlobaleModale.listeEDS" ng-attr-id="{{::mwsfRechercheEdsGlobaleModale.ID_COLONNE_EDS}}" template-url="recherche-eds-globale-donnees" class="col-sm-6">\r\n                <input type="text" class="form-control" name="nombre">\r\n                <script type="text/ng-template" id="recherche-eds-globale-donnees">\r\n                    <span ng-bind-template="{{item.refLibelleEDS}}"></span>\r\n                </script>\r\n            </mw-navcol-list>\r\n\r\n            <!-- Deuxième colonne - Fonctions -->\r\n            <mw-navcol-list titre="Liste des types fonctions" data-ng-show="mwsfRechercheEdsGlobaleModale.afficherColonneFonctionsPosteFonctionnels" distinct-field="libelleFonction" datalist="mwsfRechercheEdsGlobaleModale.listeFonctions" ng-attr-id="{{::mwsfRechercheEdsGlobaleModale.ID_COLONNE_FONCTION}}" template-url="recherche-eds-globale-fonctions" class="col-md-4 col-lg-4 col-sm-4">\r\n                <input type="text" class="form-control" name="nombre">\r\n                <script type="text/ng-template" id="recherche-eds-globale-fonctions">\r\n                    <span ng-bind="item.libelleFonction"></span>\r\n                </script>\r\n            </mw-navcol-list>\r\n            <!-- Deuxième colonne - Agences -->\r\n            <div data-ng-show="mwsfRechercheEdsGlobaleModale.afficherColonneRechercheAgence" class="form-group form-horizontal mw-navcol-list" id="col-agence" data-ng-class="{\'col-md-4 col-lg-4 col-sm-4\' : mwsfRechercheEdsGlobaleModale.afficherColonneFonctionsPosteFonctionnels,\r\n                                \'col-lg-5 col-md-6 col-sm-7 mw-navcol-list\' : !mwsfRechercheEdsGlobaleModale.afficherColonneFonctionsPosteFonctionnels}">\r\n\r\n                    <div class="mw-navcol-list-head">\r\n                        <span class="titre-colonne ng-binding" ng-attr-id="{{id}}-titre" id="fonction-titre">Liste des agences</span>\r\n                    </div>\r\n                    <div class="mw-navcol-list-corp">\r\n                        <ul id="agence-ul">\r\n                            <mwsf-saisie-agence-destinataire ng-model="mwsfRechercheEdsGlobaleModale.agence" on-select="mwsfRechercheEdsGlobaleModale.selectionAgence(selectedItem)" required="true" placeholder="Rechercher une agence">\r\n                            </mwsf-saisie-agence-destinataire>\r\n                        </ul>\r\n                    </div>\r\n                </div>\r\n\r\n            <!-- Colonne - Poste Fonctionnel -->\r\n            <div data-ng-if="mwsfRechercheEdsGlobaleModale.afficherColonnePosteFonctionnel" class="mw-navcol-list" data-ng-class="{\'col-md-5 col-lg-5 col-sm-5\' : !mwsfRechercheEdsGlobaleModale.afficherColonneFonctionsPosteFonctionnels,\r\n                            \'col-md-4 col-lg-4 col-sm-4\' : mwsfRechercheEdsGlobaleModale.afficherColonneFonctionsPosteFonctionnels}">\r\n                <h3 class="titre-colonne mw-navcol-list-head" id="poste-fonctionnel-titre-globale">\r\n                    Liste des postes fonctionnels\r\n                </h3>\r\n                <mwsf-saisie-agent ng-model="mwsfRechercheEdsGlobaleModale.agent" required="true" placeholder="Rechercher un poste fonctionnel" recherche-matricule="true" code-action="1" ng-if="!mwsfRechercheEdsGlobaleModale.afficherColonneFonctionsPosteFonctionnels">\r\n                </mwsf-saisie-agent>\r\n                <mwsf-saisie-agent ng-model="mwsfRechercheEdsGlobaleModale.agent" required="true" placeholder="Rechercher un poste fonctionnel" type-fonction="{{mwsfRechercheEdsGlobaleModale.codeFonctionPFSelectionne}}" ng-focus="mwsfRechercheEdsGlobaleModale.estSelectionneFonction" code-action="1" ng-if="mwsfRechercheEdsGlobaleModale.afficherColonneFonctionsPosteFonctionnels" prolongement-liste-vers-gauche="true">\r\n                </mwsf-saisie-agent>\r\n            </div>\r\n        </mw-navcol>\r\n    </ng-form>\r\n</div>\r\n<div class="modal-footer">\r\n    <div class="col-lg-offset-6 col-lg-3 col-md-offset-6 col-md-3 col-sm-offset-6 col-sm-3">\r\n        <mw-button texte="Annuler" modele="secondaire" id="bouton-annuler" ng-click="mwsfRechercheEdsGlobaleModale.modale.close()"></mw-button>\r\n    </div>\r\n    <div class="col-lg-3 col-md-3 col-sm-3">\r\n        <mw-button texte="Sélectionner" modele="principale" id="bouton-selectionner" ng-disabled="!mwsfRechercheEdsGlobaleModale.eds" ng-click="mwsfRechercheEdsGlobaleModale.modale.close(mwsfRechercheEdsGlobaleModale.eds)"></mw-button>\r\n    </div>\r\n</div>'),e.put("typescript/recherche-eds-guichet/modale/recherche-eds-guichet-modale-view.html",'<div class="modal-header">Recherche des guichets d\'un élément de structure (EDS)</div>\r\n<div class="modal-body">\r\n    <!--htmlhint id-class-value:false -->\r\n    <ng-form name="rechercheEDS" id="recherche-eds" class="recherche-eds">\r\n        <mw-navcol id="navcols" search-enabled="false" handler="mwsfRechercheEdsGuichetModale" mw-chargement="mwsfRechercheEdsGuichetModale.loading">\r\n            <!-- Première colonne -->\r\n            <mw-navcol-list titre="Type des EDS" distinct-field="libelleTypeEDS" datalist="mwsfRechercheEdsGuichetModale.types" ng-attr-id="{{::mwsfRechercheEdsGuichetModale.ID_COLONNE_TYPE}}" template-url="recherche-eds-guichet-types" class="col-lg-3 col-md-12 col-sm-12">\r\n                <script type="text/ng-template" id="recherche-eds-guichet-types">\r\n                    <span ng-cloak>{{item.typeEDS}} - {{item.libelleTypeEDS}}</span>\r\n                </script>\r\n            </mw-navcol-list>\r\n\r\n            <!-- Deuxième colonne -->\r\n            <mw-navcol-list titre="Liste des EDS" distinct-field="refLibelleEDS" datalist="mwsfRechercheEdsGuichetModale.listeEDS" ng-attr-id="{{::mwsfRechercheEdsGuichetModale.ID_COLONNE_EDS}}" template-url="recherche-eds-guichet-donnees" class="col-lg-4 col-md-12 col-sm-12">\r\n                <input type="text" class="form-control" name="nombre">\r\n                <script type="text/ng-template" id="recherche-eds-guichet-donnees">\r\n                    <span ng-bind="item.refLibelleEDS"></span>\r\n                </script>\r\n            </mw-navcol-list>\r\n\r\n            <!--<div data-ng-show="mwsfRechercheEdsGuichetModale.afficherColonneRechercheAgence"\r\n                 class="col-lg-4 col-md-12 col-sm-12 mw-navcol-list">\r\n                <h3 class="titre-colonne mw-navcol-list-head" id="agence-titre">\r\n                    Liste des points de vente\r\n                </h3>\r\n                <mwsf-saisie-agence-destinataire ng-model="mwsfRechercheEdsGuichetModale.agence"\r\n                                                 on-select="mwsfRechercheEdsGuichetModale.selectionAgence(selectedItem)"\r\n                                                 required="true"\r\n                                                 placeholder="Rechercher une agence">\r\n                </mwsf-saisie-agence-destinataire>\r\n            </div>-->\r\n\r\n            <!-- Troisième colonne -->\r\n            <mw-navcol-list titre="Guichet - GAB Rattachement" distinct-field="libelleGuichet" datalist="mwsfRechercheEdsGuichetModale.listeGuichet" data-ng-attr-id="{{::mwsfRechercheEdsGuichetModale.ID_COLONNE_GUICHET}}" template-url="recherche-eds-guichet" class="col-lg-5 col-md-12 col-sm-12" last-column="true">\r\n                <script type="text/ng-template" id="recherche-eds-guichet">\r\n                    <span data-ng-if="item.identifiantInterneGuichet" ng-bind="item.referenceExterneGuichetAffichage"></span>\r\n                    <span data-ng-if="item.libelleGuichet" ng-cloak>&nbsp;{{item.libelleGuichet}}</span>\r\n                    <span data-ng-if="item.identifiantInterneGAB" ng-cloak>&nbsp;-&nbsp;{{item.referenceExterneGABAffichage}}</span>\r\n                    <span data-ng-if="item.libelleGAB" ng-cloak>&nbsp;{{item.libelleGAB}}</span>\r\n                </script>\r\n            </mw-navcol-list>\r\n        </mw-navcol>\r\n    </ng-form>\r\n</div>\r\n<div class="modal-footer">\r\n    <div class="col-lg-offset-6 col-lg-3 col-md-offset-6 col-md-3 col-sm-offset-6 col-sm-3">\r\n        <mw-button texte="Annuler" modele="secondaire" id="bouton-annuler" ng-click="mwsfRechercheEdsGuichetModale.modale.close()"></mw-button>\r\n    </div>\r\n    <div class="col-lg-3 col-md-3 col-sm-3">\r\n        <mw-button texte="Sélectionner" modele="principale" id="bouton-selectionner" ng-disabled="!mwsfRechercheEdsGuichetModale.guichet" ng-click="mwsfRechercheEdsGuichetModale.modale.close(mwsfRechercheEdsGuichetModale.guichet)"></mw-button>\r\n    </div>\r\n</div>')}]);