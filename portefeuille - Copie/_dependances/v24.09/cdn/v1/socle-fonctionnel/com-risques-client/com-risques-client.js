/**
 * Généré par : SIGCESIE\ct-tfsbuild
 * Changeset TFS : C629456
 * Etiquette TFS : com-risques-client-v21.11-build_20211006.1
 * Déclenchement : Manual
 */
"use strict";var myway;!function(e){var n;!function(e){e.app=angular.module("myway.comRisquesClient",["ui.bootstrap","moduleAgent","myway.comInterdomaine","ngSanitize"])}(n=e.comRisquesClient||(e.comRisquesClient={}))}(myway||(myway={}));var myway;!function(e){var n;!function(n){var r=function(){function n(r,t,s,o,i,a,l,c,d,C,u,p){var h=this;if(this.$scope=r,this.genereCleBDFService=t,this.interroBDFService=s,this.$modalInstance=o,this.data=i,this.modeImpression=a,this.modeArchivage=l,this.modeAveugle=c,this.serviceAgentExtended=d,this.modalService=C,this.$q=u,this.modeInterrogationForce=p,this.personneInterrogee=new e.comRisquesClient.Model.PersonneBDF,this.personneInterrogee.motifs="",this.personneListeFICP=[],this.personneListeFCC=[],this.lanceBindingFCC=!1,this.lanceBindingFICP=!1,this.erreurFCC="",this.erreurFICP="",this.donnees=i,this.boutonContinuerDisable=!0,this.appelFICP="FCC"!==this.modeInterrogationForce,this.appelFCC="FICP"!==this.modeInterrogationForce,angular.isUndefined(this.donnees)&&this.$modalInstance.close(this.donnees),this.donnees instanceof Array){for(var m=this.donnees,g=0;g<m.length;g++){var F=n.LISTE_MOTIFS.filter(function(e){return e.id===m[g].codeOrigine});this.personneInterrogee.motifs+=F[0].value+"<br />"}this.compteurListeCodeOrigine=0,this.checkTypeDonneeEnEntree(this.donnees[this.compteurListeCodeOrigine])}else this.checkTypeDonneeEnEntree(this.donnees);r.$watch(function(){return h.lanceBindingFCC&&h.lanceBindingFICP},function(e,n){e&&h.bindData()})}return n.prototype.closePopup=function(){this.appelFCC&&(this.donnees.personneListeFCC=this.personneListeFCC),this.appelFICP&&(this.donnees.personneListeFICP=this.personneListeFICP),this.$modalInstance.close(this.donnees)},n.prototype.processErrorFICP=function(e,n){n?e.libelle||e.codeLibelle?n.erreur=e.libelle:n.erreur=e:(e.libelle||e.codeLibelle?this.erreurFICP="N'a reçu aucune réponse FICP (Pb. Comm)":e.description?this.erreurFICP=e.description:this.erreurFICP=e,this.lanceBindingFICP=!0,this.erreurFCC&&this.erreurFICP&&this.afficheSynthese())},n.prototype.processErrorFCC=function(e,n){n?e.libelle||e.codeLibelle?n.erreur=e.libelle:n.erreur=e:(e.libelle||e.codeLibelle?this.erreurFCC="N'a reçu aucune réponse FCC (Pb. Comm)":e.description?this.erreurFCC=e.description:this.erreurFCC=e,this.lanceBindingFCC=!0,this.erreurFCC&&this.erreurFICP&&this.afficheSynthese())},n.prototype.checkTypeDonneeEnEntree=function(n){if(n instanceof e.comRisquesClient.Model.InterroBDFCarte)this.callInterroBDFCarte(n);else if(n instanceof e.comRisquesClient.Model.InterroBDFCheque)this.callInterroBDFCheque(n);else if(n instanceof e.comRisquesClient.Model.InterroBDFDecouvertCredit)this.callInterroBDFDecouvertCredit(n);else{if(!(n instanceof e.comRisquesClient.Model.InterroBDFManuelle))throw this.processError(new MyWay.Services.Erreur("Aucune donnée valide pour l'interrogation BdF")),"Aucune donnée valide pour l'interrogation BdF";this.callInterroBDFManuelle(n)}},n.prototype.getRetourCommeNSDK=function(e){var n="";n+=this.erreurFICP?"N":"O",n+=this.erreurFCC?"N":"O",n+=this.erreurFICP?"  ":this.personneInterrogee.personneFICP?"KO":"OK",n+=this.erreurFCC?"  ":this.personneInterrogee.personneFCC?"KO":"OK",this.donnees.retour=n},n.prototype.callInterroBDFManuelle=function(e){try{e&&(this.personneInterrogee.cleBDF=this.genereCleBDFService.genereCleBDF(e.dateNaissance,e.nomFamille,e.supprimerDebutNom),this.personneInterrogee.dateNaissance=e.dateNaissance,this.personneInterrogee.nomFamille=e.nomFamille,this.personneInterrogee.prenom=e.prenom,this.personneInterrogee.dateJour=new Date,this.lanceBindingFCC=!1,this.lanceBindingFICP=!1),(null===e.codeOrigine||angular.isUndefined(e.codeOrigine))&&(e.codeOrigine="00"),"00"===e.codeOrigine&&(this.appelFCC?this.callInterroBDFManuelleFCC(e):this.lanceBindingFCC=!0,this.appelFICP?this.callInterroBDFManuelleFICP(e):this.lanceBindingFICP=!0)}catch(n){if(this.erreurGenerationCleBDF=n.message,this.afficherInterface=!1,"00"!==e.codeOrigine)throw n;console.error(n)}},n.prototype.callInterroBDFManuelleFCC=function(e,n){var r=this;return this.interroBDFService.getInterroFCCManuelle(this.personneInterrogee.cleBDF,e.codeOrigine,e.sousCleFCC).then(function(e){return r.erreurFCC="",r.traiteRetourFCC(e),r.lanceBindingFCC=!0,e},function(t){if(t){var s=r.personneListeFCC.filter(function(n){return n.sousCleFCC===e.sousCleFCC});throw angular.isDefined(n)&&s?r.processErrorFCC(t,s[0]):r.processErrorFCC(t),t}})},n.prototype.callInterroBDFManuelleFICP=function(e,n){var r=this;return this.interroBDFService.getInterroFICPManuelle(this.personneInterrogee.cleBDF,e.codeOrigine,e.sousCleFICP,e.motifConsultation,e.typeCredit,e.identifiantDossierInstruction).then(function(e){return r.erreurFICP="",r.traiteRetourFICP(e),r.lanceBindingFICP=!0,e},function(t){if(t){var s=r.personneListeFICP.filter(function(n){return n.sousCleFICP===e.sousCleFICP});throw angular.isDefined(n)&&s?r.processErrorFICP(t,s[0]):r.processErrorFICP(t),t}})},n.prototype.callInterroBDFDecouvertCredit=function(e){try{this.callInterroBDFManuelle(e),e.designationCourteTiers=n.composDesignationCourteTiers(this.personneInterrogee.nomFamille,this.personneInterrogee.prenom),this.appelFCC?this.callInterroBDFDecouvertCreditFCC(e):this.lanceBindingFCC=!0,this.appelFICP?this.callInterroBDFDecouvertCreditFICP(e):this.lanceBindingFICP=!0}catch(r){console.error("error",r)}},n.prototype.callInterroBDFDecouvertCreditFCC=function(e,n){var r=this;return this.interroBDFService.getInterroFCCDecouvertCredit(this.personneInterrogee.cleBDF,e.codeOrigine,e.sousCleFCC,e.identifiantTiers,e.codeProduitService,e.designationCourteTiers,e.referenceProduit).then(function(e){return r.erreurFCC="",r.donnees instanceof Array&&0!==r.compteurListeCodeOrigine&&!n||r.traiteRetourFCC(e),r.lanceBindingFCC=!0,e},function(t){if(t){var s=r.personneListeFCC.filter(function(n){return n.sousCleFCC===e.sousCleFCC});throw angular.isDefined(n)&&s?r.processErrorFCC(t,s[0]):r.processErrorFCC(t),t}})},n.prototype.callInterroBDFDecouvertCreditFICP=function(e,n){var r=this;return this.interroBDFService.getInterroFICPDecouvertCredit(this.personneInterrogee.cleBDF,e.codeOrigine,e.sousCleFICP,e.identifiantTiers,e.codeProduitService,e.designationCourteTiers,e.referenceProduit,e.motifConsultation,e.typeCredit,e.identifiantDossierInstruction).then(function(e){return r.erreurFICP="",r.donnees instanceof Array&&0!==r.compteurListeCodeOrigine&&!n||r.traiteRetourFICP(e),r.lanceBindingFICP=!0,e},function(t){if(t){var s=r.personneListeFICP.filter(function(n){return n.sousCleFICP===e.sousCleFICP});throw angular.isDefined(n)&&s?r.processErrorFICP(t,s[0]):r.processErrorFICP(t),t}})},n.prototype.callInterroBDFCarte=function(e){try{this.callInterroBDFManuelle(e),e.designationCourteTiers=n.composDesignationCourteTiers(this.personneInterrogee.nomFamille,this.personneInterrogee.prenom),this.appelFCC?this.callInterroBDFCarteFCC(e):this.lanceBindingFCC=!0,this.appelFICP?this.callInterroBDFCarteFICP(e):this.lanceBindingFICP=!0}catch(r){console.error("error",r)}},n.prototype.callInterroBDFCarteFCC=function(e,n){var r=this;return this.interroBDFService.getInterroFCCCarte(this.personneInterrogee.cleBDF,e.codeOrigine,e.sousCleFCC,e.identifiantTiers,e.codeProduitService,e.designationCourteTiers,e.referenceProduit,e.codeProduitCarte).then(function(e){return r.erreurFCC="",r.donnees instanceof Array&&0!==r.compteurListeCodeOrigine&&!n||r.traiteRetourFCC(e),r.lanceBindingFCC=!0,e},function(t){if(t){var s=r.personneListeFCC.filter(function(n){return n.sousCleFCC===e.sousCleFCC});throw angular.isDefined(n)&&s?r.processErrorFCC(t,s[0]):r.processErrorFCC(t),t}})},n.prototype.callInterroBDFCarteFICP=function(e,n){var r=this;return this.interroBDFService.getInterroFICPCarte(this.personneInterrogee.cleBDF,e.codeOrigine,e.sousCleFICP,e.identifiantTiers,e.codeProduitService,e.designationCourteTiers,e.referenceProduit,e.codeProduitCarte,e.motifConsultation,e.typeCredit,e.identifiantDossierInstruction).then(function(e){return r.erreurFICP="",r.donnees instanceof Array&&0!==r.compteurListeCodeOrigine&&!n||r.traiteRetourFICP(e),r.lanceBindingFICP=!0,e},function(t){if(t){var s=r.personneListeFICP.filter(function(n){return n.sousCleFICP===e.sousCleFICP});throw angular.isDefined(n)&&s?r.processErrorFICP(t,s[0]):r.processErrorFICP(t),t}})},n.prototype.callInterroBDFCheque=function(e){try{this.callInterroBDFManuelle(e),e.designationCourteTiers=n.composDesignationCourteTiers(this.personneInterrogee.nomFamille,this.personneInterrogee.prenom),this.appelFCC?this.callInterroBDFChequeFCC(e):this.lanceBindingFCC=!0,this.appelFICP?this.callInterroBDFChequeFICP(e):this.lanceBindingFICP=!0}catch(r){console.error("error",r)}},n.prototype.callInterroBDFChequeFCC=function(e,n){var r=this;return this.interroBDFService.getInterroFCCCheque(this.personneInterrogee.cleBDF,e.codeOrigine,e.sousCleFCC,e.identifiantTiers,e.codeProduitService,e.designationCourteTiers,e.referenceProduit,e.codeTypeChequier,e.nombreChequierCommande,e.codeFamilleChequier).then(function(e){return r.erreurFCC="",r.donnees instanceof Array&&0!==r.compteurListeCodeOrigine&&!n||r.traiteRetourFCC(e),r.lanceBindingFCC=!0,e},function(t){if(t){var s=r.personneListeFCC.filter(function(n){return n.sousCleFCC===e.sousCleFCC});throw angular.isDefined(n)&&s?r.processErrorFCC(t,s[0]):r.processErrorFCC(t),t}})},n.prototype.callInterroBDFChequeFICP=function(e,n){var r=this;return this.interroBDFService.getInterroFICPCheque(this.personneInterrogee.cleBDF,e.codeOrigine,e.sousCleFICP,e.identifiantTiers,e.codeProduitService,e.designationCourteTiers,e.referenceProduit,e.codeTypeChequier,e.nombreChequierCommande,e.codeFamilleChequier,e.motifConsultation,e.typeCredit,e.identifiantDossierInstruction).then(function(e){return r.erreurFICP="",r.donnees instanceof Array&&0!==r.compteurListeCodeOrigine&&!n||r.traiteRetourFICP(e),r.lanceBindingFICP=!0,e},function(t){if(t){var s=r.personneListeFICP.filter(function(n){return n.sousCleFICP===e.sousCleFICP});throw angular.isDefined(n)&&s?r.processErrorFICP(t,s[0]):r.processErrorFICP(t),t}})},n.prototype.traiteRetourFCC=function(n){switch(n.codeFichageBDF){case"2":var r=this.personneListeFCC.filter(function(e){return e.sousCleFCC===n.caracteristiqueFCC.sousCleBDF});if(angular.isUndefined(r)||0===r.length){var t=new e.comRisquesClient.Model.PersonneFCC;t.cleBDF=n.caracteristiqueFCC.cleBDF,t.sousCleFCC=n.caracteristiqueFCC.sousCleBDF,t.departement=n.caracteristiqueFCC.codeDepartement,t.lieuNaissance=n.caracteristiqueFCC.lieuNaissanceTiers,t.nomFamille=n.caracteristiqueFCC.nomPatronymiqueTiers,t.prenom=n.caracteristiqueFCC.prenomTiers,t.dateNaissance=n.caracteristiqueFCC.dateNaissanceTiers,this.remplitInfosPersonneFCC(t,n.caracteristiqueFCC),this.personneListeFCC.push(t)}else angular.isDefined(r)&&1===r.length&&this.remplitInfosPersonneFCC(r[0],n.caracteristiqueFCC);break;case"3":if(n.homonyme)for(var s=0;s<n.homonyme.length;s++){var o=n.homonyme[s];if(o){var i=new e.comRisquesClient.Model.PersonneFCC;i.cleBDF=o.cleBDF,i.sousCleFCC=o.sousCleBDF,i.departement=o.codeDepartement,i.lieuNaissance=o.villePaysNaissance;var a=o.nomPrenom.split("*");i.nomFamille=a[0],i.prenom=a[1];var r=this.personneListeFCC.filter(function(e){return e.sousCleFCC===i.sousCleFCC});(angular.isUndefined(r)||0===r.length)&&this.personneListeFCC.push(i)}}}},n.prototype.traiteRetourFICP=function(n){switch(n.codeFichageFICP){case"2":var r=this.personneListeFICP.filter(function(e){return e.sousCleFICP===n.caracteristiqueFICP.sousCleBDF});if(angular.isUndefined(r)||0===r.length){var t=new e.comRisquesClient.Model.PersonneFICP;t.cleBDF=n.caracteristiqueFICP.cleBDF,t.date=n.caracteristiqueFICP.dateInterrogation,t.dateNaissance=n.caracteristiqueFICP.dateNaissanceTiers,t.dateRadiation=n.caracteristiqueFICP.dateFinInterditJudiciaire,t.fichier=n.caracteristiqueFICP.dateInscriptionFICP,t.lieuNaissance=n.caracteristiqueFICP.lieuNaissanceTiers,t.mesures=n.caracteristiqueFICP["mesureComplémentaire"],t.natureCredit=n.caracteristiqueFICP.codeNaturePret,t.nombreDeclarants=n.caracteristiqueFICP.nombreDeclarant,t.nombreIncidents=n.caracteristiqueFICP.nombreIncidentInscrit,t.nomFamille=n.caracteristiqueFICP.nomPatronymiqueTiers,t.nomUsage=n.caracteristiqueFICP.nomUsageTiers,t.prenom=n.caracteristiqueFICP.prenomTiers,t.sexe=n.caracteristiqueFICP.codeSexeTiers,t.sousCleFICP=n.caracteristiqueFICP.sousCleBDF,t.natureCredit&&this.interroBDFService.recupererLibelleNatureCredit(t.natureCredit.toString()).then(function(e){t.libelleNatureCredit=e}),this.personneListeFICP.push(t)}else(angular.isDefined(r)||1===r.length)&&this.remplitInfosPersonneFICP(r[0],n.caracteristiqueFICP);break;case"3":if(n.homonymeFICP)for(var s=0;s<n.homonymeFICP.length;s++){var o=n.homonymeFICP[s];if(o){var i=new e.comRisquesClient.Model.PersonneFICP;i.cleBDF=this.personneInterrogee.cleBDF,i.sousCleFICP=o.sousCleBDF,i.departement=o.codeDepartement,i.sexe=o.codeSexe,i.lieuNaissance=o.villePaysNaissance;var a=o.nomPrenom.split("*");i.nomFamille=a[0],i.prenom=a[1];var r=this.personneListeFICP.filter(function(e){return e.sousCleFICP===i.sousCleFICP});(angular.isUndefined(r)||0===r.length)&&this.personneListeFICP.push(i)}}}},n.prototype.bindData=function(){var e=this;if(angular.isString(this.donnees.codeOrigine)&&"00"!==this.donnees.codeOrigine){var r=n.LISTE_MOTIFS.filter(function(n){return n.id===e.donnees.codeOrigine});angular.isDefined(r)&&(this.personneInterrogee.motifs=r[0].value)}if(angular.isDefined(this.modeAveugle)&&this.modeAveugle&&0===this.personneListeFCC.length&&0===this.personneListeFICP.length)this.erreurFCC?this.personneInterrogee.messageFCC=this.erreurFCC:this.personneInterrogee.personneFCC?this.personneInterrogee.sousCleFCC=this.personneInterrogee.personneFCC.sousCleFCC:this.appelFCC?this.personneInterrogee.messageFCC="Non fiché":this.personneInterrogee.messageFCC=" ",this.erreurFICP?this.personneInterrogee.messageFICP=this.erreurFICP:this.personneInterrogee.personneFICP?this.personneInterrogee.sousCleFICP=this.personneInterrogee.personneFICP.sousCleFICP:this.appelFICP?this.personneInterrogee.messageFICP="Non fiché":this.personneInterrogee.messageFICP=" ",this.donnees=this.personneInterrogee,this.getRetourCommeNSDK(),this.afficherInterface=!1,this.appelEdition().then(function(){e.closePopup()});else if((angular.isDefined(this.personneListeFCC)||angular.isDefined(this.personneListeFICP))&&(this.afficherInterface=!0),this.modeEdition=!0,(this.erreurFICP&&0===this.personneListeFCC.length&&0===this.personneListeFICP.length||this.erreurFCC&&0===this.personneListeFICP.length&&0===this.personneListeFCC.length||(angular.isUndefined(this.personneListeFCC)||0===this.personneListeFCC.length)&&(angular.isUndefined(this.personneListeFICP)||0===this.personneListeFICP.length))&&this.afficheSynthese(),this.donnees instanceof Array){var t=this.donnees;this.compteurListeCodeOrigine++,this.compteurListeCodeOrigine<t.length&&this.checkTypeDonneeEnEntree(this.donnees[this.compteurListeCodeOrigine])}},n.prototype.onClickLigneFICP=function(e){var n=this;if(1===this.personneListeFICP.length)angular.isUndefined(e.expanded)||!e.expanded?this.expandedCollpase(e):e.expanded&&(this.lastExpandedItem=null,e.expanded=!1,e.spinner=!1);else if(e.spinner=!0,angular.isUndefined(e.expanded)||!e.expanded){if(e.expanded=!1,e.fichier)return void this.expandedCollpase(e);this.lanceBindingFICP=!1;var r;switch(r=this.donnees instanceof Array?this.donnees[0].codeOrigine:this.donnees.codeOrigine){case"00":var t=this.donnees;this.donnees instanceof Array&&(t=this.donnees[0]),t.sousCleFICP=e.sousCleFICP,this.callInterroBDFManuelleFICP(t,e.spinner).then(function(r){r&&(n.erreurFICP="",n.lanceBindingFICP=!0,n.expandedCollpase(e))},function(r){n.lanceBindingFICP=!0,n.expandedCollpase(e)});break;case"01":var s=this.donnees;this.donnees instanceof Array&&(s=this.donnees[0]),s.sousCleFICP=e.sousCleFICP,this.callInterroBDFChequeFICP(s,e.spinner).then(function(r){n.erreurFICP="",n.lanceBindingFICP=!0,n.expandedCollpase(e)},function(r){n.lanceBindingFICP=!0,n.expandedCollpase(e)});break;case"02":var o=this.donnees;this.donnees instanceof Array&&(o=this.donnees[0]),o.sousCleFICP=e.sousCleFICP,this.callInterroBDFCarteFICP(o,e.spinner).then(function(r){n.erreurFICP="",n.lanceBindingFICP=!0,n.expandedCollpase(e)},function(r){n.lanceBindingFICP=!0,n.expandedCollpase(e)});break;case"03":case"04":var i=this.donnees;this.donnees instanceof Array&&(i=this.donnees[0]),i.sousCleFICP=e.sousCleFICP,this.callInterroBDFDecouvertCreditFICP(i,e.spinner).then(function(r){n.erreurFICP="",n.lanceBindingFICP=!0,n.expandedCollpase(e)},function(r){n.lanceBindingFICP=!0,n.expandedCollpase(e)})}}else e.expanded&&(this.lastExpandedItem=null,e.expanded=!1,e.spinner=!1)},n.prototype.onClickLigneFCC=function(e){var n=this;if(1===this.personneListeFCC.length)angular.isUndefined(e.expanded)||!e.expanded?this.expandedCollpase(e):e.expanded&&(this.lastExpandedItem=null,e.expanded=!1,e.spinner=!1);else if(e.spinner=!0,angular.isUndefined(e.expanded)||!e.expanded){if(e.expanded=!1,e.adresse1&&e.sexe)return void this.expandedCollpase(e);var r;switch(r=this.donnees instanceof Array?this.donnees[0].codeOrigine:this.donnees.codeOrigine){case"00":var t=this.donnees;this.donnees instanceof Array&&(t=this.donnees[0]),t.sousCleFCC=e.sousCleFCC,this.callInterroBDFManuelleFCC(t,e.spinner).then(function(r){n.erreurFCC="",n.lanceBindingFCC=!0,n.expandedCollpase(e)},function(r){n.lanceBindingFCC=!0,n.expandedCollpase(e)});break;case"01":var s=this.donnees;this.donnees instanceof Array&&(s=this.donnees[0]),s.sousCleFCC=e.sousCleFCC,this.callInterroBDFChequeFCC(s,e.spinner).then(function(r){n.erreurFCC="",n.lanceBindingFCC=!0,n.expandedCollpase(e)},function(r){n.lanceBindingFCC=!0,n.expandedCollpase(e)});break;case"02":var o=this.donnees;this.donnees instanceof Array&&(o=this.donnees[0]),o.sousCleFCC=e.sousCleFCC,this.callInterroBDFCarteFCC(o,e.spinner).then(function(r){n.erreurFCC="",n.lanceBindingFCC=!0,n.expandedCollpase(e)},function(r){n.lanceBindingFCC=!0,n.expandedCollpase(e)});break;case"03":case"04":var i=this.donnees;this.donnees instanceof Array&&(i=this.donnees[0]),i.sousCleFCC=e.sousCleFCC,this.callInterroBDFDecouvertCreditFCC(i,e.spinner).then(function(r){n.erreurFCC="",n.lanceBindingFCC=!0,n.expandedCollpase(e)},function(r){n.lanceBindingFCC=!0,n.expandedCollpase(e)})}}else e.expanded&&(this.lastExpandedItem=null,e.expanded=!1,e.spinner=!1)},n.prototype.remplitInfosPersonneFCC=function(e,n){if(e.adresse1=n.adresse1BDF?n.adresse1BDF:"",e.adresse2=n.adresse2BDF?n.adresse2BDF:"",e.sexe=n.codeSexeTiers,e.dateFinIB=n.dateFinInterditBancaire,e.date=n.dateInterrogation,e.dateFinIJ=n.dateFinInterditJudiciaire,e.dateDernierRetrait=n.dateDernierRetrait,angular.isDefined(n.sousCleFCC)&&(e.sousCleFCC=n.sousCleFCC),e.pcs=n.codePCS,e.siren=n.siren,e.nomUsage=n.nomUsageTiers,e.remarques="",n.commentaireFCC)for(var r=0;5>r;r++)e.remarques+=n.commentaireFCC["commentaireLigne"+r]?n.commentaireFCC["commentaireLigne"+r]+" ":"";var t=n.compteCollectif;t&&(e.nombreChequesColl=t.nombreCheque,e.nombreComptesColl=t.nombreCompte,e.montantColl=t.montant);var s=n.compteIndividuel;s&&(e.nombreChequesIndiv=s.nombreCheque,e.nombreComptesIndiv=s.nombreCompte,e.montantIndiv=s.montant)},n.prototype.remplitInfosPersonneFICP=function(e,n){e.date=n.dateInterrogation,e.dateNaissance=n.dateNaissanceTiers,e.dateRadiation=n.dateFinInterditJudiciaire,e.fichier=n.dateInscriptionFICP,e.mesures=n["mesureComplémentaire"],e.natureCredit=n.codeNaturePret,e.nombreDeclarants=n.nombreDeclarant,e.nombreIncidents=n.nombreIncidentInscrit,e.nomUsage=n.nomUsageTiers,e.natureCredit&&this.interroBDFService.recupererLibelleNatureCredit(e.natureCredit.toString()).then(function(n){e.libelleNatureCredit=n})},n.prototype.expandedCollpase=function(e){e.spinner=!1,e.expanded||(this.lastExpandedItem&&(this.lastExpandedItem.expanded=!1),this.lastExpandedItem=e,e.expanded=!0)},n.prototype.onCheckedRadioButtonFICP=function(e,n){if(e.fichage=n,e.fichage)for(var r=0;r<this.personneListeFICP.length;r++)this.personneListeFICP[r].sousCleFICP!==e.sousCleFICP&&(this.personneListeFICP[r].fichage=!1);this.checkAllRadioButton()},n.prototype.onCheckedRadioButtonFCC=function(e,n){if(e.fichage=n,e.fichage)for(var r=0;r<this.personneListeFCC.length;r++)this.personneListeFCC[r].sousCleFCC!==e.sousCleFCC&&(this.personneListeFCC[r].fichage=!1);this.checkAllRadioButton()},n.prototype.checkAllRadioButton=function(){var e=this.personneListeFCC.filter(function(e){return null===e.fichage||angular.isUndefined(e.fichage)}),n=this.personneListeFICP.filter(function(e){return null===e.fichage||angular.isUndefined(e.fichage)}),r=!0;this.appelFCC&&(r=0===e.length);var t=!0;this.appelFICP&&(t=0===n.length),this.boutonContinuerDisable=!(r&&t)},n.prototype.afficheSynthese=function(){var n=this;this.reunitInfosPourSynthese().then(function(){n.erreurFCC?n.personneInterrogee.messageFCC=n.erreurFCC:n.personneInterrogee.personneFCC?n.personneInterrogee.sousCleFCC=n.personneInterrogee.personneFCC.sousCleFCC:n.appelFCC?n.personneInterrogee.messageFCC="Non fiché":n.personneInterrogee.messageFCC=" ",n.erreurFICP?n.personneInterrogee.messageFICP=n.erreurFICP:n.personneInterrogee.personneFICP?n.personneInterrogee.sousCleFICP=n.personneInterrogee.personneFICP.sousCleFICP:n.appelFICP?n.personneInterrogee.messageFICP="Non fiché":n.personneInterrogee.messageFICP=" ";var r=new e.comRisquesClient.Model.PersonneBDF;r.nomFamille=n.personneInterrogee.nomFamille,r.dateNaissance=n.personneInterrogee.dateNaissance,r.prenom=n.personneInterrogee.prenom,n.personneInterrogee.sousCleFCC&&(r.sousCleFCC=n.personneInterrogee.sousCleFCC),n.personneInterrogee.sousCleFICP&&(r.sousCleFICP=n.personneInterrogee.sousCleFICP),n.personneInterrogee.messageFCC&&(r.messageFCC=n.personneInterrogee.messageFCC),n.personneInterrogee.messageFICP&&(r.messageFICP=n.personneInterrogee.messageFICP),n.donnees=r,n.data=r,n.getRetourCommeNSDK(),n.modeEdition=!1,n.appelEdition()})},n.prototype.reunitInfosPourSynthese=function(){var e,n=this,r=this.personneListeFCC?this.personneListeFCC.filter(function(e){return e.fichage}):[],t=this.personneListeFICP?this.personneListeFICP.filter(function(e){return e.fichage}):[];e=this.donnees instanceof Array?this.donnees[0].codeOrigine:this.donnees.codeOrigine;var s=[];if(1===r.length)switch(e){case"00":var o=this.donnees;this.donnees instanceof Array&&(o=this.donnees[0]),o.sousCleFCC=r[0].sousCleFCC,s.push(this.callInterroBDFManuelleFCC(o,!0).then(function(e){r=n.personneListeFCC?n.personneListeFCC.filter(function(e){return e.fichage}):[],n.personneInterrogee.personneFCC=r[0],n.personneInterrogee.sousCleFCC=n.personneInterrogee.personneFCC.sousCleFCC}));break;case"01":var i=this.donnees;this.donnees instanceof Array&&(i=this.donnees[0]),i.sousCleFCC=r[0].sousCleFCC,s.push(this.callInterroBDFChequeFCC(i,!0).then(function(e){r=n.personneListeFCC?n.personneListeFCC.filter(function(e){return e.fichage}):[],n.personneInterrogee.personneFCC=r[0],n.personneInterrogee.sousCleFCC=n.personneInterrogee.personneFCC.sousCleFCC}));break;case"02":var a=this.donnees;this.donnees instanceof Array&&(a=this.donnees[0]),a.sousCleFCC=r[0].sousCleFCC,s.push(this.callInterroBDFCarteFCC(a,!0).then(function(e){r=n.personneListeFCC?n.personneListeFCC.filter(function(e){return e.fichage}):[],n.personneInterrogee.personneFCC=r[0],n.personneInterrogee.sousCleFCC=n.personneInterrogee.personneFCC.sousCleFCC}));break;case"03":case"04":var l=this.donnees;this.donnees instanceof Array&&(l=this.donnees[0]),l.sousCleFCC=r[0].sousCleFCC,s.push(this.callInterroBDFDecouvertCreditFCC(l,!0).then(function(e){r=n.personneListeFCC?n.personneListeFCC.filter(function(e){return e.fichage}):[],n.personneInterrogee.personneFCC=r[0],n.personneInterrogee.sousCleFCC=n.personneInterrogee.personneFCC.sousCleFCC}))}if(1===t.length)switch(e){case"00":var o=this.donnees;this.donnees instanceof Array&&(o=this.donnees[0]),o.sousCleFICP=t[0].sousCleFICP,this.callInterroBDFManuelleFICP(o,!0),s.push(this.callInterroBDFManuelleFICP(o,!0).then(function(e){t=n.personneListeFICP?n.personneListeFICP.filter(function(e){return e.fichage}):[],n.personneInterrogee.personneFICP=t[0],n.personneInterrogee.sousCleFICP=n.personneInterrogee.personneFICP.sousCleFICP}));break;case"01":var i=this.donnees;this.donnees instanceof Array&&(i=this.donnees[0]),i.sousCleFICP=t[0].sousCleFICP,s.push(this.callInterroBDFChequeFICP(i,!0).then(function(e){t=n.personneListeFICP?n.personneListeFICP.filter(function(e){return e.fichage}):[],n.personneInterrogee.personneFICP=t[0],n.personneInterrogee.sousCleFICP=n.personneInterrogee.personneFICP.sousCleFICP}));break;case"02":var a=this.donnees;this.donnees instanceof Array&&(a=this.donnees[0]),a.sousCleFICP=t[0].sousCleFICP,s.push(this.callInterroBDFCarteFICP(a,!0).then(function(e){t=n.personneListeFICP?n.personneListeFICP.filter(function(e){return e.fichage}):[],n.personneInterrogee.personneFICP=t[0],n.personneInterrogee.sousCleFICP=n.personneInterrogee.personneFICP.sousCleFICP}));break;case"03":case"04":var l=this.donnees;this.donnees instanceof Array&&(l=this.donnees[0]),l.sousCleFICP=t[0].sousCleFICP,s.push(this.callInterroBDFDecouvertCreditFICP(l,!0).then(function(e){t=n.personneListeFICP?n.personneListeFICP.filter(function(e){return e.fichage}):[],n.personneInterrogee.personneFICP=t[0],n.personneInterrogee.sousCleFICP=n.personneInterrogee.personneFICP.sousCleFICP}))}return this.$q.all(s).then(function(e){})},n.prototype.appelEdition=function(){var r=this;if(this.modeImpression&&this.modeImpression.toUpperCase()===n.VALUE_IMPRESSION_AUTO){if(angular.isDefined(this.modeArchivage)&&null!==this.modeArchivage){var t=new e.comRisquesClient.impression.GenerationInterroBDF;return this.genereEntete(this.modeArchivage.numRefDoc?"Document n° : ":null,this.modeArchivage.numRefDoc,this.modeArchivage.codeBarre).then(function(n){var s=t.createDocument(r.personneInterrogee,n),o=new e.comRisquesClient.impression.SIDCGCE_Interro_BDFGenerationImpressionParams(r.personneInterrogee,r.modeArchivage),i=new e.comRisquesClient.impression.SIDCGCE_Interro_BDFGenerationParams(r.personneInterrogee,r.modeArchivage);return r.serviceAgentExtended.Impression.generer(s,i).then(function(e){return r.donnees.documentGenere=e.IdntPJ,r.serviceAgentExtended.Impression.imprimer(e.Fichier,o).then(function(e){return e})["catch"](function(e){r.processError(new MyWay.Services.Erreur("L’impression du résultat de l’interrogation banque de France dans le dossier numérique du client (classeur client) n’a pas pu être réalisée."))})})["catch"](function(n){var t=new e.comRisquesClient.impression.SIDCGCE_Interro_BDFGenerationImpressionParams(r.personneInterrogee,r.modeArchivage);r.serviceAgentExtended.Impression.imprimer(s,t).then(function(e){r.processError(new MyWay.Services.Erreur("L’archivage du résultat de l’interrogation banque de France dans le dossier numérique du client (classeur client)n’a pas pu être réalisé.L’interrogation BDF va s’imprimer, pensez à la numériser."))})["catch"](function(e){r.processError(new MyWay.Services.Erreur("L’archivage et l'impression du résultat de l’interrogation banque de France dans le dossier numérique du client (classeur client) n’ont pas pu être réalisés."))})})})}this.processError(new MyWay.Services.Erreur("Veuillez renseigner les options d'archivage"))}else{if(!this.modeImpression||this.modeImpression.toUpperCase()!==n.VALUE_IMPRESSION_PDF){if(angular.isDefined(this.modeArchivage)&&null!==this.modeArchivage){var t=new e.comRisquesClient.impression.GenerationInterroBDF;return this.genereEntete(this.modeArchivage.numRefDoc?"Document n° : ":null,this.modeArchivage.numRefDoc,this.modeArchivage.codeBarre).then(function(n){var s=t.createDocument(r.personneInterrogee,n),o=new e.comRisquesClient.impression.SIDCGCE_Interro_BDFGenerationParams(r.personneInterrogee,r.modeArchivage);return r.serviceAgentExtended.Impression.generer(s,o).then(function(e){return r.donnees.documentGenere=e.IdntPJ,e})["catch"](function(n){var t=new e.comRisquesClient.impression.SIDCGCE_Interro_BDFGenerationImpressionParams(r.personneInterrogee,r.modeArchivage);r.serviceAgentExtended.Impression.imprimer(s,t).then(function(e){r.processError(new MyWay.Services.Erreur("L’archivage du résultat de l’interrogation banque de France dans le dossier numérique du client (classeur client) n’a pas pu être réalisé.L’interrogation BDF va s’imprimer, pensez à la numériser."))})["catch"](function(e){r.processError(new MyWay.Services.Erreur("L’archivage et l'impression du résultat de l’interrogation banque de France dans le dossier numérique du client (classeur client) n’ont pas pu être réalisés."))})})})}var s=this.$q.defer();return s.resolve(!0),s.promise}if(angular.isDefined(this.modeArchivage)&&null!==this.modeArchivage){var t=new e.comRisquesClient.impression.GenerationInterroBDF;return this.genereEntete(this.modeArchivage.numRefDoc?"Document n° : ":null,this.modeArchivage.numRefDoc,this.modeArchivage.codeBarre).then(function(n){var s=t.createDocument(r.personneInterrogee,n),o=new e.comRisquesClient.impression.SIDCGCE_Interro_BDFGenerationParams(r.personneInterrogee,r.modeArchivage);return r.serviceAgentExtended.Impression.generer(s,o).then(function(e){return r.donnees.documentGenere=e.IdntPJ,r.serviceAgentExtended.Fichier.saveAs(e.Fichier,MyWay.Services.Fichier.TYPE_FICHIER.PDF,"interro_bdf_"+r.personneInterrogee.cleBDF+".pdf",MyWay.Services.Fichier.TYPE_DONNEES_A_SAUVER.BASE64).then(function(e){})["catch"](function(e){r.processError(e)}),e})["catch"](function(n){var t=new e.comRisquesClient.impression.SIDCGCE_Interro_BDFGenerationImpressionParams(r.personneInterrogee,r.modeArchivage);r.serviceAgentExtended.Impression.genererImprimer(s,t).then(function(e){r.processError(new MyWay.Services.Erreur("L’archivage du résultat de l’interrogation banque de France dans le dossier numérique du client (classeur client) n’a pas pu être réalisé. L’interrogation BDF va s’imprimer, pensez à la numériser."))})["catch"](function(e){r.processError(new MyWay.Services.Erreur("L’archivage et l'impression du résultat de l’interrogation banque de France dans le dossier numérique du client (classeur client) n’ont pas pu être réalisés."))})})})}this.processError(new MyWay.Services.Erreur("Veuillez renseigner les options d'archivage"))}},n.prototype.processError=function(e){var n={closeButtonText:"Fermer",headerText:"La génération du document a échoué",bodyText:e&&e.libelle?e.libelle:e.codeLibelle,iconName:"itce-warning",size:"md"};this.modalService.showPopup(n)},n.prototype.genereEntete=function(e,n,r){var t,s,o,i,a=[];return a.push(this.serviceAgentExtended.Context.GetAuthentificationInfo().then(function(e){t=e.codeEtablissement})["catch"](function(e){})),a.push(this.serviceAgentExtended.Context.GetParametresComptables().then(function(e){s=e.libelleEdsRattachementGuichetComptable,o=e.edsExterneGuichetComptable,i=e.numTelEdsRattachementGuichetComptable})["catch"](function(e){})),this.$q.all(a).then(function(a){var l=new Date,c=l.getDate(),d=c.toString();9>=c&&(d="0"+c);var C=l.getMonth()+1,u=(l.getMonth()+1).toString();9>=C&&(u="0"+C);var p=l.getMinutes(),h=l.getMinutes().toString();9>=p&&(h="0"+p);var m=l.getSeconds(),g=l.getSeconds().toString();9>=m&&(g="0"+m);var F=d+"/"+u+"/"+l.getFullYear(),v=l.getHours()+":"+h+":"+g,I={},b=[],f={};return f._attribute_Content=MyWay.Services.Impression.TYPE_IMAGE.Id,f._value_=t+".jpg",I.LOGO_ETABLISSEMENT=f,I.LIBELLE_AGENCE=s,I.COCEEL_AGENCE=o,I.NODATP_AGENCE=i,I.DATE_EDITION=F,I.HEURE_EDITION="   "+v,e&&(I.NUM_REFDOC=e),n&&(I.CODE_BARRE=n),r&&(I.REF_ACTE=r),b.push(I),b})},n.composDesignationCourteTiers=function(e,n,r){void 0===r&&(r=32);var t="";return void 0!==e&&null!=e&&""!==e&&(t+=e.trim()),-1!==r&&t.length>r?t=t.substring(0,r):void 0!==n&&null!=n&&""!==n&&(""!==t&&(t+="*"),t+=n.trim(),-1!==r&&t.length>r&&(t=t.substring(0,r))),t.trim()},n.$inject=["$scope","genereCleBDFService","interroBDFService","$modalInstance","data","modeImpression","modeArchivage","modeAveugle","serviceAgentExtended","modalService","$q","modeInterrogationForce"],
n.VALUE_IMPRESSION_AUTO="AUTO",n.VALUE_IMPRESSION_PDF="PDF",n.LISTE_MOTIFS=[{id:"01",value:"1ère commande de chéquier"},{id:"02",value:"commande carte"},{id:"03",value:"octroi crédit"},{id:"04",value:"octroi découvert"}],n}();n.InterroBDFController=r,n.app.controller("InterroBDFController",r)}(n=e.comRisquesClient||(e.comRisquesClient={}))}(myway||(myway={}));var myway;!function(e){var n;!function(e){function n(){return{restrict:"E",templateUrl:"typescript/interro-bdf/interro-bdf-view.html",scope:{donnees:"=ngModel",modeAveugle:"=modeAveugle",modeImpression:"@",modeArchivage:"=modeArchivage",modeInterrogationForce:"@"},controller:"InterroBDFController",controllerAs:"ctrl",bindToController:!0,link:function(e,n,r){}}}e.app.directive("mwsfInterroBdf",n)}(n=e.comRisquesClient||(e.comRisquesClient={}))}(myway||(myway={}));var myway;!function(e){var n;!function(e){var n=function(){function e(e,n){this.serviceAgentExtended=e,this.modalService=n}return e.prototype.afficheInterroBDFModale=function(e,n,r,t,s){var o={templateUrl:"typescript/interro-bdf/interro-bdf-view.html",controller:"InterroBDFController",controllerAs:"ctrl",backdrop:"static",keyboard:!1,size:"lg",resolve:{data:function(){return e},modeImpression:function(){return r},modeArchivage:function(){return t},modeAveugle:function(){return n},modeInterrogationForce:function(){return s}}};return this.modalService.showModal(o).then(function(e){return e})},e.prototype.getCurrentCOCXBQ=function(){return this.serviceAgentExtended.getAuthentificationInfo().then(function(e){try{return e.codeEtablissement}catch(n){throw"Impossible de récuperer les données depuis le contexte"}})},e.prototype.getCodeGuichetInterbancaire=function(){return this.serviceAgentExtended.getParametresComptables().then(function(e){try{return e.codeGuichetInterbancaire}catch(n){throw"Impossible de récupérer les paramètres comptables"}})},e.prototype.recupererLibelleNatureCredit=function(e){var n=this;return e=_.padLeft(e,2,"0"),this.getCurrentCOCXBQ().then(function(r){return n.serviceAgentExtended.DonneesDelocalisees.getRubriqueLibelle(r,"UCNSCD",e).then(function(e){try{return e}catch(n){throw n}})})},e.prototype.getInterroFCCManuelle=function(e,n,r){var t=this;return this.getCurrentCOCXBQ().then(function(s){return t.getCodeGuichetInterbancaire().then(function(o){var i="http://myway-ressources-dua.sigcesie.caisse-epargne.fr:6083/risqueclient-v1/fichageFCC?codeEtablissement="+s+"&codeGuichetInterbancaire="+o+"&codeOrigineConsultation="+n+"&cleBDF="+e;return i+=r?"&sousCleBDF="+r:"&sousCleBDF=00",t.serviceAgentExtended.sendRequest({url:i,withHeaders:!0,method:MyWay.Services.MethodEnum.GET}).then(function(e){return e},function(e){throw e})},function(e){throw e})},function(e){throw e})},e.prototype.getInterroFCCDecouvertCredit=function(e,n,r,t,s,o,i){var a=this;return this.getCurrentCOCXBQ().then(function(l){return a.getCodeGuichetInterbancaire().then(function(c){var d="http://myway-ressources-dua.sigcesie.caisse-epargne.fr:6083/risqueclient-v1/fichageFCC?codeEtablissement="+l+"&codeGuichetInterbancaire="+c+"&codeOrigineConsultation="+n+"&cleBDF="+e+"&identifiantTiers="+t+"&designationCourteTiers="+o+"&codeProduitService="+s+"&referenceProduit="+i;return d+=r?"&sousCleBDF="+r:"&sousCleBDF=00",a.serviceAgentExtended.sendRequest({url:d,withHeaders:!0,method:MyWay.Services.MethodEnum.GET}).then(function(e){return e},function(e){throw e})},function(e){throw e})},function(e){throw e})},e.prototype.getInterroFCCCarte=function(e,n,r,t,s,o,i,a){var l=this;return this.getCurrentCOCXBQ().then(function(c){return l.getCodeGuichetInterbancaire().then(function(d){var C="http://myway-ressources-dua.sigcesie.caisse-epargne.fr:6083/risqueclient-v1/fichageFCC?codeEtablissement="+c+"&codeGuichetInterbancaire="+d+"&codeOrigineConsultation="+n+"&cleBDF="+e+"&identifiantTiers="+t+"&designationCourteTiers="+o+"&codeProduitService="+s+"&referenceProduit="+i+"&codeProduitCarte="+a;return C+=r?"&sousCleBDF="+r:"&sousCleBDF=00",l.serviceAgentExtended.sendRequest({url:C,withHeaders:!0,method:MyWay.Services.MethodEnum.GET}).then(function(e){return e},function(e){throw e})},function(e){throw e})},function(e){throw e})},e.prototype.getInterroFCCCheque=function(e,n,r,t,s,o,i,a,l,c){var d=this;return this.getCurrentCOCXBQ().then(function(C){return d.getCodeGuichetInterbancaire().then(function(u){var p="http://myway-ressources-dua.sigcesie.caisse-epargne.fr:6083/risqueclient-v1/fichageFCC?codeEtablissement="+C+"&codeGuichetInterbancaire="+u+"&codeOrigineConsultation="+n+"&cleBDF="+e+"&identifiantTiers="+t+"&designationCourteTiers="+o+"&codeProduitService="+s+"&referenceProduit="+i+"&codeTypeChequier="+a+"&nombreChequierCommande="+l+"&codeFamilleChequier="+c;return p+=r?"&sousCleBDF="+r:"&sousCleBDF=00",d.serviceAgentExtended.sendRequest({url:p,withHeaders:!0,method:MyWay.Services.MethodEnum.GET}).then(function(e){return e},function(e){throw e})},function(e){throw e})},function(e){throw e})},e.prototype.getInterroFICPManuelle=function(e,n,r,t,s,o){var i=this;return this.getCurrentCOCXBQ().then(function(a){return i.getCodeGuichetInterbancaire().then(function(l){var c="";t&&(c="&motifConsultation="+t+"&typeCredit="+s+"&identifiantDossierInstruction="+o);var d="http://myway-ressources-dua.sigcesie.caisse-epargne.fr:6083/risqueclient-v1/fichageFICP?codeEtablissement="+a+"&codeGuichetInterbancaire="+l+"&codeOrigineConsultation="+n+"&cleBDF="+e+c;return d+=r?"&sousCleBDF="+r:"&sousCleBDF=00",i.serviceAgentExtended.sendRequest({url:d,withHeaders:!0,method:MyWay.Services.MethodEnum.GET}).then(function(e){return e},function(e){throw e})},function(e){throw e})},function(e){throw e})},e.prototype.getInterroFICPDecouvertCredit=function(e,n,r,t,s,o,i,a,l,c){var d=this;return this.getCurrentCOCXBQ().then(function(C){return d.getCodeGuichetInterbancaire().then(function(u){var p="";a&&(p="&motifConsultation="+a+"&typeCredit="+l+"&identifiantDossierInstruction="+c);var h="http://myway-ressources-dua.sigcesie.caisse-epargne.fr:6083/risqueclient-v1/fichageFICP?codeEtablissement="+C+"&codeGuichetInterbancaire="+u+"&codeOrigineConsultation="+n+"&cleBDF="+e+"&identifiantTiers="+t+"&designationCourteTiers="+o+"&codeProduitService="+s+"&referenceProduit="+i+p;return h+=r?"&sousCleBDF="+r:"&sousCleBDF=00",d.serviceAgentExtended.sendRequest({url:h,withHeaders:!0,method:MyWay.Services.MethodEnum.GET}).then(function(e){return e},function(e){throw e})},function(e){throw e})},function(e){throw e})},e.prototype.getInterroFICPCarte=function(e,n,r,t,s,o,i,a,l,c,d){var C=this;return this.getCurrentCOCXBQ().then(function(u){return C.getCodeGuichetInterbancaire().then(function(p){var h="";l&&(h="&motifConsultation="+l+"&typeCredit="+c+"&identifiantDossierInstruction="+d);var m="http://myway-ressources-dua.sigcesie.caisse-epargne.fr:6083/risqueclient-v1/fichageFICP?codeEtablissement="+u+"&codeGuichetInterbancaire="+p+"&codeOrigineConsultation="+n+"&cleBDF="+e+"&identifiantTiers="+t+"&designationCourteTiers="+o+"&codeProduitService="+s+"&referenceProduit="+i+"&codeProduitCarte="+a+h;return m+=r?"&sousCleBDF="+r:"&sousCleBDF=00",C.serviceAgentExtended.sendRequest({url:m,withHeaders:!0,method:MyWay.Services.MethodEnum.GET}).then(function(e){return e},function(e){throw e})},function(e){throw e})},function(e){throw e})},e.prototype.getInterroFICPCheque=function(e,n,r,t,s,o,i,a,l,c,d,C,u){var p=this;return this.getCurrentCOCXBQ().then(function(h){return p.getCodeGuichetInterbancaire().then(function(m){var g="";d&&(g="&motifConsultation="+d+"&typeCredit="+C+"&identifiantDossierInstruction="+u);var F="http://myway-ressources-dua.sigcesie.caisse-epargne.fr:6083/risqueclient-v1/fichageFICP?codeEtablissement="+h+"&codeGuichetInterbancaire="+m+"&codeOrigineConsultation="+n+"&cleBDF="+e+"&identifiantTiers="+t+"&designationCourteTiers="+o+"&codeProduitService="+s+"&referenceProduit="+i+"&codeTypeChequier="+a+"&nombreChequierCommande="+l+"&codeFamilleChequier="+c+g;return F+=r?"&sousCleBDF="+r:"&sousCleBDF=00",p.serviceAgentExtended.sendRequest({url:F,withHeaders:!0,method:MyWay.Services.MethodEnum.GET}).then(function(e){return e},function(e){throw e})},function(e){throw e})},function(e){throw e})},e.$inject=["serviceAgentExtended","modalService"],e}();e.InterroBDFService=n,e.app.service("interroBDFService",n)}(n=e.comRisquesClient||(e.comRisquesClient={}))}(myway||(myway={}));var __extends=this&&this.__extends||function(e,n){function r(){this.constructor=e}for(var t in n)n.hasOwnProperty(t)&&(e[t]=n[t]);e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)},myway;!function(e){var n;!function(n){var r;!function(n){var r=function(){function e(){}return e}();n.PersonneBDF=r;var t=function(e){function n(){e.apply(this,arguments)}return __extends(n,e),n}(e.comRisquesClient.Model.PersonneBDF);n.PersonneFCC=t;var s=function(e){function n(){e.apply(this,arguments)}return __extends(n,e),n}(e.comRisquesClient.Model.PersonneBDF);n.PersonneFICP=s;var o=function(){function e(){}return e}();n.InterroBDFManuelle=o;var i=function(e){function n(){e.apply(this,arguments)}return __extends(n,e),n}(o);n.InterroBDFDecouvertCredit=i;var a=function(e){function n(){e.apply(this,arguments)}return __extends(n,e),n}(i);n.InterroBDFCarte=a;var l=function(e){function n(){e.apply(this,arguments)}return __extends(n,e),n}(i);n.InterroBDFCheque=l;var c=function(){function e(){}return e}();n.ArchivageInterroBDF=c}(r=n.Model||(n.Model={}))}(n=e.comRisquesClient||(e.comRisquesClient={}))}(myway||(myway={}));var myway;!function(e){var n;!function(e){var n=function(){function e(e){this.serviceAgentExtended=e}return e.prototype.genereCleBDF=function(n,r,t){if(null===n)throw new Error("XM207A : Date de naissance invalide.");if(n.getDay()>=e.MAX_COUNT_DAY||n.getMonth()>=e.MAX_COUNT_MONTH)throw new Error("XM207A : Date de naissance invalide.");if(null===r||angular.isDefined(r)&&0===r.length)throw new Error("XM208A : Nom patronymique invalide.");t===!0&&(r=r.replace("DE ",""),r=r.replace("D'",""),r=r.replace("D ",""),r=r.replace("D-",""),r=r.replace("DE-","")),r=this.normalize(r).toUpperCase();var s=moment(n).format("DDMMYY"),o=s;return r.length<5?(o+=r.substr(0,r.length),o=_.padRight(o,11," ")):o+=r.substr(0,5),o},e.prototype.normalize=function(e){e=e.toLowerCase();for(var n="àáäâèéëêěìíïîòóöôùúüûñçčřšýžďť",r="aaaaeeeeeiiiioooouuuunccrsyzdt",t=0;t<n.length;t++)e=e.replace(new RegExp(n.charAt(t),"g"),r.charAt(t));return e=e.replace(/[ ,-.'\/";&?!()^~#{}[]|`_@}=+°*]/g,"")},e.$inject=["serviceAgentExtended"],e.MAX_COUNT_MONTH=12,e.MAX_COUNT_DAY=32,e}();e.GenereCleBDFService=n,e.app.service("genereCleBDFService",n)}(n=e.comRisquesClient||(e.comRisquesClient={}))}(myway||(myway={}));var myway;!function(e){var n;!function(e){var n;!function(e){var n=function(){function n(){}return n.prototype.createDocument=function(e,n){this.personne=e;var r=this.initialisationInterroBDF(),t={},s=new Array,o=new Array;o.push(this.constructionTitre()),o.push(this.constructionBlocInterroBDF()),angular.isDefined(this.personne.personneFICP)&&o.push(this.constructionFICP()),angular.isDefined(this.personne.personneFCC)&&o.push(this.constructionBlocFCC()),t._blocChoice_=o,s.push(t),r.Section1=s,r.GENERIC_ENTETEETS=n;var i={};return r.GENERIC_PIEDPAGEETS=i,r},n.prototype.initialisationInterroBDF=function(){var n=new e.SIDCGCE_Interro_BDF,r=new Array;return n.Section1=r,n},n.prototype.constructionTitre=function(){var e={},n={};return n.TITRE_DOCUMENT="INTERROGATION BANQUE DE FRANCE",e.GENERIC_TITREDOCUMENT=n,e},n.prototype.constructionBlocInterroBDF=function(){var e={},n={},r=this.personne.nomFamille;if(r+=this.personne.prenom?" "+this.personne.prenom:"",this.personne.motifs){var t=this.personne.motifs.split("<br />");t.length>1?n.PROVENANCE=t.join(" - "):n.PROVENANCE=this.personne.motifs}var s=moment(this.personne.dateNaissance).format("DD/MM/YYYY");n.TEXTE_1="La personne "+r+", née le "+s+" :",this.personne.messageFICP?(n.TEXTE_2=this.personne.messageFICP,"Non fiché"===this.personne.messageFICP&&(n.TEXTE_2="N'est pas inscrite au fichier FICP")):n.TEXTE_2="Est inscrite au fichier FICP",this.personne.messageFCC?(n.TEXTE_3=this.personne.messageFCC,"Non fiché"===this.personne.messageFCC&&(n.TEXTE_3="N'est pas inscrite au fichier FCC")):n.TEXTE_3="Est inscrite au fichier FCC";var o=moment(this.personne.dateJour).format("DD/MM/YYYY à HH:mm");return n.TEXTE_4="Interrogations du "+o,e.Bloc_1=n,e},n.prototype.constructionBlocFCC=function(){var e={},n={};return n.Adresse1_FCC=this.personne.personneFCC.adresse1,n.Adresse2_FCC=this.personne.personneFCC.adresse2,n.Clé_FCC=this.personne.personneFCC.cleBDF,this.personne.personneFCC.dateNaissance&&(n.Dat_Naiss_FCC=moment(this.personne.personneFCC.dateNaissance).format("DD/MM/YYYY")),this.personne.personneFCC.dateDernierRetrait&&(n.Date_Dern_Retrait_FCC=moment(this.personne.personneFCC.dateDernierRetrait).format("DD/MM/YYYY")),this.personne.personneFCC.date&&(n.Date_FCC=moment(this.personne.personneFCC.date).format("DD/MM/YYYY")),this.personne.personneFCC.dateFinIB&&(n.Date_Fin_IB_FCC=moment(this.personne.personneFCC.dateFinIB).format("DD/MM/YYYY")),this.personne.personneFCC.dateFinIJ&&(n.Date_Fin_IJ_FCC=moment(this.personne.personneFCC.dateFinIJ).format("DD/MM/YYYY")),n.GENERIC_LIGNEVIDE=1,n.Lieu_Naiss_FCC=this.personne.personneFCC.lieuNaissance,this.personne.personneFCC.montantColl&&(n.Montant_Coll_FCC=this.personne.personneFCC.montantColl.toString()),this.personne.personneFCC.montantIndiv&&(n.Montant_Ind_FCC=this.personne.personneFCC.montantIndiv.toString()),this.personne.personneFCC.nombreChequesColl&&(n.Nb_Chèque_Coll_FCC=this.personne.personneFCC.nombreChequesColl.toString()),this.personne.personneFCC.nombreChequesIndiv&&(n.Nb_Chèque_Ind_FCC=this.personne.personneFCC.nombreChequesIndiv.toString()),this.personne.personneFCC.nombreComptesIndiv&&(n.Nb_Cpte_Ind_FCC=this.personne.personneFCC.nombreComptesIndiv.toString()),this.personne.personneFCC.nombreComptesColl&&(n.Nb_Cpte_Coll_FCC=this.personne.personneFCC.nombreComptesColl.toString()),n.Nom_Famille_FCC=this.personne.personneFCC.nomFamille,this.personne.personneFCC.nomUsage&&(n.Nom_Usage_FCC=this.personne.personneFCC.nomUsage),this.personne.personneFCC.pcs&&(n.PCS_FCC=this.personne.personneFCC.pcs),n.Prénom_FCC=this.personne.personneFCC.prenom,this.personne.personneFCC.remarques&&(n.Remarque1_FCC=this.personne.personneFCC.remarques.length>69?this.personne.personneFCC.remarques.substr(0,69):this.personne.personneFCC.remarques,n.Remarque2_FCC=this.personne.personneFCC.remarques.length>69?this.personne.personneFCC.remarques.substr(70,this.personne.personneFCC.remarques.length-1):null),n.Sexe_FCC=this.personne.personneFCC.sexe,this.personne.personneFCC.siren&&(n.SIREN_FCC=this.personne.personneFCC.siren),n.Sous_Clé_FCC=this.personne.personneFCC.sousCleFCC,e.BL_FCC=n,e},n.prototype.constructionFICP=function(){var e={},n={};return n.Clé_BDF_FICP=this.personne.personneFICP.cleBDF,this.personne.personneFICP.date&&(n.Date_FICP=moment(this.personne.personneFICP.date).format("DD/MM/YYYY")),this.personne.personneFICP.dateNaissance&&(n.Date_Naiss_FICP=moment(this.personne.personneFICP.dateNaissance).format("DD/MM/YYYY")),this.personne.personneFICP.dateRadiation&&(n.Date_Radiation_FICP=moment(this.personne.personneFICP.dateRadiation).format("DD/MM/YYYY")),this.personne.personneFICP.fichier&&(n.Fichier_FICP=this.personne.personneFICP.fichier),n.GENERIC_LIGNEVIDE=1,this.personne.personneFICP.lieuNaissance&&(n.Lieu_Naiss_FICP=this.personne.personneFICP.lieuNaissance),this.personne.personneFICP.mesures&&(n.Mesure_FICP=this.personne.personneFICP.mesures),this.personne.personneFICP.nombreDeclarants&&(n.Nb_Déclarant_FICP=this.personne.personneFICP.nombreDeclarants.toString()),this.personne.personneFICP.nombreIncidents&&(n.Nb_Incident_FICP=this.personne.personneFICP.nombreIncidents.toString()),this.personne.personneFICP.natureCredit&&(n.Nb_Nature_Credit_FICP=this.personne.personneFICP.natureCredit+" - "+this.personne.personneFICP.libelleNatureCredit),n.Nom_Famille_FICP=this.personne.personneFICP.nomFamille,this.personne.personneFICP.nomUsage&&(n.Nom_Usage_FICP=this.personne.personneFICP.nomUsage),n.Prénom_FICP=this.personne.personneFICP.prenom,n.Sexe_FICP=this.personne.personneFICP.sexe,n.Sous_Clé_FICP=this.personne.personneFICP.sousCleFICP,e.BL_FICP=n,e},n}();e.GenerationInterroBDF=n}(n=e.impression||(e.impression={}))}(n=e.comRisquesClient||(e.comRisquesClient={}))}(myway||(myway={}));var myway;!function(e){var n;!function(e){var n;!function(e){var n=function(){function e(){this._attribute_id="SIDCGCE_Interro_BDF.docx",this._attribute_xmlns="http://SIDCGCE_Interro_BDF.xsd"}return e}();e.SIDCGCE_Interro_BDF=n;var r=function(){function e(e,n){this.systeme={typeName:"SIDCGCE_Interro_BDF",typeFullName:"interro.SIDCGCE_Interro_BDF.SIDCGCE_Interro_BDF",librairie:"SIDCGCE_Interro_BDF"},this.obligatoires={action:MyWay.Services.Impression.GENERATION_ACTION.archiverAndGetFichier,parametresGenerationFichier:{typeFichier:MyWay.Services.Fichier.TYPE_FICHIER.PDF,restitutionVersion:MyWay.Services.Impression.RESTITUTION_VERSION.V180,sousRepModele:"07-RISQUES/ACCESBDF_doc"}};var r={idntCmpstApplf:n.idntCmpstApplf},t={codeTypeModeAcqs:n.codeTypeModeAcqs,codeTypeOrigAcqs:n.codeTypeOrigAcqs,codeTypeNatrDoc:n.codeTypeNatrDoc,codeTypeAttrb:n.codeTypeAttrb,idntAttrb:n.idntAttrb,dateDeliv:n.dateDeliv?n.dateDeliv:new Date,dateNumr:n.dateNumr?n.dateNumr:new Date,inttAttr:n.inttAttr,dateAttr:n.dateAttr,codeTypeSign:n.codeTypeSign,codeTypeStck:"A"},s={nomFich:"SIDCGCE_Interro_BDF.pdf"},o={proprietesDoc:t,fichierDoc:s},i={donnCntx:r,document:o},a={aQstnCreerDoc:i};this.optionnels={nomFichier:"SIDCGCE_Interro_BDF.pdf",archivage:a}}return e}();e.SIDCGCE_Interro_BDFGenerationParams=r;var t=function(){function e(){this.obligatoires={nomFichier:"SIDCGCE_Interro_BDF.pdf"},this.optionnels={}}return e}();e.SIDCGCE_Interro_BDFImpressionParams=t;var s=function(){function e(e,n){this.systeme={typeName:"SIDCGCE_Interro_BDF",typeFullName:"interro.SIDCGCE_Interro_BDF.SIDCGCE_Interro_BDF",librairie:"SIDCGCE_Interro_BDF"},this.obligatoires={action:MyWay.Services.Impression.GENERATION_IMPRESSION_ACTION.archiverAndGetFichier,nomFichier:"SIDCGCE_Interro_BDF.pdf",parametresGenerationFichier:{typeFichier:MyWay.Services.Fichier.TYPE_FICHIER.PDF,restitutionVersion:MyWay.Services.Impression.RESTITUTION_VERSION.V180,sousRepModele:"07-RISQUES/ACCESBDF_doc"}};var r={idntCmpstApplf:n.idntCmpstApplf},t={codeTypeModeAcqs:n.codeTypeModeAcqs,codeTypeOrigAcqs:n.codeTypeOrigAcqs,codeTypeNatrDoc:n.codeTypeNatrDoc,codeTypeAttrb:n.codeTypeAttrb,idntAttrb:n.idntAttrb,dateDeliv:n.dateDeliv?n.dateDeliv:new Date,dateNumr:n.dateNumr?n.dateNumr:new Date,inttAttr:n.inttAttr,dateAttr:n.dateAttr,codeTypeSign:n.codeTypeSign,codeTypeStck:"A"},s={nomFich:"SIDCGCE_Interro_BDF.pdf"},o={proprietesDoc:t,fichierDoc:s},i={donnCntx:r,document:o},a={aQstnCreerDoc:i};this.optionnels={archivage:a}}return e}();e.SIDCGCE_Interro_BDFGenerationImpressionParams=s}(n=e.impression||(e.impression={}))}(n=e.comRisquesClient||(e.comRisquesClient={}))}(myway||(myway={})),angular.module("myway.comRisquesClient").run(["$templateCache",function(e){e.put("typescript/interro-bdf/detail-ligne-tableau-restitution-view.html",'\r\n\r\n\r\n<div class="detail-tr">\r\n    <div class="row">\r\n        <span class="col-md-2">Adresse</span>\r\n        <div class="col-md-3">\r\n            <p ng-bind="::mwTableRow.ligne2AdresseAFNOR"></p>\r\n            <p ng-bind="::mwTableRow.ligne3AdresseAFNOR"></p>\r\n            <p ng-bind="::mwTableRow.ligne4AdresseAFNOR"></p>\r\n            <p ng-bind="::mwTableRow.ligne5AdresseAFNOR"></p>\r\n            <p ng-bind="::mwTableRow.ligne6AdresseAFNOR"></p>\r\n        </div>\r\n        <div class="col-md-offset-2 col-md-5">\r\n            <div class="row" data-ng-show="::mwTableRow.numTelephoneFixe">\r\n                <span class="col-md-6">N° de téléphone fixe : </span>\r\n                <span class="col-md-6" ng-bind="::mwTableRow.numTelephoneFixe"></span>\r\n            </div>\r\n            <div class="row" data-ng-show="::mwTableRow.numTelephonePortable">\r\n                <span class="col-md-6">N° de téléphone portable : </span>\r\n                <span class="col-md-6" ng-bind="::mwTableRow.numTelephonePortable"></span>\r\n            </div>\r\n            <div class="row" data-ng-show="::mwTableRow.courrierElectronique">\r\n                <span class="col-md-6">Courrier électronique : </span>\r\n                <span class="col-md-6" ng-bind="::mwTableRow.courrierElectronique"></span>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</div>   '),e.put("typescript/interro-bdf/interro-bdf-view.html",'<div ng-show="ctrl.erreurGenerationCleBDF && !ctrl.afficherInterface">\r\n\r\n    <div class="modal-header">\r\n        <button id="btn-dismiss-erreur" type="button" data-ng-click="ctrl.$modalInstance.dismiss()" class="close" aria-hidden="true"><span class="icon itce-times"></span></button>\r\n        <h3 class="modal-title">Une erreur est survenue</h3>\r\n    </div>\r\n    <div class="modal-body">\r\n        <div class="row">\r\n            <div class="col-md-12">\r\n                <span class="text-danger" ng-bind="::ctrl.erreurGenerationCleBDF"></span>\r\n            </div>\r\n        </div>\r\n    </div>\r\n    <div class="modal-footer">\r\n        <div class="col-md-offset-9 col-md-3">\r\n            <mw-button texte="Fermer" id="btn-close-popup" modele="principale" data-ng-click="ctrl.closePopup();"></mw-button>\r\n        </div>\r\n    </div>\r\n</div>\r\n<div ng-if="ctrl.afficherInterface" class="interro-bdf">\r\n\r\n    <data-ng-form class="form-horizontal" role="form" name="form-interro-bdf">\r\n        <div ng-if="ctrl.modeEdition">\r\n\r\n            <div class="modal-header">\r\n                <button id="btn-dismiss" type="button" data-ng-click="ctrl.$modalInstance.dismiss()" class="close" aria-hidden="true"><span class="icon itce-times"></span></button>\r\n                <h3 class="modal-title">Récapitulatif de l\'interrogation Banque de France</h3>\r\n            </div>\r\n            <div class="modal-body">\r\n                <mw-panel niveau="2" titre="Identifiant de recherche">\r\n                    <div class="row">\r\n                        <div class="col-md-offset-1 col-md-2 align-droite"><label class="control-label positive">Clé BDF</label></div>\r\n                        <div class="col-md-2"><strong ng-bind="::ctrl.personneInterrogee.cleBDF"></strong></div>\r\n                    </div>\r\n                </mw-panel>\r\n                <mw-panel niveau="2" titre="Résultat Fichier des Incidents de Crédit aux Particuliers (FICP)" ng-show="{{ctrl.appelFICP}}">\r\n                    <div class="row" ng-show="ctrl.personneListeFICP && ctrl.personneListeFICP.length > 0">\r\n                        <strong>Votre client fait-il partie des personnes fichées de la liste ci-dessous ?</strong>\r\n                        <br><br>\r\n                    </div>\r\n                    <table class="table table-width-cent" id="id-table" ng-show="ctrl.personneListeFICP && ctrl.personneListeFICP.length > 0">\r\n                        <thead>\r\n                            <tr>\r\n                                <th class="width-quatre">\r\n                                    Oui/Non\r\n                                </th>\r\n                                <th class="width-treize">\r\n                                    Nom de famille\r\n                                </th>\r\n                                <th class="width-dix">\r\n                                    Prénom\r\n                                </th>\r\n                                <th class="width-quatorze">\r\n                                    Lieu de naissance\r\n                                </th>\r\n                                <th class="width-cinq">\r\n                                    Département\r\n                                </th>\r\n                                <th class="width-deux"></th>\r\n                            </tr>\r\n                        </thead>\r\n\r\n                        <tbody ng-repeat="mwTableRow in ctrl.personneListeFICP" ng-class="{\'expanded\':mwTableRow.expanded,\'selected\':mwTableRow.selected}">\r\n                            <!-- Ligne données -->\r\n                            <tr class="cadre" id="{{mwTableRow.sousCleFICP}}">\r\n                                <td>\r\n                                    <div class="row">\r\n                                        <div class="col-md-6">\r\n                                            <button class="btn col-md-12 itce-radio-btn padding-zero" type="button" id="btn-fichage-true" name="btn-fichage-true" ng-click="ctrl.onCheckedRadioButtonFICP(mwTableRow, true)" ng-model="mwTableRow.fichage" btn-radio="true"></button>\r\n                                        </div>\r\n                                        <div class="col-md-6">\r\n                                            <button class="btn col-md-12 itce-radio-btn padding-zero" type="button" id="btn-fichage-false" name="btn-fichage-false" ng-click="ctrl.onCheckedRadioButtonFICP(mwTableRow, false)" ng-model="mwTableRow.fichage" btn-radio="false"></button>\r\n\r\n                                        </div>\r\n                                    </div>\r\n                                </td>\r\n                                <td class="break-word">\r\n                                    <span ng-bind="::mwTableRow.nomFamille"></span>\r\n                                </td>\r\n                                <td class="break-word">\r\n                                    <span ng-bind="::mwTableRow.prenom"></span>\r\n                                </td>\r\n                                <td class="break-word">\r\n                                    <span ng-bind="::mwTableRow.lieuNaissance"></span>\r\n                                </td>\r\n                                <td>\r\n                                    <span ng-bind="::mwTableRow.departement"></span>\r\n                                </td>\r\n                                <td class="col-action">\r\n                                    <span ng-show="!mwTableRow.spinner" class="icon" ng-class="{\'itce-chevron-up\':mwTableRow.expanded, \'itce-chevron-down\': !mwTableRow.expanded }" ng-click="ctrl.onClickLigneFICP(mwTableRow)"></span>\r\n                                    <div ng-show="mwTableRow.spinner">\r\n                                        <div class="load-container load3"><div class="loader">.</div></div>\r\n                                    </div>\r\n                                </td>\r\n                            </tr>\r\n                            <!-- Ligne détail -->\r\n                            <tr class="cadre" collapse="!mwTableRow.expanded">\r\n                                <td></td>\r\n                                <td colspan="5">\r\n                                    <div class="row">\r\n                                        <div class="col-md-4">\r\n                                            <strong>\r\n                                                Informations Personne\r\n                                            </strong> \r\n                                        </div>\r\n                                        <div class="col-md-8">\r\n                                            <span class="text-danger" ng-bind="::mwTableRow.erreur"></span>\r\n                                        </div>\r\n                                    </div>\r\n                                    <div class="row" ng-show="!mwTableRow.erreur">\r\n                                        <div class="col-md-3"><label class="control-label positive">Nom d\'usage</label></div>\r\n                                        <div class="col-md-3"><strong class="break-word" ng-bind="::mwTableRow.nomUsage"></strong></div>\r\n\r\n                                        <div class="col-md-1"><label class="control-label positive">Sexe</label></div>\r\n                                        <div class="col-md-2"><strong ng-bind="::mwTableRow.sexe"></strong></div>\r\n\r\n                                        <div class="col-md-2"><label class="control-label positive">Sous-clé</label></div>\r\n                                        <div class="col-md-1"><strong ng-bind="::mwTableRow.sousCleFICP"></strong></div>\r\n                                    </div>\r\n                                    <div class="row" ng-show="!mwTableRow.erreur">\r\n                                        <div class="col-md-3"><label class="control-label positive">Date de Radiation</label></div>\r\n                                        <div class="col-md-3"><strong ng-cloak>{{mwTableRow.dateRadiation | date:\'dd/MM/yyyy\'}}</strong></div>\r\n\r\n                                        <div class="col-md-1"><label class="control-label positive">Date</label></div>\r\n                                        <div class="col-md-2"><strong ng-cloak>{{mwTableRow.date | date:\'dd/MM/yyyy\'}}</strong></div>\r\n\r\n                                        <div class="col-md-3">\r\n                                            <label class="control-label positive">Fichier</label>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;\r\n                                            <strong ng-bind="::mwTableRow.fichier"></strong>\r\n                                        </div>\r\n\r\n                                    </div>\r\n                                </td>\r\n                            </tr>\r\n                            <tr class="cadre" collapse="!mwTableRow.expanded" ng-show="!mwTableRow.erreur && (mwTableRow.nombreIncidents || mwTableRow.nombreDeclarants || mwTableRow.natureCredit)">\r\n                                <td></td>\r\n                                <td colspan="5">\r\n                                    <div class="row">\r\n                                        <div class="col-md-12">\r\n                                            <strong>\r\n                                                Incidents\r\n                                            </strong> \r\n                                        </div>\r\n                                    </div>\r\n                                    <div class="row">\r\n                                        <div class="col-md-3">\r\n                                            <label class="control-label positive">Nombre d\'incidents</label>\r\n                                            <strong ng-bind="::mwTableRow.nombreIncidents"></strong>\r\n                                        </div>\r\n                                        <div class="col-md-3">\r\n                                            <label class="control-label positive">Nombre de déclarants</label>\r\n                                            <strong ng-bind="::mwTableRow.nombreDeclarants"></strong>\r\n                                        </div>\r\n                                        <div class="col-md-2">\r\n                                            <label class="control-label positive">Nature crédit</label>\r\n                                        </div>\r\n                                        <div class="col-md-4">\r\n                                            <strong class="break-word" ng-show="mwTableRow.natureCredit" ng-cloak>{{mwTableRow.natureCredit}} - {{mwTableRow.libelleNatureCredit}}</strong>\r\n                                        </div>\r\n                                    </div>\r\n                                </td>\r\n                            </tr>\r\n                            <tr class="cadre" collapse="!mwTableRow.expanded" ng-show="!mwTableRow.erreur && mwTableRow.mesures">\r\n                                <td></td>\r\n                                <td colspan="5">\r\n                                    <div class="row">\r\n                                        <div class="col-md-2">\r\n                                            <strong>\r\n                                                Mesures\r\n                                            </strong> \r\n                                        </div>\r\n                                    </div>\r\n                                    <div class="row">\r\n                                        <div class="col-md-9 break-word" ng-bind="::mwTableRow.mesures">\r\n                                        </div>\r\n                                    </div>\r\n                                </td>\r\n                            </tr>\r\n                        </tbody>\r\n                    </table>\r\n\r\n                    <div class="row" ng-show="!ctrl.personneListeFICP || ctrl.personneListeFICP.length === 0">\r\n                        <div class="col-md-offset-1 col-md-2 align-droite"><label class="control-label positive">Retour BDF</label></div>\r\n                        <div class="col-md-7">\r\n                            <span ng-show="!ctrl.erreurFICP">\r\n                                <strong>Non fiché</strong>\r\n                            </span>\r\n                            <span ng-show="ctrl.erreurFICP"><strong ng-bind="::ctrl.erreurFICP"></strong></span>\r\n                        </div>\r\n                    </div>\r\n                </mw-panel>\r\n\r\n                <mw-panel niveau="2" titre="Résultat Fichier Centralisé des Chèques (FCC)" ng-show="{{ctrl.appelFCC}}">\r\n                    <div class="row" ng-show="ctrl.personneListeFCC && ctrl.personneListeFCC.length > 0">\r\n                        <strong>Votre client fait-il partie des personnes fichées de la liste ci-dessous ?</strong>\r\n                        <br><br>\r\n                    </div>\r\n                    <table class="table table-width-cent" id="id-table-2" ng-show="ctrl.personneListeFCC && ctrl.personneListeFCC.length > 0">\r\n                        <thead>\r\n                            <tr>\r\n                                <th class="width-quatre">\r\n                                    Oui/Non\r\n                                </th>\r\n                                <th class="width-treize">\r\n                                    Nom de famille\r\n                                </th>\r\n                                <th class="width-dix">\r\n                                    Prénom\r\n                                </th>\r\n                                <th class="width-quatorze">\r\n                                    Lieu de naissance\r\n                                </th>\r\n                                <th class="width-cinq">\r\n                                    Département\r\n                                </th>\r\n                                <th class="width-deux"></th>\r\n                            </tr>\r\n                        </thead>\r\n\r\n                        <tbody ng-repeat="mwTableRow in ctrl.personneListeFCC" ng-class="{\'expanded\':mwTableRow.expanded,\'selected\':mwTableRow.selected}">\r\n                            <!-- Ligne données -->\r\n                            <tr class="cadre width-cent" id="{{mwTableRow.sousCleFCC}}">\r\n                                <td>\r\n                                    <div class="row">\r\n                                        <div class="col-md-6">\r\n                                            <button class="btn col-md-12 itce-radio-btn padding-zero" type="button" id="btn-fichage-fcc-true" name="btn-fichage-fcc-true" ng-click="ctrl.onCheckedRadioButtonFCC(mwTableRow, true)" ng-model="mwTableRow.fichage" btn-radio="true"></button>\r\n                                        </div>\r\n                                        <div class="col-md-6">\r\n                                            <button class="btn col-md-12 itce-radio-btn padding-zero" type="button" id="btn-fichage-fcc-false" name="btn-fichage-fcc-false" ng-click="ctrl.onCheckedRadioButtonFCC(mwTableRow, false)" ng-model="mwTableRow.fichage" btn-radio="false"></button>\r\n\r\n                                        </div>\r\n                                    </div>\r\n                                </td>\r\n                                <td class="break-word">\r\n                                    <span ng-bind="::mwTableRow.nomFamille"></span>\r\n                                </td>\r\n                                <td class="break-word">\r\n                                    <span ng-bind="::mwTableRow.prenom"></span>\r\n                                </td>\r\n                                <td class="break-word">\r\n                                    <span ng-bind="::mwTableRow.lieuNaissance"></span>\r\n                                </td>\r\n                                <td>\r\n                                    <span ng-bind="::mwTableRow.departement"></span>\r\n                                </td>\r\n                                <td class="col-action">\r\n                                    <span ng-show="!mwTableRow.spinner" class="icon" ng-class="{\'itce-chevron-up\':mwTableRow.expanded, \'itce-chevron-down\': !mwTableRow.expanded }" ng-click="ctrl.onClickLigneFCC(mwTableRow)"></span>\r\n                                    <div ng-show="mwTableRow.spinner">\r\n                                        <div class="load-container load3"><div class="loader">.</div></div>\r\n                                    </div>\r\n                                </td>\r\n                            </tr>\r\n                            <!-- Ligne détail -->\r\n                            <tr class="cadre" collapse="!mwTableRow.expanded">\r\n                                <td></td>\r\n                                <td colspan="5">\r\n                                    <div class="row">\r\n                                        <div class="col-md-4">\r\n                                            <strong>\r\n                                                Informations Personne\r\n                                            </strong>\r\n                                        </div>\r\n                                        <div class="col-md-8">\r\n                                            <span class="text-danger" ng-bind="::mwTableRow.erreur"></span>\r\n                                        </div>\r\n                                    </div>\r\n                                    <div class="row" ng-show="!mwTableRow.erreur">\r\n                                        <div class="col-md-2"><label class="control-label positive">Nom d\'usage</label></div>\r\n                                        <div class="col-md-4"><strong class="break-word" ng-bind="::mwTableRow.nomUsage"></strong></div>\r\n\r\n                                        <div class="col-md-1"><label class="control-label positive">Sexe</label></div>\r\n                                        <div class="col-md-1"><strong ng-bind="::mwTableRow.sexe"></strong></div>\r\n\r\n                                        <div class="col-md-2"><label class="control-label positive">Sous-clé</label></div>\r\n                                        <div class="col-md-1"><strong ng-bind="::mwTableRow.sexesousCleFCC"></strong></div>\r\n                                    </div>\r\n                                    <div class="row">\r\n                                        <div class="col-md-2"><label class="control-label positive">SIREN</label></div>\r\n                                        <div class="col-md-4"><strong ng-bind="::mwTableRow.siren"></strong></div>\r\n\r\n                                        <div class="col-md-1"><label class="control-label positive">PCS</label></div>\r\n                                        <div class="col-md-1"><strong ng-bind="::mwTableRow.pcs"></strong></div>\r\n\r\n                                        <div class="col-md-2"><label class="control-label positive">Date</label></div>\r\n                                        <div class="col-md-1"><strong ng-cloak>{{mwTableRow.date | date:\'dd/MM/yyyy\'}}</strong></div>\r\n                                    </div>\r\n                                    <div class="row">\r\n                                        <div class="col-md-2">\r\n                                            <label class="control-label positive">Adresse</label>\r\n                                        </div>\r\n                                        <div class="col-md-4">\r\n                                            <strong ng-bind-html="mwTableRow.adresse1">\r\n                                            </strong>\r\n                                        </div>\r\n                                        <div class="col-md-4">\r\n                                            <label class="control-label positive">Date de fin interdiction judiciaire</label>\r\n                                        </div>\r\n                                        <div class="col-md-2">\r\n                                            <strong ng-cloak>{{mwTableRow.dateFinIJ | date:\'dd/MM/yyyy\'}}</strong>\r\n                                        </div>\r\n                                    </div>\r\n                                    <div class="row">\r\n                                        <div class="col-md-offset-2 col-md-4">\r\n                                            <strong ng-bind-html="mwTableRow.adresse2">\r\n                                            </strong>\r\n                                        </div>\r\n                                        <div class="col-md-4">\r\n                                            <label class="control-label positive">Date de fin interdiction bancaire</label>\r\n                                        </div>\r\n                                        <div class="col-md-2">\r\n                                            <strong ng-cloak>{{mwTableRow.dateFinIB | date:\'dd/MM/yyyy\'}}</strong>\r\n                                        </div>\r\n                                    </div>\r\n                                    <div class="row">\r\n                                        <div class="col-md-6">\r\n                                            <label class="control-label positive">Remarques</label>\r\n                                        </div>\r\n                                        <div class="col-md-4">\r\n                                            <label class="control-label positive">Date dernier retrait</label>\r\n                                        </div>\r\n                                        <div class="col-md-2">\r\n                                            <strong ng-cloak>{{mwTableRow.dateDernierRetrait | date:\'dd/MM/yyyy\'}}</strong>\r\n                                        </div>\r\n                                    </div>\r\n                                    <div class="row">\r\n                                        <div class="col-md-12">\r\n                                            <div class="remarques" data-ng-show="mwTableRow.remarques" ng-bind="::mwTableRow.remarques">\r\n                                            </div>\r\n                                        </div>\r\n                                    </div>\r\n                                </td>\r\n                            </tr>\r\n\r\n                            <tr class="cadre" collapse="!mwTableRow.expanded" ng-show="!mwTableRow.erreur && (mwTableRow.nombreComptesIndiv || mwTableRow.nombreChequesIndiv || mwTableRow.montantIndiv)">\r\n                                <td></td>\r\n                                <td colspan="5">\r\n\r\n                                    <div class="row">\r\n                                        <div class="col-md-12">\r\n                                            <strong>\r\n                                                Comptes individuels\r\n                                            </strong>\r\n                                        </div>\r\n                                    </div>\r\n                                    <div class="row">\r\n                                        <div class="col-md-3">\r\n                                            <label class="control-label positive">Nombre de comptes</label>\r\n                                        </div>\r\n                                        <div class="col-md-1">\r\n                                            <strong ng-bind="::mwTableRow.nombreComptesIndiv"></strong>\r\n                                        </div>\r\n\r\n                                        <div class="col-md-3">\r\n                                            <label class="control-label positive">Nombre de chèques</label>\r\n                                        </div>\r\n                                        <div class="col-md-1">\r\n                                            <strong ng-bind="::mwTableRow.nombreChequesIndiv"></strong>\r\n                                        </div>\r\n\r\n                                        <div class="col-md-2">\r\n                                            <label class="control-label positive">Montant</label>\r\n                                        </div>\r\n                                        <div class="col-md-2">\r\n                                            <strong ng-bind="::mwTableRow.montantIndiv"></strong>\r\n                                        </div>\r\n                                    </div>\r\n                                </td>\r\n                            </tr>\r\n                            <tr class="cadre" collapse="!mwTableRow.expanded" ng-show="!mwTableRow.erreur && (mwTableRow.nombreComptesColl || mwTableRow.nombreChequesColl || mwTableRow.montantColl)">\r\n                                <td></td>\r\n                                <td colspan="5">\r\n                                    <div class="row">\r\n                                        <div class="col-md-12">\r\n                                            <strong>\r\n                                                Comptes collectifs\r\n                                            </strong>\r\n                                        </div>\r\n                                    </div>\r\n                                    <div class="row">\r\n                                        <div class="col-md-3">\r\n                                            <label class="control-label positive">Nombre de comptes</label>\r\n                                        </div>\r\n                                        <div class="col-md-1">\r\n                                            <strong ng-bind="::mwTableRow.nombreComptesColl"></strong>\r\n                                        </div>\r\n\r\n                                        <div class="col-md-3">\r\n                                            <label class="control-label positive">Nombre de chèques</label>\r\n                                        </div>\r\n                                        <div class="col-md-1">\r\n                                            <strong ng-bind="::mwTableRow.nombreChequesColl"></strong>\r\n                                        </div>\r\n\r\n                                        <div class="col-md-2">\r\n                                            <label class="control-label positive">Montant</label>\r\n                                        </div>\r\n                                        <div class="col-md-2">\r\n                                            <strong ng-bind="::mwTableRow.montantColl"></strong>\r\n                                        </div>\r\n                                    </div>\r\n                                </td>\r\n                            </tr>\r\n                        </tbody>\r\n                    </table>\r\n                    <div class="row" ng-show="!ctrl.personneListeFCC || ctrl.personneListeFCC.length === 0">\r\n                        <div class="col-md-offset-1 col-md-2 align-droite"><label class="control-label positive">Retour BDF</label></div>\r\n                        <div class="col-md-7">\r\n                            <span ng-show="!ctrl.erreurFCC"><strong>Non fiché</strong></span>\r\n                            <span ng-show="ctrl.erreurFCC"><strong ng-bind="::ctrl.erreurFCC"></strong></span>\r\n                        </div>\r\n                    </div>\r\n                </mw-panel>\r\n            </div>\r\n\r\n            <div class="modal-footer">\r\n                <div class="col-md-offset-9 col-md-3">\r\n                    <mw-button texte="Continuer" data-ng-disabled="ctrl.boutonContinuerDisable" modele="principale" id="btn-continuer" data-ng-click="ctrl.afficheSynthese()"></mw-button>\r\n                </div>\r\n            </div>\r\n        </div>\r\n        <div ng-if="!ctrl.modeEdition">\r\n\r\n            <div class="modal-header">\r\n                <button id="btn-dismiss-lecture" type="button" data-ng-click="ctrl.$modalInstance.dismiss()" class="close" aria-hidden="true"><span class="icon itce-times"></span></button>\r\n                <h3 class="modal-title">Synthèse de l\'interrogation Banque de France</h3>\r\n            </div>\r\n            <div class="modal-body">\r\n                <mw-panel niveau="2" titre="Interrogation Banque de France">\r\n                    <div class="row">\r\n                        <div class="col-md-3 align-droite"><label class="control-label positive">Clé BDF</label></div>\r\n                        <div class="col-md-2"><strong ng-bind="::ctrl.personneInterrogee.cleBDF"></strong></div>\r\n                    </div>\r\n                    <div class="row">\r\n                        <div class="col-md-3 align-droite"><label class="control-label positive">Interrogation(s) du</label></div>\r\n                        <div class="col-md-8"><strong ng-cloak>{{ctrl.personneInterrogee.dateJour | date : \'dd/MM/yyyy à HH:mm\'}}</strong></div>\r\n                    </div>\r\n                    <div class="row">\r\n                        <div class="col-md-3 align-droite"><label class="control-label positive">La personne</label></div>\r\n                        <div class="col-md-8"><strong ng-cloak>{{ctrl.personneInterrogee.nomFamille}} {{ctrl.personneInterrogee.prenom}}</strong></div>\r\n                    </div>\r\n                    <div class="row">\r\n                        <div class="col-md-3 align-droite"><label class="control-label positive">Née le</label></div>\r\n                        <div class="col-md-4"><strong ng-cloak>{{ctrl.personneInterrogee.dateNaissance | date:\'dd/MM/yyyy\' }}</strong></div>\r\n                    </div>\r\n                    <div class="row margin-top-un" ng-show="ctrl.personneInterrogee.personneFICP" ng-class="{\'expanded\':ctrl.personneInterrogee.personneFICP.expanded,\'selected\':ctrl.personneInterrogee.personneFICP.selected}">\r\n                        <mw-hretractable id="inscrit-ficp" titre="Est inscrit au fichier FICP">\r\n                            <div class="row @texte-champs-non-modifiables">\r\n                                <div class="col-md-12">\r\n                                    <strong>Informations Personne</strong>\r\n                                </div>\r\n                            </div>\r\n                            <div class="row">\r\n                                <div class="col-md-12 @texte-champs-non-modifiables">\r\n                                    <div class="row">\r\n                                        <div class="col-md-2"><label class="control-label positive">Prénom</label></div>\r\n                                        <div class="col-md-4"><strong class="break-word" ng-bind="::ctrl.personneInterrogee.personneFICP.prenom"></strong></div>\r\n\r\n                                        <div class="col-md-1"><label class="control-label positive">Sexe</label></div>\r\n                                        <div class="col-md-2"><strong ng-bind="::ctrl.personneInterrogee.personneFICP.sexe"></strong></div>\r\n\r\n                                        <div class="col-md-2"><label class="control-label positive">Sous-clé</label></div>\r\n                                        <div class="col-md-1"><strong ng-bind="::ctrl.personneInterrogee.personneFICP.sousCleFICP"></strong></div>\r\n                                    </div>\r\n                                    <div class="row">\r\n                                        <div class="col-md-2"><label class="control-label positive">Nom d\'usage</label></div>\r\n                                        <div class="col-md-4"><strong class="break-word" ng-bind="::ctrl.personneInterrogee.personneFICP.nomUsage"></strong></div>\r\n\r\n                                        <div class="col-md-1"><label class="control-label positive">Date</label></div>\r\n                                        <div class="col-md-2"><strong ng-cloak>{{ctrl.personneInterrogee.personneFICP.date | date:\'dd/MM/yyyy\'}}</strong></div>\r\n\r\n                                        <div class="col-md-3">\r\n                                            <label class="control-label positive">Fichier</label>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;\r\n                                            <strong ng-bind="::ctrl.personneInterrogee.personneFICP.fichier"></strong>\r\n                                        </div>\r\n\r\n                                    </div>\r\n                                    <div class="row">\r\n                                        <div class="col-md-2"><label class="control-label positive">Né(e) à</label></div>\r\n                                        <div class="col-md-4 break-word"><strong ng-bind="::ctrl.personneInterrogee.personneFICP.lieuNaissance"></strong></div>\r\n\r\n                                        <div class="col-md-3"><label class="control-label positive">Date de Radiation</label></div>\r\n                                        <div class="col-md-3"><strong ng-cloak>{{ctrl.personneInterrogee.personneFICP.dateRadiation | date:\'dd/MM/yyyy\'}}</strong></div>\r\n                                    </div>\r\n\r\n                                </div>\r\n                            </div>\r\n                            <div class="row @texte-champs-non-modifiables margin-gray">\r\n                                <div class="col-md-3 position-top-ficp"><strong>Incidents</strong></div>\r\n                            </div>\r\n                            <div class="row @texte-champs-non-modifiables">\r\n                                <div class="col-md-3">\r\n                                    <label class="control-label positive">Nombre d\'incidents</label>\r\n                                    <strong ng-bind="::ctrl.personneInterrogee.personneFICP.nombreIncidents"></strong>\r\n                                </div>\r\n                                <div class="col-md-3">\r\n                                    <label class="control-label positive">Nombre de déclarants</label>\r\n                                    <strong ng-bind="::ctrl.personneInterrogee.personneFICP.nombreDeclarants"></strong>\r\n                                </div>\r\n                                <div class="col-md-2">\r\n                                    <label class="control-label positive">Nature crédit</label>\r\n                                </div>\r\n                                <div class="col-md-4">\r\n                                    <strong class="break-word" ng-show="ctrl.personneInterrogee.personneFICP.natureCredit" ng-cloak>{{ctrl.personneInterrogee.personneFICP.natureCredit}} - {{ctrl.personneInterrogee.personneFICP.libelleNatureCredit}}</strong>\r\n                                </div>\r\n                            </div>\r\n                            <div class="row @texte-champs-non-modifiables margin-gray">\r\n                                <div class="col-md-12"><strong class="position-top-ficp">Mesures</strong></div>\r\n                            </div>\r\n                            <div class="row @texte-champs-non-modifiables">\r\n                                <div class="col-md-12" ng-bind="::ctrl.personneInterrogee.personneFICP.mesures">\r\n                                </div>\r\n                            </div>\r\n                        </mw-hretractable>\r\n                    </div>\r\n                    <div class="row" ng-show="!ctrl.personneInterrogee.personneFICP && ctrl.appelFICP">\r\n                        <br>\r\n                        <div class="panel-heading panel non-inscrit">\r\n                            <span ng-show="!ctrl.erreurFICP">N\'est pas inscrite au fichier FICP</span>\r\n                            <span ng-show="ctrl.erreurFICP" ng-bind="::ctrl.erreurFICP"></span>\r\n                        </div>\r\n                    </div>\r\n                    <div class="row" ng-show="ctrl.personneInterrogee.personneFCC">\r\n                        <mw-hretractable id="inscrit-fcc" titre="Est inscrit au fichier FCC">\r\n                            <div class="row @texte-champs-non-modifiables">\r\n                                <div class="col-md-12">\r\n                                    <strong>\r\n                                        Informations Personne\r\n                                    </strong> \r\n                                </div>\r\n                            </div>\r\n                            <div class="row @texte-champs-non-modifiables">\r\n                                <div class="col-md-12">\r\n                                    <div class="row">\r\n                                        <div class="col-md-2"><label class="control-label positive">Prénom</label></div>\r\n                                        <div class="col-md-4"><strong ng-bind="::ctrl.personneInterrogee.personneFCC.prenom"></strong></div>\r\n\r\n                                        <div class="col-md-1"><label class="control-label positive">Sexe</label></div>\r\n                                        <div class="col-md-2"><strong ng-bind="::ctrl.personneInterrogee.personneFCC.sexe"></strong></div>\r\n\r\n                                        <div class="col-md-2"><label class="control-label positive">Sous-clé</label></div>\r\n                                        <div class="col-md-1"><strong ng-bind="::ctrl.personneInterrogee.personneFCC.sousCleFCC"></strong></div>\r\n                                    </div>\r\n                                    <div class="row">\r\n                                        <div class="col-md-2"><label class="control-label positive">Nom d\'usage</label></div>\r\n                                        <div class="col-md-4 break-word"><strong ng-bind="::ctrl.personneInterrogee.personneFCC.nomUsage"></strong></div>\r\n\r\n                                        <div class="col-md-1"><label class="control-label positive">Date</label></div>\r\n                                        <div class="col-md-2"><strong ng-cloak>{{ctrl.personneInterrogee.personneFCC.date | date:\'dd/MM/yyyy\'}}</strong></div>\r\n\r\n                                        <div class="col-md-2"><label class="control-label positive">PCS</label></div>\r\n                                        <div class="col-md-1"><strong ng-bind="::ctrl.personneInterrogee.personneFCC.pcs"></strong></div>\r\n                                    </div>\r\n                                    <div class="row">\r\n                                        <div class="col-md-2"><label class="control-label positive">Né(e) à</label></div>\r\n                                        <div class="col-md-4 break-word"><strong ng-bind="::ctrl.personneInterrogee.personneFCC.lieuNaissance"></strong></div>\r\n\r\n                                        <div class="col-md-2"><label class="control-label positive">SIREN</label></div>\r\n                                        <div class="col-md-4 break-word"><strong ng-bind="::ctrl.personneInterrogee.personneFCC.siren"></strong></div>\r\n\r\n                                    </div>\r\n                                    <div class="row">\r\n                                        <div class="col-md-2">\r\n                                            <label class="control-label positive">Adresse</label>\r\n                                        </div>\r\n                                        <div class="col-md-4">\r\n                                            <strong ng-bind-html="ctrl.personneInterrogee.personneFCC.adresse1">\r\n                                            </strong> \r\n                                        </div>\r\n                                        <div class="col-md-4">\r\n                                            <label class="control-label positive">Date de fin interdiction judiciaire</label>\r\n                                        </div>\r\n                                        <div class="col-md-2">\r\n                                            <strong ng-cloak>{{ctrl.personneInterrogee.personneFCC.dateFinIJ | date:\'dd/MM/yyyy\'}}</strong>\r\n                                        </div>\r\n                                    </div>\r\n                                    <div class="row">\r\n                                        <div class="col-md-offset-2 col-md-4">\r\n                                            <strong ng-bind-html="ctrl.personneInterrogee.personneFCC.adresse2">\r\n                                            </strong>\r\n                                        </div>\r\n                                        <div class="col-md-4">\r\n                                            <label class="control-label positive">Date de fin interdiction bancaire</label>\r\n                                        </div>\r\n                                        <div class="col-md-2">\r\n                                            <strong ng-cloak>{{ctrl.personneInterrogee.personneFCC.dateFinIB | date:\'dd/MM/yyyy\'}}</strong>\r\n                                        </div>\r\n                                    </div>\r\n                                    <div class="row">\r\n                                        <div class="col-md-6">\r\n                                            <label class="control-label positive">Remarques</label>\r\n                                        </div>\r\n                                        <div class="col-md-4">\r\n                                            <label class="control-label positive">Date dernier retrait</label>\r\n                                        </div>\r\n                                        <div class="col-md-2">\r\n                                            <strong ng-cloak>{{ctrl.personneInterrogee.personneFCC.dateDernierRetrait | date:\'dd/MM/yyyy\'}}</strong>\r\n                                        </div>\r\n                                    </div>\r\n                                    <div class="row">\r\n                                        <div class="col-md-6">\r\n                                            <div class="remarques" data-ng-show="ctrl.personneInterrogee.personneFCC.remarques" ng-bind="::ctrl.personneInterrogee.personneFCC.remarques">\r\n                                            </div>\r\n                                        </div>\r\n                                    </div>\r\n\r\n                                </div>\r\n                            </div>\r\n                            <div class="row @texte-champs-non-modifiables margin-gray">\r\n                                <div class="col-md-12">\r\n                                    <strong>\r\n                                        Comptes individuels\r\n                                    </strong>\r\n                                </div>\r\n                            </div>\r\n                            <div class="row">\r\n                                <div class="col-md-3">\r\n                                    <label class="control-label positive">Nombre de comptes</label>\r\n                                </div>\r\n                                <div class="col-md-1">\r\n                                    <strong ng-bind="::ctrl.personneInterrogee.personneFCC.nombreComptesIndiv"></strong>\r\n                                </div>\r\n\r\n                                <div class="col-md-3">\r\n                                    <label class="control-label positive">Nombre de chèques</label>\r\n                                </div>\r\n                                <div class="col-md-1">\r\n                                    <strong ng-bind="::ctrl.personneInterrogee.personneFCC.nombreChequesIndiv"></strong>\r\n                                </div>\r\n\r\n                                <div class="col-md-2">\r\n                                    <label class="control-label positive">Montant</label>\r\n                                </div>\r\n                                <div class="col-md-2">\r\n                                    <strong ng-bind="::ctrl.personneInterrogee.personneFCC.montantIndiv"></strong>\r\n                                </div>\r\n                            </div>\r\n                            <div class="row @texte-champs-non-modifiables margin-gray">\r\n                                <div class="col-md-12">\r\n                                    <strong>\r\n                                        Comptes collectifs\r\n                                    </strong>\r\n                                </div>\r\n                            </div>\r\n                            <div class="row">\r\n                                <div class="col-md-3">\r\n                                    <label class="control-label positive">Nombre de comptes</label>\r\n                                </div>\r\n                                <div class="col-md-1">\r\n                                    <strong ng-bind="::ctrl.personneInterrogee.personneFCC.nombreComptesColl"></strong>\r\n                                </div>\r\n\r\n                                <div class="col-md-3">\r\n                                    <label class="control-label positive">Nombre de chèques</label>\r\n                                </div>\r\n                                <div class="col-md-1">\r\n                                    <strong ng-bind="::ctrl.personneInterrogee.personneFCC.nombreChequesColl"></strong>\r\n                                </div>\r\n\r\n                                <div class="col-md-2">\r\n                                    <label class="control-label positive">Montant</label>\r\n                                </div>\r\n                                <div class="col-md-2">\r\n                                    <strong ng-bind="::ctrl.personneInterrogee.personneFCC.montantColl"></strong>\r\n                                </div>\r\n                            </div>\r\n                        </mw-hretractable>\r\n                    </div>\r\n                    <div class="row" ng-show="!ctrl.personneInterrogee.personneFCC && ctrl.appelFCC">\r\n                        <div class="panel-heading panel non-inscrit">\r\n                            <span ng-show="!ctrl.erreurFCC">N\'est pas inscrite au fichier FCC</span>\r\n                            <span ng-show="ctrl.erreurFCC" ng-bind="::ctrl.erreurFCC"></span>\r\n                        </div>\r\n                    </div>\r\n                    <div class="row" ng-show="ctrl.personneInterrogee.motifs">\r\n                        <div class="col-md-2 align-droite"><label class="control-label positive">Motifs</label></div>\r\n                        <div class="col-md-10"><strong ng-bind-html="ctrl.personneInterrogee.motifs"></strong></div>\r\n                    </div>\r\n                </mw-panel>\r\n            </div>\r\n\r\n            <div class="modal-footer">\r\n                <div class="col-md-offset-9 col-md-3">\r\n                    <mw-button texte="Fermer" id="btn-close" modele="principale" data-ng-click="ctrl.closePopup();"></mw-button>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </data-ng-form>\r\n</div>');
}]);